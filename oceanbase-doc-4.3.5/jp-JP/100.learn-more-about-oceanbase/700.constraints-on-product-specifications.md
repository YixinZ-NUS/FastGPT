|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||

# 制限事項

## クラスタ名の最大長

| **項目** | **最大長** |
|------------|----------|
| クラスタ名 | 128バイト |

## 識別子の最大長

:::tab
tab MySQLモード

  | **項目** | **最大長**    |
  |------------|-----------------|
  | ユーザー名     | 64バイト    |
  | テナント名     | 63バイト    |
  | データベース名    | 128バイト   |
  | テーブル名      | 64文字    |
  | 列名      | 128バイト   |
  | インデックス名     | 64バイト    |
  | ビュー名     | 64バイト    |
  | エイリアス      | 255バイト   |
  | テーブルグループ名     | 127バイト   |
  | ユーザー定義変数   | 64文字     |

tab Oracleモード

  | **項目** | **最大長** |
  |--------|----------|
  | ユーザー名    | 64バイト    |
  | テーブル名     | 128バイト   |
  | 列名     | 128バイト   |
  | インデックス名    | 128バイト   |
  | ビュー名    | 128バイト   |
  | エイリアス     | 128バイト   |
  | オブジェクト名    | 128バイト   |
  | テーブルグループ名    | 127バイト   |
:::

## ODP (OceanBase Database Proxy)に関する制限

### 最大接続数

|       項目   　    |                     制限                     　   |
|-----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 単一ODPの接続数 | ODPの`client_max_connections`パラメータによって制御され、デフォルト値は8192です。 <main id="notice" type='explain'><h4>説明</h4><p>クラスタ全体の最大接続数は、ODPノードを追加するか、このパラメータの値を変更することで拡張できます。</p></main>|

## パーティションレプリカ数の制限

|         項目         |           制限            |
|--------------------|-------------------------------------------------------------------------------------|
| OBServerノードあたりのパーティションレプリカ数 | 厳密な制限なし <main id="notice" type='explain'><h4>説明</h4><p>テナントのメモリサイズから推定され、メモリ1GBあたり約２万個のtabletがサポートされます。</p></main> |

## 単一テーブルの制限

|  項目  |  最大制限    |
|-------|-------------------------------------------------------------------------------------------------------------------------------|
| 行の長さ   | 1.5MB   |
| 列数    | 4096列    |
| インデックス数  | 128個     |
| 単一インデックスの総列数 | 64列     |
| インデックスの長さ 　| 16KB    |
| 主キーの総列数 | 64列      |
| 主キーの長さ | 16KB       |
| パーティション数 | <ul><li>Oracleモード：65536個</li><li>MySQLモード：8192～65536個 <main id="notice" type='explain'><h4>説明</h4><p>MySQLモードでは、単一テーブルで許可される最大パーティション数は、テナントレベルの構成パラメータ<code>max_partition_num</code>で制御され、デフォルトは8192個です。</p></main></li></ul>    |

## 単一列の制限

|   項目   |   最大制限    |
|-----------|---------------|
| 単一列インデックスの長さ | 16KB  |

## 文字列データ型の制限

:::tab
tab MySQL モード

  |   **データ型**    | **最大長**     |
  |---------------|------------------|
  | `CHAR`        | 256文字         |
  | `VARCHAR`     | 262144文字     |
  | `BINARY`      | 256バイト        |
  | `VARBINARY`   | 1048576バイト     |
  | `TINYBLOB`    | 255バイト         |
  | `BLOB`        | 65535バイト       |
  | `MEDIUMBLOB`  | 16777215バイト    |
  | `LONGBLOB`    | 536870910バイト   |
  | `TINYTEXT`    | 255バイト         |
  | `TEXT`        | 65535バイト       |
  | `MEDIUMTEXT`  | 16777215バイト    |
  | `LONGTEXT`    | 536870910バイト   |

tab Oracle モード

  |   **データ型**  | **最大長**|
  |-------------|------------|
  | `CHAR`      | 2000バイト  |
  | `NCHAR`     | 2000バイト  |
  | `VARCHAR`   | 32767バイト |
  | `VARCHAR2`  | 32767バイト |
  | `NVARCHAR2` | 32767バイト |
  | `BLOB`      | 536870910バイト |
  | `CLOB`      | 536870910バイト |
:::

## 機能に関する制限事項

### 共有ストレージ(Shared-Storage，SS)

現在のバージョンでは、SSモードのOceanBaseクラスタには、以下の制限事項があります。

* リージョンをまたいだデプロイはサポートされていません。
* カラムナエンジン(columnar engine)はサポートされていません。
* 物理スタンバイデータベースはサポートされていません。
* テナントの`data_disk_size`の縮小はサポートされていません。
* パーティション数は最大10万個に制限されます。

### 物理スタンバイデータベース

物理スタンバイデータベースの制限事項は以下のとおりです。

| 項目                         |   説明                                                               |
|-------------------------------|--------------------------------------------------------------------------|
| プライマリテナントあたりのスタンバイテナント最大数 | 制限なし                                                                   |
| プライマリ/スタンバイのリソース構成    | 同一である必要はありませんが、同じリソース構成を推奨します。                          |
| 構成パラメータ                         | プライマリ・スタンバイ間で自動同期されません。プライマリで設定を変更した際は、必要に応じてスタンバイでも手動での変更が必要です。  |
| システム変数                       | プライマリテナントとスタンバイテナントのシステム変数は物理的に同期されます。プライマリテナントでシステム変数を変更した場合、システムはスタンバイテナントの対応するシステム変数に同期されます。             |
| ユーザーID/パスワード                 | ユーザーの作成とパスワードの変更は、プライマリテナントでのみサポートされます。更新後の情報はセカンドテナントに同期されます。                                            |
| 読み書き操作                       | スタンバイテナントは読み取り操作をサポートしますが、書き込み操作はサポートされません。                   |
| ダンプとメジャーコンパクション                     | プライマリテナントとスタンバイテナントのダンプは、互いに独立しています。</br>スタンバイテナントはプライマリテナントから情報を同期します。独立したメジャーコンパクションはサポートしていません。                             |
| スイッチオーバー制限                | スタンバイテナントのログストリームを構成する、すべてのレプリカがオンラインである必要があります。                        |
| フェイルオーバー                  | スタンバイテナントのログストリームを構成する、すべてのレプリカがオンラインである必要があります。                                   |
