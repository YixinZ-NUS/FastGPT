# OceanBaseデスクトップ版のインストール

この記事では、WindowsおよびmacOSにOceanBaseデスクトップ版のインストール方法について説明します。

<main id="notice" type='notice'>
  <h4>注意</h4>
  <p>OceanBaseデスクトップ版は学習やテスト環境での使用をおすすめです。本番環境での使用は避けてください。</p>
</main>

<!-- 本文操作录有对应视频，您也可查看视频了解如何安装OceanBase桌面版。 -->

<!-- <div role="videolist">
      <a role='video' href='https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/video-center/video/video/1750902627686ob%20%E6%A1%8C%E9%9D%A2%E7%89%88%E5%AE%89%E8%A3%85_07%20%E8%BE%93%E5%87%BA.mp4'>
          <img src='https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/ocp/422/Play%2002.png'/>
          部署OceanBase桌面版（Windows系统）
      </a>
</div> -->

## 背景情報

OceanBaseデスクトップ版は、OceanBaseデータベースを管理・操作するためのデスクトップアプリケーションです。グラフィカルなインターフェースを提供し、データベース管理、クエリ実行、データのインポート・エクスポートなどを簡単に行えるようにします。

OceanBaseデスクトップ版の特徴は以下の通りです：

* **グラフィカルインターフェース**：直感的で使いやすいグラフィカルインターフェースにより、データベース管理作業が簡素化されます。

* **データベース管理**：データベースインスタンスの作成および管理をサポートします。

* **クエリ実行**：SQLクエリのコマンドラインを提供します。

* **監視とログ**：データベースの状態をリアルタイムで監視します。

## システム要件

:::tab

tab Windows

まずは、WindowsにOceanBaseデスクトップ版をインストールするための必要条件を満たしているか確認してください：

* 使用しているオペレーティングシステムはWindows（x86-64チップ）であること。WSL 2を使用する場合、Windows 10バージョン1903以降（ビルド番号18362以上）またはWindows 11が必要です。

* 2vCPU、6GBのメモリ、10GB以上のディスク空き容量が必要です。

以下の手順で、マシンがこれらの要件を満たしているか確認できます。

* Windowsのバージョンを確認

  キーボードの「Windowsキー」+「Q」を同時に押して「設定」と入力し、表示されたアプリを開きます。「システム」をクリックし、左側のメニューから「バージョン情報」を選ぶと、Windowsのバージョン情報を確認できます。

  ![Windows version](https://obportal.s3.ap-southeast-1.amazonaws.com/doc/img/OceanBase-Database-EN/1-check-win-1-about.png)

* メモリおよびCPUを確認

  キーボードの「Windowsキー」+「Q」を同時に押して「タスクマネージャー」と入力し、表示された「タスクマネージャー」アプリを開きます。画面上部の「パフォーマンス」タブをクリックすると、「CPU」のセクションでプロセッサのコア数や使用率を確認でき、「メモリ」のセクションでは搭載メモリの容量や使用状況が確認できます。

  ![CPU and memory](https://obportal.s3.ap-southeast-1.amazonaws.com/doc/img/OceanBase-Database-EN/1-check-win-2-cpu.png)

* ディスクの確認

  キーボードの「Windowsキー」+「Q」を同時に押して、「エクスプローラー」と入力して、表示されたアプリを開きます。開いたウィンドウの左側メニューから「PC」を選択すると、「デバイスとドライブ」セクションに各ドライブの情報が表示されます。

tab macOS

まずは、macOSにOceanBaseデスクトップ版をインストールするための必要条件を満たしているか確認してください：

* 使用しているオペレーティングシステムはmacOS（Apple SiliconチップおよびIntelチップ）であること。

* 2vCPU、6GBのメモリ、10GBのディスク以上の空き容量が必要です。

以下の手順で、マシンがこれらの要件を満たしているか確認できます。

* CPUおよびメモリの確認

  Finderを開き、「アプリケーション」フォルダを選択し、その中の「ユーティリティ」フォルダから「アクティビティモニタ」をダブルクリックして開きます。「CPU」タブではCPUの使用状況を、「メモリ」タブではメモリの使用状況を確認できます。

  ![Activity Monitor](https://obportal.s3.ap-southeast-1.amazonaws.com/doc/img/OceanBase-Database-EN/2-check-mac-1-cpu.jpg)

* ディスクの確認

  画面の左上にあるAppleメニューから「このMacについて」を選択します。表示されたウィンドウで「システムレポート」をクリックし、「ストレージ」の項目でディスクの情報を確認できます。

  ![Disk Information](https://obportal.s3.ap-southeast-1.amazonaws.com/doc/img/OceanBase-Database-EN/2-check-mac-2-storage.jpg)

:::

## 操作手順

:::tab

tab Windows

### ステップ1：依存関係のインストール

OceanBaseデスクトップ版をWindows環境にインストールするには、WSL（Windows Subsystem for Linux、Linux用Windowsサブシステム）に依存します。WSLはMicrosoftが2016年にWindows10向けにリリースした機能で、ELF形式のLinux実行ファイルをWindows上で直接実行できるようにします。

WSLには現在、WSL1とWSL2の2つのバージョンがあります。WSL1はLinuxのシステムコールをWindows NTのシステムコールに変換する互換レイヤー方式。WSL2はHyper-Vを活用し、仮想マシンでLinuxを実行するため、よりネイティブに近い動作が可能です。

<main id="notice" type='notice'>
  <h4>注意</h4>
  <p>OceanBaseデスクトップ版はWSL2のみ対応しています。WSL2はWSL1のアップグレード版ではありません。WSL1をインストールしていなくても、WSL2を直接使用できます。</p>
</main>

1. 仮想化が有効になっているか確認する

   「Windowsキー」+「Q」キーを同時に押して「タスクマネージャー」を検索・起動し、「パフォーマンス」タブ > 「CPU」を選択します。下図のように、**仮想化**の項目が**有効**と表示されていれば、仮想化は有効です。**無効**の場合は、次の手順でBIOSから仮想化を有効にしてください。

   ![仮想化](https://obportal.s3.ap-southeast-1.amazonaws.com/doc/img/OceanBase-Database-EN/3-install-win-1-virtualization.png)

2. BIOSで仮想化を有効にする

   ここではLenovo（ThinkPad）を例に操作手順を説明します。ブランドによってBIOS画面やキー操作が異なるため、該当する公式マニュアルを参照してください。例えば、[Dell](https://www.dell.com/support/kbdoc/en-sg/000195978/how-to-enable-or-disable-hardware-virtualization-on-dell-systems?lwp=rt), [Lenovo](https://support.lenovo.com/us/en/solutions/ht500006-how-to-enable-virtualization-technology-on-lenovo-computers), [ThinkPad](https://support.lenovo.com/us/en/solutions/ht500006-how-to-enable-virtualization-technology-on-lenovo-computers), [HP](https://support.hp.com/us-en/document/ish_5637142-5637191-16), and [Huawei](https://consumer.huawei.com/en/support/content/en-us15777885/).

   1. **スタート**メニューを開き、**電源**ボタンをクリックして、**再起動**をクリックします。

   2. コンピューターの再起動後、すぐにキーボードの**F1**キーを押してBIOS設定画面にアクセスします。

   3. BIOS画面で**Security**タブを選択し、**Security**ページで**Security Virtualization**をクリックします。

   4. 設定ページが表示されたら、**Virtualization Technology**の項目を**「no」**に設定します。

   5. 設定後、**Save and Exit**をクリックして変更を保存し、BIOS設定を終了します。その後、システムが再起動するのを待ちます。

   <main id="notice" type='explain'>
     <h4>説明</h4>
     <p>前の手順に従ってもう一度仮想化の状態を確認できます。</p>
   </main>

3. WSLと仮想マシンプラットフォーム機能の有効化

   次のいずれかの方法で、WSLおよび仮想マシンプラットフォームを有効にします。

   * 方法①：コマンドラインから有効化

     「[Win] + [Q] で**powershell**または**Windows Powershell**を検索し、**管理者として実行**または**Run As Administrator**を選択します。以下のコマンドを順に実行し、完了後にPCを再起動してください。

     ```shell
     #WSL機能の有効化
     dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart

     #仮想マシンプラットフォームの有効化
     dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
     ```

   * 方法②：GUIで有効化

     キーボードで [Win] + [R] キーを同時に押し、`optionalfeatures`と入力して**OK**をクリックするか、または [Win] + [Q] キーを同時に押して**Windowsの機能の有効化または無効化**を検索し、クリックして**Windowsの機能**ウィンドウを開きます。表示された一覧を下にスクロールし、**Linux用Windowsサブシステム**と**仮想マシンプラットフォーム**にチェックを入れます。最後に**OK**をクリックし、コンピューターを再起動すれば完了です。

     ![設定](https://obportal.s3.ap-southeast-1.amazonaws.com/doc/img/OceanBase-Database-EN/3-install-win-2-config.png)

4. WSL2カーネルのインストール

   こちらの[ダウンロード](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/download-center/opensource/obdesktop/4.3.5.0/wsl.2.5.7.0.x64.msi)をクリックして`wsl.2.5.7.0.x64.msi`ファイルをダウンロードするか、WSLの[GitHubリポジトリ](https://github.com/microsoft/WSL)にアクセスして必要なWSLインストールパッケージをダウンロードしてください。ダウンロード完了後、ダウンロードしたファイルをダブルクリックしてインストーラーを実行し、手順に沿って**Next**をクリックしながらインストールを進めます。

5. WSL2をデフォルトバージョンに設定

   以下のコマンドをcmdまたはPowerShellで実行してください：

   ```shell
   wsl --set-default-version 2
   ```

6. インストールの検証

   以下のコマンドをcmdまたはPowerShellで実行し、WSLのバージョンを確認します：

   ```shell
   wsl --version
   ```

   出力例（WSLバージョンが`2.xxx`であればインストール成功です）：

   ```shell
   WSLバージョン: 2.5.7.0
   カーネル バージョン: 6.6.87.1-1
   WSLgバージョン: 1.0.66
   MSRDCバージョン: 1.2.6074
   Direct3Dバージョン: 1.611.1-81528511
   DXCoreバージョン: 10.0.26100.1-240331-1435.ge-release
   Windowsバージョン: 10.0.19045.5854
   ```

### ステップ2：OceanBaseデスクトップ版のインストール

1. インストーラーのダウンロード

   [OceanBaseソフトウェアダウンロードセンター](https://en.oceanbase.com/softwarecenter)にアクセスし、「OceanBaseデスクトップ版」を検索して、「Windows版」のインストーラーをダウンロードします。

2. アプリケーションのインストール

   1. ダウンロードした`OceanBase-Desktop-Setup-x.x.x.exe`ファイルをダブルクリックします。

   2. ポップアップウィンドウの「ユーザーアカウント制御」で「はい」をクリックして、アプリケーションがデバイスに変更を加えることを許可します。

   3. アプリケーションのインストール先を選択します。デフォルトではCドライブにインストールされますが、「参照」をクリックして別のフォルダを選択することもできます。確認後、「インストール」をクリックします。

      <!-- ![Installation Directory](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.3.5/400.deploy/800.oceanbase-desktop/800.deploy-oceanbase-desktop-12.png) -->

   4. インストールが完了したら、「完了」をクリックして、OceanBaseデスクトップ版が自動的に起動します。

      <!-- ![Complete Installation](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.3.5/400.deploy/800.oceanbase-desktop/800.deploy-oceanbase-desktop-13.png) -->

3. OceanBaseデスクトップ版の起動

   インストールが完了すると、`停止中`の状態でOceanBaseデータベースが自動的にデプロイされます。画面内の「起動」ボタンをクリックすることで、OceanBaseデータベースを起動できます。

   ![Launch](https://obportal.s3.ap-southeast-1.amazonaws.com/doc/img/OceanBase-Database-EN/3-install-win-3-oceanbase-desktop.png)

### ステップ3：OceanBaseデスクトップ版への接続

OceanBaseデータベースが正常に起動した後、OceanBaseデスクトップ版内の「接続」をクリックして、表示された接続文字列をコピーします。その後、キーボードで「Windowsキー」+「R」を押し、`cmd` と入力して「OK」をクリックしてコマンドプロンプト（cmd）を開きます。または、「Windowsキー」+「Q」を押して、「PowerShell」または「Windows Powershell」を検索して開きます。コマンドラインにコピーした接続文字列を実行することで、起動したOceanBaseデスクトップ版に接続できます。接続文字列の例は以下の通りです：

```shell
wsl.exe -d oceanbase-desktop --exec bash -c "obclient -h127.1 -P2881 -uroot@test -Doceanbase -A"
```

tab macOS

macOSには2通りのインストール方法があります。Homebrewを使う方法と、dmgインストールパッケージを使う方法です。本セクションでは、それぞれについてご紹介します。

  :::tab

  tab Homebrewを利用したインストール

  1. Homebrewのインストール

     もしお使いの環境にHomebrewがインストールされていない場合は、以下のコマンドを実行してインストールしてください。

     ```shell
     /bin/bash -c "$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)"
     ```

  2. OceanBaseデスクトップ版のTapを追加

     OceanBaseデスクトップ版のTapをHomebrewに追加すると、`brew install`コマンドでOceanBaseが提供する公式パッケージをインストールできるようになります。

     ```shell
     brew tap oceanbase/homebrew-oceanbase-desktop https://gitee.com/oceanbase/homebrew-oceanbase-desktop.git
     ```

  3. OceanBaseデスクトップ版のインストール

     ```shell
     brew install --cask oceanbase-desktop
     ```

     コマンドを実行すると、最新バージョンのOceanBaseデスクトップ版が自動的にダウンロードされます。(もし環境内にOrbStackがインストールされていない場合は)依存関係としてインストールされます。インストールが成功すると、アプリケーションは「アプリケーション」フォルダに格納されます。

  4. アプリケーションの起動

     アプリケーションフォルダ内で`OceanBase Desktop`を見つけるか、Spotlight検索で`OceanBase Desktop`を検索し、ダブルクリックして起動します。初回起動時は、プログラムがバックグラウンドで初期化を行うため、しばらくお待ちください。アプリケーションに入ったら、ページ内の**起動**ボタンをクリックするとOceanBaseデータベースを起動できます。

  <main id="notice" type='explain'>
    <h4>説明</h4>
    <p>OceanBaseデスクトップ版をアンインストールする必要がある場合は、<code>brew uninstall --cask oceanbase-desktop</code>コマンドを実行してください。このコマンドは、アプリケーションファイル、アプリケーションサポートデータ、保存されたアプリケーションの状態、およびアプリケーションの仮想マシンを同時にクリーンアップします。</p>
  </main>

  tab dmgインストールパッケージからのインストール

  ### ステップ1：依存関係のインストール

  macOSでOceanBaseデスクトップ版をインストールするには、**OrbStack**というツールが必要です。OrbStackは、macOSユーザー向けに設計されたコンテナおよび仮想マシンの管理ツールで、Dockerコンテナのような高効率なコンテナの実行と、軽量な仮想マシンの利用をサポートします。OrbStackは、Docker Desktopやその他の複雑な仮想化ツールの代替として設計されており、パフォーマンスの向上、システムリソースの節約、そして開発者にとって使いやすい操作環境の提供を目的としています。

  <main id="notice" type='explain'>
    <h4>説明</h4>
    <p>OrbStackの公式チュートリアルでは、インストール方法としてインストーラーとbrewコマンドの2通りが紹介されています。ここでは、インストーラーを使ってインストールする方法を紹介します。その他の方法については、<a href="https://docs.orbstack.dev/quick-start">公式チュートリアル</a>をご参照ください。</p>
  </main>

  1. インストーラーのダウンロード

     [公式ダウンロードリンク](https://orbstack.dev/download)にアクセスして、インストーラーをダウンロードします。ダウンロードページには、Apple Siliconチップ用とIntelチップ用の2種類のインストーラーが用意されています。お使いのMacのチップの種類を確認するには、画面左上のAppleアイコンをクリックし、**このMacについて**を選択してください。

     ![プロセッサ](https://obportal.s3.ap-southeast-1.amazonaws.com/doc/img/OceanBase-Database-EN/4.mac.jpg)

  2. インストール

     ダウンロードしたdmgインストーラーをダブルクリックし、アプリケーションのアイコンを「アプリケーション」フォルダにドラッグしてインストールします。

     <main id="notice" type='notice'>
       <h4>注意</h4>
       <p>初めてOrbStackをインストールする場合は、必ず初回のセットアップガイドを最後まで完了してください。これを行わないと、イメージの正常なインポートができません。</p>
     </main>

     ![インストール](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.3.5/400.deploy/800.deploy-oceanbase-desktop/800.deploy-oceanbase-desktop-06.png)

  3. インストールの検証

     OrbStackの「Machines（仮想マシン）」セクションで、最新のUbuntuイメージをインストールします。この処理にはやや時間がかかるため、しばらくお待ちください。

     ![ubuntu](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.3.5/400.deploy/800.deploy-oceanbase-desktop/800.deploy-oceanbase-desktop-07.png)

     インストールが完了したら、該当する仮想マシンをダブルクリックします。コマンドライン接続の画面に入ることができれば、OrbStackは正常にインストールされています。

     ![Verification](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.3.5/400.deploy/800.deploy-oceanbase-desktop/800.deploy-oceanbase-desktop-08.png)

  ### ステップ2：OceanBaseデスクトップ版のインストール

  1. インストーラーのダウンロード

     [OceanBaseソフトウェアダウンロードセンター](https://en.oceanbase.com/softwarecenter)にアクセスし、「OceanBaseデスクトップ版」を検索して、「Mac版」をクリックして必要なインストーラーをダウンロードします。

  2. アプリケーションのインストール

     ダウンロードしたインストーラーをダブルクリックし、アプリケーションのアイコンを「アプリケーション」フォルダにドラッグしてインストールします。

  3. OceanBaseデスクトップ版の起動

     インストールが完了すると、`停止中`の状態でOceanBaseデータベースが自動的にデプロイされます。画面内の「起動」ボタンをクリックすると、OceanBaseデータベースを起動できます。

  :::

### OceanBaseデスクトップ版への接続

OceanBaseデータベースが正常に起動した後、OceanBaseデスクトップ版内の**接続**をクリックすると、自動的にOceanBaseデータベースへ接続されます。また、手動で接続することも可能で、以下のような接続コマンドを実行してください：

```shell
mysql -h127.0.0.1 -P2881 -uroot@test -Doceanbase -A
```

OceanBaseデータベースへの接続については、[接続方法の概要](../../300.develop/100.application-development-of-mysql-mode/100.connect-to-oceanbase-database-of-mysql-mode/100.connection-methods-overview-of-mysql-mode.md)をご参照ください。

:::

<!-- ## 関連ドキュメント -->

<!-- 管理ページの操作については、[obshell Dashboard](../../700.reference/1500.Components-and-Tools/100.manage/100.obshell/350.ob-dashboard/100.ob-dashboard-overview.md)をご参照ください。 -->
