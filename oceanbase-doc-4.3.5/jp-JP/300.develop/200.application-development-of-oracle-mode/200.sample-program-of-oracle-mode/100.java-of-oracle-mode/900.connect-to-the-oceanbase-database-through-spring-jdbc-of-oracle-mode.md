|description||
|---|---|
|keywords||
|dir-name|Spring JDBC|
|dir-name-en||
|tenant-type|Oracle Mode|

# Spring JDBC

本記事では、Spring JDBCフレームワーク、OceanBase Connector/J、およびOceanBaseデータベースを使用してアプリケーションを構築し、テーブルの作成、データの挿入、更新、削除、クエリ、およびテーブルの削除など、基本的なデータベース操作を実現する方法について説明します。

<div role="videolist">
      <a role='link' href='https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.2.0/3.develop/demo/java/spring-jdbc-oceanbase-client/spring-jdbc-oceanbase-client.zip'>
          <img src='https://file.oceanbase.com/doc/img/lQLPJyFovGIOcJQWFrAqhLlgRRsPvwU-H7hJ_i0A_22_22.png'/>
          クリックしてspring-jdbc-oceanbase-clientサンプルプロジェクトをダウンロード
      </a>
      <!-- <a role='video' href='https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/video-center/video/video/05%20spring-jdbc-oceanbase-client.mp4'>
          <img src='https://mdn.alipayobjects.com/huamei_22khvb/afts/img/A*DFPmToHK6hgAAAAAAAAAAAAADiGDAQ/original'/>
          Spring JDBC 连接 OceanBase 数据库示例程序（Oracle 模式）
      </a> -->
</div>

## 前提条件

* OceanBaseデータベースをインストール済みで、Oracleモードのテナントが作成されていること。
* JDK 1.8とMavenをインストール済みであること。
* Eclipseがインストール済みであること。

    <main id="notice" type='explain'>
    <h4>説明</h4>
    <p>この記事はEclipse IDE for Java Developers 2022-03バージョンを使用してコードを実行していますが、お好みのツールを選んでサンプルコードを実行することもできます。</p>
    </main>

## 操作手順

<main id="notice" type='explain'>
  <h4>説明</h4>
  <p>本記事の操作手順はWindows環境に基づいています。他のOS環境やコンパイラを使用する場合は、操作手順が若干異なる場合があります。</p>
</main>

1. `spring-jdbc-oceanbase-client` プロジェクトをEclipseにインポートします。
2. OceanBaseデータベースのURLを取得します。
3. `spring-jdbc-oceanbase-client` プロジェクトのデータベース接続情報を修正します。
4. `spring-jdbc-oceanbase-client` プロジェクトを実行します。

### ステップ１：`spring-jdbc-oceanbase-client` プロジェクトをEclipseにインポートする

1. Eclipseを開き、メニューバーから**File** -> **Open Projects from File System**を選択します。

2. ポップアップダイアログで、**Directory**ボタンをクリックしてプロジェクトのディレクトリを選択し、**Finish**をクリックしてインポートを完了します。

    <main id="notice" type='explain'>
      <h4>説明</h4>
      <p>Eclipseを使用してMavenプロジェクトをインポートすると、プロジェクト内の<code>pom.xml</code>ファイルを自動的に検出し、その記述に基づいて必要な依存ライブラリをダウンロードしてプロジェクトに追加します。</p>
    </main>

    ![Import](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.2.0/3.develop/demo/java/spring-jdbc-oceanbase-client/1Import.png)

3. プロジェクトの状況を確認します。

    ![p1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.2.0/3.develop/demo/java/spring-jdbc-oceanbase-client/2p1.png)

### ステップ2：OceanBaseデータベースのURLを取得する

1. OceanBaseデータベースのデプロイ担当者または管理者から、該当するデータベース接続文字列を取得します。

    **例：**

    ```shell
    obclient -hxxx.xxx.xxx.xxx -P2881 -utest_user001@oracel001 -p******
    ```

    その他の接続文字列の情報については、[OBClientを使用したOceanBaseテナントへの接続](../../100.connect-to-oceanbase-database-of-oracle-mode/200.connect-to-an-oceanbase-tenant-by-using-obclient-of-oracle-mode.md)を参照してください。

2. OceanBaseデータベース接続文字列の情報に基づいて、以下のURLの対応する情報を入力します。

    ```shell
    jdbc:oceanbase://$host:$port/$schema_name?user=$user_name&password=$password
    ```

    **パラメータの説明：**

    * `$host`：OceanBaseデータベースへの接続IPアドレス。OceanBaseデータベースプロキシ(OceanBase Database Proxy、ODP)接続方式ではODPアドレスを使用し、直接接続方式ではOBServerノードのIPアドレスを使用します。
    * `$port`：OceanBaseデータベースへの接続ポートを提供します。ODP接続方式のデフォルトポートは `2883` で、ODPデプロイ時にカスタマイズ可能です。直接接続方式のデフォルトポートは `2881` で、OceanBaseデータベースのデプロイ時にカスタマイズ可能です。
    * `$schema_name`：アクセスするスキーマ名です。

        <main id="notice" type='notice'>
          <h4>注意</h4>
          <p>テナントに接続するユーザーは <code>CREATE SESSION</code> 権限と、該当Schemaの <code>CREATE TABLE</code>、<code>DROP TABLE</code>、<code>INSERT</code>、<code>DELETE</code>、<code>UPDATE</code>、<code>SELECT</code> 権限が付与されていなければなりません。その他のユーザー権限の情報については、<a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001974760">Oracleモードの権限分類</a>を参照してください。 </p>
        </main>

    * `$user_name`：テナントの接続アカウント。ODP接続の一般的な形式：`ユーザー名@テナント名#クラスタ名`または`クラスタ名:テナント名:ユーザー名`。直接接続方式の形式：`ユーザー名@テナント名`。
    * `$password`：アカウントのパスワード。

    その他のOceanBase Connector/J URLパラメータの説明情報については、[データベースURL](https://en.oceanbase.com/docs/common-oceanbase-connector-j-en-10000000002244946)を参照してください。

    **例：**

    ```shell
    jdbc:oceanbase://xxx.xxx.xxx.xxx:2881/test_schema001?user=test_user001@oracel001&password=******
    ```

### ステップ3：spring-jdbc-oceanbase-clientプロジェクトのデータベース接続情報を修正する

**ステップ2：OceanBaseデータベース のURLを取得する** で取得した情報に基づいて、ファイル `spring-jdbc-oceanbase-client/src/main/java/com/example/Main.java` のデータベース接続情報を修正します。

![3](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.2.0/3.develop/demo/java/spring-jdbc-oceanbase-client/3.png)

**例：**

* OBServerノードのIPアドレスは `xxx.xxx.xxx.xxx` です。
* アクセスポートは2881を使用します。
* アクセスするスキーマ名は `test_schema001` です。
* テナントの接続アカウントは `test_user001@oracle001` です。`oracle001` はOceanBaseデータベースで作成されたOracleモードのユーザーテナントで、`test_user001` はテナント `oracle001` のユーザー名です。
* パスワードは `******` です。

**コード：**

```java
...
        String url = "jdbc:oceanbase://xxx.xxx.xxx.xxx:2881/test_schema001";
        String username = "test_user001@oracle001";
        String password = "******";
...
```

### ステップ4：spring-jdbc-oceanbase-clientプロジェクトを実行する

1. プロジェクトナビゲータービューで、**src/main/java** ディレクトリを見つけて展開します。

2. **Main.java** ファイルを右クリックし、**Run As** -> **Java Application** を選択します。

    ![run](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.2.0/3.develop/demo/java/spring-jdbc-oceanbase-client/4run.png)

3. Eclipseのコンソールウィンドウで出力結果を確認します。

    ![5](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.2.0/3.develop/demo/java/spring-jdbc-oceanbase-client/5.png)

## プロジェクトコードについて

[spring-jdbc-oceanbase-client](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.2.0/3.develop/demo/java/spring-jdbc-oceanbase-client/spring-jdbc-oceanbase-client.zip) をクリックして、プロジェクトコードをダウンロードします。これは、`spring-jdbc-oceanbase-client.zip` という名前の圧縮パッケージです。

解凍すると、`spring-jdbc-oceanbase-client` という名前のフォルダを取得します。ディレクトリ構造は以下のとおりです：

```shell
spring-jdbc-oceanbase-client
├── src
│   └── main
│       └── java
│           └── com
│                └── example
│                   └── Main.java
└── pom.xml
```

**ファイルの説明：**

* `src`：ソースコードのルートディレクトリです。
* `main`：アプリケーションの主要なロジックを含むメインコードディレクトリです。
* `java`：Javaソースコードディレクトリです。
* `com`：Javaパッケージディレクトリです。
* `example`：サンプルプロジェクトのパッケージディレクトリです。
* `Main.java`：メインクラスで、テーブルの作成やデータの挿入などのロジックが含まれます。
* `pom.xml`：Mavenプロジェクトの設定ファイルで、プロジェクトの依存関係とビルド設定を管理するために使用されます。

### pom.xmlコードの紹介

`pom.xml` ファイルはMavenプロジェクトの設定ファイルで、プロジェクトの依存関係、プラグイン、ビルドルールなどの情報を定義しています。MavenはJavaプロジェクト管理ツールで、依存関係のダウンロード、プロジェクトのコンパイル、パッケージングなどの操作を自動化できます。

本記事の `pom.xml` ファイルのコードは、主に以下のいくつかの部分が含まれます：

1. ファイル宣言ステートメントです。

    このファイルがXMLファイルであり、使用しているXMLのバージョンが `1.0` で、文字エンコーディング方式が `UTF-8` であることを宣言しています。

    **コード：**

    ```java
    <?xml version="1.0" encoding="UTF-8"?>
    ```

2. POMのネームスペースとPOMモデルのバージョンを設定します。

    1. `xmlns` を使用して、POMのネームスペースを `http://maven.apache.org/POM/4.0.0` と指定します。
    2. `xmlns:xsi` を使用して、XMLネームスペースを `http://www.w3.org/2001/XMLSchema-instance` と指定します。
    3. `xsi:schemaLocation` を使用して、POMのネームスペースを `http://maven.apache.org/POM/4.0.0`、POMのXSDファイルの場所を `http://maven.apache.org/xsd/maven-4.0.0.xsd` と指定します。
    4. `<modelVersion>` 要素を使用して、このPOMファイルで使用されるPOMモデルバージョンを `4.0.0` と指定します。

    **コード：**

    ```java
    <project xmlns="http://maven.apache.org/POM/4.0.0"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
      <modelVersion>4.0.0</modelVersion>

     <!-- その他の設定 -->

    </project>
    ```

3. 基本情報を設定します。

    1. `<groupId>` を使用して、プロジェクトが属する組織を `com.example` と指定します。
    2. `<artifactId>` を使用して、プロジェクトの名前を `spring-jdbc-oceanbase-client` と指定します。
    3. `<version>` を使用して、プロジェクトのバージョン番号を `1.0-SNAPSHOT` と指定します。

    **コード：**

    ```java
        <groupId>com.example</groupId>
        <artifactId>spring-jdbc-oceanbase-client</artifactId>
        <version>1.0-SNAPSHOT</version>
    ```

4. プロジェクトソースファイルのプロパティを設定します。

    Mavenのコンパイラプラグインを `maven-compiler-plugin` と指定し、ソースコードとターゲットJavaバージョンをどちらも8に設定しています。これは、プロジェクトのソースコードがJava 8の機能を使用して記述されており、コンパイルされたバイトコードもJava 8ランタイム環境と互換性があることを意味します。この設定により、プロジェクトはコンパイル時および実行時にJava 8の構文と機能を正しく処理できるように確保することができます。

    <main id="notice" type='explain'>
      <h4>説明</h4>
      <p>Java 1.8とJava 8は、同じバージョンの異なる命名ルールです。</p>
    </main>

    **コード：**

    ```java
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <configuration>
                        <source>8</source>
                        <target>8</target>
                    </configuration>
                </plugin>
            </plugins>
        </build>
    ```

5. プロジェクトが依存するコンポーネントを設定します。

    1. `oceanbase-client` 依存ライブラリを追加し、データベースとのインタラクションを行います：

       1. `<groupId>` を使用して、依存関係が属する組織を `com.oceanbase` と指定します。
       2. `<artifactId>` を使用して、依存関係の名前を `oceanbase-client` と指定します。
       3. `<version>` を使用して、依存関係のバージョン番号を `2.4.2` と指定します。

        <main id="notice" type='explain'>
          <h4>説明</h4>
          <p>この部分のコードでは、プロジェクトが依存するコンポーネントとしてOceanBase Connector/JのバージョンV2.4.2を定義しています。他のバージョンの情報については、<a href="https://en.oceanbase.com/docs/oceanbase-connector-j-en">OceanBase JDBCドライバー</a>を参照してください。</p>
        </main>

        **コード：**

        ```java
                <dependency>
                    <groupId>com.oceanbase</groupId>
                    <artifactId>oceanbase-client</artifactId>
                    <version>2.4.2</version>
                </dependency>
        ```

    2. `spring-jdbc` 依存関係ライブラリを追加します：

       1. `<groupId>` を使用して、依存関係が所属する組織を `org.springframework` と指定します。
       2. `<artifactId>` を使用して、依存関係の名前を `spring-jdbc` と指定します。
       3. `<version>` を使用して、依存関係のバージョン番号を `5.2.0.RELEASE` と指定します。

        **コード：**

        ```java
                <dependency>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-jdbc</artifactId>
                    <version>5.2.0.RELEASE</version>
                </dependency>
        ```

### Main.javaコードの紹介

`Main.java` ファイルはサンプルプログラムの一部であり、コードはSpring JDBCフレームワークを使用してデータベース操作を実行する方法を示しています。まず、データベース接続情報を設定します。次に、`JdbcTemplate` オブジェクトを作成してデータベース操作を実行します。コードには、テーブルの作成、データの挿入、データのクエリを実行するサンプルも含まれます。

本記事の `Main.java` ファイルのコードには、主に以下の部分が含まれます：

1. パッケージを定義し、必要なクラスをインポートします。

    1. 現在のコードが属するパッケージ名を `com.example` と宣言します。
    2. `JdbcTemplate` クラスをインポートします。Spring JDBCフレームワークのコアクラスで、データベース操作の実行に使用されます。
    3. `DriverManagerDataSource` クラスをインポートします。Springが提供する `DataSource` インターフェースを実装したデータソースクラスで、データベース接続情報の設定に使用されます。

    **コード：**

    ```java
    package com.example;

    import org.springframework.jdbc.core.JdbcTemplate;
    import org.springframework.jdbc.datasource.DriverManagerDataSource;
    ```

2. `Main` クラスを作成し、`main` メソッドを定義します。

    1. プログラムのエントリポイントとして、`Main` という名前のpublicクラスを定義します。クラス名はファイル名と一致させる必要があります。
    2. プログラムの実行開始点として、public staticメソッド `main` を定義します。
    3. その他のデータベース操作です。

    **コード：**

    ```java
    public class Main {
        public static void main(String[] args) {
            // データベース接続の情報
            // データソースの作成
            // JdbcTemplateオブジェクトの作成
            // テーブルの作成
            // データの挿入
            // データの更新
            // データの削除
            // データのクエリ
            // テーブルの削除
        }
    }
    ```

3. データベース接続の情報を定義します。

    データベースに接続するためのURL、ユーザー名、パスワードを定義します。`$host`、`$port`、`$schema_name`、`$user_name`、`$password` を実際のデータベース接続情報に置き換える必要があります。

    **コード：**

    ```java
            String url = "jdbc:oceanbase://$host:$port/$schema_name";
            String username = "$user_name";
            String password = "$password";
    ```

    **パラメータの説明：**

    * `$host`：OceanBaseデータベースへの接続IPアドレス。ODP接続方式ではODPアドレスを使用し、直接接続方式ではOBServerノードのIPアドレスを使用します。
    * `$port`：OceanBaseデータベースへの接続ポートを提供します。ODP接続方式のデフォルトポートは `2883` で、ODPデプロイ時にカスタマイズ可能です。直接接続方式のデフォルトポートは `2881` で、OceanBaseデータベースのデプロイ時にカスタマイズ可能です。
    * `$schema_name`：アクセスするスキーマ名です。

        その他のURLパラメータの説明情報については、[データベースURL](https://en.oceanbase.com/docs/common-oceanbase-connector-j-en-10000000002244946)を参照してください。

    * `$user_name`：テナントの接続アカウント。ODP接続の一般的な形式：`ユーザー名@テナント名#クラスタ名`または`クラスタ名:テナント名:ユーザー名`。直接接続方式の形式：`ユーザー名@テナント名`。
    * `$password`：アカウントのパスワード。

4. データソースを作成します。

    `DriverManagerDataSource` オブジェクトを作成し、ドライバークラス名、データベースURL、ユーザー名、パスワードを含むデータベース接続の関連情報を設定します。具体的な手順は以下のとおりです：

    1. `DriverManagerDataSource` オブジェクトを作成し、データベース接続情報を設定するために使用されます。
    2. ドライバークラス名の設定：`setDriverClassName` メソッドを呼び出すことで、データベースドライバークラス名を `com.oceanbase.jdbc.Driver` に設定します。これはOceanBaseデータベースに接続するためのドライバークラスです。
    3. データベースURLの設定：`setUrl` メソッドを呼び出すことで、データベースのURLを設定します。
    4. ユーザー名の設定：`setUsername` メソッドを呼び出すことで、データベースのユーザー名を設定します。
    5. パスワードの設定：`setPassword` メソッドを呼び出すことで、データベースのパスワードを設定します。

    **コード：**

    ```java
            DriverManagerDataSource dataSource = new DriverManagerDataSource();
            dataSource.setDriverClassName("com.oceanbase.jdbc.Driver");
            dataSource.setUrl(url);
            dataSource.setUsername(username);
            dataSource.setPassword(password);
    ```

5. `JdbcTemplate` オブジェクトを作成します。

    `JdbcTemplate` オブジェクトを作成します。これはSpring JDBCフレームワークのコアクラスの1つです。`JdbcTemplate` は、SQLステートメントの実行、データの更新、データのクエリなど、データベース操作を実行するメソッドを提供します。

    **コード：**

    ```java
            JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);
    ```

6. テーブルを作成します。

    1. テーブルを作成するSQLステートメントを定義します。SQLステートメントでテーブル名を `test_springjdbc` と指定し、`id` という名前の `NUMBER` タイプの列と `name` という名前の `VARCHAR2(20)` タイプの列の2つの列を定義しました。
    2. テーブルを作成するSQLステートメントを実行します。`jdbcTemplate` オブジェクトは `execute` メソッドを呼び出すことで、上記で定義したテーブルを作成するSQLステートメントを実行しました。
    3. コンソールにテーブル作成が成功したことを示すメッセージを出力します。

    **コード：**

    ```java
            String createTableSql = "CREATE TABLE test_springjdbc (id NUMBER, name VARCHAR2(20))";
            jdbcTemplate.execute(createTableSql);
            System.out.println("Create table successfully.");
    ```

7. データを挿入します。

    1. データを挿入するSQLステートメントを定義します。SQLステートメントで挿入するテーブルを `test_springjdbc`、列を `id` と `name` と指定し、`(1,'A1')`、`(2,'A2')`、`(1,'A3')` の2行のデータを挿入します。
    2. データを挿入するSQLステートメントを実行します。`jdbcTemplate` オブジェクトは `update` メソッドを呼び出すことで、上記で定義したデータを挿入するSQLステートメントを実行しました。
    3. コンソールにデータ挿入が成功したことを示すメッセージを出力します。

    **コード：**

    ```java
            String insertDataSql = "INSERT INTO test_springjdbc (id,name) VALUES (1,'A1'), (2,'A2'), (1,'A3')";
            jdbcTemplate.update(insertDataSql);
            System.out.println("Insert data successfully.");
    ```

8. データを更新します。

    1. データベースのテーブル `test_springjdbc` 内で `id` が `1` のレコードの `name` フィールドの値を `A11` に更新するSQLステートメントを定義します。
    2. `jdbcTemplate` オブジェクトを使用して、SQLステートメントを実行し、データベースに更新操作を適用します。
    3. コンソールにデータ更新が成功したことを示すメッセージを出力します。

    **コード：**

    ```java
            String updateDataSql = "UPDATE test_springjdbc SET name = 'A11' WHERE id = 1";
            jdbcTemplate.update(updateDataSql);
            System.out.println("Update data successfully.");
    ```

9. データを削除します。

    1. SQLステートメントを定義し、データベースのテーブル `test_springjdbc` から `id` が `2` のレコードを削除するために使用されます。
    2. `jdbcTemplate` オブジェクトを使用して、SQLステートメントを実行し、データベースに削除操作を適用します。
    3. コンソールにデータ削除が成功したことを示すメッセージを出力します。

    **コード：**

    ```java
            String deleteDataSql = "DELETE FROM test_springjdbc WHERE id = 2";
            jdbcTemplate.update(deleteDataSql);
            System.out.println("Delete data successfully.");
    ```

10. データをクエリします。

    1. データのクエリを実行するSQLステートメントを定義します。SQLステートメントで `SELECT *` を使用してすべての列を選択し、`test_springjdbc` テーブルからのデータのクエリを実行します。
    2. データのクエリを実行するSQLステートメントを実行します。`jdbcTemplate` オブジェクトは `query` メソッドを呼び出すことで、上記で定義したデータのクエリを実行するSQLステートメントを実行し、パラメータとしてコールバック関数を渡します。
    3. コールバック関数内のコードは、`ResultSet` オブジェクト（`rs`）を使用してクエリ結果の各行データを取得し、処理を行います。コールバック関数は、`getInt` と `getString` メソッドを使用して `ResultSet` オブジェクトから `id` と `name` 列の値を取得し、コンソールに出力します。最後に、コールバック関数は `null` を返します。
    4. コンソールにデータクエリが成功したことを示すのメッセージを出力します。

    **コード：**

    ```java
            String selectDataSql = "SELECT * FROM test_springjdbc";
            jdbcTemplate.query(selectDataSql, (rs, rowNum) -> {
                int id = rs.getInt("id");
                String name = rs.getString("name");
                System.out.println("id: " + id + ", name: " + name);
                return null;
            });
            System.out.println("Query data successfully.");
    ```

11. テーブルを削除します。

    1. SQLステートメントを定義し、データベース内の `test_springjdbc` テーブルを削除するために使用されます。
    2. `jdbcTemplate` オブジェクトを使用してSQLステートメントを実行し、データベースにテーブルの削除操作を適用します。
    3. テーブル削除が成功したことを示すメッセージを出力します。

    **コード：**

    ```java
            String deleteTableSql = "DROP TABLE test_springjdbc";
            jdbcTemplate.execute(deleteTableSql);
            System.out.println("Table drop successfully.");
    ```

### 全コード表示

:::tab
tab pom.xml

```java
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.example</groupId>
    <artifactId>spring-jdbc-oceanbase-client</artifactId>
    <version>1.0-SNAPSHOT</version>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>8</source>
                    <target>8</target>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <dependencies>
        <dependency>
            <groupId>com.oceanbase</groupId>
            <artifactId>oceanbase-client</artifactId>
            <version>2.4.2</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>5.2.0.RELEASE</version>
        </dependency>
    </dependencies>

</project>
```

tab Main.java

```java
package com.example;

import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.datasource.DriverManagerDataSource;

public class Main {
    public static void main(String[] args) {
        // Database Connect Information
        String url = "jdbc:oceanbase://$host:$port/$schema_name";
        String username = "$user_name";
        String password = "$password";

        // create data source
        DriverManagerDataSource dataSource = new DriverManagerDataSource();
        dataSource.setDriverClassName("com.oceanbase.jdbc.Driver");
        dataSource.setUrl(url);
        dataSource.setUsername(username);
        dataSource.setPassword(password);

        // Create a JdbcTemplate object
        JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);

        // Create table
        String createTableSql = "CREATE TABLE test_springjdbc (id NUMBER, name VARCHAR2(20))";
        jdbcTemplate.execute(createTableSql);
        System.out.println("Create table successfully.");

        // Insert data
        String insertDataSql = "INSERT INTO test_springjdbc (id,name) VALUES (1,'A1'), (2,'A2'), (1,'A3')";
        jdbcTemplate.update(insertDataSql);
        System.out.println("Insert data successfully.");

        // Update data
        String updateDataSql = "UPDATE test_springjdbc SET name = 'A11' WHERE id = 1";
        jdbcTemplate.update(updateDataSql);
        System.out.println("Update data successfully.");

        // Delete data
        String deleteDataSql = "DELETE FROM test_springjdbc WHERE id = 2";
        jdbcTemplate.update(deleteDataSql);
        System.out.println("Delete data successfully.");

        // Query data
        String selectDataSql = "SELECT * FROM test_springjdbc";
        jdbcTemplate.query(selectDataSql, (rs, rowNum) -> {
            int id = rs.getInt("id");
            String name = rs.getString("name");
            System.out.println("id: " + id + ", name: " + name);
            return null;
        });
        System.out.println("Query data successfully.");

        // Delete table
        String deleteTableSql = "DROP TABLE test_springjdbc";
        jdbcTemplate.execute(deleteTableSql);
        System.out.println("Table drop successfully.");
    }
}
```

:::

## 関連ドキュメント

その他のOceanBase Connector/Jの情報については、[OceanBase JDBCドライバー](https://en.oceanbase.com/docs/common-oceanbase-connector-j-en)を参照してください。
