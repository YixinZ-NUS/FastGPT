|description||
|---|---|
|keywords||
|dir-name|OceanBase Connector/J|
|dir-name-en||
|tenant-type|Oracle Mode|

# OceanBase Connector/J

本記事では、OceanBase Connector/JとOceanBaseデータベースを使用してアプリケーションを構築し、テーブルの作成、データの挿入、データのクエリなどの基本操作を実装する方法について説明します。

<div role="videolist">
      <a role='link' href='https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.2.0/3.develop/demo/java/java-oceanbase-jdbc.zip'>
          <img src='https://file.oceanbase.com/doc/img/lQLPJyFovGIOcJQWFrAqhLlgRRsPvwU-H7hJ_i0A_22_22.png'/>
          クリックしてjava-oceanbase-jdbcサンプルプロジェクトをダウンロード
      </a>
      <!-- <a role='video' href='https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/video-center/video/video/04%20java-oceanbase-jdbc.mp4'>
          <img src='https://mdn.alipayobjects.com/huamei_22khvb/afts/img/A*DFPmToHK6hgAAAAAAAAAAAAADiGDAQ/original'/>
          OceanBase Connector/JによりOceanBaseデータベースに接続するサンプルプログラム(Oracleモード) -->
       </a>
</div>

## 前提条件

* OceanBaseデータベースがインストール済みであること。
* JDK 1.8とMavenがインストール済みであること。
* Eclipseがインストール済みであること。

    <main id="notice" type='explain'>
    <h4>説明</h4>
    <p>この記事はEclipse IDE for Java Developers 2022-03バージョンを使用してコードを実行していますが、お好みのツールを選んでサンプルコードを実行することもできます。</p>
    </main>

## 操作手順

<main id="notice" type='explain'>
  <h4>説明</h4>
  <p>本記事の操作手順はWindows環境に基づいています。他のOS環境やコンパイラを使用する場合は、操作手順が若干異なる場合があります。</p>
</main>

1. `java-oceanbase-jdbc` プロジェクトをEclipseにインポートします。
2. OceanBaseデータベースのURLを取得します。
3. `java-oceanbase-jdbc` プロジェクトのデータベース接続情報を修正します。
4. `java-oceanbase-jdbc` プロジェクトを実行します。

### ステップ１：java-oceanbase-jdbcプロジェクトのEclipseへのインポート

1. Eclipseを起動し、Fileメニューから**Import**オプションを選択します。

    ![Import](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.2.0/3.develop/1.eclipse%E5%AF%BC%E5%85%A5%E9%A1%B9%E7%9B%AE.png)

2. ポップアップされたインポートウィンドウで、**Maven**>**Existing Maven Projects**を選択し、**Next**をクリックします。

    ![EMP](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.2.0/3.develop/2EMP.png)

3. 次のページで、**Browse**ボタンをクリックし、Mavenプロジェクトのルートディレクトリを選択して、**Finish**をクリックします。

    ![Browse](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.2.0/3.develop/3%E9%80%89%E6%8B%A9%E9%A1%B9%E7%9B%AE%E5%9C%B0%E5%9D%80.png)

4. Eclipseはプロジェクト内の `pom.xml` ファイルを自動的に認識し、**Package Explorer**にすべてのMavenプロジェクトを表示します。Eclipseの左側のパネルには、**Package Explorer**のアイコンが表示されます。表示されない場合は、**Window**メニューを選択し、**Show View**>**Package Explorer**を選択することができます。

    <main id="notice" type='explain'>
    <h4>説明</h4>
    <p>Eclipseを使用してMavenプロジェクトをインポートすると、プロジェクト内の<code>pom.xml</code>ファイルを自動的に検出し、その記述に基づいて必要な依存ライブラリをダウンロードしてプロジェクトに追加します。</p>
    </main>

    ![PE](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.2.0/3.develop/4PE.png)

5. プロジェクトの状況を確認します。

    ![pe1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.2.0/3.develop/5.0%E7%9B%AE%E5%BD%95.png)

### ステップ2：OceanBaseデータベースのURLを取得する

1. OceanBaseデータベースのデプロイ担当者または管理者から、該当するデータベース接続文字列を取得します。

    **例：**

    ```shell
    obclient -hxxx.xxx.xxx.xxx -P2883 -usys@oracel001#cluster_name -p******
    ```

    接続文字列に関するその他の情報については、[OBClientを使用したOceanBaseテナントへの接続](../../100.connect-to-oceanbase-database-of-oracle-mode/200.connect-to-an-oceanbase-tenant-by-using-obclient-of-oracle-mode.md)を参照してください。

2. OceanBaseデータベース接続文字列の情報に基づいて、以下のURLの対応する情報を入力します。

    OceanBaseデータベースOracleモードのURL接続例は以下の通りです。

    ```shell
    jdbc:oceanbase://$host:$port/$schema_name?user=$user_name&password=$password
    ```

    **パラメータの説明：**

    * `$host`：OceanBaseデータベースへの接続IPアドレス。ODP接続方式ではODPアドレスを使用し、直接接続方式ではOBServerノードのIPアドレスを使用します。
    * `$port`：OceanBaseデータベースへの接続ポートを提供します。ODP接続方式のデフォルトポートは `2883` で、ODPデプロイ時にカスタマイズ可能です。直接接続方式のデフォルトポートは `2881` で、OceanBaseデータベースのデプロイ時にカスタマイズ可能です。
    * `$schema_name`：アクセスするスキーマ名です。
    * `$user_name`：テナントの接続アカウント。ODP接続の形式：`ユーザー名@テナント名#クラスタ名` または `クラスタ名:テナント名:ユーザー名`。直接接続方式の形式：`ユーザー名@テナント名`。
    * `$password`：アカウントのパスワード。

    詳細なURLパラメータの説明については、[データベースURL](https://en.oceanbase.com/docs/common-oceanbase-connector-j-en-10000000002244946)を参照してください。

### ステップ3：java-oceanbase-jdbcプロジェクトのデータベース接続情報の修正

**ステップ2：OceanBaseデータベースのURLを取得する**に記載されている情報に基づいて、`InsertAndSelectExample.java` ファイル内のデータベース接続情報を修正します。

**例：**

* OBServerノードのIPアドレスは `10.10.10.1` です。
* アクセスポートは2881を使用します。
* アクセスするスキーマ名は `sys` です。
* テナントの接続アカウントは `sys@oracle001` です。`oracle001` はOceanBaseデータベースで作成されたOracleモードのユーザーテナントで、`sys` はテナント `oracle001` のユーザー名です。
* パスワードは `******` です。

**サンプルコードは以下のとおりです：**

```java
String url = "jdbc:oceanbase://10.10.10.1:2881/sys";
String user = "sys@oracle001";
String password = "******";
```

### ステップ4：java-oceanbase-jdbcプロジェクトの実行

1. プロジェクト構造は**Package Explorer**で確認できます。

    ![ディレクトリ](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.2.0/3.develop/5%E7%9B%AE%E5%BD%95.png)

2. プロジェクト内のMainクラスを見つけて右クリックし、**Run As**>**Run Configurations...**を選択し、**Run Configurations**ページを開きます。

    ![run0](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.2.0/3.develop/5.1run.png)

3. **Run Configurations**ページで、**Java Application**>**New_configuration**ページの**Main class**内の `com.oceanbase.example.InsertAndSelectExample` プロジェクトを選択します。

    ![run1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.2.0/3.develop/6run.png)

4. Eclipseのコンソールでプロジェクトのログ情報と出力結果を確認します。

    ![出力結果](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.2.0/3.develop/7%E8%BF%94%E5%9B%9E%E7%BB%93%E6%9E%9C.png)

## プロジェクトコードについて

[java-oceanbase-jdbc](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.2.0/3.develop/demo/java/java-oceanbase-jdbc.zip) をクリックしてプロジェクトコードをダウンロードします。これは、`java-oceanbase-jdbc.zip` という名前の圧縮ファイルです。

解凍すると、`java-oceanbase-jdbc` という名前のフォルダが作成されます。ディレクトリ構造は以下のとおりです：

```shell
.
|-- README-CN.md
|-- README.md
|-- pom.xml
|-- run.sh
`-- src
    `-- main
        `-- java
            `-- com
                `-- oceanbase
                    `-- example
                        |-- InsertAndSelectExample.java
                        `-- OceanBaseClientTest.java
```

**ファイルの説明：**

* `README-CN.md`：中国語で書かれたプロジェクトの説明ドキュメント。
* `README.md`：英語で書かれたプロジェクトの説明ドキュメント。
* `pom.xml`：Mavenプロジェクトの設定ファイルで、プロジェクトの依存関係、プラグイン、ビルドルールなどの情報を定義しています。
* `run.sh`：Javaアプリケーションを自動的にコンパイルして実行するためのShellスクリプトです。
* `src`：プロジェクトのソースコードとリソースファイルを含むディレクトリで、プロジェクトの主要なディレクトリです。
* `main`：Javaソースコードディレクトリで、プロジェクトの主要なコードを含みます。
* `java`：Javaソースコードのルートディレクトリです。
* `com`：Javaパッケージのルートディレクトリです。
* `oceanbase`：`com` パッケージのサブパッケージで、このプロジェクトがOceanBaseデータベースに関連していることを示しています。
* `example`：`oceanbase` パッケージのサブパッケージで、このプロジェクトがOceanBase JDBCドライバーを使用してOceanBaseデータベースに接続・操作する方法を示すサンプルプログラムであることを示しています。
* `InsertAndSelectExample.java`：サンプルプログラムの一部で、データの挿入と検索の方法を示す `InsertAndSelectExample` というサンプルクラスを含みます。
* `OceanBaseClientTest.java`：サンプルプログラムの一部で、データベースへの接続、SQLステートメントの実行、データのクエリなどの操作方法を示す `OceanBaseClientTest` というサンプルクラスを含みます。

### pom.xmlのコード紹介

`pom.xml` ファイルはMavenプロジェクトの設定ファイルで、プロジェクトの依存関係、プラグイン、ビルドルールなどの情報を定義しています。MavenはJavaプロジェクト管理ツールで、依存関係のダウンロード、プロジェクトのコンパイル、パッケージングなどの操作を自動化できます。

本記事の `pom.xml` ファイルのコードは、主に以下のいくつかの部分が含まれます：

1. ファイル宣言ステートメントです。

    このファイルがXMLファイルであり、使用しているXMLのバージョンが `1.0` で、文字エンコーディング方式が `UTF-8` であることを宣言しています。

    **コード：**

    ```java
    <?xml version="1.0" encoding="UTF-8"?>
    ```

2. POMのネームスペースとPOMモデルのバージョンを設定します。

   1. `xmlns` を使用して、POMのネームスペースを `http://maven.apache.org/POM/4.0.0` と指定します。
   2. `xmlns:xsi` を使用して、XMLネームスペースを `http://www.w3.org/2001/XMLSchema-instance` と指定します。
   3. `xsi:schemaLocation` を使用して、POMのネームスペースを `http://maven.apache.org/POM/4.0.0`、POMのXSDファイルの場所を `http://maven.apache.org/xsd/maven-4.0.0.xsd` と指定します。
   4. `<modelVersion>` 要素を使用して、このPOMファイルで使用されるPOMモデルバージョンを `4.0.0` と指定します。

   **コード：**

   ```java
   <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
     <modelVersion>4.0.0</modelVersion>
    <!-- その他の設定 -->
   </project>
   ```

3. 基本情報を設定します。

   1. `<groupId>` を使用して、プロジェクト識別子を `com.oceanbase.example` と指定します。
   2. `<artifactId>` を使用して、プロジェクト依存関係を `oceanbase-client` と指定します。
   3. `<version>` を使用して、プロジェクトのバージョン番号を `1.0-SNAPSHOT` と指定します。
   4. `<name>` を使用して、プロジェクト名を `ob-example-oceanbase-client` と設定します。

   **コード：**

   ```java
   <groupId>com.oceanbase.example</groupId>
   <artifactId>oceanbase-client</artifactId>
   <version>1.0-SNAPSHOT</version>

   <name>ob-example-oceanbase-client</name>
   ```

4. `<properties>` を使用して、プロジェクトソースファイルのプロパティを定義します。

   1. `<project.build.sourceEncoding>` を使用して、プロジェクトソースファイルのエンコーディングを `UTF-8` と指定します。
   2. `<maven.compiler.source>` を使用して、Mavenコンパイラが使用するJavaソースコードのバージョンを `1.8` と指定します。
   3. `<maven.compiler.target>` を使用して、Mavenコンパイラが生成するJavaバイトコードのバージョンを `1.8` と指定します。
   4. `<exec.mainClass>` を使用して、プロジェクト内のサンプルプログラム `com.oceanbase.example.InsertAndSelectExample` を指定します。

   **コード：**

   ```java
   <properties>
     <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
     <maven.compiler.source>1.8</maven.compiler.source>
     <maven.compiler.target>1.8</maven.compiler.target>
     <exec.mainClass>com.oceanbase.example.InsertAndSelectExample</exec.mainClass>
   </properties>
   ```

5. `<dependencies>` を使用して、プロジェクトが依存するコンポーネントを定義します。

    <main id="notice" type='explain'>
      <h4>説明</h4>
      <p>この部分のコードでは、プロジェクトが依存するコンポーネントとしてOceanBase Connector/JのバージョンV2.4.2を定義しています。他のバージョンの情報については、<a href="https://en.oceanbase.com/docs/oceanbase-connector-j-en">OceanBase JDBCドライバー</a>を参照してください。</p>
    </main>

   1. `<dependency>` を使用して、依存関係を定義します。
   2. `<groupId>` を使用して、依存関係が属する組織を `com.oceanbase` と指定します。
   3. `<artifactId>` を使用して、依存関係の名前を `oceanbase-client` と指定します。
   4. `<version>` を使用して、依存関係のバージョン番号を `2.4.2` と指定します。

   **コード：**

   ```java
     <dependencies>
       <dependency>
         <groupId>com.oceanbase</groupId>
         <artifactId>oceanbase-client</artifactId>
         <version>2.4.2</version>
       </dependency>
     </dependencies>
   ```

### InsertAndSelectExample.javaのコード説明

`InsertAndSelectExample.java` ファイルは、サンプルプログラムの一部で、データの挿入とクエリの方法を示す `InsertAndSelectExample` というサンプルクラスを含みます。

本記事の `InsertAndSelectExample.java` ファイルのコードは、主に以下のいくつかの部分から構成されています：

1. パッケージを定義し、`java.sql` のインターフェースをインポートします。

    現在のファイルが属するパッケージ名を `com.oceanbase.example` と宣言します。

    `java.sql` パッケージから以下のインターフェースとクラスをインポートします：

    * `Connection` インターフェース：データベースとの接続を表します。
    * `DriverManager` クラス：JDBCドライバーの登録とデータベース接続の取得を管理するための静的メソッドのセットを提供します。最もよく使われるメソッドは `getConnection()` で、データベースとの接続を作成するために使用されます。
    * `PreparedStatement` インターフェース：プリコンパイルされたSQLステートメントを表します。
    * `ResultSet` インターフェース：クエリ結果セットを表します。
    * `SQLException` 例外クラス：JDBCを使用してデータベースに接続する際に発生するさまざまな例外状況（例:接続失敗、SQLコマンドの実行失敗など）を表します。
    * `Statement` インターフェース：データベース内の1つのステートメントを表します。

    **コード：**

    ```java
    package com.oceanbase.example;

    import java.sql.Connection;
    import java.sql.DriverManager;
    import java.sql.PreparedStatement;
    import java.sql.ResultSet;
    import java.sql.SQLException;
    import java.sql.Statement;
    ```

2. クラス名と `main` メソッドを定義します。

    クラス名を `InsertAndSelectExample` と定義します。クラス名はファイル名と一致させる必要があります。

    `main` メソッドを `public static void` と定義します。これはpublic staticメソッドであることを示しています。パラメータとして文字列配列 `args` を受け取ります。`throws ClassNotFoundException, SQLException` を使用して、このメソッドが `ClassNotFoundException` と `SQLException` 例外をスローする可能性があることを示します。これらはメソッド呼び出し元で処理する必要があります。

    **コード：**

    ```java
    public class InsertAndSelectExample {

        public static void main(String[] args) throws ClassNotFoundException, SQLException {
            // to do:
            // 3.connect to your database
            // 4.create a table
            // 5.insert records
            // 6.fetch all records
            // 7.release all resources
        }
    }
    ```

3. データベースに接続し、データベース接続オブジェクトを取得します。

    OceanBaseデータベースに接続するために必要なURL文字列と追加の接続プロパティを定義します：

    * `jdbc:oceanbase`：OceanBaseのJDBCドライバーを使用してデータベースに接続することを示します。
    * `host:port`：OceanBaseデータベースのIPとポート番号を示します。
    * `opt1=val1&opt2=val2...`：追加の接続プロパティ、つまりURLパラメータです。URLの追加接続プロパティの詳細については、[データベースURL](https://en.oceanbase.com/docs/common-oceanbase-connector-j-en-10000000002244946)を参照してください。
    * `schema_name`：接続するスキーマ名を示します。
    * `String user = "user_name"`：データベースにログインするために必要なユーザー名を定義します。
    * `String password = "******"`：データベースにログインするために必要なパスワードを定義します。

    データベース接続オブジェクトの取得：

    * `Class` の `forName` メソッドを呼び出して、指定されたクラス名 `com.oceanbase.jdbc.Driver` のドライバークラスをロードします。
    * `DriverManager` クラスの `getConnection` メソッドを使用して、`Connection` オブジェクト `conn` を取得します。

    **コード：**

    ```java
    String url = "jdbc:oceanbase://host:port/schema_name?[opt1=val1&opt2=val2...]";
    String user = "user_name";
    String password = "******";
    Class.forName("com.oceanbase.jdbc.Driver");
    Connection conn = DriverManager.getConnection(url, user, password);
    ```

4. テーブルを作成します。

    `name` と `age` の2つのフィールドを含む `person` という名前のテーブルを作成します。テーブルが既に存在する場合は、削除してから作成します。具体的な手順は以下のとおりです：

    1. データベースにSQLステートメントを送信するために使用される `Statement` オブジェクト `stmt` を作成します。
    2. `stmt` オブジェクトの `execute` メソッドを呼び出し、SQLステートメント `drop table person` を渡して `person` という名前のテーブルを削除します。`person` テーブルが存在するかどうか不明なため、`try-catch` 構造を使用して例外を捕捉し、存在しないテーブルを削除しようとした場合にプログラムがクラッシュするのを防ぎます。
    3. 再び `stmt` オブジェクトの `execute` メソッドを呼び出し、SQLステートメント `create table person (name varchar(50), age int)` を渡して `person` という名前のテーブルを作成します。このテーブルには2つのフィールド `name` と `age` が含まれ、`name` フィールドタイプは `varchar(50)`、`age` フィールドタイプは `int` です。

    **コード：**

    ```java
    Statement stmt = conn.createStatement();
        try {stmt.execute("drop table person");}
        catch (Exception ignore) {}
            stmt.execute("create table person (name varchar(50), age int)");
    ```

5. テーブルにデータを挿入します。

    `PreparedStatement` インターフェースを使用して、データベースの `person` テーブルに2つのデータを挿入します。具体的な手順は以下のとおりです：

    1. SQLステートメントを実行するために、`PreparedStatement` オブジェクト `ps` を作成します。SQLステートメントは `insert into person values(?, ?)` です。`?` はプレースホルダーであり、具体的な値を入力する必要があることを示します。
    2. `setString()` メソッドを呼び出して、1番目のプレースホルダー（1番目の疑問符）を `Adam` に設定します。
    3. `setInt()` メソッドを呼び出して、2番目のプレースホルダー（2番目の疑問符）を `28` に設定します。
    4. 更新操作を実行して、データをデータベースに挿入します。
    5. 再び `setString()` メソッドを呼び出して、1番目のプレースホルダーを `Eve` に設定します。
    6. 再び `setInt()` メソッドを呼び出して、2番目のプレースホルダーを `26` に設定します。
    7. 再び更新操作を実行して、2番目のデータをデータベースに挿入します。

    **コード：**

    ```java
    PreparedStatement ps = conn.prepareStatement("insert into person values(?, ?)");
        ps.setString(1, "Adam");
        ps.setInt(2, 28);
        ps.executeUpdate();
        ps.setString(1, "Eve");
        ps.setInt(2, 26);
        ps.executeUpdate();
    ```

6. すべてのレコードを取得します。

    `person` テーブルからすべてのデータをクエリし、結果をコンソールに出力します。具体的な手順は以下のとおりです：

    1. SQLステートメントを実行するために、`PreparedStatement` オブジェクト `ps` を作成します。SQLステートメントは `select * from person` で、`person` テーブル内のすべてのデータをクエリすることを示します。`setFetchDirection()` メソッドを使用して結果セットのカーソルを前方に移動するように設定し、`setConcurrency()` メソッドを使用して結果セットを読み取り専用に設定します。
    2. クエリ操作を実行し、クエリ結果を `ResultSet` オブジェクトに保存します。`ResultSet` オブジェクトの名前は `rs` です。
    3. `while` ループを使用して `ResultSet` オブジェクトをイテレーションします。`rs.next()` メソッドを使用して、カーソルを次の行のデータに移動します。まだデータがある場合、メソッドは `true` を返します。
    ループ内部では、`rs.getString(1)` メソッドを使用して1列目の値（`person` テーブルの `name`）を、`rs.getInt(2)` を使用して2列目の値（`age`）を取得し、これらの値をコンソールに出力します。フォーマットは `name is age years old.` です。
    4. ループが終了したら、`ResultSet` と `PreparedStatement` オブジェクトを閉じます。

    **コード：**

    ```java
    ps = conn.prepareStatement("select * from person", ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_READ_ONLY);
    ResultSet rs = ps.executeQuery();
    while (rs.next()) {
        System.out.println(rs.getString(1) + " is " + rs.getInt(2) + " years old.");
        }
    ```

7. データベースリソースをリリースします。

    `PreparedStatement`、`Statement`、`Connection` オブジェクトを閉じ、関連するデータベースリソースをリリースすることで、リソースの消費とパフォーマンスの問題を回避します。

    **コード：**

    ```java
    ps.close();
    stmt.close();
    conn.close();
    ```

### 全コード表示

:::tab
tab pom.xml

```java
<?xml version="1.0" encoding="UTF-8"?>

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.oceanbase.example</groupId>
  <artifactId>oceanbase-client</artifactId>
  <version>1.0-SNAPSHOT</version>

  <name>ob-example-oceanbase-client</name>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <maven.compiler.source>1.8</maven.compiler.source>
    <maven.compiler.target>1.8</maven.compiler.target>
    <exec.mainClass>com.oceanbase.example.InsertAndSelectExample</exec.mainClass>
  </properties>

  <dependencies>
    <dependency>
      <groupId>com.oceanbase</groupId>
      <artifactId>oceanbase-client</artifactId>
      <version>2.4.2</version>
    </dependency>
  </dependencies>

</project>
```

tab InsertAndSelectExample.java

```java
package com.oceanbase.example;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

public class InsertAndSelectExample {

    public static void main(String[] args) throws ClassNotFoundException, SQLException {

        String url = "jdbc:oceanbase://host:port/schema_name?[opt1=val1&opt2=val2...]";
        String user = "user_name";
        String password = "******";
        Class.forName("com.oceanbase.jdbc.Driver");
        Connection conn = DriverManager.getConnection(url, user, password);

        Statement stmt = conn.createStatement();
        try {
            stmt.execute("drop table person");
        } catch (Exception ignore) {
        }
        stmt.execute("create table person (name varchar2(50), age int)");

        PreparedStatement ps = conn.prepareStatement("insert into person values(?, ?)");
        ps.setString(1, "Adam");
        ps.setInt(2, 28);
        ps.executeUpdate();
        ps.setString(1, "Eve");
        ps.setInt(2, 26);
        ps.executeUpdate();

        ps = conn.prepareStatement("select * from person", ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_READ_ONLY);
        ResultSet rs = ps.executeQuery();
        while (rs.next()) {
            System.out.println(rs.getString(1) + " is " + rs.getInt(2) + " years old.");
        }

        ps.close();
        stmt.close();
        conn.close();
    }

}
```

:::

## 関連ドキュメント

その他のOceanBase Connector/Jに関する情報は、[OceanBase JDBCドライバー](https://en.oceanbase.com/docs/common-oceanbase-connector-j-en)を参照してください。
