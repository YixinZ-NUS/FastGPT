|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|Oracle Mode|

# ODCによるOceanBaseデータベースへの接続

ODCはOceanBaseデータベースのOracleテナントへの接続をサポートしています。本記事では、この接続方法の前提条件と操作手順について説明します。

## 前提条件

[クライアント版ODC](https://en.oceanbase.com/docs/community-odc-en-10000000000841930)をダウンロードし、インストール済みであることを確認してください。

## 操作手順

この記事では、クライアント版ODCにおける個人接続(oracle@tenant)の作成を例として説明します。具体的な操作手順は以下のとおりです：

1. ODCにアクセスし、ODCのホームページの**個人接続**タブの右上にある**新規接続**をクリックして個人接続を作成します。

   <!-- ![作成1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/400/OBServer%20create%20connection-Oracle.png) -->

   <main id="notice" type='explain'>
    <h4>説明</h4>
    <p>ODCが初めて実行されるとき、読み込みに時間がかかる場合があります。しばらくお待ちください。 </p>
   </main>

2. 接続タブを作成するには、以下の情報を入力または選択する必要があります。既にOceanBaseデータベース接続文字列をお持ちの場合、以下の情報は接続文字列から直接取得できます（mysql -h **ホスト名** -P **ポート番号** -u **データベースユーザー名@テナント名** # **クラスタ名** -D **デフォルトデータベース** -p '**データベースパスワード**'）または、タブ内に用意されているインテリジェント解析ツールを使用して直接入力することもできます：

   <!-- ![作成2](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/odc/400/%E6%96%B0%E5%BB%BA%E4%B8%AA%E4%BA%BA%E8%BF%9E%E6%8E%A5-1.png) -->

   |     情報項目     |  説明  |
   |-------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   | データベースタイプ       | **物理データベース**を選択します。ここで：<ul><li>物理データベース：普通のデータベース。</li><li>論理データベース：ODP (Sharding)。 </li></ul>  |
   | 所属エリア        | **独立デプロイ/VPN**を選択します。   |
   | 接続名        | この接続の名前を指定します。    |
   | タグの設定        | タグを利用して、接続に補足説明などの情報を追加できます。<br>**接続名** テキストボックスの後ろにある**タグの設定**ボタンをクリックして、現在の接続にタグを指定します。ポップアップのドロップダウンリストでタグの設定や管理を行うことができます： <ul><li>タグの設定：ドロップダウンリストからターゲットタグを選択して設定を完了します。リストが空の場合は、先にタグを新規作成してください。   </li><li>タグの管理：リストの最下部にある**タグの新規作成**ボタンをクリックするか、リストの上部にある設定アイコンをクリックして**タグ管理**ウィンドウをポップアップ表示します。タグ管理ウィンドウでは、作成したタグの編集および削除操作を行うことができます。同時に、上部の**タグの新規作成**ボタンをクリックして、新しいタグ名とアイコンの色を指定できます。</li></ul> |
   | インテリジェント解析        | テキストボックスに接続文字列情報を貼り付けると、ODCが自動的に接続文字列を解析し、ウィンドウに各接続文字列情報を入力します。  |
   | 接続モード        | **Oracle**を選択します（論理データベースはMySQLモードのみサポートしています）。 |
   | 接続アドレス        |<ul><li>**ホストIPアドレス**：接続先のデータベースが配置されているサーバーのIPアドレス情報。</li><li>**ポート**：接続先データベースが存在するサーバーのポート番号情報。</li><li> **クラスタ名**：接続先のデータベースが配置されているクラスタの名前（論理データベースは入力不要）。</li><li>**テナント名**：接続先のデータベースが配置されているテナントの名前（論理データベースは入力不要）。</li></ul><main id="notice" type='explain'><h4>説明</h4><p>ホスト名とポート番号は、接続先のデータベースが配置されているテナント情報ページから取得できます。例えば、パブリッククラウドやOCP上で作成されたテナントの場合です。</p></main>  |
   | データベースアカウント       | <ul><li> **データベースユーザー名**：テナント内で作成されたユーザー。</li><li> **データベースパスワード**：テナント内で作成されたユーザーのパスワード。データベースのパスワードボックスの後にある **接続テスト** ボタンをクリックして、ターゲットデータベースに接続できるかどうかをテストします。</li><li> **パスワードの保存**：この項目をオフにすると、接続情報にデータベースのパスワード情報が保存されません。接続または接続テストを行うたびに、ポップアップされるパスワード入力ウィンドウにデータベースのパスワードを入力する必要があります。この項目をオンにすると、接続情報にデータベースのパスワード情報が保存されるため、接続するたびにデータベースのパスワードを入力する必要がありません。</li></ul><main id="notice" type='explain'><h4>説明</h4><p><ul><li>設定情報が誤っている場合、ユーザー名またはパスワードが間違っている、ネットワーク異常など、エラーメッセージが表示されます。</li><li>自身のテナント内のデータベースにのみ接続することができます。その他のデータベースに接続しようとした場合は、テストに失敗したという内容のエラーが表示されます。</li><li>ODC V4.0.0以降のバージョンでは、アカウントとパスワードを入力しなくても接続を保存することができます。</li></ul></p></main> |
   | SQLクエリのタイムアウト  | SQLのタイムアウト時間はカスタマイズ可能で、SQLクエリが指定された時間を超えると自動的にクエリが終了します（デフォルトは60秒）。  |
   | sysテナントアカウント設定 | `sys` テナントアカウントを使用してテナントビューをクエリするかどうかを選択し、選択した場合は、**アカウント**と**パスワード**を入力します。<br> データベースのタイプが物理ライブラリの場合は、`sys` テナントビューに対するクエリ権限を持つアカウントとパスワードを入力してください。**接続アドレス**に**テナント**が`sys`として指定されている場合は、この項目が自動的に入力されます。<ul><li> **アカウント**`sys`テナントビューに対するクエリ権限を持つアカウント。</li><li> **パスワード**：アカウントに対応するパスワード。</li></ul>    アカウントとパスワードの情報を入力した後、パスワードボックスの後ろの **接続テスト** ボタンをクリックして、アカウント情報が正しいかどうか確認します。<main id="notice" type='explain'><h4>説明</h4><p><ul><li> ODC V2.3.0以降のバージョンでは、インポートおよびエクスポート機能は、接続作成時の詳細設定でroot@sysユーザーを設定する必要があります。</li><li>ODC V2.4.1以降のバージョンでは、インポート/エクスポート機能によりビュー情報をクエリする際の `root@sys` アカウントへの依存関係がなくなりました(`root@sys`アカウントが設定されていない場合は、ストアドプロシージャや関数など、ODCの一部のオブジェクがエクスポート機能に対応しません。`root@sys` アカウントが設定されている場合は、`sys` テナントのビュー情報にアクセスすることで最適なデータルーティングストラテジーを得て、エクスポート速度を向上させることができます)。</li><li>  **sysテナントアカウントとパスワード**は、クラスタテナント内のユーザーのアカウントとパスワードです（アカウントに「@sys#クラスタ」と入力しないでください）。例：アカウントは`root`です。 </li></ul></main> |

3. ページ下部の**保存**ボタンをクリックすると、現在の設定情報がODC接続リストに永続的に保存されます。再度ODCにログインする際、接続設定リストからその接続を直接選択することができます。接続設定を保存する際、接続テストが成功している必要はありません。

   <main id="notice" type='explain'>
    <h4>説明</h4>
    <p>保存する前に、<b>接続テスト</b>をクリックしてデータベース接続テストを行うことができます。データベースのユーザー名とパスワードが正しい場合、<b>接続成功</b>と表示されます。 </p>
   </main>

## 関連ドキュメント

ODCのその他の機能の紹介と使用方法については、対応するバージョンの [ODCプロダクトドキュメント](https://en.oceanbase.com/docs/odc-en)を参照してください。
