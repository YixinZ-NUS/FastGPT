|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|MySQL Mode|

# クエリでの数値関数の使用

本記事では、具体的な例を通してクエリ内で数値関数を使用する方法を紹介します。

## 数値関数

よく使用される数値関数には、合計関数SUM()、平均値関数AVG()、切り上げ関数CEIL()、切り捨て関数FLOOR()、四捨五入関数ROUND()などがあります。

## 例

サンプルテーブルtoys_orderを作成し、注文データを入力します。

```sql
obclient> CREATE TABLE toys_order (
  order_id     INTEGER,
  toy_id       INTEGER,
  toy_dealer   VARCHAR(20),
  toy_price    DECIMAL(10, 2),
  toy_amount   INTEGER
);
Query OK, 0 rows affected

obclient> INSERT INTO toys_order VALUES ( 1001,1, 'A',53.12,100 ),( 1002,2, 'A',24.8,190 ),( 1003,3, 'A',19.9,330)
      ,( 1004,1, 'B',53.12,50 ),( 1005,2, 'B',24.8,200 ),( 1006,3, 'B',19.9,350 ),( 1007,2, 'A',24.8,100 );
7 rows in set
```

### クエリでの数値関数の使用

`SUM()`、`ROUND()`、`AVG()` を使用して各おもちゃの総売上高と1注文あたりの平均売上高を求めるクエリを実行します。

```sql
obclient> SELECT toy_id
    , SUM(toy_amount)                sum_amount
    , ROUND(avg(toy_amount),4)       avg_amount
    FROM toys_order GROUP BY toy_id  ORDER BY toy_id;
+--------+------------+------------+
| toy_id | sum_amount | avg_amount |
+--------+------------+------------+
|      1 |        150 |     75.000 |
|      2 |        490 |    163.333 |
|      3 |        680 |    340.000 |
+--------+------------+------------+
3 rows in set
```
