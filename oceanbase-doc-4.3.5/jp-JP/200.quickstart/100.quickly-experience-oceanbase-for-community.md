|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||

# OceanBase Community Editionクイックスタート

OceanBaseデータベースの導入には、利用シーンに応じて2つの方法があります。この記事では、主に手軽に始められる「クイックスタート」の方法を詳しく解説します。また、実際の運用環境を想定した「本番環境へのデプロイ」についても紹介します。

<main id="notice" type='explain'>
  <h4>説明</h4>
  <p>本記事は<b>本番環境には適用されません</b>。本番環境でOceanBaseデータベースをデプロイする場合は、<a href="../400.deploy/500.deploy-oceanbase-database-community-edition/100.deployment-overview.md">OceanBaseデータベースCommunity Editionデプロイ概要</a>を参照し、適切なデプロイ方法を選択してください。 </p>
</main>

## コンポーネント

* obd (OceanBase Deployer)

  OceanBaseのインストールやデプロイを行うためのツールです。詳細については、公式ドキュメント[OceanBaseインストール・デプロイツール](https://en.oceanbase.com/docs/obd-en)を参照してください。

* ODP (OceanBase Database Proxy)

  アプリケーションからのリクエストを受け付ける専用の窓口(プロキシ)です。リクエストを適切なサーバーに振り分ける役割を担います。OBProxyとも呼ばれます。詳細については、公式ドキュメント[OceanBase データベースプロキシ](https://en.oceanbase.com/docs/odp-en)を参照してください。

* OBAgent

  OceanBaseデータベースの稼働状況を監視するためのデータを収集するフレームワークです。プッシュ(push)とプル(pull)の2種類のデータ収集モードに対応しており、さまざまな利用シーンに対応可能です。

* Grafana

  オープンソースのデータ可視化ツールで、データソースから各種指標データを可視化し、システムの稼働状況やパフォーマンス指標を直感的に把握できるようにします。詳細については、[Grafana公式サイト](https://grafana.com/)を参照してください。

* Prometheus

  オープンソースのモニタリングシステムおよび時系列データベースで、汎用的なデータモデルと高速なデータ収集、保存、クエリインターフェースを提供します。詳細については、[Prometheus公式サイト](https://prometheus.io/)を参照してください。

## 前提条件

OceanBaseデータベースをインストールする前に、使用するソフトウェアおよびハードウェア環境が以下の要件を満たしていることを確認してください。

| 項目 | 説明 |
| --- | --- |
|対応OS|<ul><li>Anolis OS 8.x(Linuxカーネル4.19以降)</li><li>Alibaba Cloud Linux 2/3(Linuxカーネル4.19以降)</li><li>Red Hat Enterprise Linux Server 7.x, 8.x(Linuxカーネル4.19以降)</li><li>Rocky Linux 9(Linuxカーネル 5.14)</li><li>Debian 9.x 以降(Linuxカーネル4.19以降)</li><li>Ubuntu 16.x 以降(Linuxカーネル4.19以降)</li><li>SUSE/OpenSUSE 15.x以降(Linuxカーネル4.19以降)</li><li>KylinOS V10、V11</li></ul>|
|CPU|最小2コア、推奨4コア以上。|
|メモリ|最小6GB、推奨16GB～1024GB。|
|ディスクの種類| SSDストレージを使用。|
|ディスクストレージ容量|最小20GB。|
|ファイルシステム|EXT4またはXFS。データ容量が16TBを超える場合はXFSを使用してください。|
| ポート | コンポーネントのデフォルトポートが他のプロセスで使用されていないことを確認してください。<ul><li>OceanBaseデータベースは、デフォルトで2881、2882、2886ポートを使用します。</li><li>ODPは、デフォルトで2883、2884、2885ポートを使用します。</li><li>OBAgentは、デフォルトで8088、8089ポートを使用します。</li><li>Prometheusは、デフォルトで9090ポートを使用します。</li><li>Grafanaは、デフォルトで3000ポートを使用します。</li></ul> |
| all-in-oneインストールパッケージ | V4.1.0以降のバージョンを選択する必要があります。|
| Docker | Dockerを使用してOceanBaseデータベースをデプロイするには、事前にDockerをインストールし、Dockerサービスを起動しておく必要があります。詳しい手順については、[Dockerドキュメント](https://docs.docker.com/get-docker/)を参照してください。<main id="notice" type='explain'><h4>説明</h4><p>x86x86アーキテクチャのMacマシンを使用する場合、OceanBaseデータベースのデプロイにはV4.9.0以前のバージョンのDockerのみがサポートされています。該当するDockerは<a href="https://desktop.docker.com/mac/main/amd64/81317/Docker.dmg?_gl=17jelfd_gcl_auOTk5Nzk0MDUwLjE3MTE4ODMyNzM._gaNDQyMjE1MDE5LjE3MTE4ODMyNzQ._ga_XJWPQMJYHQ*MTcxOTIxOTEwMy4xMS4xLjE3MTkyMjEwMTAuNjAuMC4w">こちらのリンク</a>からダウンロードできます。</p></main>   |

## クイックスタート

クイックスタートは、マシンが1台しかない状況で、手早くOceanBaseデータベースの動作環境を構築したい場合に最適です。この方法で構築した環境ではデータベースの基本機能を利用でき、OceanBaseがどのようなものかを理解するのに役立ちます。ただし、分散機能や高可用性は備えていないため、本番環境での利用や長期間の運用には向いていない点にご注意ください。

以下の4つのオプションから、お好きな方法でOceanBaseデータベースを体験してみましょう。

### オプション1：All in Oneインストールパッケージ

```shell
bash -c "$(curl -s https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/download-center/opensource/oceanbase-all-in-one/installer.sh)"
source ~/.oceanbase-all-in-one/bin/env.sh
obd demo
```

以上はクイック体験用のコマンドです。上記のコマンドを実行すると、最新版のOceanBase All-in-Oneパッケージが**オンラインでダウンロード**され、**現在ログインしているユーザー**としてOceanBaseデータベースがデプロイされ、デモ環境が構築されます。環境構築後は、obdコマンドでデータベースを管理できます。`obd demo`コマンドの実行に成功すると、デプロイされた各コンポーネントへの接続情報が出力されます。`oceanbase-ce`の接続文字列をコピーして実行し、rootユーザーでクラスタのsysテナントにログインしてください。ログイン後は、SQL文の実行を通して基本的な機能を確認できます。詳しくは[SQLの基本操作・MySQLモード](200.get-started-with-oceanbase-sql/200.basic-sql-operations-of-mysql-mode.md)をご覧ください。

オフラインインストール手順や、`obd demo`コマンドの詳細なオプションについては、公式ドキュメントの[obdのインストール](https://en.oceanbase.com/docs/community-obd-en-10000000001736381)と[obdクイックデプロイコマンド](https://en.oceanbase.com/docs/community-obd-en-10000000001736374)を参照してください。

### オプション2：RPMパッケージ

<main id="notice" type='explain'>
  <h4>説明</h4>
  <ul>
  <li>このオプションはsystemctlコマンドを使用するため、コンテナ環境以外で操作を行ってください。</li>
  <li><p>このオプションでOceanBaseデータベースをインストールする場合、以下のOSのみがサポート対象です。</p><ul><li>Anolis OS 8.x（Linuxカーネル 4.19 以降）</li><li>CentOS Linux 8.x（Linuxカーネル 4.19 以降）</li><li>Debian 10, 11, 12（Linuxカーネル 4.19 以降）</li><li>openEuler 22.03 および 24.03（Linuxカーネル 5.10.0 以降）</li><li>Ubuntu 18.04, 20.04, 22.04（Linuxカーネル 4.19 以降）</li></ul></li>
  </ul>
</main>

```shell
sudo bash -c "$(curl -s https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/download-center/opensource/service/installer.sh)"
```

クイック体験用のコマンドです。上記のコマンドを実行すると、最新版のRPMパッケージが**オンラインでダウンロード**され、`root`アカウントでシステムに直接インストールします。インストール完了後は、systemctlコマンドを使って、OceanBaseデータベースを管理できます。

コマンドが正常に実行されると、OceanBaseデータベースへの接続情報が表示されます。表示された接続文字列をコピーして実行し、rootユーザーでクラスターのsysテナントにログインします。ログイン後は、SQL文の実行を通して基本的な機能を確認できます。詳しくは[SQLの基本操作・MySQLモード](200.get-started-with-oceanbase-sql/200.basic-sql-operations-of-mysql-mode.md)をご覧ください。詳細な設定やオフラインでのインストール手順については、公式ドキュメント[systemdを使用したOceanBaseデータベースのデプロイ](../400.deploy/500.deploy-oceanbase-database-community-edition/200.local-deployment/600.deploy-by-systemd.md)を参照してください。

### オプション 3：Docker

Linux以外のOS (例：Windows、macOS)でOceanBaseデータベースを手軽に試す場合、コンテナを使用する方法が便利です。ただし、このオプションは主に機能を体験することを目的としており、大規模な検証は行われていません。利用の際はその点を考慮してください。

<main id="notice" type='explain'>
  <h4>補足説明</h4>
  <p>x86アーキテクチャのMacマシンをお使いの場合、OceanBaseデータベースのデプロイには、V4.9.0以前のバージョンのDockerのみがサポートされています。該当するDockerは、<a href="https://desktop.docker.com/mac/main/amd64/81317/Docker.dmg?_gl=17jelfd_gcl_auOTk5Nzk0MDUwLjE3MTE4ODMyNzM._gaNDQyMjE1MDE5LjE3MTE4ODMyNzQ._ga_XJWPQMJYHQ*MTcxOTIxOTEwMy4xMS4xLjE3MTkyMjEwMTAuNjAuMC4w">こちらのリンク</a>からダウンロードしてください。</p>
</main>

```shell
sudo docker run -p 2881:2881 --name obstandalone -e MODE=MINI -d quay.io/oceanbase/oceanbase-ce
```

クイック体験用のコマンドです。上記のコマンドを実行すると、最新のデータベースイメージが**オンラインでダウンロード**され、最小構成のOceanBaseデータベースのコンテナが起動します。起動後は、dockerコマンドでOceanBaseデータベースを管理できます。

デプロイに成功したら、下記のコマンドを実行して、rootユーザーとしてクラスターのsysテナントにログインします。ログイン後、SQL文を実行して基本的な機能をお試しいただけます。詳しくは[SQLの基本操作・MySQLモード](200.get-started-with-oceanbase-sql/200.basic-sql-operations-of-mysql-mode.md)をご覧ください。

```shell
#Dockerコンテナにアクセスします
sudo docker exec -it obstandalone bash
#クラスタに接続します。パスワードはデフォルトで空。
obclient -uroot@sys -h127.0.0.1 -Doceanbase -P2881 -p
```

### オプション 4：OceanBaseデータベースデスクトップ版

OceanBase Desktopは、OceanBaseデータベースの管理と操作を行うためのデスクトップアプリケーションです。グラフィカルユーザーインターフェースにより、ユーザーはデータベース管理、クエリ実行、データインポート・エクスポートなどの操作を容易に行うことができます。

<main id="notice" type='explain'>
  <h4>説明</h4>
  <ul>
  <li><p>OceanBase Desktopは、Windows (x86-64アーキテクチャ)およびmacOSに対応しています。</p></li>
  <li><p>インストールを開始する前に、必須のソフトウェアを導入しておく必要があります。Windowsの場合はWSL、macOSの場合はOrbStackがそれぞれ必要です。これらの導入手順については、ご自身で慣れた方法で行うか、こちらの<a href="../400.deploy/500.deploy-oceanbase-database-community-edition/800.deploy-oceanbase-desktop.md">ドキュメント</a>をご参照ください。</p></li>
  </ul>
</main>

1. インストールパッケージをダウンロードする

   [OceanBaseダウンロードセンター](https://jp.oceanbase.com/softwarecenter)にアクセスして、**OceanBaseデスクトップ版**セクションから、ご利用のOSに適したパッケージをダウンロードします。

2. OceanBase Desktopをインストールして起動する

   インストールを完了すると、データベース環境が`stop`状態で自動的に準備されています。画面に表示されている`start`ボタンをクリックすると、OceanBaseデータベースが起動します。

3. OceanBase Desktopに接続する

   データベースが起動したら、画面上の`connect`ボタンをクリックすることでOceanBase Detabaseに接続できます。ログイン後、SQL文を実行して基本的な機能をお試しいただけます。詳しくは[SQLの基本操作・MySQLモード](200.get-started-with-oceanbase-sql/200.basic-sql-operations-of-mysql-mode.md)をご覧ください。

## 関連ドキュメント

* OceanBaseデータベースCommunity Editionのデプロイ方法および適用シナリオの紹介については、[OceanBase データベース Community Edition デプロイの概要](../400.deploy/500.deploy-oceanbase-database-community-edition/100.deployment-overview.md) を参照してください。

* クラスタのクリーンアップに関する具体的な操作については、[古いクラスタのクリーンアップ](../400.deploy/600.clean-up-old-clusters.md) を参照してください。
