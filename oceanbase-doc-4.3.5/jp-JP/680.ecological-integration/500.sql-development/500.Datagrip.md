|description|  |
|---|---|
|keywords| |
|dir-name|DataGrip|
|dir-name-en|DataGrip|

# DataGripでOceanBaseデータベースに接続する

DataGripは、JetBrainsが開発した統合開発環境(IDE)であり、データベース管理とSQL開発に特化しています。データベース開発者とデータアナリストが、データベースの効率な管理とクエリ、複雑なSQLクエリの作成およびデータベースの設計と保守を実行できるよう支援します。本記事では、OceanBaseデータベースのMySQLテナントとmacOSオペレーティングシステムを例に、DataGripでOceanBaseデータベースに接続する方法を紹介します。

## 前提条件

* DataGripをダウンロードし、インストール済みであること。詳細については、[DataGripの公式Webサイト](https://www.jetbrains.com/datagrip/download/)を参照してください。

* 接続するOBServerノードのIPアドレスとDataGripが配置されているマシンとの間で、ネットワーク接続が確立されていることを確認してください。

* OceanBaseデータベースがインストール済みで、MySQLモードのテナントが作成されていること。

## 操作手順

### ステップ1：データベース接続文字列を取得する

OceanBaseデータベースのデプロイ担当者または管理者から、該当するデータベース接続文字列を取得します。例：

```
obclient -h$host -P$port -u$user_name -p$password -D$database_name
```

**パラメータの説明：**

* `$host`：OceanBaseデータベースへの接続IPアドレスを提供します。OceanBaseデータベースプロキシ(OceanBase Database Proxy、ODP)接続方式はODPアドレスを使用し、直接接続方式はOBServerノードのIPアドレスを使用します。
* `$port`：OceanBaseデータベースへの接続ポートを提供します。ODP接続方式のデフォルトポートは `2883` で、ODPデプロイ時にカスタマイズ可能です。直接接続方式のデフォルトポートは `2881` で、OceanBaseデータベースのデプロイ時にカスタマイズ可能です。
* `$database_name`：アクセスするデータベースの名前です。

    <main id="notice" type='notice'>
        <h4>注意</h4>
        <p>テナントに接続するユーザーに、データベースに対する <code>CREATE</code>、<code>INSERT</code>、<code>DROP</code>、および <code>SELECT</code> 権限が付与されていなければなりません。ユーザー権限の詳細については、<a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001974758">MySQLモードの権限分類</a>を参照してください。</p>
    </main>

* `$user_name`：テナントの接続アカウント。ODP接続の一般的な形式：`ユーザー名@テナント名#クラスタ名` または `クラスタ名:テナント名:ユーザー名`。直接接続方式の形式：`ユーザー名@テナント名`。
* `$password`：アカウントのパスワード。

接続文字列の詳細については、[OBClientを使用してOceanBaseテナントに接続する](https://en.oceanbase.com/docs/common-oceanbase-database-10000000001971649)を参照してください。

**例：**

```shell
obclient -hxxx.xxx.xxx.xxx -P2881 -utest_user001@mysql001 -p****** -Dtest
```

### ステップ2：DataGripでOceanBaseデータソースを作成し接続する

1. DataGripを初めて使用する場合は、ローカルコンピューターでDataGripを開き、**New Project** をクリックして新しいプロジェクトを作成します。

2. 作成したプロジェクトで、ページトップの <img src="https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/cloud/24v4/integrations/datagrip/database-explorer.png" width="18" align="top"> アイコンをクリックすると、Database Explorerコントロールパネルが開きます。

3. Database Explorerの左上隅の **+** > **Data Source** > **MySQL** > **MySQL** を選択します。

4. Data Sourceのポップアップで、**ステップ1：OceanBaseデータベース接続文字列を取得する** で取得した接続文字列に基づいて、以下の設定を完了します：

   |構成パラメータ|説明|
   |-----|----|
   |Name| カスタマイズしたData Sourceの名前。|
   |Host|接続文字列の `-h` パラメータから取得したOceanBaseデータベースの接続アドレス。|
   |User| 接続文字列の `-u` パラメータから取得したアカウント名、例：`test`。|
   |Password| 接続文字列の `-p` パラメータから取得したアカウントパスワード。|
   |Port| 接続文字列の `-P` パラメータから取得したOceanBaseデータベース接続ポート。|
   |Database| 接続文字列の `-D` パラメータから取得した、アクセスが必要なデータベース名。|

5. **Test Connection** をクリックして、接続が成功するかどうかテストします。

6. 接続成功のメッセージが表示された後、**OK** をクリックすると接続が完了します。

## 次の操作

接続が完了すると、DataGripを使用できます。DataGripの詳細な操作ガイドについては、[DataGrip公式使用ドキュメント](https://www.jetbrains.com/help/datagrip/getting-started.html)を参照してください。
