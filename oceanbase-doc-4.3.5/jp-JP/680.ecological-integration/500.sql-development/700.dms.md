|description|  |
|---|---|
|keywords| |
|dir-name|DMS|
|dir-name-en|DMS|

# DMSを使用したOceanBaseデータベースの管理

Alibaba Cloudデータ管理サービスDMS (Data Management Service)は、エンタープライズレベルのワンストップデータ管理プラットフォームです。データアセットの管理、データガバナンス、データベースの設計と開発、データ統合、データ開発、データ消費など、ライフサイクル全体にわたるデータベースの開発と運用保守機能を提供します。本記事では、DMSを使用してOceanBaseデータベースに接続し、管理する方法について説明します。

## 前提条件

* OceanBaseデータベースがデプロイ済みで、ユーザーのテナントが作成されていること。ユーザーテナントの作成の詳細情報については、[テナントの作成](https://en.oceanbase.com/docs/common-oceanbase-database-10000000001971591)を参照してください。

* DMSアカウントのロールがDBAまたはシステム管理者であること。[DMSコンソール](https://dms.alibabacloud.com/)のページ右上のユーザーアイコンをクリックすると、現在のアカウントに対応するロール情報を確認できます。

    <!-- ![1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/cloud/25V1/800.integration/dms/1.png) -->

## 操作手順

### ステップ1：データベース接続情報を取得する

OceanBaseデータベースのデプロイ担当者または管理者から、該当するデータベース接続文字列を取得します。例：

```shell
obclient -h$host -P$port -u$user_name -p$password -D$database_name
```

**パラメータの説明：**

* `$host`：OceanBaseデータベースへの接続IPアドレスを提供します。OceanBaseデータベースプロキシ(OceanBase Database Proxy、ODP)接続方式はODPアドレスを使用し、直接接続方式はOBServerノードのIPアドレスを使用します。
* `$port`：OceanBaseデータベースへの接続ポートを提供します。ODP接続方式のデフォルトポートは `2883` で、ODPデプロイ時にカスタマイズ可能です。直接接続方式のデフォルトポートは `2881` で、OceanBaseデータベースのデプロイ時にカスタマイズ可能です。
* `$database_name`：アクセス対象のデータベース名。

    <main id="notice" type='notice'>
        <h4>注意</h4>
        <p>テナントに接続するユーザーに、データベースに対する <code>CREATE</code>、<code>INSERT</code>、<code>DROP</code>、および <code>SELECT</code> 権限が付与されていなければなりません。ユーザー権限の詳細については、<a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001974758">MySQLモードの権限分類</a>を参照してください。</p>
    </main>

* `$user_name`：テナントの接続アカウント。ODP接続の一般的な形式：`ユーザー名@テナント名#クラスタ名` または `クラスタ名:テナント名:ユーザー名`。直接接続方式の形式：`ユーザー名@テナント名`。
* `$password`：アカウントのパスワード。

接続文字列の詳細については、[OBClientを使用してOceanBaseテナントに接続する](https://en.oceanbase.com/docs/common-oceanbase-database-10000000001971649)を参照してください。

### ステップ2：DMSコンソールでOceanBaseデータベースに接続する

1. [DMSコンソール](https://dms.alibabacloud.com/)にログインし、ページ左上隅の <img src="https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/cloud/25V1/800.integration/dms/button.png" align="top" width="20"> アイコンにマウスを移動して、左側のナビゲーションバーを展開します。次に、**すべての機能** > **インスタンス管理** を選択します。

    <!-- ![2](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/cloud/25V1/800.integration/dms/2.png) -->

2. **+ 新規追加** をクリックし、次に **インスタンスの新規作成** ページで **その他クラウド/セルフマネージド** タブを選択します。

3. **その他クラウド/セルフマネージド** タブで、作成したOceanBaseデータベースのテナントモードに基づいて、**OceanBase MySQL** または **OceanBase Oracle** を選択し、**基本情報** で以下の情報を入力します：

    | オプション | 説明 |
    |------|------|
    | インスタンスソース  | **インターネット** を選択します。|
    | インスタンスのリージョン  | DMSのリージョンに合わせて選択します。例：**中国(杭州)**。|
    | ログインアドレス | 前のステップ1で取得した接続文字列の `-h` パラメータから取得します。|
    | ポート      | 接続文字列の `-P` パラメータから取得したOceanBaseデータベース接続ポート。|
    | データベースアカウント | 接続文字列の `-u` パラメータから取得したアカウント名。|
    | データベースのパスワード | 接続文字列の `-p` パラメータから取得した、アカウントのパスワード。|

4. **接続テスト** をクリックし、接続が成功したことを示すメッセージが表示されたら、**確認** をクリックします。

5. DMSのトップページに戻り、データベースインスタンスリストを更新すると、**ログイン不要インスタンス** リストに、追加されたインスタンスの情報が表示されます。

    <!-- ![3](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/cloud/25V1/800.integration/dms/3.png) -->
