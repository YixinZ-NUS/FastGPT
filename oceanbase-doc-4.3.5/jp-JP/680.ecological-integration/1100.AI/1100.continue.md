|description|  |
|---|---|
|keywords| |
|dir-name|Continue|
|dir-name-en|Continue|
|tenant-type|MySQL Mode|

# OceanBase MCP ServerとContinueの連携

[MCP（Model Context Protocol）](https://modelcontextprotocol.io/introduction)は、Anthropic社が2024年11月に発表し、オープンソース化したプロトコルです。大規模言語モデル（LLM）が外部のツールやデータソースと直接やり取りできるよう設計されています。MCPを使えば、ユーザーがLLMの出力をコピー＆ペーストして手動で実行する必要はなく、LLMからツールへ直接指示を送り、そのままアクションを実行させることが可能になります。

[OceanBase MCP Server](https://github.com/oceanbase/mcp-oceanbase/tree/main/src/oceanbase_mcp_server)は、MCPプロトコルを介して大規模言語モデルとOceanBaseデータベースを連携させ、SQL文の実行を可能にするサーバーです。GitHubでオープンソースとして公開されており、対応するクライアントを利用すれば、プロジェクトのプロトタイプを素早く構築できます。

[Continue](https://continue.dev)は、MCP Serverと連携可能なIDEプラグインで、Visual Studio CodeとIntelliJ IDEAをサポートしています。

この記事では、ContinueとOceanBase MCP Serverを連携させて、バックエンドアプリケーションを迅速に構築する方法を紹介します。

## 前提条件

* OceanBaseデータベースのデプロイが完了し、MySQLモードのユーザーテナントが作成されていること。テナント作成の詳細については、[テナントの作成](https://en.oceanbase.com/docs/common-oceanbase-database-10000000001971591)を参照してください。

* [Python 3.11以降のバージョン](https://www.python.org/downloads/)と対応する[pip](https://pip.pypa.io/en/stable/installation/)をインストールします。お使いのマシンにインストールされているPythonのバージョンが古い場合は、Minicondaを使用してPython 3.11以降の新しい環境を作成することができます。詳細は[Minicondaインストールガイド](https://docs.anaconda.com/miniconda/install/)を参照してください。

* お使いのオペレーティングシステムに応じて、[Git](https://git-scm.com//downloads)をインストールします。

* Pythonパッケージマネージャーのuvをインストールします。インストール完了後、`uv --version`コマンドでインストールが成功したかを確認できます。

    ```shell
    pip install uv
    uv --version
    ```

* Visual Studio CodeまたはIntelliJ IDEAに`Continue`プラグインをインストールします。

    <!-- ![配置大模型API](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/cloud/integrations/AI/continue-1.png) -->

  * インストール完了後、`Add Models`をクリックして、Continueに大規模言語モデルのAPIを設定します。API設定の例は以下の通りです。

    ![大規模言語モデルのAPI設定](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/cloud/integrations/AI/continue-2.png)

    * 設定ファイルの例は以下の通りです。

        ```json
        name: Local Assistant
        version: 1.0.0
        schema: v1
        models:
            # モデル名
            - name: DeepSeek-R1-671B
            # モデルの提供元
            provider: deepseek
            # モデルのタイプ
            model: DeepSeek-R1-671B
            # モデルにアクセスするためのURLアドレス
            apiBase: *********
            # モデルにアクセスするためのAPIキー
            apiKey: ********
        # コンテキストプロバイダー
        context:
            - provider: code
            - provider: docs
            - provider: diff
            - provider: terminal
            - provider: problems
            - provider: folder
            - provider: codebase
        ```

## ステップ1：データベース接続情報を取得する

OceanBaseデータベースのデプロイ担当者または管理者に連絡し、対応するデータベース接続文字列を取得します。例：

```sql
obclient -h$host -P$port -u$user_name -p$password -D$database_name
```

**パラメータの説明：**

* `$host`：OceanBaseデータベースへの接続IPアドレスです。OceanBaseデータベースプロキシ(OceanBase Database Proxy、ODP)経由で接続する場合はODPのアドレスを、直接接続する場合はOBServerノードのIPアドレスを使用します。
* `$port`：OceanBaseデータベースの接続ポートです。ODP経由の接続ではデフォルトで`2883`が使用されますが、ODPのデプロイ時にカスタマイズ可能です。直接接続の場合はデフォルトで`2881`が使用され、OceanBaseデータベースのデプロイ時にカスタマイズできます。
* `$database_name`：アクセスするデータベースの名前です。

    <main id="notice" type='notice'>
        <h4>注意</h4>
        <p>テナントに接続するユーザーは、データベースに対する <code>CREATE</code>、<code>INSERT</code>、<code>DROP</code>、および <code>SELECT</code> 権限が付与されていなければなりません。ユーザー権限の詳細については、<a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001974758">MySQLモードの権限分類</a>を参照してください。</p>
    </main>

* `$user_name`：テナントへの接続アカウントです。ODP経由で接続する場合の一般的な形式は`ユーザー名@テナント名#クラスタ名`または`クラスタ名:テナント名:ユーザー名`。直接接続の場合は`ユーザー名@テナント名`となります。
* `$password`：アカウントのパスワードです。

接続文字列の詳細については、[OBClientを使用してOceanBaseテナントに接続する](https://en.oceanbase.com/docs/common-oceanbase-database-10000000001971649)を参照してください。

## ステップ2：OceanBase MCP Serverを設定する

### OceanBase MCP Serverリポジトリのクローン

下記のコマンドを実行して、ソースコードをローカルにダウンロードします。

```shell
git clone https://github.com/oceanbase/mcp-oceanbase.git
```

ソースコードのディレクトリに移動します。

```shell
cd mcp-oceanbase
```

### 依存関係のインストール

`mcp-oceanbase`ディレクトリで下記のコマンドを実行して仮想環境を作成し、依存関係をインストールします。

```shell
uv venv
source .venv/bin/activate
uv pip install .
```

### MCP Serversの追加と設定

1. ダイアログボックス上部のメニューバー右端のボタンをクリックし、MCPパネルを開きます。

    ![1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/cloud/integrations/AI/continue-3.png)

2. `MCP Serversを追加`をクリックします。

    <main id="notice" type='notice'>
    <h4>注意</h4>
    <p>MCPはContinueのエージェントモードでのみ使用できます。</p>
    </main>

    ![2](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/cloud/integrations/AI/continue-4.png)

3. 設定ファイルに情報を入力し、確認をクリックします。

    `/path/to/your/mcp-oceanbase/src/oceanbase_mcp_server`を`oceanbase_mcp_server`フォルダの絶対パスに、`OB_HOST`、`OB_PORT`、`OB_USER`、`OB_PASSWORD`、`OB_DATABASE`をご自身のデータベースの対応する情報に置き換える必要があります。

    ```json
    name: OceanBase
    version: 0.0.1
    schema: v1
    mcpServers:
        - name: OceanBase
            command: uv
            args:
            - --directory
            - /path/to/your/mcp-oceanbase/src/oceanbase_mcp_server
            - run
            - oceanbase_mcp_server
        env:
            OB_HOST: "****"
            OB_PORT: "***"
            OB_USER: "***"
            OB_PASSWORD: "***"
            OB_DATABASE: "***"
    ```

4. 設定が成功すると、以下のように表示されます。

    ![3](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/cloud/integrations/AI/continue-5.png)
