# データのインポート概要

本記事では、外部データをOceanBaseデータベースにインポートする方法について説明します。

OceanBaseデータベースでは、多様で柔軟なデータの取り込み方法が提供されており、さまざまなデータソースからデータベースにデータをインポートできます。インポート方法によって適用されるシナリオが異なるため、データソースのタイプやビジネスシナリオに応じて、適切なデータインポートツールを選択してデータを取り込むことができます。シナリオが複雑で多様化している中でも、複数のインポート方法を組み合わせて使用可能です。データの取り込み時には、データソースやデータファイルの形式に加えて、データインポートツールのサポート状況も考慮する必要があります。ビジネスシナリオでデータソースやデータファイルの形式が既に明確になっている場合は、データソースから始めて、データインポートツールと組み合わせてデータインポートプランを設計する必要があります。ビジネスで使い慣れているデータインポートツールがある場合は、ツールのサポート状況を考慮し、ビジネスシナリオと組み合わせてデータインポートの実現可能性を検討する必要があります。ここでは主にデータソースのタイプとツールの2つの観点からOceanBaseのデータ取り込みプランを見ていきます。

OceanBaseデータベースのデータインポートプランアーキテクチャは以下のとおりです：

<!-- ![](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer/ap/obap-import-structure.png) -->

## データソースのタイプから考えるインポートプラン

このセクションでは、一般的なデータソースでサポートされているインポートプランについて説明します。実際のシナリオに応じて適切なインポートプランを迅速に選択できるようサポートします。

| データソースの種類 | インポート方法 | 関連資料 |
| --- | --- | --- |
| <ul><li>ローカルファイル<br/> - NFS<br/> - NAS<br/> - 分散ファイルシステムHDFS</ul></li><ul><li>オブジェクトストレージ <br/> - Alibaba Cloud OSS<br/> - Amazon S3<br/> - Google Cloud GCS<br/> - Huawei Cloud OBS<br/> - Tencent Cloud COS | <ul><li>CSV、ORC、Parquet形式のファイルからインポートする場合、load dataとobloaderを使用してデータをデータベースにインポートできます。</ul></li><ul><li> データをデータベースにインポートしたくない場合は、外部テーブルを介してデータにアクセスできます。</ul></li><ul><li>HDFSファイルシステムからデータをインポートする場合、obloaderを使用するか、外部テーブルを使用してデータをインポートします。</ul></li><ul><li> インポート元のデータファイルが圧縮ファイルの場合、load dataを選択するか、外部テーブルを使用してデータにアクセスすることができます。</ul></li><ul><li>SQLファイルの場合は、LOAD DATA INFILEとobloaderを使用できます。 | <ul><li>obloaderの詳細については、[obloader使用ドキュメント](https://en.oceanbase.com/docs/obloader-obdumper-en)を参照してください。</ul></li><ul><li>LOAD DATAの操作については、[LOAD DATA (Oracleモード)](https://en.oceanbase.com/docs/common-oceanbase-database-10000000001975063)および [LOAD DATA (MySQLモード)](https://en.oceanbase.com/docs/common-oceanbase-database-10000000001974145)を参照してください。</ul></li><ul><li>外部テーブルの使用については、[外部テーブル(Oracleモード)](https://en.oceanbase.com/docs/common-oceanbase-database-10000000001974576)および [外部テーブル(MySQLモード)](https://en.oceanbase.com/docs/common-oceanbase-database-10000000001974568)を参照してください。</ul></li> |
| データベース：<ul><li>MaxCompute</ul></li><ul><li>StarRocks</ul></li><ul><li>Doris</ul></li><ul><li>HBase</ul></li><ul><li>Hologres</ul></li><ul><li>MySQL</ul></li><ul><li>Oracle</ul></li><ul><li>SQLServer</ul></li><ul><li>PostgreSQL </ul></li><ul><li>MongoDB </ul></li> | 利用可能なツールは複数あります。具体的なツールのサポート状況については、各ツールの公式サイトを参照してください。<ul><li>OMS</ul></li><ul><li>Flink</ul></li><ul><li>Canal</ul></li><ul><li>datax</ul></li><ul><li>CloudCanal </ul></li> | <ul><li>OMSの詳細については、[OMS使用ドキュメント](https://en.oceanbase.com/docs/oms-en)を参照してください。</ul></li><ul><li>Flinkの詳細については、[Flink CDCを使用してMySQLデータベースからOceanBaseデータベースにデータを同期する](https://en.oceanbase.com/docs/common-oceanbase-database-10000000001971194)を参照してください。</ul></li><ul><li>Canalの詳細については、[Canalを使用してMySQLデータベースからOceanBaseデータベースにデータを同期する](https://en.oceanbase.com/docs/common-oceanbase-database-10000000001971201)を参照してください。</ul></li><ul><li>CloudCanalの詳細については、[CloudCanalを使用してMySQLデータベースからOceanBaseデータベースにデータを移行する](https://en.oceanbase.com/docs/common-oceanbase-database-10000000001971198)を参照してください。</ul></li> |
| Spark |  OceanBase Spark Connector | Sparkに関する詳細については、[OceanBase Spark Connector](https://github.com/oceanbase/spark-connector-oceanbase)を参照してください。 |


## データインポートツールから考えるインポートプラン

このセクションでは、一般的なデータインポートツールと対応するインポートプランについて説明します。実際のシナリオに応じて適切なインポートプランを迅速に選択できるようサポートします。

| ツール名 | 適用シナリオ | サポートするデータソース | 関連資料 |
| --- | --- | --- | --- |
| LOAD DATA構文 | 大規模データインポートに適用。 | 以下の場所にあるCSV / ORC / Apache Parquet / 圧縮ファイルをサポート<ul><li>オブジェクトストレージ</ul></li><ul><li>HDFS</ul></li><ul><li>サーバー側(OBServerノード)</ul></li><ul><li>クライアント側(ローカル) | LOAD DATAの操作については、[LOAD DATA (Oracleモード)](https://en.oceanbase.com/docs/common-oceanbase-database-10000000001975063)および [LOAD DATA (MySQLモード)](https://en.oceanbase.com/docs/common-oceanbase-database-10000000001974145)を参照してください。</ul></li> |
| obloader |  比較的大規模なデータインポートに適用。 | 以下の場所にあるCSV/Apache Parquet/Apache ORC/SQLファイルをサポート<ul><li>ローカルディスク</ul></li><ul><li>オブジェクトストレージ</ul></li><ul><li>HDFS</ul></li> | obloaderの詳細については、[obloader使用ドキュメント](https://en.oceanbase.com/docs/obloader-obdumper-en)を参照してください。 |
| 外部テーブル | ログ分析、履歴データ分析、マルチソースデータ統合、データレイク分析、レイクハウス高速化などのシナリオに適用。 | 以下の場所にあるCSV/ORC/Apache Parquet/圧縮ファイルをサポート<ul><li>オブジェクトストレージ</ul></li><ul><li>HDFS</ul></li><ul><li>サーバー側(OBServerノード)</ul></li><ul><li>クライアント側(ローカル) | 外部テーブルの使用については、[外部テーブル(Oracleモード)](https://en.oceanbase.com/docs/common-oceanbase-database-10000000001974576)および [外部テーブル(MySQLモード)](https://en.oceanbase.com/docs/common-oceanbase-database-10000000001974568)を参照してください。 |
| INSERT SQL  | <ul><li>INSERT INTO VALUESは内部テーブルへの少量データ書き込みに適用。</ul></li><ul><li>INSERT INTO SELECT FROMはターゲットテーブルへの内部テーブルまたは外部テーブルのクエリ結果書き込みに適用。</ul></li>|明示的に指定されたデータ、内部テーブルまたは外部テーブル<ul><li>内部テーブル</ul></li><ul><li>外部テーブル</ul></li> | INSERT SQLの使用については、[INSERT (Oracleモード)](https://en.oceanbase.com/docs/common-oceanbase-database-10000000001975129)および [INSERT (MySQLモード)](https://en.oceanbase.com/docs/common-oceanbase-database-10000000001974137)を参照してください。 |
| Flink | Flinkからのリアルタイムデータインポートに適用。<ul><li>[Flink JDBC SQL Connector](https://nightlies.apache.org/flink/flink-docs-master/docs/connectors/table/jdbc/)</ul></li><ul><li>[Flink OceanBase Connector](https://nightlies.apache.org/flink/flink-cdc-docs-release-3.0/docs/connectors/flink-sources/oceanbase-cdc/) | Flink公式Webサイトを参照 | 詳細については、[Flink CDCを使用してMySQLデータベースからOceanBaseデータベースにデータを同期する](https://en.oceanbase.com/docs/common-oceanbase-database-10000000001971194)を参照してください。 |
| Canal  | Canalからのリアルタイムデータインポートに適用。 | Canal公式Webサイトを参照 | 詳細については、[Canalを使用してMySQLデータベースからOceanBaseデータベースにデータを同期する](https://en.oceanbase.com/docs/common-oceanbase-database-10000000001971201)を参照してください。 |
| OMS  | 大規模なデータベース間での移行と同期に適用。 | <ul><li>OceanBase</ul></li><ul><li>MySQL</ul></li><ul><li>Oracle</ul></li><ul><li>DB2 LUW</ul></li><ul><li>TiDB</ul></li><ul><li>PostgreSQL</ul></li><ul><li>PolarDB-X 1.0などのデータベース</ul></li> |  OMSの詳細については、[OMS使用ドキュメント](https://en.oceanbase.com/docs/oms-en)を参照してください。 |
| DataX  | MySQL、Oracleなどのリレーショナルデータベース、HDFS、およびHiveなどのさまざまなデータソース間でのデータ同期に適用。DataXはデータ量に制限がなく、単一テーブルを個別に移行できます。移行速度は60 MB/Sに達します。 | DataX公式Webサイトを参照 | 詳細については、[DataXを使用してMySQLテーブルデータをOceanBaseデータベースに移行する](https://en.oceanbase.com/docs/common-oceanbase-database-10000000001971199)を参照してください。 |
| CloudCanal | MySQL、Oracle、PostgreSQLなどのデータベースからOceanBaseデータベースへのデータ移行または同期に適用。 | CloudCanal公式Webサイトを参照 | 詳細については、[CloudCanalを使用してMySQLデータベースからOceanBaseデータベースにデータを移行する](https://en.oceanbase.com/docs/common-oceanbase-database-10000000001971198)を参照してください。 |
