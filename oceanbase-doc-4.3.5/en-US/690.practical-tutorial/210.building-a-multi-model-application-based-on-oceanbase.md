# Build a cultural tourism assistant with OceanBase multi-model integration

This topic describes how to build a cultural tourism assistant using OceanBase multi-model integration.

## Concept

:::collapse

* Multi-model integration: Multi-model integration is an important aspect of OceanBase's unified product vision. In this topic, multi-model integration mainly refers to hybrid retrieval technology for multiple data types. OceanBase supports integrated queries across vector data, spatial data, document data, and scalar data. With support for various indexes—including vector, spatial, and full-text indexes—it delivers high-performance hybrid search capabilities.

  <!-- ![Multi-modal fusion diagram](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/cloud/tutorial/AI/%E6%96%87%E6%97%85%E5%B0%8F%E5%8A%A9%E6%89%8B%E5%A4%9A%E6%A8%A1%E8%9E%8D%E5%90%88%E7%A4%BA%E6%84%8F%E5%9B%BE-1.jpg) -->

* Large language model (LLM): A large language model is a deep learning model trained on vast amounts of text data. It can generate natural language text or understand the meaning of language. Large language models are capable of handling a variety of natural language tasks, such as text classification, question answering, and conversation, making them an important pathway toward artificial intelligence.

:::

## Prerequisites

* You have deployed OceanBase V4.3.3 or later and created a MySQL-compatible tenant. For more information about deploying OceanBase clusters, see [Deployment overview](../400.deploy/100.deploy-overview.md).

* The MySQL-compatible tenant has the privileges to insert and query data. For more information about setting privileges, see [Directly grant privileges](../600.manage/500.security-and-permissions/300.access-control/200.user-and-permission/200.permission-of-mysql-mode/200.authority-of-mysql-mode.md).

* You have created a database. For more information about creating a database, see [Create a database](../300.develop/100.application-development-of-mysql-mode/300.database-object-planning-of-mysql-mode/100.create-database-of-mysql-mode-in-develop.md).

* Vector search is enabled. For more information about vector search, see [Perform vector search by using SQL statements](../640.ob-vector-search/120.ob-vector-search-quick-start/100.ob-vector-search-sql-quick-start.md).

    ```shell
    obclient> ALTER SYSTEM SET ob_vector_memory_limit_percentage = 30;
    ```

* (Recommended, not required) Install [Python 3.10 and later](https://www.python.org/downloads/) and the corresponding [pip](https://pip.pypa.io/en/stable/installation/). If your machine has a low Python version, you can use Miniconda to create a new Python 3.10 or later environment. For more information, see [Miniconda installation guide](https://docs.anaconda.com/miniconda/install/).

    ```shell
    conda create -n obmms python=3.10 && conda activate obmms
    ```

* Install [Poetry](https://python-poetry.org/docs/). You can refer to the following command:

    ```shell
    python3 -m ensurepip
    python3 -m pip install poetry
    ```

## Step 1: Obtain the LLM API key

1. Register for an account with [Alibaba Cloud Model Studio](https://bailian.console.alibabacloud.com/), activate the model service, and obtain an API key.

![Click to activate the model service](https://obportal.s3.ap-southeast-1.amazonaws.com/doc/img/OceanBase-Database-EN/1-activate.jpg)

![Confirm to activate the model service](https://obportal.s3.ap-southeast-1.amazonaws.com/doc/img/OceanBase-Database-EN/2.confirm.jpg)

![Alibaba Cloud Model Studio](https://obportal.s3.ap-southeast-1.amazonaws.com/doc/img/OceanBase-Database-EN/3-create-key.jpg)

<!-- ![Obtain API Key](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/cloud/tutorial/AI/%E7%99%BE%E7%82%BC3.1.png) -->

## Step 2: Obtain a geographic service API key

Register on the Amap (Gaode) Open Platform and obtain an API key for the [Basic LBS service](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/cloud/tutorial/%E9%AB%98%E5%BE%B72.jpg).

<!-- ![Go to the Application Management page](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/cloud/tutorial/%E9%AB%98%E5%BE%B71.jpg)

![Click Create Application](url-placeholder-1b06242c-4688-4f9d-9bd3-a79e2dbb8dd8)

![Enter the application name and type to create an application](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/cloud/tutorial/%E9%AB%98%E5%BE%B73.1.jpg)

![Add Key](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/cloud/tutorial/%E9%AB%98%E5%BE%B74.jpg)

![Edit Key information](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/cloud/tutorial/%E9%AB%98%E5%BE%B75.1.jpg)

![Generate and obtain the Key](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/cloud/tutorial/AI/%E9%AB%98%E5%BE%B76.1.png) -->

## Step 3: Download the public dataset

Download the [China City Attraction Details](https://www.kaggle.com/datasets/audreyhengruizhang/china-city-attraction-details) dataset from Kaggle.

## Step 4: Build your cultural tourism assistant

### Clone the project repository

1. Clone the latest project repository.

    ```shell
    git clone https://github.com/oceanbase-devhub/ob-multi-model-search-demo.git
    cd ob-multi-model-search-demo
    ```

2. Move the downloaded `archive` dataset ZIP package to the `ob-multi-model-search-demo` project folder, rename it to `citydata`, and decompress it.

    ```shell
    # Please modify the path to the actual location of archive.zip.
    mv ./archive.zip ./citydata.zip
    unzip ./citydata.zip
    ```

### Install dependencies

Run the following command in the project root directory to install dependencies.

```shell
poetry install
```

### Set environment variables

Set the environment variables in the `.env` file:

```shell
vim .env
```

You need to update the `OB_`-prefixed variables with your database connection information, and manually add the following variables: update `DASHSCOPE_API_KEY` with the API key obtained from the Alibaba Cloud Tongyi Lab console, and update `AMAP_API_KEY` with the API key obtained from the Alibaba Cloud AMap API service. Then, save the file.

```text
# Host address in the database connection string
OB_URL="******"
OB_USER="******"
OB_DB_NAME="******"
# Password in the database connection string
OB_PWD="******"
# Optional SSL CA file path in the database connection string. If you do not need SSL encryption, remove this parameter.
OB_DB_SSL_CA_PATH="******"

# Manually add LLM API key
DASHSCOPE_API_KEY="******"
# Manually add AMap API key
AMAP_API_KEY="******"
```

### Import data

In this step, we will import the data from the downloaded dataset into OceanBase.

<main id="notice" type='notice'>
  <h4>Notice</h4>
  <p>For the first build, we recommend that you select only a portion of the data (such as attractions starting with the letter A) for import. Importing all data will take a long time.</p>
</main>

```shell
python ./obmms/data/attraction_data_preprocessor.py
```

If the following progress is displayed, the data is being successfully imported.

```text
...
./citydata/Changde.csv:
100%|███████████████████████████████████████████████████████████████████████████| 100/100 [00:04<00:00, 20.77it/s]
./citydata/Weinan.csv:
100%|█████████████████████████████████████████████████████████████████████████████| 90/90 [00:13<00:00,  6.54it/s]
...
```

### Start the UI chat interface

Run the following command to start the chat interface:

```bash
poetry run streamlit run ./ui.py
```

If no web page is directly displayed, you can visit the URL shown in the terminal to open the tourism assistant application.

```bash
  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8501
  Network URL: http://172.xxx.xxx.xxx:8501
```

<!-- ## Application display

![tourism-assistant-ui](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/cloud/tutorial/AI/%E6%96%87%E6%97%85%E5%B0%8F%E5%8A%A9%E6%89%8B%E6%9E%84%E5%BB%BA%E5%B1%95%E7%A4%BA%EF%BC%88%E4%B8%AD%EF%BC%892.0.jpg)

## Online demo experience

In addition to building your own tourism assistant, you can also visit [Tourism Assistant](https://www.oceanbase.com/demo/multi-model-query) to log in and experience the online demo application. The official website entry for the demo interface is **Resource and Service - Learning - Online Experience - Online Demo**. The following is the interface display:

![tourism-assistant-demo](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/cloud/tutorial/AI/%E5%A4%9A%E6%A8%A1%E8%9E%8D%E5%90%88livedemo%E5%B1%95%E7%A4%BA%E5%9B%BE.png) -->