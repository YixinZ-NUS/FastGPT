# Build an image search application with OceanBase Database

## Background information

In the information explosion era, users often need to quickly search for the information they need from massive amounts of data. Efficient search systems are required to quickly locate content of interest in online literature databases, e-commerce product catalogs, and rapidly growing multimedia content libraries. As the amount of data continues to increase, traditional keyword-based search methods cannot meet users' needs for both accuracy and speed. This is where vector search technology comes in. It encodes different types of data, such as text, images, and audio, into mathematical vectors and performs search operations in the vector space. This allows the system to capture the deep semantic information of data and provide more accurate and efficient search results.

This topic will show you how to build your own image search application using OceanBase's vector search technology.

## Architecture

The image search application stores a library of images as vectors within a database. Users can upload the image they want to search for through the UI interface. The application then converts the image into a vector, searches for similar vectors in the database, and returns the results. The similar images are displayed on the UI interface.

![building-a-graph-search-application-based-on-oceanBase](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.3.3/practical-tutorial/building-a-graph-search-application-based-on-oceanBase.png)

## Prerequisites

* You have deployed OceanBase Database V4.3.3 or later and created a MySQL tenant. For more information about how to deploy an OceanBase cluster, see [Deployment overview](../400.deploy/100.deploy-overview.md).

* The MySQL tenant you created has the `INSERT` and `SELECT` privileges. For more information about how to configure privileges, see [Grant direct privileges](../600.manage/500.security-and-permissions/300.access-control/200.user-and-permission/200.permission-of-mysql-mode/200.authority-of-mysql-mode.md).

* You have created a database. For more information about how to create a database, see [Create a database](../300.develop/100.application-development-of-mysql-mode/300.database-object-planning-of-mysql-mode/100.create-database-of-mysql-mode-in-develop.md).

* The vector search feature is enabled for the database. For more information about the vector search feature, see [Perform fast vector search by using SQL](../640.ob-vector-search/120.ob-vector-search-quick-start/100.ob-vector-search-sql-quick-start.md).

    ```shell
    obclient> ALTER SYSTEM SET ob_vector_memory_limit_percentage = 30;
    ```

* You have prepared the required images. If you do not have enough images for testing, you can use the image datasets from open-source websites.
* You have installed Python 3.9 or later.

* You have installed Poetry.

    ```shell
    python3 -m ensurepip
    python3 -m pip install poetry
    ```

## Build your image search application

### Clone the code repository

```shell
git clone https://gitee.com/oceanbase-devhub/image-search.git
cd image-search
```

### Install dependencies

```shell
poetry install
```

### Set environment variables

```shell
cp .env.example .env
# Update the database information in the .env file.
vi .env
```

Update the contents of the `.env` file:

```shell
HF_ENDPOINT=https://hf-mirror.com

DB_HOST="127.0.0.1"   ## Set the IP address of the tenant.
DB_PORT="2881"   ## Set the port.
DB_USER="root@test" ## Set the tenant and username.
DB_NAME="test"   ## Set the database name.
DB_PASSWORD=""  ## Set the password of the tenant user.
```

### Start the image search program

```shell
poetry run streamlit run --server.runOnSave false image_search_ui.py
```

The return result is as follows:

```shell
Collecting usage statistics. To deactivate, set browser.gatherUsageStats to false.

    You can now view your Streamlit app in your browser.

    Local URL: http://localhost:8501
    Network URL: http://xxx.xxx.xxx.xxx:8501
    External URL: http://xxx.xxx.xxx.xxx:8501
```

## Example

You need to prepare some images and place them in a folder on your **server**, update the **Loading Setting** in the UI with the absolute path to the directory where the images are stored on the server, and click **Load Images**.

If you do not have enough images for testing, you can refer to image datasets from major open-source websites.

![image-search-ui](https://obportal.s3.ap-southeast-1.amazonaws.com/doc/img/OceanBase-Database-EN/433/imageSearch.png)

<!-- ## Online Demo experience

In addition to building your own image search application, you can also visit [Mengshou Sosou](https://www.oceanbase.com/demo/image-search) to try out the online demo application. The official website entry for the demo interface is **Resources and Services - Learning - Online Experience - Online Demo**. The following is the interface display:

![image-search-demo](https://obportal.s3.ap-southeast-1.amazonaws.com/doc/img/OceanBase-Database-EN/433/imageSearch.png) -->
