# Create a tenant

You can create a tenant for a cluster by using obshell in two ways:

- Call the API

- Use obshell commands

This topic describes how to create a tenant by using obshell for a three-node OceanBase cluster.

## Prerequisites

- obshell has managed the OceanBase cluster. For more information about how to determine whether obshell is managing a cluster and how to take over a cluster, see [Take over a non-obshell-deployed cluster](../200.cluster-management/300.take-over-non-obshell-deployed-clusters.md).

- All OceanBase servers in the OceanBase cluster and obshell are running.

## Deployment mode

The following table describes the roles of the three servers (obshell uses the default port 2886):

|     Role      |    IP address    |          Description          |
| ------------- | ---------- | ---------------------- |
| OBServer node | 10.10.10.1 | Zone 1 of OceanBase Database |
| OBServer node | 10.10.10.2 | Zone 2 of OceanBase Database |
| OBServer node | 10.10.10.3 | Zone 3 of OceanBase Database |

## Create a tenant by using the API

<main id="notice" type='explain'>
  <h4>Note</h4>
  <p>obshell will perform security verification on the called API. Therefore, you must encrypt the request before you call the API and configure the encrypted request header (<code>${request_headers}</code>) and request body (<code>${request_body}</code>) in the curl command. For more information, see <a href='../../400.obshell-api-reference/20.api-hybrid-encryption.md'>API hybrid encryption</a>. </p>
</main>

### Step 1: Create a resource specification

You can call the `POST /api/v1/unit/config` API of any obshell to create a resource specification.

:::tab

tab CLI

For more information about how to call the API in the CLI, see [Create a resource specification](../../400.obshell-api-reference/300.unit-management/100.create-unit.md).

```shell
[admin@test001 ~]$ curl -H "Content-Type: application/json" -H 'X-OCS-Header:${request_headers}' -X POST -d '${request_body}' http://10.10.10.1:2886/api/v1/unit/config
```

The request body before encryption is as follows:

```shell
{
    "name":"unit_1", 
    "memory_size": "5GB",
    "max_cpu": 3,
}
```

tab Python

For more information about how to request the API by using obshell-sdk-python, see [Create a resource specification](../../500.obshell-sdk-reference/100.python/300.unit-management/100.create-unit-of-python.md).

```python
...
client = ClientSet("10.10.10.1", 2886, PassswordAuth("****"))
client.v1.create_resource_unit_config("unit_1", memory_size="5G", max_cpu=8)
...
```

tab GO

For more information about how to request the API by using obshell-sdk-go, see [Create a resource specification](../../500.obshell-sdk-reference/200.go/300.unit-management/100.create-unit-of-go.md).

```go
...
client, err := services.NewClientWithPassword("10.10.10.1", 2886, "********")
    if err != nil {
        fmt.Print(err)
        return
    }
if err := client.V1().CreateResourceUnitConfig("unit_1", "5G", 8); err != nil {
  fmt.Print(err)
  return
}
...
```

:::

### Step 2: Create a tenant

You can call the `POST /api/v1/tenant` API of any obshell to create a tenant based on the specified resource specification.

:::tab

tab CLI

For more information about how to call the API in the CLI, see [Create a tenant](../../400.obshell-api-reference/500.tenant-management/100.create-tenant.md). This API creates an asynchronous O&M task. For more information about how to query the task progress, see [Get task details](../../400.obshell-api-reference/1000.task-management/2000.get-dag-detail.md). Wait for the task to complete, and then the tenant is created.

```shell
[admin@test001 ~]$ curl -H "Content-Type: application/json" -H 'X-OCS-Header:${request_headers}' -X POST -d '${request_body}' http://10.10.10.1:2886/api/v1/tenant
```

The request body before encryption is as follows:

```shell
{
    "name": "tenant_1",
    "zone_list": [
        {
            "name": "zone1",
            "unit_config_name": "unit_1",
            "unit_num": 1
        },
        {
            "name": "zone2",
            "unit_config_name": "unit_1",
            "unit_num": 1
        },
        {
            "name": "zone3",
            "unit_config_name": "unit_1",
            "unit_num": 1
        }
    ],
}
```

tab Python

For more information about how to request the API by using obshell-sdk-python, see [Create a tenant](../../500.obshell-sdk-reference/100.python/500.tenant-management/100.create-tenant-of-python.md).

```python
...
client = ClientSet("10.10.10.1", 2886, PassswordAuth("****"))
client.v1.create_tenant_sync("tenant_1", [ZoneParam("zone1", 'unit_1', 1),
                                    ZoneParam("zone2", 'unit_1', 1),
                                    ZoneParam("zone3", 'unit_1', 1)])
...
```

tab GO

For more information about how to request the API by using obshell-sdk-go, see [Create a tenant](../../500.obshell-sdk-reference/100.python/500.tenant-management/100.create-tenant-of-python.md).

```go
...
req := client.V1().NewCreateTenantRequest("tenant_1", []v1.ZoneParam{
        {
            Name:           "zone1",
            ReplicaType:    "FULL",
            UnitConfigName: "unit_1",
            UnitNum:        1,
        },
        {
            Name:           "zone2",
            ReplicaType:    "FULL",
            UnitConfigName: "unit_1",
            UnitNum:        1,
        },
        {
            Name:           "zone3",
            ReplicaType:    "FULL",
            UnitConfigName: "unit_1",
            UnitNum:        1,
        },
    })
    if _, err = client.V1().CreateTenantSyncWithRequest(req); err != nil {
        fmt.Print(err)
    }
...
```

:::

### Step 3: View tenant information

You can call the `GET /api/v1/tenant/:name` API of any obshell to view the information of a tenant.

:::tab

tab CLI

For more information about how to call the API in the CLI, see [Query tenant information](../../400.obshell-api-reference/500.tenant-management/200.view-tenant.md).

```shell
[admin@test001 ~]$ curl -H "Content-Type: application/json" -H 'X-OCS-Header:${request_headers}' -X GET http://10.10.10.1:2886/api/v1/tenant/tenant_1
```

tab Python

For more information about how to request the API by using obshell-sdk-python, see [Query tenant information](../../500.obshell-sdk-reference/100.python/500.tenant-management/200.view-tenant-of-python.md).

```python
...
client = ClientSet("10.10.11", 2886, PasswordAuth("****"))
tenant_info = client.v1.get_tenant_info("tenant_1")
...
```

tab GO

For more information about how to request the API by using obshell-sdk-go, see [Query tenant information](../../500.obshell-sdk-reference/200.go/500.tenant-management/200.view-tenant-of-go.md).

```go
...
client, err := services.NewClientWithPassword("10.10.10.1", 2886, "****")
tenant, err := client.V1().GetTenantInfo("tenant_1")
...
```

:::

## Create a tenant by using obshell commands

### Step 1: Create a resource specification

You can execute the following command on any node to create a resource specification. For more information about the command, see [obshell unit commands](../../300.obshell-clients/220.unit-commands.md) and the **obshell unit create** section.

```shell
[admin@test001 ~]$ /home/admin/oceanbase/bin/obshell unit create unit_1 -m 5G -c 8
```

### Step 2: Create a tenant

You can execute the following command on any node to create a tenant. For more information about the command, see [obshell tenant commands](../../300.obshell-clients/250.tenant-commands.md) and the **obshell tenant create** section.

```shell
[admin@test001 ~]$ /home/admin/oceanbase/bin/obshell tenant create tenant_1 -u unit_1
```

### Step 3: Query tenant information

You can execute the following command on any node to query the information of a tenant. For more information about the command, see [obshell tenant commands](../../300.obshell-clients/250.tenant-commands.md) and the **obshell tenant show** section.

```shell
[admin@test001 ~]$ /home/admin/oceanbase/bin/obshell tenant show tenant_1
```