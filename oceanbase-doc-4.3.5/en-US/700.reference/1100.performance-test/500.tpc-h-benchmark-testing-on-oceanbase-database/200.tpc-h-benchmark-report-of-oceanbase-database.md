|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||

# TPC-H test report of OceanBase Database

This topic introduces the test environment, testing plan, and detailed test results for the TPC-H test.

## Test environment

The deployment environment uses Alibaba Cloud Elastic Compute Service (ECS) as an example.

* Hardware configuration  

    | Service type | ECS type | Instance count | Number of cores | Memory |
    | --- | --- | --- | --- | --- |
    | OceanBase Database  | ecs.r8i.8xlarge | 3 | 32C | 256G <br>Each instance has a log disk of 400 GB and a data disk of 1200 GB, both with the performance level of PL1. |

* Software versions  

    | Service type | Software version |
    | --- | --- |
    | OceanBase Database |  <ul><li>Enterprise Edition: OceanBase 4.3.5.0</li> <li>Community Edition: OceanBase_CE 4.3.5.0 </li></ul>|
    | TPC-H           | V3.0.0 |
    | OS              | CentOS Linux release 7.9.2009 (Core) |

* Tenant specifications

    ```sql
    obd cluster tenant create obperf -n tpcc_tenant --max-cpu=28 --memory-size=180G -–zone-list=zone1,zone2,zone3 -–primary-zone=RANDOM  --locality=F@zone1,F@zone2,F@zone3 --charset=utf8 -s 'ob_tcp_invited_nodes="%"' --optimize=htap
    ```

    <main id="notice" type='explain'>
      <h4>Note</h4>
      <p>In this example, <code>--optimize=htap</code> is the default workload type. In a production environment, select an appropriate workload type based on your cluster type. </p>
    </main>

## Test solution

* Deploy an OceanBase Database cluster using obd. The TPC-H client must run on a single server as the stress machine. You do not need to deploy ODP. Directly connect to any server.

* The OceanBase cluster consists of three nodes with a 1:1:1 configuration. After the cluster is deployed, create a tenant and a user (`sys` is an built-in system tenant for cluster management. Do not use the `sys` tenant for testing.) for running the TPC-H test. Set the `primary_zone` of the tenant to RANDOM.

* The amount of test data is 100 GB.

* For more information, see [Perform the TPC-H benchmark with OceanBase Database](../500.tpc-h-benchmark-testing-on-oceanbase-database/100.run-the-tpc-h-benchmark-on-oceanbase-database.md).

## Test results

The TPC-H test results are for data sizes of 100 GB and 1 TB, covering `hot run`, `first run`, and `cold run` scenarios. The tests were conducted with 96 concurrent threads.

| Query      |      100G                    |100G                    |100G                    |     1T                      |     1T                      |     1T     |
|------------|------------------|------------------|------------------|------------------|------------------|------------------|
|    -      | hot run(s)  | first run(s) | cold run(s)  | hot run(s)   | first run(s) | cold run(s)  |
| Concurrency |   parallel(96)  |   parallel(96)   |   parallel(96)   |   parallel(96)   |   parallel(96)   |   parallel(96)   |
| Q1         |      0.73       |       0.77       |      1.99        |      11.55       |      19.23       |      26.61       |
| Q2         |      0.09       |       0.14       |      0.38        |       0.58       |       1.29       |       4.72       |
| Q3         |      0.24       |       0.28       |      2.43        |       4.69       |       6.57       |      29.96       |
| Q4         |      0.19       |       0.20       |      2.92        |       1.85       |      12.70       |      32.57       |
| Q5         |      0.35       |       0.81       |      6.34        |       2.95       |      12.27       |      68.88       |
| Q6         |      0.02       |       0.04       |      0.62        |       0.09       |       0.12       |       3.39       |
| Q7         |      0.38       |       0.48       |      2.21        |       2.93       |       3.19       |      27.50       |
| Q8         |      0.31       |       0.54       |      8.23        |       2.01       |      13.95       |      91.46       |
| Q9         |      0.87       |       0.96       |      8.72        |      10.74       |      11.39       |      98.42       |
| Q10        |      0.25       |       0.26       |      3.31        |       2.69       |       5.66       |      38.16       |
| Q11        |      0.15       |       0.17       |      0.50        |       0.88       |       1.68       |       6.00       |
| Q12        |      0.10       |       0.11       |      0.57        |       0.90       |       1.07       |       7.59       |
| Q13        |      0.53       |       0.55       |      1.96        |       6.11       |      14.36       |      27.99       |
| Q14        |      0.09       |       0.11       |      0.28        |       0.94       |       0.95       |       1.19       |
| Q15        |      0.23       |       0.23       |      0.41        |       0.90       |       0.89       |       1.21       |
| Q16        |      0.25       |       0.27       |      0.38        |       1.57       |       1.66       |       2.10       |
| Q17        |      0.15       |       0.16       |      4.94        |       1.03       |       1.21       |      49.45       |
| Q18        |      0.76       |       0.81       |      2.02        |      10.71       |      10.85       |      27.92       |
| Q19        |      0.17       |       0.20       |      4.15        |       1.37       |       1.64       |      50.25       |
| Q20        |      0.15       |       0.18       |      1.03        |       0.78       |       2.69       |      13.32       |
| Q21        |      0.69       |       0.81       |      4.37        |       6.68       |      11.50       |      57.30       |
| Q22        |      0.17       |       0.17       |      0.67        |       1.46       |       1.46       |       6.91       |
| total cost |      6.87       |       8.25       |      58.43       |       73.41      |       136.33     |      672.90      |