|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|MySQL Mode|
|machine-translation||

# GV$OB_OPT_STAT_GATHER_MONITOR

<main id="notice" type='explain'>
  <h4>Note</h4>
  <p>This view is introduced since OceanBase Database V4.2.0. </p>
</main>

## Purpose

The `GV$OB_OPT_STAT_GATHER_MONITOR` view displays the real-time status of statistics collection tasks in all OBServer nodes of the current tenant.

## Columns

| **Column** | **Type** | **Nullable?** | **Description** |
| --- | --- | --- | --- |
| TENANT_ID | bigint(20) | NO | The ID of the tenant to which the collection task belongs. |
| SVR_IP | varchar(46) | NO | The IP address of the OBServer node where the collection task resides. |
| SVR_PORT | bigint(20) | NO | The port number of the OBServer node where the collection task resides. |
| SESSION_ID | bigint(20) | NO | The ID of the session to which the collection task belongs. For V4.3.x:<ul><li>Before V4.3.5 BP2:<br>In all connection modes (direct mode/ODP mode), this field indicates the server session ID.</li><li>V4.3.5 BP2 and later versions:<ul><li>In direct mode:<br>This field indicates the server session ID.</li><li>In ODP mode:<ul><li>When the ODP parameter <code>client_session_id_version = 2</code> is set, this field indicates the client session ID.</li><li>When <code>client_session_id_version = 1</code>, this field indicates the server session ID.</li></ul></li></ul></li></ul>  |
| TRACE_ID | varchar(64) | NO | The ID of the trace to which the collection task belongs. |
| TASK_ID | varchar(36) | NO | The ID of the collection task, which is generated based on the universally unique identifier (UUID) and is globally unique. |
| TYPE | varchar(16) | NO | The type of the collection task. |
| TASK_START_TIME | datetime(6) | NO | The start time of the collection task. |
| TASK_DURATION_TIME | bigint(20) | NO | The duration of the collection task, in microseconds. |
| TASK_TABLE_COUNT | bigint(20) | NO | The number of tables whose statistics need to be collected by the collection task. |
| COMPLETED_TABLE_COUNT | bigint(20) | NO | The number of tables whose statistics have been collected by the collection task. |
| RUNNING_TABLE_OWNER | varchar(128) | NO | The username of the owner of the table whose statistics are being collected by the collection task. |
| RUNNING_TABLE_NAME | varchar(256) | NO | The name of the table whose statistics are being collected by the collection task. |
| RUNNING_TABLE_DURATION_TIME | bigint(20) | NO | The duration that has been taken by the collection task to collect statistics of the table. |

## Sample query

Query the real-time status of statistics collection tasks in the user tenant on all nodes.

```shell
obclient> SELECT * FROM oceanbase.GV$OB_OPT_STAT_GATHER_MONITOR;
```

The query result is as follows:

```shell
+-----------+----------------+----------+------------+-----------------------------------+--------------------------------------+---------------+----------------------------+--------------------+------------------+-----------------------+---------------------+--------------------+-----------------------------+
| TENANT_ID | SVR_IP         | SVR_PORT | SESSION_ID | TRACE_ID                          | TASK_ID                              | TYPE          | TASK_START_TIME            | TASK_DURATION_TIME | TASK_TABLE_COUNT | COMPLETED_TABLE_COUNT | RUNNING_TABLE_OWNER | RUNNING_TABLE_NAME | RUNNING_TABLE_DURATION_TIME |
+-----------+----------------+----------+------------+-----------------------------------+--------------------------------------+---------------+----------------------------+--------------------+------------------+-----------------------+---------------------+--------------------+-----------------------------+
|      1002 | xxx.xxx.xxx.xx |     2882 | 3221575784 | YB42AC1E87C6-0005FF6AD9F825FB-0-0 | c921f339-1bc8-11ee-a7ea-52583362494c | MANUAL GATHER | 2023-07-06 14:46:07.691856 |             609652 |                1 |                     0 | test                | t1                 |                      609653 |
+-----------+----------------+----------+------------+-----------------------------------+--------------------------------------+---------------+----------------------------+--------------------+------------------+-----------------------+---------------------+--------------------+-----------------------------+
1 row in set
```

## References

* View the collection status of tenant-level historical statistics: [DBA_OB_TASK_OPT_STAT_GATHER_HISTORY](../200.dictionary-view-of-mysql-mode/12100.o-dba_ob_task_opt_stat_gather_history-of-mysql-mode.md)

* View the collection status of table-level historical statistics: [DBA_OB_TABLE_OPT_STAT_GATHER_HISTORY](../200.dictionary-view-of-mysql-mode/11300.o-dba_ob_table_opt_stat_gather_history-of-mysql-mode.md)

* For more information about statistics collection monitoring and diagnostics, see [Statistics collection monitoring and diagnostics](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/400.statistics-monitoring-diagnosis.md).