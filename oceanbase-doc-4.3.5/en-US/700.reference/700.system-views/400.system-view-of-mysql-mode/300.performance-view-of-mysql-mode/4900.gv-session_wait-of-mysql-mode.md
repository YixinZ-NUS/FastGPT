|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|MySQL Mode|
|machine-translation||

# GV$SESSION_WAIT

<main id="notice" type='explain'>
  <h4>Note</h4>
  <p>This view is introduced since OceanBase Database V1.4. </p>
</main>

## Purpose

The `GV$SESSION_WAIT` view displays information about the current or last wait events of all sessions on all OBServer nodes, such as the event name and the amount of time spent on waiting.

## Columns

| **Column** | **Type** | **Nullable?** | **Description** |
| --- | --- | --- | --- |
| SID | bigint(20) | NO | For V4.3.x:<ul><li>Before V4.3.5 BP2:<br>In all connection modes (direct mode/ODP mode), this field indicates the server session ID.</li><li>V4.3.5 BP2 and later versions:<ul><li>In direct mode:<br>This field indicates the server session ID.</li><li>In ODP mode:<ul><li>When the ODP parameter <code>client_session_id_version = 2</code> is set, this field indicates the client session ID.</li><li>When <code>client_session_id_version = 1</code>, this field indicates the server session ID.</li></ul></li></ul></li></ul> |
| CON_ID | bigint(20) | NO | The ID of the tenant. |
| SVR_IP | varchar(46) | NO | The IP address of the OBServer node. |
| SVR_PORT | bigint(20) | NO | The port number of the OBServer node. |
| EVENT | varchar(64) | NO | The name of the wait event. |
| P1TEXT | varchar(64) | NO | The description of the first parameter of the wait event. |
| P1 | bigint(20) unsigned | NO | The value of the first parameter of the wait event. |
| P2TEXT | varchar(64) | NO | The description of the second parameter of the wait event. |
| P2 | bigint(20) unsigned | NO | The value of the second parameter of the wait event. |
| P3TEXT | varchar(64) | NO | The description of the third parameter of the wait event. |
| P3 | bigint(20) unsigned | NO | The value of the third parameter of the wait event. |
| WAIT_CLASS_ID | bigint(20) | NO | The ID of the class to which the wait event belongs. |
| WAIT_CLASS# | bigint(20) | NO | The sequence number of the class to which the wait event belongs. |
| WAIT_CLASS | varchar(64) | NO | The name of the class to which the wait event belongs. |
| STATE | varchar(19) | NO | The status of the current wait event. Valid values:<li>`Waiting`: The session is waiting for the event.<li>`Waited unknown time`: The time information cannot be obtained because `timed_statistics` is set to `false`. In other words, a wait event has occurred but lasted only for a very short period.<li>`Wait short time`: A wait event has occurred but lasted for less than one unit of time, and therefore was not recorded.<li>`Waited known time`: If the session has obtained the required resources after the wait, it will switch from the waiting state to this state. |
| WAIT_TIME_MICRO | bigint(20) | NO | The wait time in microseconds. It indicates the elapsed wait time if the session is in the waiting state and indicates the total wait time of the last wait if the session is not in the waiting state. |
| TIME_REMAINING_MICRO | bigint(20) | NO | <li>Value greater than 0: The wait time of the last wait in microseconds. The session is not in the waiting state.<li>`0`: The session is waiting for the current event.<li>`-1`: The wait time of the last wait is shorter than one measurement unit, and the session is not in the waiting state.<li>`-2`: Time statistics collection is disabled, and the session is not in the waiting state. |
| TIME_SINCE_LAST_WAIT_MICRO | bigint(20) | NO | The amount of time in microseconds elapsed since the end of the last wait. The value is 0 if the session is in the waiting state. |

## Sample query

Query information about the current or most recent wait event for all sessions on the current node.

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.GV$SESSION_WAIT LIMIT 1\G
```

The query result is as follows:

```shell
*************************** 1. row ***************************
                       SID: 1152921504606863376
                    CON_ID: 1002
                    SVR_IP: xx.xx.xx.xx
                  SVR_PORT: 2882
                     EVENT: wait in request queue
                    P1TEXT: pcode
                        P1: 5387
                    P2TEXT: level
                        P2: 0
                    P3TEXT: priority
                        P3: 0
             WAIT_CLASS_ID: 102
               WAIT_CLASS#: 2
                WAIT_CLASS: CONFIGURATION
                     STATE: WAITED SHORT TIME
           WAIT_TIME_MICRO: 15
      TIME_REMAINING_MICRO: -1
TIME_SINCE_LAST_WAIT_MICRO: -360946994844997835
```