|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|MySQL Mode|
|machine-translation||

# V$OB_LOCKS

<main id="notice" type='explain'>
  <h4>Note</h4>
  <p>This view is introduced in V4.2.0. </p>
</main>

## Purpose

The `V$OB_LOCKS` view displays the locks held or requested on each table for the current user.

## Columns

| **Column** | **Type** | **Nullable?** | **Description** |
| ---- | ---- | ---- | ---- |
| SVR_IP | varchar(46) | NO | The IP address of the OBServer node that holds or requests the lock. |
| SVR_PORT | bigint(20) | NO | The port number of the OBServer node that holds or requests the lock. |
| TENANT_ID | bigint(20) | NO | The ID of the tenant that holds or requests the lock. |
| TRANS_ID | bigint(20) | NO | The transaction ID of the transaction that holds or requests the lock. |
| SESSION_ID | bigint(20)   | NO   | The session ID that holds or requests a lock.<ul><li>In V4.3.x, this field was introduced starting from V4.3.2.<ul><li>Before V4.3.5 BP2:<br>In all connection modes (direct mode/ODP mode), this field indicates the server session ID.</li><li>V4.3.5 BP2 and later versions:<ul><li>In direct mode:<br>This field indicates the server session ID.</li><li>In ODP mode:<ul><li>When the ODP parameter <code>client_session_id_version = 2</code> is set, this field indicates the client session ID.</li><li>When <code>client_session_id_version = 1</code>, this field indicates the server session ID.</li></ul></li></ul></li></ul></li><li>In V4.2.x, this field was introduced starting from V4.2.5. In all connection modes (direct mode/ODP mode), this field indicates the server session ID.</li></ul> |
| TYPE | varchar(9) | NO | The type of the lock. Valid values: <ul><li>TM: table lock</li><li>TX: transaction lock</li><li>TR: row lock</li></ul> |
| ID1 | bigint(20) | NO | Identifier 1 of the lock. Valid values: <ul><li>For table locks: TABLE_ID or TABLET_ID</li><li>For transaction locks: TX_ID</li><li>For row locks: TABLET_ID</li></ul> |
| ID2 | varchar(533) | NO | Identifier 2 of the lock. Valid values: <ul><li>For table locks: NULL</li><li>For transaction locks: NULL</li><li>For row locks: TX_ID + rowkey of the row</li></ul> |
| ID3 | varchar(512) | NO | Identifier 3 of the lock. Valid values: <ul><li>For TM locks: TABLE_ID or TABLET_ID</li><li>For TX locks: NULL</li><li>For TR locks: TABLET_ID + rowkey of the row</li></ul> <main id="notice" type='explain'><h4>Note</h4><p><ul><li>In V4.3.x, this field is introduced in V4.3.2. </li><li>In V4.2.x, this field is introduced in V4.2.5. </li></ul></p></main> |
| LMODE | varchar(8) | NO | The mode in which the current transaction holds the lock. Valid values: <ul><li>NONE: indicates that the transaction does not hold any lock. </li><li>RS: ROW SHARE</li><li>RX: ROW EXCLUSIVE</li><li>S: SHARE</li><li>SRX: SHARE ROW EXCLUSIVE</li><li>X: EXCLUSIVE</li></ul> |
| REQUEST | varchar(8) | NO | The mode in which the current transaction requests a lock. Valid values: <ul><li>NONE: indicates that the transaction does not request any lock. </li><li>RS: ROW SHARE  </li><li>RX: ROW EXCLUSIVE  </li><li>S: SHARE  </li><li>SRX: SHARE ROW EXCLUSIVE  </li><li>X: EXCLUSIVE  </li></ul> |
| CTIME | bigint(20) | NO | The time when the transaction holds or waits for a lock, in microseconds. |
| BLOCK | bigint(1) | NO | Indicates whether a lock requested by the current transaction is held by another transaction. Valid values: <ul><li>0: the requested lock is not held by another transaction, which means that the current transaction holds the lock. </li><li>1: the requested lock is held by another transaction, which means that the current transaction is blocked. </li></ul>|

## Sample query

Query the locks or lock requests on tables for the current user.

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.V$OB_LOCKS LIMIT 1\G
```

The query result is as follows:

```shell
*************************** 1. row ***************************
    SVR_IP: xx.xx.xx.xx
  SVR_PORT: 2882
 TENANT_ID: 1003
  TRANS_ID: 7414198
SESSION_ID: 3221619563
      TYPE: TX
       ID1: 7414198
       ID2: 3221619563
       ID3: NULL
     LMODE: X
   REQUEST: NONE
     CTIME: 11162
     BLOCK: 0
```

## References

For more information about table locks, see [Lock a table](../../../300.database-object-management/100.manage-object-of-mysql-mode/200.manage-tables-of-mysql-mode/900.lock-a-table-of-mysql-mode.md).