|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|MySQL Mode|
|machine-translation||

# GV$OB_LOCKS

<main id="notice" type='explain'>
  <h4>Note</h4>
  <p>This view is introduced in V4.2.0. </p>
</main>

## Purpose

The `GV$OB_LOCKS` view displays the lock or lock request information of each table for the current user.

## Columns

| **Column** | **Type** | **Nullable?** | **Description** |
| --- | --- | --- | --- |
| SVR_IP | varchar(46) | NO | The IP address of the OBServer node that holds or requests the lock. |
| SVR_PORT | bigint(20) | NO | The port number of the OBServer node that holds or requests the lock. |
| TENANT_ID | bigint(20) | NO | The ID of the tenant that holds or requests the lock. |
| TRANS_ID | bigint(20) | NO | The transaction ID of the transaction that holds or requests the lock. |
| SESSION_ID | bigint(20)   | NO   | The session ID of the session that holds or requests the lock.<ul><li>In V4.3.x, this field is introduced in V4.3.2. <ul><li>For versions earlier than V4.3.5 BP2:<br>In all connection modes (direct connection mode/ODP mode), this field indicates the Server Session ID. </li><li>For V4.3.5 BP2 and later:<ul><li>In direct connection mode:<br>This field indicates the Server Session ID. </li> <li>In ODP mode:</li><ul><li>If <code>client_session_id_version = 2</code> is configured in ODP, this field indicates the Client Session ID. </li> <li>If <code>client_session_id_version = 1</code>, this field indicates the Server Session ID.</li></ul></ul></li></ul> </li><li>In V4.2.x, this field is introduced in V4.2.5. In all connection modes (direct connection mode/ODP mode), this field indicates the Server Session ID. </li></ul> |
| TYPE | varchar(9) | NO | The type of the lock. Valid values: <ul><li>TM: table lock</li><li>TX: transaction lock</li><li>TR: row lock</li></ul> |
| ID1 | bigint(20) | NO | Identifier 1 of the lock. Valid values: <ul><li>TM: transaction ID</li><li>TX: transaction ID</li><li>TR: transaction ID</li></ul> |
| ID2 | bigint(20) | NO | Identifier 2 of the lock. Valid values: <ul><li>TM: session ID (NULL for external table locks of transactions)</li><li>TX: session ID</li><li>TR: session ID</li></ul> |
| ID3 | varchar(512) | NO | Identifier 3 of the lock. Valid values: <ul><li>TM: TABLE_ID / TABLET_ID</li><li>TX: NULL</li><li>TR: TABLET_ID + row rowkey</li></ul> <main id="notice" type='explain'><h4>Note</h4><p><ul><li>In V4.3.x, this field is introduced in V4.3.2. </li><li>In V4.2.x, this field is introduced in V4.2.5. </li></ul></p></main> |
| LMODE | varchar(4) | NO | The mode in which the current lock is held. Valid values: <ul><li>NONE: indicates that no lock is held. </li><li>RS: ROW SHARE</li><li>RX: ROW EXCLUSIVE</li><li>S: SHARE</li><li>SRX: SHARE ROW EXCLUSIVE</li><li>X: EXCLUSIVE</li></ul> |
| REQUEST | varchar(8) | NO | The mode in which the current lock is requested. Valid values: <ul><li>NONE: indicates that no lock is requested. </li><li>RS: ROW SHARE  </li><li>RX: ROW EXCLUSIVE  </li><li>S: SHARE  </li><li>SRX: SHARE ROW EXCLUSIVE  </li><li>X: EXCLUSIVE  </li></ul> |
| CTIME | bigint(20) | NO | The time when the lock was obtained or the wait time for the lock, in microseconds. |
| BLOCK | bigint(1) | NO | Whether the lock requested by the current transaction is held by another transaction. Valid values: <ul><li>0: the requested lock is not held by another transaction, which indicates that the current transaction holds the lock. </li><li>1: the requested lock is held by another transaction, which indicates that the current transaction is blocked. </li></ul>|

## Sample query

Query the lock holding or lock request status for each table of the current user.

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.V$OB_LOCKS LIMIT 1\G
```

The query result is as follows:

```shell
*************************** 1. row ***************************
    SVR_IP: xx.xx.xx.xx
  SVR_PORT: 2882
 TENANT_ID: 1003
  TRANS_ID: 7414198
SESSION_ID: 3221619563
      TYPE: TX
       ID1: 7414198
       ID2: 3221619563
       ID3: NULL
     LMODE: X
   REQUEST: NONE
     CTIME: 11162
     BLOCK: 0
```

## References

For more information about table locks, see [Lock a table](../../../300.database-object-management/100.manage-object-of-mysql-mode/200.manage-tables-of-mysql-mode/900.lock-a-table-of-mysql-mode.md).