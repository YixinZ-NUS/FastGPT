|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|MySQL Mode|
|machine-translation||

# oceanbase.DBA_WR_SQLSTAT

<main id="notice" type='explain'>
<h4>Note</h4>
<ul><li>In V4.3.x, this view was introduced in V4.3.5. </li> <li>In V4.2.x, this view was introduced in V4.2.2. </li></ul>
</main>

## Purpose

The `DBA_WR_SQLSTAT` view displays basic performance statistics of the SQL statements executed in the current tenant. Each row represents an SQL statement (that is, each unique combination of `SQL_ID` and `Plan_Hash` values). The statistics with `_DELTA` in the column name indicate the incremental statistics from the last WR snapshot to the current time.

## Columns

| **Column**                  | **Type**            | **Nullable?** | **Description**                               |
|-------------------------------|---------------------|---------------------|----------------------------------------|
| SNAP_ID                       | bigint(20)          | NO   |    Snapshot ID  |
| SVR_IP                        | varchar(46)         | NO   |    Node IP |
| SVR_PORT                      | bigint(20)          | NO   |    Node port     |
| SQL_ID                        | varchar(32)         | NO   |    SQL statement ID   |
| PLAN_HASH                     | bigint(20) unsigned | NO   |    Hash value of the execution plan   |
| PLAN_ID                       | bigint(20)          | NO   |    ID of the execution plan   |
| PLAN_TYPE                     | bigint(20)          | NO   |    For SQL plan caching, this field indicates the type of the plan: <ul><li>`1`: local plan </li> <li>`2`: remote plan</li> <li>`3`: distributed plan </li></ul> </br>For PL object caching, this field indicates the type of the PL object: <ul><li>`1`: procedure</li> <li>`2`: function</li> <li>`3`: package</li> <li>`4`: anonymous block </li></ul> |
| MODULE                        | varchar(64)         | YES  |   Module of the application that parsed the statement for the first time    |
| ACTION                        | varchar(64)         | YES  |   Action of the application that parsed the statement for the first time      |
| PARSING_DB_ID                 | bigint(20)          | NO   |   ID of the database where the statement was parsed    |
| PARSING_DB_NAME               | varchar(128)        | NO   |   Name of the database where the statement was parsed     |
| PARSING_USER_ID               | bigint(20)          | NO   |   ID of the user who parsed the statement     |
| EXECUTIONS_TOTAL              | bigint(20)          | NO   |   Total number of executions of the plan in the plan cache     |
| EXECUTIONS_DELTA              | bigint(20)          | NO   |   Increment of the total number of executions of the plan in the plan cache      |
| DISK_READS_TOTAL              | bigint(20)          | NO   |   Total number of disk reads |
| DISK_READS_DELTA              | bigint(20)          | NO   |   Increment of the number of disk reads |
| BUFFER_GETS_TOTAL             | bigint(20)          | NO   |   Total number of logical reads from the cache       |
| BUFFER_GETS_DELTA             | bigint(20)          | NO   |   Increment of the number of logical reads from the cache      |
| ELAPSED_TIME_TOTAL            | bigint(20)          | NO   |   Total time consumed by the statement. For parallel execution scenarios, the value is the total time consumed by each execution thread.          |
| ELAPSED_TIME_DELTA            | bigint(20)          | NO   |   Increment of the time consumed by the statement   |
| CPU_TIME_TOTAL                | bigint(20)          | NO   |   Total CPU time       |
| CPU_TIME_DELTA                | bigint(20)          | NO   |   Increment of the total CPU time     |
| CCWAIT_TOTAL                  | bigint(20)          | NO   |   Total time spent in concurrent wait events       |
| CCWAIT_DELTA                  | bigint(20)          | NO   |   Increment of the total time spent in concurrent wait events       |
| USERIO_WAIT_TOTAL             | bigint(20)          | NO   |   Total time spent in I/O wait events      |
| USERIO_WAIT_DELTA             | bigint(20)          | NO   |   Increment of the total time spent in I/O wait events      |
| APWAIT_TOTAL                  | bigint(20)          | NO   |   Total time spent in application wait events        |
| APWAIT_DELTA                  | bigint(20)          | NO   |   Increment of the total time spent in application wait events      |
| PHYSICAL_READ_REQUESTS_TOTAL  | bigint(20)          | NO   |   Total number of physical read requests       |
| PHYSICAL_READ_REQUESTS_DELTA  | bigint(20)          | NO   |   Increment of the number of physical read requests      |
| PHYSICAL_READ_BYTES_TOTAL     | bigint(20)          | NO   |   Total number of bytes read physically     |
| PHYSICAL_READ_BYTES_DELTA     | bigint(20)          | NO   |   Increment of the number of bytes read physically   |
| WRITE_THROTTLE_TOTAL          | bigint(20)          | NO   |   Total time throttled when writing to MemStore    |
| WRITE_THROTTLE_DELTA          | bigint(20)          | NO   |   Increment of the total time throttled when writing to MemStore    |
| ROWS_PROCESSED_TOTAL          | bigint(20)          | NO   |   Total number of rows processed by the statement    |
| ROWS_PROCESSED_DELTA          | bigint(20)          | NO   |   Increment of the total number of rows processed by the statement     |
| MEMSTORE_READ_ROWS_TOTAL      | bigint(20)          | NO   |   Total number of rows read from MemStore    |
| MEMSTORE_READ_ROWS_DELTA      | bigint(20)          | NO   |   Increment of the total number of rows read from MemStore    |
| MINOR_SSSTORE_READ_ROWS_TOTAL | bigint(20)          | NO   |   Total number of rows read from MINOR SSStore   |
| MINOR_SSSTORE_READ_ROWS_DELTA | bigint(20)          | NO   |   Increment of the total number of rows read from MINOR SSStore  |
| MAJOR_SSSTORE_READ_ROWS_TOTAL | bigint(20)          | NO   |   Total number of rows read from MAJOR SSStore     |
| MAJOR_SSSTORE_READ_ROWS_DELTA | bigint(20)          | NO   |   Increment of the total number of rows read from MAJOR SSStore   |
| RPC_TOTAL                     | bigint(20)          | NO   |   Total number of RPCs    |
| RPC_DELTA                     | bigint(20)          | NO   |   Increment of the number of RPCs   |
| FETCHES_TOTAL                 | bigint(20)          | NO   |   Total number of result set fetches   |
| FETCHES_DELTA                 | bigint(20)          | NO   |   Increment of the number of result set fetches     |
| RETRY_TOTAL                   | bigint(20)          | NO   |   Total number of SQL retries   |
| RETRY_DELTA                   | bigint(20)          | NO   |   Increment of the number of SQL retries      |
| PARTITION_TOTAL               | bigint(20)          | NO   |   Total number of partitions scanned by the SQL statement      |
| PARTITION_DELTA               | bigint(20)          | NO   |   Increment of the number of partitions scanned by the SQL statement    |
| NESTED_SQL_TOTAL              | bigint(20)          | NO   |   Total number of nested SQL statements executed. Each time a sub-SQL statement is executed, the value is incremented by 1     |
| NESTED_SQL_DELTA              | bigint(20)          | NO   |   Increment of the total number of nested SQL statements executed    |
| SOURCE_IP                     | varchar(46)         | NO   |   IP address of the request source     |
| SOURCE_PORT                   | bigint(20)          | NO   |   Port of the request source      |
| ROUTE_MISS_TOTAL              | bigint(20)          | NO   |   Total number of times that the request did not hit the requested partition since the OBServer node started<main id="notice" type='explain'><h4>Note</h4><ul><li>In V4.3.x, this field was introduced in V4.3.5. </li> <li>In V4.2.x, this field was introduced in V4.2.2. </li></ul></main>   |
| ROUTE_MISS_DELTA              | bigint(20)          | NO   |   Number of times that the request did not hit the requested partition since the last WR snapshot was collected<main id="notice" type='explain'><h4>Note</h4><ul><li>In V4.3.x, this field was introduced in V4.3.5. </li> <li>In V4.2.x, this field was introduced in V4.2.2. </li></ul></main>   |
| FIRST_LOAD_TIME               | timestamp(6)        | YES  |   Plan generation time<main id="notice" type='explain'><h4>Note</h4><ul><li>In V4.3.x, this field was introduced in V4.3.5. </li> <li>In V4.2.x, this field was introduced in V4.2.5. </li></ul></main>   |
| PLAN_CACHE_HIT_TOTAL          | bigint(20)          | NO   |   Total number of times that the plan cache was hit since the OBServer node started<main id="notice" type='explain'><h4>Note</h4><ul><li>In V4.3.x, this field was introduced in V4.3.5. </li> <li>In V4.2.x, this field was introduced in V4.2.5. </li></ul></main>   |
| PLAN_CACHE_HIT_DELTA          | bigint(20)          | NO   |   Number of times that the plan cache was hit since the last WR snapshot was collected<main id="notice" type='explain'><h4>Note</h4><ul><li>In V4.3.x, this field was introduced in V4.3.5. </li> <li>In V4.2.x, this field was introduced in V4.2.5. </li></ul></main>  |

## Sample query

```shell
obclient [oceanbase]>  SELECT * FROM oceanbase.CDB_WR_SQLSTAT LIMIT 1\G
```

The query result is as follows:

```shell
*************************** 1. row ***************************
                    TENANT_ID: 1
                      SNAP_ID: 1
                       SVR_IP: xx.xx.xx.xx
                     SVR_PORT: 2882
                       SQL_ID: 05498258D0EEE84DAEDC4031BE9404CC
                    PLAN_HASH: 5462864837301675214
                    PLAN_TYPE: 1
                       MODULE: NULL
                       ACTION: NULL
                PARSING_DB_ID: 201001
              PARSING_DB_NAME: oceanbase
              PARSING_USER_ID: 200001
             EXECUTIONS_TOTAL: 8
             EXECUTIONS_DELTA: 8
             DISK_READS_TOTAL: 0
             DISK_READS_DELTA: 0
            BUFFER_GETS_TOTAL: 0
            BUFFER_GETS_DELTA: 0
           ELAPSED_TIME_TOTAL: 4444
           ELAPSED_TIME_DELTA: 4444
               CPU_TIME_TOTAL: 0
               CPU_TIME_DELTA: 0
                 CCWAIT_TOTAL: 0
                 CCWAIT_DELTA: 0
            USERIO_WAIT_TOTAL: 0
            USERIO_WAIT_DELTA: 0
                 APWAIT_TOTAL: 0
                 APWAIT_DELTA: 0
 PHYSICAL_READ_REQUESTS_TOTAL: 0
 PHYSICAL_READ_REQUESTS_DELTA: 0
    PHYSICAL_READ_BYTES_TOTAL: 0
    PHYSICAL_READ_BYTES_DELTA: 0
         WRITE_THROTTLE_TOTAL: 0
         WRITE_THROTTLE_DELTA: 0
         ROWS_PROCESSED_TOTAL: 8
         ROWS_PROCESSED_DELTA: 8
     MEMSTORE_READ_ROWS_TOTAL: 16
     MEMSTORE_READ_ROWS_DELTA: 16
MINOR_SSSTORE_READ_ROWS_TOTAL: 0
MINOR_SSSTORE_READ_ROWS_DELTA: 0
MAJOR_SSSTORE_READ_ROWS_TOTAL: 0
MAJOR_SSSTORE_READ_ROWS_DELTA: 0
                    RPC_TOTAL: 0
                    RPC_DELTA: 0
                FETCHES_TOTAL: 0
                FETCHES_DELTA: 0
                  RETRY_TOTAL: 0
                  RETRY_DELTA: 0
              PARTITION_TOTAL: 8
              PARTITION_DELTA: 8
             NESTED_SQL_TOTAL: 0
             NESTED_SQL_DELTA: 0
                    SOURCE_IP: xx.xx.xx.xx
                  SOURCE_PORT: 2882
             ROUTE_MISS_TOTAL: 0
             ROUTE_MISS_DELTA: 0
              FIRST_LOAD_TIME: 2024-12-09 11:02:27.095548
         PLAN_CACHE_HIT_TOTAL: 7
         PLAN_CACHE_HIT_DELTA: 7
1 row in set (0.153 sec)
```

## References

* [oceanbase.CDB_WR_SQLSTAT](../../300.system-view-of-sys-tenant/200.dictionary-view-of-sys-tenant/13700.o-cdb_wr_sqlstat-of-sys-tenant.md)

* [GV$OB_SQLSTAT](../300.performance-view-of-mysql-mode/3900.gv-ob_sqlstat-of-mysql-mode.md)

* [V$OB_SQLSTAT](../300.performance-view-of-mysql-mode/34500.v-ob_sqlstat-of-mysql-mode.md)