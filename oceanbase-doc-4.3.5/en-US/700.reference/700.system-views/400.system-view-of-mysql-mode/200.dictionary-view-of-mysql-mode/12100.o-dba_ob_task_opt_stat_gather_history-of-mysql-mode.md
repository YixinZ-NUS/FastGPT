| description ||
|---|---|
| keywords ||
| dir-name ||
| dir-name-en ||
| tenant-type | MySQL Mode |
|machine-translation||

# oceanbase.DBA_OB_TASK_OPT_STAT_GATHER_HISTORY

<main id="notice" type='explain'>
<h4>Note</h4>
<p>This view is introduced since OceanBase Database V4.2.0. </p>
</main>

## Purpose

The `oceanbase.DBA_OB_TASK_OPT_STAT_GATHER_HISTORY` view displays the execution information about historical collection tasks.

## Columns

| **Column** | **Type** | **Nullable?** | **Description** |
| --- | --- | --- | --- |
| TENANT_ID | bigint(20) | NO | The ID of the tenant to which the collection task belongs. |
| TASK_ID | varchar(36) | NO | The ID of the collection task, which is generated based on UUID and is globally unique. |
| TYPE | varchar(16) | NO | The type of the collection task. |
| STATUS | varchar(8) | NO | The status of the collection task. Valid values:<ul><li>SUCCESS   </li><li>FAILED  </li></ul> |
| TABLE_COUNT | bigint(20) | YES | The number of tables whose statistics need to be collected by the collection task. |
| FAILED_COUNT | bigint(20) | YES | The number of tables whose statistics failed to be collected by the collection task. |
| START_TIME | datetime(6) | NO | The start time of the collection task. |
| END_TIME | datetime(6) | NO | The end time of the collection task. |

## Sample query

Query the history of manual collection tasks in the current tenant.

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.DBA_OB_TASK_OPT_STAT_GATHER_HISTORY WHERE TYPE='MANUAL GATHER';
```

The query result is as follows:

```shell
+-----------+--------------------------------------+---------------+---------+-------------+--------------+----------------------------+----------------------------+
| TENANT_ID | TASK_ID                              | TYPE          | STATUS  | TABLE_COUNT | FAILED_COUNT | START_TIME                 | END_TIME                   |
+-----------+--------------------------------------+---------------+---------+-------------+--------------+----------------------------+----------------------------+
|      1002 | 5b965b29-062d-11f0-9059-00163e0d8e01 | MANUAL GATHER | FAILED  |           1 |            1 | 2025-03-21 16:20:32.834753 | 2025-03-21 16:20:32.836438 |
|      1002 | 719de009-062d-11f0-9059-00163e0d8e01 | MANUAL GATHER | SUCCESS |           1 |            0 | 2025-03-21 16:21:09.793531 | 2025-03-21 16:21:09.891911 |
+-----------+--------------------------------------+---------------+---------+-------------+--------------+----------------------------+----------------------------+
2 rows in set
```

## References

* To view the collection status of statistics at the table level, see [DBA_OB_TABLE_OPT_STAT_GATHER_HISTORY](../200.dictionary-view-of-mysql-mode/11300.o-dba_ob_table_opt_stat_gather_history-of-mysql-mode.md).

* For more information about statistics collection monitoring and diagnostics, see [Statistics collection monitoring and diagnostics](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/400.statistics-monitoring-diagnosis.md).