|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# oceanbase.DBA_OB_TABLE_SPACE_USAGE

<main id="notice" type='explain'>
 <h4>Note</h4>
 <p>This view is introduced in OceanBase Database V4.3.5. </p>
</main>

## Purpose

The `DBA_OB_TABLE_SPACE_USAGE` view is used to display the size of all user tables under the current tenant based on the leader replica in a multi-replica environment.

## Columns

| **Column** | **Type**  | **Nullable?** | **Description**                               |
|------------|-------------|---------------------|----------------------------------------|
| TABLE_ID      | bigint(20)    | NO   | Table ID     |
| DATABASE_NAME | varchar(128)  | NO   | Database name     |
| TABLE_NAME    | varchar(256)  | NO   | Table name     |
| OCCUPY_SIZE   | decimal(42,0) | NO   | The amount of data written to disk after table compression, in bytes.     |
| REQUIRED_SIZE | decimal(42,0) | NO   | The actual disk space occupied by the data written to disk after table compression, in bytes.     |

## Sample query

In Shared-Nothing mode, a user tenant queries the size of all user tables in the current tenant.

```shell
obclient [test]> SELECT * FROM oceanbase.DBA_OB_TABLE_SPACE_USAGE LIMIT 3;
```

The query result is as follows:

```shell
+----------+---------------+--------------------------------+-------------+---------------+
| TABLE_ID | DATABASE_NAME | TABLE_NAME                     | OCCUPY_SIZE | REQUIRED_SIZE |
+----------+---------------+--------------------------------+-------------+---------------+
|   500011 | test          | wide_table_row_storage2        |  4495925120 |    4613763072 |
|   500012 | test          | wide_table_column_storage2     |  3915023145 |    4195397632 |
|   500014 | test          | wide_table_row_column_storage2 |  8410964107 |    9805275136 |
+----------+---------------+--------------------------------+-------------+---------------+
3 rows in set
```

## References

* [oceanbase.CDB_OB_TABLE_SPACE_USAGE](../../300.system-view-of-sys-tenant/200.dictionary-view-of-sys-tenant/11330.o-cdb_ob_table_space_usage-of-sys-tenant.md)
* [oceanbase.CDB_OB_SPACE_USAGE](../../300.system-view-of-sys-tenant/200.dictionary-view-of-sys-tenant/10470.o-cdb_ob_space_usage-of-sys-tenant.md)
* [oceanbase.CDB_OB_SERVER_SPACE_USAGE](../../300.system-view-of-sys-tenant/200.dictionary-view-of-sys-tenant/10450.o-cdb_ob_server_space_usage-of-sys-tenant.md)