|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# GV$OB_MERGE_INFO

<main id="notice" type='explain'>
<h4>Note</h4>
<p>The <code>GV$MERGE_INFO</code> view has been renamed as <code>GV$OB_MERGE_INFO</code> since OceanBase Database V4.0.0. If you query the <code>GV$MERGE_INFO</code> view in OceanBase Database V4.0.0 or later, an error is returned. </p>
</main>

## Purpose

The `GV$OB_MERGE_INFO` view displays the statistics of compactions that are completed in the cluster.

## Columns

| Column | Type | Nullable? | Description |
|-------------------|---------------|------------|-----------------------------------------------------------------------------------------------------|
| SVR_IP            | varchar(46)   | NO         | The IP address of the OBServer node. |
| SVR_PORT          | bigint(20)    | NO         | The port number of the OBServer node. |
| TENANT_ID         | bigint(20)    | NO         | The ID of the tenant. |
| LS_ID             | bigint(20)    | NO         | The ID of the log stream. |
| TABLET_ID         | bigint(20)    | NO         | The ID of the tablet. |
| ACTION            | varchar(64)   | NO         | The specific action of the compaction. Valid values: <ul><li>`MDS_TABLE_MERGE`: indicates to persist system metadata to the disk in the SSTable format. </li> <li>`MAJOR_MERGE`: indicates a tenant-level major compaction.</li> <li>`MEDIUM_MERGE`: indicates a partition-level major compaction.</li> <li>`MINI_MERGE`: indicates a mini compaction that converts a MemTable to a mini SSTable. </li> <li>`MINOR_MERGE`: indicates a minor compaction that combines multiple mini SSTables or multiple mini SSTables and a minor SSTable into one minor SSTable. </li> <li>`META_MAJOR_MERGE`: indicates a special compaction type that compacts the data generated before a specified point in time into a meta major SSTable, which has the same data format as a major SSTable but does not contain multi-version data or data of uncommitted transactions. </li></ul> |
| COMPACTION_SCN    | bigint(20) unsigned    | NO         | The compaction version. |
| START_TIME        | timestamp(6)  | NO         | The start time of the compaction. |
| END_TIME          | timestamp(6)  | NO         | The end time of the compaction. |
| MACRO_BLOCK_COUNT | bigint(20)    | NO         | The total number of macroblocks in the compaction. |
| REUSE_PCT         | decimal(26,2) | NO         | The reuse rate of macroblocks in the compaction. |
| PARALLEL_DEGREE   | bigint(20)    | NO         | The degree of parallelism (DOP) of the compaction. |

## Sample query

Query the first five `MINI_MERGE` actions that have been completed in the cluster from the `sys` tenant.

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.GV$OB_MERGE_INFO WHERE ACTION='MINI_MERGE' LIMIT 5;
```

The query result is as follows:

```shell
+----------------+----------+-----------+-------+-----------+------------+---------------------+----------------------------+----------------------------+-------------------+-----------+-----------------+
| SVR_IP         | SVR_PORT | TENANT_ID | LS_ID | TABLET_ID | ACTION     | COMPACTION_SCN      | START_TIME                 | END_TIME                   | MACRO_BLOCK_COUNT | REUSE_PCT | PARALLEL_DEGREE |
+----------------+----------+-----------+-------+-----------+------------+---------------------+----------------------------+----------------------------+-------------------+-----------+-----------------+
| 172.xx.xxx.xxx |     2882 |         1 |     1 |     49402 | MINI_MERGE | 1712895419824894939 | 2024-04-12 12:16:59.926830 | 2024-04-12 12:16:59.967716 |                 1 |      0.00 |               1 |
| 172.xx.xxx.xxx |     2882 |         1 |     1 |     49401 | MINI_MERGE |    1712895419920179 | 2024-04-12 12:16:59.920432 | 2024-04-12 12:17:00.029272 |                 1 |      0.00 |               1 |
| 172.xx.xxx.xxx |     2882 |         1 |     1 |       344 | MINI_MERGE | 1712895419824894940 | 2024-04-12 12:17:03.973219 | 2024-04-12 12:17:03.978389 |                 1 |      0.00 |               1 |
| 172.xx.xxx.xxx |     2882 |         1 |     1 |    101001 | MINI_MERGE | 1712895419824894940 | 2024-04-12 12:17:03.973125 | 2024-04-12 12:17:03.979416 |                 1 |      0.00 |               1 |
| 172.xx.xxx.xxx |     2882 |         1 |     1 |       372 | MINI_MERGE | 1712895419824894940 | 2024-04-12 12:17:03.973250 | 2024-04-12 12:17:03.979160 |                 1 |      0.00 |               1 |
+----------------+----------+-----------+-------+-----------+------------+---------------------+----------------------------+----------------------------+-------------------+-----------+-----------------+
5 rows in set
```

## References

* [V$OB_MERGE_INFO](32200.v-ob_merge_info-of-sys-tenant.md)

* [GV$OB_TABLET_COMPACTION_PROGRESS](4400.gv-ob_tablet_compaction_progress-of-sys-tenant.md)

* [GV$OB_TABLET_COMPACTION_HISTORY](4300.gv-ob_tablet_compaction_history-of-sys-tenant.md)

* [CDB_OB_ZONE_MAJOR_COMPACTION](../200.dictionary-view-of-sys-tenant/12000.o-cdb_ob_zone_major_compaction-of-sys-tenant.md)

* [CDB_OB_MAJOR_COMPACTION](../200.dictionary-view-of-sys-tenant/10000.o-cdb_ob_major_compaction-of-sys-tenant.md)

* [View minor compaction information](../../../200.system-management/500.manage-data-storage/100.dump-management/400.view-dump-information.md)

* [View the major compaction process](../../../200.system-management/500.manage-data-storage/200.merge-management/500.view-merge-process.md)