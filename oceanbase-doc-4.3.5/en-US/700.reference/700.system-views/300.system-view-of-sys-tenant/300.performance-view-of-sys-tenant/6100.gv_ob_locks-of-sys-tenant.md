|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# GV$OB_LOCKS

<main id="notice" type='explain'>
  <h4>Note</h4>
  <p>This view is introduced in V4.2.0. </p>
</main>

## Purpose

This view displays the lock or lock request information of the current user for each table.

## Columns

| **Column** | **Type** | **Nullable?** | **Description** |
| --- | --- | --- | --- |
| SVR_IP | varchar(46) | NO | The IP address of the OBServer node that holds or requests a lock. |
| SVR_PORT | bigint(20) | NO | The port of the OBServer node that holds or requests a lock. |
| TENANT_ID | bigint(20) | NO | The ID of the tenant that holds or requests a lock. |
| TRANS_ID | bigint(20) | NO | The ID of the transaction that holds or requests a lock. |
| SESSION_ID | bigint(20)   | NO   |The session ID holding or requesting the lock.<ul><li>In V4.3.x, this field was introduced starting from V4.3.2.<ul><li>Before V4.3.5 BP2:<br>In all connection modes (direct mode/ODP mode), this field indicates the server session ID.</li><li>V4.3.5 BP2 and later versions:<ul><li>In direct mode:<br>This field indicates the server session ID.</li><li>In ODP mode:<ul><li>When the ODP parameter <code>client_session_id_version = 2</code> is set, this field indicates the client session ID.</li><li>When <code>client_session_id_version = 1</code>, this field indicates the server session ID.</li></ul></li></ul></li></ul></li><li>In V4.2.x, this field was introduced starting from V4.2.5. In all connection modes (direct mode/ODP mode), this field indicates the server session ID.</li></ul>    |
| TYPE | varchar(9) | NO | The type of the lock. Valid values include:<ul><li>TM: table lock</li><li>TX: transaction lock</li><li>TR: row lock</li></ul> |
| ID1 | bigint(20) | NO | The value of the first lock identifier. Valid values include:<ul><li>For table locks, the value can be either TABLE_ID or TABLET_ID. </li><li>For transaction locks, the value is TX_ID. </li><li>For row locks, the value is TABLET_ID. </li></ul> |
| ID2 | varchar(533) | NO | The value of the second lock identifier. Valid values include:<ul><li>For table locks, the value is NULL. </li><li>For transaction locks, the value is NULL. </li><li>For row locks, the value is TX_ID + rowkey. </li></ul> |
| ID3 | varchar(512) | NO | The third lock identifier.<ul><li>TM: TABLE_ID / TABLET_ID</li><li>TX: NULL</li><li>TR: TABLET_ID + row rowkey</li></ul> <main id="notice" type='explain'><h4>Note</h4><p><ul><li>In V4.3.x, this field was introduced starting from V4.3.2.</li><li>In V4.2.x, this field was introduced starting from V4.2.5.</li></ul></p></main>|
| LMODE | varchar(4) | NO | The mode of the lock held by the transaction. Valid values include:<ul><li>NONE: indicates that the transaction holds no lock. </li><li>RS: ROW SHARE</li><li>RX: ROW EXCLUSIVE</li><li>S: SHARE</li><li>SRX: SHARE ROW EXCLUSIVE</li><li>X: EXCLUSIVE</li></ul> |
| REQUEST | varchar(8) | NO | The mode of the lock requested by the transaction. Valid values include:<ul><li>NONE: indicates that the transaction requests no lock. </li><li>RS: ROW SHARE  </li><li>RX: ROW EXCLUSIVE  </li><li>S: SHARE  </li><li>SRX: SHARE ROW EXCLUSIVE  </li><li>X: EXCLUSIVE  </li></ul>|
| CTIME | bigint(20) | NO | The time when the transaction holds or waits for a lock, in microseconds. |
| BLOCK | bigint(1) | NO | Indicates whether the lock requested by the transaction is held by another transaction. Valid values include:<ul><li>0: indicates that the lock requested by the transaction is not held by another transaction. In other words, the transaction holds the lock. </li><li>1: indicates that the lock requested by the transaction is held by another transaction. In other words, the transaction is blocked. </li></ul>|

## Sample query

Query the lock holding or requesting status of each table for the current user.

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.GV$OB_LOCKS LIMIT 1\G
```

The query result is as follows:

```shell
*************************** 1. row ***************************
    SVR_IP: xx.xx.xx.xx
  SVR_PORT: 2882
 TENANT_ID: 1003
  TRANS_ID: 7414198
SESSION_ID: 3221619563
      TYPE: TX
       ID1: 7414198
       ID2: 3221619563
       ID3: NULL
     LMODE: X
   REQUEST: NONE
     CTIME: 11162
     BLOCK: 0
```

## References

For more information about table locks, see [Lock a table (MySQL mode)](../../../300.database-object-management/100.manage-object-of-mysql-mode/200.manage-tables-of-mysql-mode/900.lock-a-table-of-mysql-mode.md) and [Lock a table (Oracle mode)](../../../300.database-object-management/200.manage-object-of-oracle-mode/100.manage-tables-of-oracle-mode/900.lock-a-table-of-oracle-mode.md).