|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# GV$OB_LOG_TRANSPORT_DEST_STAT

<main id="notice" type='explain'>
  <h4>Note</h4>
  <ul><li>For OceanBase Database V4.3.x, this view is introduced in V4.3.5. </li> <li>For OceanBase Database V4.2.x, this view is introduced in V4.2.5. </li></ul>
</main>

## Purpose

The `GV$OB_LOG_TRANSPORT_DEST_STAT` view displays information about all OBServer downstream log synchronization links (OBCDC or network standby) in all tenants.

## Columns

| **Column** | **Type** | **Nullable?** | **Description** |
| -------- | -------- | ------------------ | -------- |
| TENANT_ID                   | bigint(20)          | NO   | Tenant ID     |
| SVR_IP                      | varchar(46)         | NO   | Server IP     |
| SVR_PORT                    | bigint(20)          | NO   | Server RPC_PORT     |
| LS_ID                       | bigint(20)          | NO   | Log stream ID of the request     |
| CLIENT_IP                   | varchar(46)         | NO   | IP address of the machine where the process of the request is located     |
| CLIENT_PID                  | bigint(20)          | NO   | Process ID of the request     |
| CLIENT_TENANT_ID            | bigint(20)          | NO   | Tenant ID of the request     |
| CLIENT_TYPE                 | varchar(7)          | NO   | Type of the request source:<ul><li>STANDBY: network standby </li><li>CDC: OBCDC </li><li>UNKNOWN: unknown client type </li></ul>    |
| START_SERVE_TIME            | timestamp(6)        | NO   | Creation time of the record     |
| LAST_SERVE_TIME             | timestamp(6)        | NO   | Modification time of the record     |
| LAST_READ_SOURCE            | varchar(7)          | NO   | Source of the log read when the last request was processed:<ul><li>ONLINE: online log </li><li>ARCHIVE: archived log </li><li>UNKNOWN: unknown source </li></ul>     |
| LAST_REQUEST_TYPE           | varchar(24)         | NO   | RPC type of the last request:<ul><li>0: SEQUENTIAL_READ_SERIAL, which indicates that the serial log transmission protocol is used to read logs in sequence. </li><li>1: SEQUENTIAL_READ_PARALLEL, which indicates that the parallel log transmission protocol is used to read logs in sequence. </li><li>2: SCATTERED_READ, which indicates that the last request was for reading scattered logs. </li><li>Other values: unknown RPC type. </li></ul>     |
| LAST_REQUEST_LOG_LSN        | bigint(20) unsigned | NO   | LSN of the last request log     |
| LAST_REQUEST_LOG_SCN        | bigint(20) unsigned | NO   | SCN of the last request log     |
| LAST_FAILED_REQUEST         | longtext            | NO   | Information about the last failed RPC, including the sending time, TRACE_ID, and error code.    |
| AVG_REQUEST_PROCESS_TIME    | bigint(20)          | NO   | Average RPC processing time     |
| AVG_REQUEST_QUEUE_TIME      | bigint(20)          | NO   | Average RPC queuing time     |
| AVG_REQUEST_READ_LOG_TIME   | bigint(20)          | NO   | Average RPC log reading time     |
| AVG_REQUEST_READ_LOG_SIZE   | bigint(20)          | NO   | Average RPC log reading size     |
| AVG_LOG_TRANSPORT_BANDWIDTH | varchar(29)         | NO   | Average log transmission bandwidth     |

## Sample query

The following example queries information about all OBServer downstream log synchronization links (OBCDC or network standby) in all tenants.

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.GV$OB_LOG_TRANSPORT_DEST_STAT;
```

The query result is as follows:

```shell
+-----------+----------------+----------+-------+----------------+------------+------------------+-------------+----------------------------+----------------------------+------------------+--------------------------+----------------------+----------------------+---------------------+--------------------------+------------------------+---------------------------+---------------------------+-----------------------------+
| TENANT_ID | SVR_IP         | SVR_PORT | LS_ID | CLIENT_IP      | CLIENT_PID | CLIENT_TENANT_ID | CLIENT_TYPE | START_SERVE_TIME           | LAST_SERVE_TIME            | LAST_READ_SOURCE | LAST_REQUEST_TYPE        | LAST_REQUEST_LOG_LSN | LAST_REQUEST_LOG_SCN | LAST_FAILED_REQUEST | AVG_REQUEST_PROCESS_TIME | AVG_REQUEST_QUEUE_TIME | AVG_REQUEST_READ_LOG_TIME | AVG_REQUEST_READ_LOG_SIZE | AVG_LOG_TRANSPORT_BANDWIDTH |
+-----------+----------------+----------+-------+----------------+------------+------------------+-------------+----------------------------+----------------------------+------------------+--------------------------+----------------------+----------------------+---------------------+--------------------------+------------------------+---------------------------+---------------------------+-----------------------------+
|      1002 |  xx.xx.xx.xx   |     9708 |     1 |  xx.xx.xx.xx   |      44307 |                0 | CDC         | 2024-10-17 17:09:04.517703 | 2024-10-17 17:30:18.328740 | ONLINE           | SEQUENTIAL_READ_SERIAL   |             15055628 |  1729157418188928000 | NULL                |                       86 |                     35 |                        53 |                        70 | 1.35KB/S                    |
|      1002 |  xx.xx.xx.xx   |     9708 |  1001 |  xx.xx.xx.xx   |      79983 |             1004 | STANDBY     | 2024-10-17 17:08:10.964547 | 2024-10-17 17:30:18.347842 | ONLINE           | SEQUENTIAL_READ_PARALLEL |              1667072 |  1729157418206776001 | NULL                |                        5 |                     41 |                         5 |                      2088 | 40.77KB/S                   |
|      1002 |  xx.xx.xx.xx   |     9708 |  1001 |  xx.xx.xx.xx   |      44307 |                0 | CDC         | 2024-10-17 17:09:05.936290 | 2024-10-17 17:30:18.329034 | ONLINE           | SEQUENTIAL_READ_SERIAL   |              1667375 |  1729157418206776000 | NULL                |                       81 |                     46 |                        49 |                        61 | 1.20KB/S                    |
|      1002 |  xx.xx.xx.xx   |     9708 |     1 |  xx.xx.xx.xx   |      79983 |             1004 | STANDBY     | 2024-10-17 17:08:00.415960 | 2024-10-17 17:30:18.347866 | ONLINE           | SEQUENTIAL_READ_PARALLEL |             15052800 |  1729157418206776000 | NULL                |                        7 |                     34 |                         6 |                      1986 | 38.41KB/S                   |
|      1006 |  xx.xx.xx.xx   |     9708 |  1001 |  xx.xx.xx.xx   |      79983 |             1008 | STANDBY     | 2024-10-17 17:28:59.763822 | 2024-10-17 17:30:18.347025 | ONLINE           | SEQUENTIAL_READ_PARALLEL |              1503232 |  1729157418206776001 | NULL                |                        7 |                     26 |                         7 |                      2081 | 40.04KB/S                   |
|      1006 |  xx.xx.xx.xx   |     9708 |     1 |  xx.xx.xx.xx   |      79983 |             1008 | STANDBY     | 2024-10-17 17:28:49.512280 | 2024-10-17 17:30:18.350869 | ONLINE           | SEQUENTIAL_READ_PARALLEL |             21626880 |  1729157418206776001 | NULL                |                        6 |                     22 |                         5 |                      2263 | 43.53KB/S                   |
+-----------+----------------+----------+-------+----------------+------------+------------------+-------------+----------------------------+----------------------------+------------------+--------------------------+----------------------+----------------------+---------------------+--------------------------+------------------------+---------------------------+---------------------------+-----------------------------+
6 rows in set (0.01 sec)
```

## References

[V$OB_LOG_TRANSPORT_DEST_STAT](31550.v-ob_log_transport_dest_stat-of-sys-tenant.md)