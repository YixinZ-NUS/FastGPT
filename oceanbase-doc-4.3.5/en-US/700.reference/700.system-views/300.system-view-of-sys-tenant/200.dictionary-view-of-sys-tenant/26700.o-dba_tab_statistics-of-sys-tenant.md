|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# oceanbase.DBA_TAB_STATISTICS

<main id="notice" type='explain'>
<h4>Note</h4>
<p>This view is introduced since OceanBase Database V4.0.0. </p>
</main>

## Purpose

This view displays optimizer statistics for all tables in the database.

## Columns

| Column | Type | Nullable? | Description |
| --- | --- | --- | --- |
| OWNER | varchar(128) | NO | The user who owns the entity. |
| TABLE_NAME | varchar(128) | NO | The name of the table. |
| PARTITION_NAME | varchar(128) | NO | The name of the partition. |
| PARTITION_POSITION | decimal(10,0) | NO | The position of the partition in the table. |
| SUBPARTITION_NAME | varchar(128) | NO | The name of the subpartition. |
| SUBPARTITION_POSITION | decimal(10,0) | NO | The position of the subpartition in the partition. |
| OBJECT_TYPE | varchar(12) | NO | The type of the entity. |
| NUM_ROWS | decimal(10,0) | NO | The number of rows in the entity. |
| BLOCKS | decimal(10,0) | NO | Not supported. The default value is NULL. |
| EMPTY_BLOCKS | decimal(10,0) | NO | Not supported. The default value is NULL. |
| AVG_SPACE | decimal(10,0) | NO | Not supported. The default value is NULL. |
| CHAIN_CNT | decimal(10,0) | NO | Not supported. The default value is NULL. |
| AVG_ROW_LEN | decimal(10,0) | NO | The average row length of the entity. |
| AVG_SPACE_FREELIST_BLOCKS | decimal(10,0) | NO | Not supported. The default value is NULL. |
| NUM_FREELIST_BLOCKS | decimal(10,0) | NO | Not supported. The default value is NULL. |
| AVG_CACHED_BLOCKS | decimal(10,0) | NO | Not supported. The default value is NULL. |
| AVG_CACHE_HIT_RATIO | decimal(10,0) | NO | Not supported. The default value is NULL. |
| IM_IMCU_COUNT | decimal(10,0) | NO | Not supported. The default value is NULL. |
| IM_BLOCK_COUNT | decimal(10,0) | NO | Not supported. The default value is NULL. |
| IM_STAT_UPDATE_TIME | datetime | NO | Not supported. The default value is NULL. |
| SCAN_RATE | decimal(10,0) | NO | Not supported. The default value is NULL. |
| SAMPLE_SIZE | decimal(10,0) | YES | The sample size when statistics are collected. |
| LAST_ANALYZED | datetime(6) | NO | The time when the statistics were last analyzed. |
| GLOBAL_STATS | varchar(3) | NO | <li> `YES`: The statistics are directly collected or incrementally maintained. <li> `NO`: Other cases. |
| USER_STATS | varchar(3) | NO | Whether the partition statistics are user-defined. |
| STATTYPE_LOCKED | varchar(5) | NO | The type of statistics lock. |
| STALE_STATS | varchar(3) | NO | Whether the statistics are stale. |
| SCOPE | varchar(7) | NO | The scope of the statistics. |

## Sample query

Query the optimizer statistics of the `t_subpart` table in the current tenant.

```shell
obclient [oceanbase]> SELECT OWNER, TABLE_NAME, OBJECT_TYPE, NUM_ROWS, AVG_ROW_LEN FROM oceanbase.DBA_TAB_STATISTICS WHERE TABLE_NAME='t_subpart';
```

The query result is as follows:

```shell
+-------+------------+--------------+----------+-------------+
| OWNER | TABLE_NAME | OBJECT_TYPE  | NUM_ROWS | AVG_ROW_LEN |
+-------+------------+--------------+----------+-------------+
| test  | t_subpart  | TABLE        |    10000 |          60 |
| test  | t_subpart  | PARTITION    |     3334 |          60 |
| test  | t_subpart  | PARTITION    |     3333 |          60 |
| test  | t_subpart  | PARTITION    |     3333 |          60 |
| test  | t_subpart  | SUBPARTITION |     1336 |          60 |
| test  | t_subpart  | SUBPARTITION |      999 |          60 |
| test  | t_subpart  | SUBPARTITION |      999 |          60 |
| test  | t_subpart  | SUBPARTITION |     1002 |          60 |
| test  | t_subpart  | SUBPARTITION |     1332 |          60 |
| test  | t_subpart  | SUBPARTITION |      999 |          60 |
| test  | t_subpart  | SUBPARTITION |     1002 |          60 |
| test  | t_subpart  | SUBPARTITION |      999 |          60 |
| test  | t_subpart  | SUBPARTITION |     1332 |          60 |
+-------+------------+--------------+----------+-------------+
13 rows in set
```

## References

* View the column statistics at the global level: [DBA_TAB_COL_STATISTICS](26300.o-dba_tab_col_statistics-of-sys-tenant.md)

* View the column statistics at the partition level: [DBA_PART_COL_STATISTICS](24500.o-dba_part_col_statistics-of-sys-tenant.md)

* View the column statistics at the subpartition level: [DBA_SUBPART_COL_STATISTICS](25900.o-dba_subpart_col_statistics-of-sys-tenant.md)

* View the table-level histogram statistics: [DBA_TAB_HISTOGRAMS](26400.o-dba_tab_histograms-of-sys-tenant.md)

* View the partition-level histogram statistics: [DBA_PART_HISTOGRAMS](24600.o-dba_part_histograms-of-sys-tenant.md)

* View the subpartition-level histogram statistics: [DBA_SUBPART_HISTOGRAMS](26000.o-dba_subpart_histograms-of-sys-tenant.md)

* View the index statistics: [DBA_IND_STATISTICS](14500.o-dba_ind_statistics-of-sys-tenant.md)

* For more information about how to collect statistics, see the following topics:

  * [Manually collect statistics](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/200.statistics-collection-methods/300.collect-statistics-manually.md)

  * [Automatically collect statistics](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/200.statistics-collection-methods/400.collect-statistics-automatically.md)