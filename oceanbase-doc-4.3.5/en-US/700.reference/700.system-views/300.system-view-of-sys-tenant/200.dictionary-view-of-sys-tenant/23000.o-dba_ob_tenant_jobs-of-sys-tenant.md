|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# oceanbase.DBA_OB_TENANT_JOBS

<main id="notice" type='explain'>
<h4>Note</h4>
<p>This view is introduced since OceanBase Database V4.0.0. </p>
</main>

## Purpose

The `oceanbase.DBA_OB_TENANT_JOBS` view displays the tenant-level job information.

## Columns

| Column | Type | Nullable? | Description |
|-------------|--------------|------------|-------------|
| JOB_ID | bigint(20) | NO | The ID of the job. |
| JOB_TYPE    | varchar(128) | NO         | The type of the job. Valid values: <ul><li>`ALTER_TENANT_LOCALITY`: specifies to modify the locality of the tenant.</li> <li>`ROLLBACK_ALTER_TENANT_LOCALITY`: specifies to roll back the locality of the tenant.</li> <li>`SHRINK_RESOURCE_TENANT_UNIT_NUM`: specifies to reduce the number of units of the tenant.</li> <li>`ALTER_TENANT_PRIMARY_ZONE`: specifies to modify the `PRIMARY_ZONE` of the tenant.</li>  <li>`ALTER_RESOURCE_TENANT_UNIT_NUM`: specifies to modify the `UNIT_NUM` for the resource pool of the tenant.</li> <li>`UPGRADE_POST_ACTION`: specifies to perform prerequisite operations for the upgrade.</li> <li>`UPGRADE_SYSTEM_VARIABLE`: specifies to upgrade system variables.</li> <li>`UPGRADE_SYSTEM_TABLE`: specifies to upgrade system tables.</li> <li>`UPGRADE_BEGIN`: specifies to start the upgrade.</li> <li>`UPGRADE_VIRTUAL_SCHEMA`: specifies to upgrade schemas.</li> <li>`UPGRADE_SYSTEM_PACKAGE`: specifies to upgrade system packages.</li> <li>`UPGRADE_ALL_POST_ACTION`: specifies to perform follow-up operations for the upgrade.</li> <li>`UPGRADE_INSPECTION`: specifies to inspect the upgrade.</li> <li>`UPGRADE_END`: specifies to end the upgrade.</li> <li>`UPGRADE_ALL`: specifies to upgrade all tenants.</li></ul> |
| JOB_STATUS  | varchar(128) | NO         | The status of the job. Valid values:<li> `INPROGRESS`: The job is ongoing.<li> `SUCCESS`: The job succeeded.<li> `FAILED`: The job failed. |
| RESULT_CODE | bigint(20)   | YES        | The result code of the job. |
| PROGRESS    | bigint(20)   | NO         | The progress of the job, in percentage. The value range is \[0, 100\]. |
| START_TIME  | timestamp(6) | YES        | The start time of the job. |
| MODIFY_TIME | timestamp(6) | YES        | The time when the job was last modified. |
| TENANT_ID   | bigint(20)   | YES        | The ID of the tenant. |
| SQL_TEXT    | longtext     | YES        | The related SQL string.
| EXTRA_INFO  | varchar(512) | YES        | The additional information. |
| RS_SVR_IP   | varchar(46)  | NO         | The IP address of the RootService server. |
| RS_SVR_PORT | bigint(20)   | NO         | The port number of the RootService server. |

## Sample query

The system tenant queries tenant task information for all tenants.

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.DBA_OB_TENANT_JOBS\G
```

The query result is as follows:

```shell
*************************** 1. row ***************************
     JOB_ID: 6
   JOB_TYPE: ALTER_TENANT_PRIMARY_ZONE
 JOB_STATUS: SUCCESS
RESULT_CODE: 0
   PROGRESS: 100
 START_TIME: 2025-01-10 10:33:52.307613
MODIFY_TIME: 2025-01-10 10:33:52.312021
  TENANT_ID: 1002
   SQL_TEXT: ALTER TENANT mysql001 PRIMARY_ZONE='RANDOM'
 EXTRA_INFO: FROM: 'zone1', TO: 'RANDOM'
  RS_SVR_IP: 172.xx.xxx.xxx
RS_SVR_PORT: 2882
1 row in set
```