|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# oceanbase.CDB_OB_SPACE_USAGE

<main id="notice" type='explain'>
 <h4>Note</h4>
 <p>This view was introduced in version V4.3.4. </p>
</main>

## Purpose

* In Shared-Storage (SS) mode, the `CDB_OB_SPACE_USAGE` view records the sizes of spaces occupied by different types of data in different endpoints and paths for each tenant.

* In Shared-Nothing (SN) mode, the `CDB_OB_SPACE_USAGE` view records the details of the storage space occupied by each tenant on all nodes.

## Columns

| **Column** | **Type**  | **Nullable?** | **Description**                               |
|------------|-------------|---------------------|----------------------------------------|
| TENANT_ID   | varchar(128)  | NO   | The tenant ID.     |
| TENANT_NAME | varchar(128)  | NO   | The tenant name.     |
| ENDPOINT    | varchar(1024) | NO   | The endpoint of shared storage. This field is applicable only in Shared-Storage mode. In Shared-Nothing mode, the value of this field is `NULL`, indicating that it is undefined.      |
| PATH        | varchar(1024) | NO   | The path of shared storage. This field is applicable only in Shared-Storage mode. In Shared-Nothing mode, the value of this field is `NULL`, indicating that it is undefined.      |
| SPACE_TYPE  | varchar(11)   | NO   | <ul><li>Local Data: all macroblocks in the local deployment mode. In SS mode, this value indicates the private data, all metadata, and all temporary files of all replica nodes of the tenant. In SN mode, this value indicates all data, all metadata, and all temporary files of all replica nodes of the tenant. </li><li>clog Data: clogs in the local deployment mode. In SS mode, this value indicates the private clogs of all replica nodes of the tenant. In SN mode, this value indicates all clogs of all replica nodes of the tenant. </li><li>PRIVATE: the sum of multi-version baselines and temporary files. </li><li>Shared Data: the multi-version baseline shared by the tenant. This field is applicable only in SS mode. In SN mode, the value of this field is always `0`, indicating that no data is shared. </li></ul>    |
| USAGE_BYTES | decimal(42,0) | NO   | The actual disk usage required_size of data, in bytes.   |

## Sample query

In Shared-Nothing mode, the sys tenant can view detailed information about the total disk space occupied by each tenant across all nodes.

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.CDB_OB_SPACE_USAGE LIMIT 10;
```

The query result is as follows:

```shell
+-----------+-------------+----------+------+-------------+-------------+
| TENANT_ID | TENANT_NAME | ENDPOINT | PATH | SPACE_TYPE  | USAGE_BYTES |
+-----------+-------------+----------+------+-------------+-------------+
| 1         | sys         | NULL     | NULL | clog Data   |  7680321279 |
| 1         | sys         | NULL     | NULL | Shared Data |           0 |
| 1         | sys         | NULL     | NULL | Local Data  |   122265600 |
| 1002      | mysql001    | NULL     | NULL | clog Data   |  5925397177 |
| 1002      | mysql001    | NULL     | NULL | Shared Data |           0 |
| 1002      | mysql001    | NULL     | NULL | Local Data  |   106221568 |
| 1004      | oracle001   | NULL     | NULL | clog Data   |  5970846734 |
| 1004      | oracle001   | NULL     | NULL | Local Data  |    90218496 |
| 1004      | oracle001   | NULL     | NULL | Shared Data |           0 |
+-----------+-------------+----------+------+-------------+-------------+
9 rows in set
```

## References

* [oceanbase.CDB_OB_TABLE_SPACE_USAGE](11330.o-cdb_ob_table_space_usage-of-sys-tenant.md)
* [oceanbase.CDB_OB_SERVER_SPACE_USAGE](10450.o-cdb_ob_server_space_usage-of-sys-tenant.md)