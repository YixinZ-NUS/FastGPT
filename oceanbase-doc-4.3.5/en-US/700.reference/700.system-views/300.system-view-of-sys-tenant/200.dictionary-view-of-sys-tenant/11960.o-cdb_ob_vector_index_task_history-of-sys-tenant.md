|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# oceanbase.CDB_OB_VECTOR_INDEX_TASK_HISTORY

<main id="notice" type='explain'>
<h4>Note</h4>
<p>This view is available starting with V4.3.5 BP3. </p>
</main>

## Description

The `CDB_OB_VECTOR_INDEX_TASK_HISTORY` view displays the historical information of vector index partition rebuild tasks for all tenants in the cluster.

## Columns

| Column                   | Type      | Nullable | Description |
|---------------------------|---------------|------|----|
| TENANT_ID	                | bigint(20)	| YES   | The tenant ID. |
| TABLE_ID	                | bigint(20)	| YES   | The table ID. |
| TABLET_ID	                | bigint(20)	| YES   | The partition ID. |
| TASK_ID	                | bigint(20)	| YES   | The task ID. |
| START_TIME	                | timestamp(6)	| YES   | The task start time. |
| MODIFY_TIME	                | timestamp(6)	| YES   | The task end time. |
| TRIGGER_TYPE	                | varchar(16)	| NO   | The task trigger type:<ul><li><code>0</code>: Automatically triggered. </li><li><code>1</code>: Manually triggered. </li></ul> |
| STATUS	                | varchar(16)	| NO   | The task status:<ul><li><code>0</code>: The task is being prepared. </li><li><code>1</code>: The task is being executed. </li><li><code>2</code>: The task is paused. </li><li><code>3</code>: The task has ended. </li></ul> |
| TASK_TYPE	                | bigint(20)	| NO   | The task type:<ul><li><code>0</code>: Asynchronous build. </li><li><code>1</code>: Index partition rebuild. </li></ul>      | |
| TASK_SCN	                | bigint(20)	| NO   | The task version number. |
| RET_CODE	                | bigint(20)	| NO   | The task status when the task ended:<ul><li><code>0</code>: The task succeeded. </li><li><code>Non-zero</code>: The task failed. </li></ul> |
| TRACE_ID	                | varchar(512)	| NO   | The task execution trace ID. |

## Sample query

In the sys tenant, query the historical information of vector index performance optimization tasks for all tenants.

```sql
SELECT * FROM oceanbase.CDB_OB_VECTOR_INDEX_TASK_HISTORY;
```

The query result is as follows:

```shell
+-----------+----------+---------------------+---------+----------------------------+----------------------------+--------------+----------+-----------+------------------+----------+------------------------------------+
| TENANT_ID | TABLE_ID | TABLET_ID           | TASK_ID | START_TIME                 | MODIFY_TIME                | TRIGGER_TYPE | STATUS   | TASK_TYPE | TASK_SCN         | RET_CODE | TRACE_ID                           |
+-----------+----------+---------------------+---------+----------------------------+----------------------------+--------------+----------+-----------+------------------+----------+------------------------------------+
|      1004 |   500009 | 1152921504606846980 |   20332 | 1970-08-23 17:08:27.174915 | 1970-08-23 17:08:27.174925 | AUTO         | FINISHED |         1 | 1746611355009627 |        0 | Y61460BA2DAD8-000634872C0CED50-0-1 |
|      1004 |   500017 | 1152921504606846987 |   22023 | 1970-08-23 17:08:27.175705 | 1970-08-23 17:08:27.175845 | AUTO         | FINISHED |         1 | 1746611825281271 |        0 | Y61460BA2DAD8-000634872BECF00C-0-1 |
+-----------+----------+---------------------+---------+----------------------------+----------------------------+--------------+----------+-----------+------------------+----------+------------------------------------+
2 rows in set
```

## References

* [DBA_OB_VECTOR_INDEX_TASK_HISTORY](24160.o-dba_ob_vector_index_task_history-of-sys-tenant.md)