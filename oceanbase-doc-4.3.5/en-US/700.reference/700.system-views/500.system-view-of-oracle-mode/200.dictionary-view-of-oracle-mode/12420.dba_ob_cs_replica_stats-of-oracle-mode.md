|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|Oracle Mode|
|machine-translation||

# DBA_OB_CS_REPLICA_STATS

<main id="notice" type='explain'>
<h4>Note</h4>
<p>For OceanBase Database V4.3.5, this view is introduced in V4.3.5 BP1. </p>
</main>

## Purpose

This view displays the progress of converting tablets to columnstore format within columnstore replica log streams on each OBServer node for the current tenant.

## Columns

| Column                | Type          | Nullable? | Description                                |
|---------------------------|---------------|---------|-------------------------------------|
| SVR_IP                    | VARCHAR2(46)  | NO   | The IP address of the server where the columnstore replica resides. |
| SVR_PORT                  | NUMBER(38)    | NO   | The port number of the server where the columnstore replica resides.  |
| LS_ID                     | NUMBER(38)    | NO   | The ID of the log stream.  |
| TOTAL_TABLET_CNT          | NUMBER(38)    | NO   | The total number of partitions to be converted to columnstore format.  |
| AVAILABLE_TABLET_CNT      | NUMBER        | NO   | The number of available partitions.    |
| TOTAL_MACRO_BLOCK_CNT     | NUMBER        | NO   | The total number of baseline macroblocks (ignoring multi-version).  |
| AVAILABLE_MACRO_BLOCK_CNT | NUMBER        | NO   | The number of available baseline macroblocks  (ignoring multi-version).   |
| AVAILABLE                 | VARCHAR2(5)   | NO   | Whether the log stream is completely available: <ul><li>`TRUE`: Yes. A log stream is considered completely available only after all tablets in the stream are available.</li> <li>`FALSE`: No</li></ul>  |

## Sample query

Query the progress of converting tablets to columnstore format in the log streams of columnstore replicas on each OBServer node of the tenant.

```shell
obclient[SYS]> SELECT * FROM SYS.DBA_OB_CS_REPLICA_STATS;
```

The query result is as follows:

```shell
+----------------+----------+-------+------------------+----------------------+-----------------------+---------------------------+-----------+
| SVR_IP         | SVR_PORT | LS_ID | TOTAL_TABLET_CNT | AVAILABLE_TABLET_CNT | TOTAL_MACRO_BLOCK_CNT | AVAILABLE_MACRO_BLOCK_CNT | AVAILABLE |
+----------------+----------+-------+------------------+----------------------+-----------------------+---------------------------+-----------+
| xx.xxx.xxx.212 |    63000 |  1001 |              133 |                  133 |                   875 |                       875 | TRUE      |
+----------------+----------+-------+------------------+----------------------+-----------------------+---------------------------+-----------+
1 row in set
```

Based on the query results, you can estimate the progress of rowstore to columnstore conversion by calculating the values of `AVAILABLE_TABLET_CNT / TOTAL_TABLET_CNT` or `AVAILABLE_MACRO_BLOCK_CNT / TOTAL_MACRO_BLOCK_CNT`.

## References

* [CDB_OB_CS_REPLICA_STATS](../../300.system-view-of-sys-tenant/200.dictionary-view-of-sys-tenant/8120.o-cdb_ob_cs_replica_stats-of-sys-tenant.md)

* [Use columnstore replicas](../../../../600.manage/300.replica-management/150.the-use-of-columnstore-replica.md)