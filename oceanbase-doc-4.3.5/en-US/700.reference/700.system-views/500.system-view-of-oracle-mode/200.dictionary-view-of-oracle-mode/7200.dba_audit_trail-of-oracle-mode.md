|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|Oracle Mode|
|machine-translation||

# DBA_AUDIT_TRAIL

<main id="notice" type='explain'>
<h4>Note</h4>
<p>This view is introduced in V2.2.77. </p>
</main>

## Purpose

The `DBA_AUDIT_TRAIL` view displays all audit trail entries.

  <main id="notice" >
    <h4>Applicability</h4>
    <p>This view applies only to the Oracle-compatible mode of OceanBase Database. </p>
  </main>

## Columns

|      **Column**      |           **Type**            | **Nullable?** |                          **Description**                           |
|--------------------|-----------------------------|----------------|-----------------------------------------------------------|
| OS_USERNAME        | VARCHAR2(255)               | NO             | This field is currently not supported. The default value is NULL.                |
| USERNAME           | VARCHAR2(64)                | NO             | The name of the user auditing the operation.                                               |
| USERHOST           | VARCHAR2(32)                | NO             | This field is currently not supported. The default value is NULL.                           |
| TERMINAL           | VARCHAR2(255)               | NO             | This field is currently not supported. The default value is NULL.                          |
| TIMESTAMP          | DATE                        | NO             | The date and time when the audit trace entry is created in the local database session time zone.                                 |
| OWNER              | VARCHAR2(64)                | YES            | The creator of the object affected by the action.                                              |
| OBJ_NAME           | VARCHAR2(256)               | YES            | The name of the object affected by the operation.                                               |
| ACTION             | NUMBER(38)                  | NO             | The numeric code of the operation type. The corresponding name of the operation type is in the ACTION_NAME column. |
| ACTION_NAME        | VARCHAR2(128)               | NO             | The name of the operation type corresponding to the numeric code in the ACTION column.                                |
| NEW_OWNER          | VARCHAR2(64)                | YES            | The owner of the object named in the NEW_NAME column.                                    |
| NEW_NAME           | VARCHAR2(256)               | YES            | The new name of the object after a RENAME operation, or the name of the base object.                               |
| OBJ_PRIVILEGE      | VARCHAR2(255)               | NO             | The object privileges granted or revoked by using the GRANT or REVOKE statement.                     |
| SYS_PRIVILEGE      | VARCHAR2(255)               | NO             | The system privileges granted or revoked by using the GRANT or REVOKE statement.                     |
| ADMIN_OPTION       | VARCHAR2(1)                 | NO             | Indicates whether the ADMIN option was used to grant the role or system privilege. |
| GRANTEE            | VARCHAR2(128)               | NO             | The name specified in the GRANT or REVOKE statement.                          |
| AUDIT_OPTION       | VARCHAR2(40)                | NO             | The audit option set together with the audit statement.                                     |
| SES_ACTIONS        | VARCHAR2(19)                | NO             | This field is currently not supported. The default value is NULL.                              |
| LOGOFF_TIME        | DATE                        | NO             | The date and time when the user logged off.                                                |
| LOGOFF_LREAD       | NUMBER(38)                  | NO             | The number of logical reads in the session.                                                   |
| LOGOFF_PREAD       | NUMBER                      | NO             | This field is currently not supported. The default value is NULL.                           |
| LOGOFF_LWRITE      | NUMBER                      | NO             | This field is currently not supported. The default value is NULL.                          |
| LOGOFF_DLOCK       | VARCHAR2(40)                | NO             | This field is currently not supported. The default value is NULL.                        |
| COMMENT_TEXT       | VARCHAR2(65536)             | YES            | The text comment on the audit trace entry.                                             |
| SESSIONID          | NUMBER(38)                  | NO             | For V4.3.x:<ul><li>Before V4.3.5 BP2:<br>In all connection modes (direct mode/ODP mode), this field indicates the server session ID.</li><li>V4.3.5 BP2 and later versions:<ul><li>In direct mode:<br>This field indicates the server session ID.</li><li>In ODP mode:<ul><li>When the ODP parameter <code>client_session_id_version = 2</code> is set, this field indicates the client session ID.</li><li>When <code>client_session_id_version = 1</code>, this field indicates the server session ID.</li></ul></li></ul></li></ul>                                                 |
| ENTRYID            | NUMBER(38)                  | NO             | The numeric ID of each audit trace entry in the session.                                         |
| STATEMENTID        | NUMBER(38)                  | NO             | The numeric ID of each statement.                                                |
| RETURNCODE         | NUMBER(38)                  | NO             | The error code generated by the operation.                                                 |
| PRIV_USED          | VARCHAR2(40)                | NO             | This field is currently not supported. The default value is NULL.                       |
| CLIENT_ID          | VARCHAR2(40)                | NO             | This field is currently not supported. The default value is NULL. |
| ECONTEXT_ID        | VARCHAR2(40)                | NO             | This field is currently not supported. The default value is NULL.                      |
| SESSION_CPU        | NUMBER(38)                  | NO             | The CPU time used by the session.                                              |
| EXTENDED_TIMESTAMP | TIMESTAMP(6) WITH TIME ZONE | NO             | The timestamp when the audit trace entry is created in the UTC time zone.                                     |
| PROXY_SESSIONID    | NUMBER(38)                  | NO             | The proxy session serial number.                                                   |
| GLOBAL_UID         | NUMBER(38)                  | NO             | The global user identifier of the user.                                                |
| INSTANCE_NUMBER    | VARCHAR2(40)                | NO             | This field is currently not supported. The default value is NULL.    |
| OS_PROCESS         | VARCHAR2(40)                | NO             | This field is currently not supported. The default value is NULL.                         |
| TRANSACTIONID      | VARCHAR2(128)               | NO             | The transaction identifier that accessed or modified the object.                                          |
| SCN                | NUMBER(38)                  | NO             | This field is currently not supported. The default value is 0.                        |
| SQL_BIND           | VARCHAR2(2000)              | YES            | This field is currently not supported. The default value is NULL.                         |
| SQL_TEXT           | VARCHAR2(2000)              | YES            | The SQL text of the query.                                                |
| OBJ_EDITION_NAME   | VARCHAR2(128)               | NO             | This field is currently not supported. The default value is NULL.                     |
| DBID               | NUMBER(38)                  | NO             | The database identifier of the audited database.                                             |

## Sample query

Query all audit records in the current tenant.

```shell
obclient [SYS]> SELECT USERNAME, USERHOST, TIMESTAMP, ACTION, SQL_TEXT FROM SYS.DBA_AUDIT_TRAIL;
```

The query result is as follows:

```shell
+------------+----------------+-----------+------------+
| USERNAME   | USERHOST       | TIMESTAMP | SQL_TEXT   |
+------------+----------------+-----------+------------+
| ORAAUDITOR | 100.xx.xxx.xxx | 08-APR-25 | DISCONNECT |
| SYS        | 100.xx.xxx.xxx | 08-APR-25 | CONNECT    |
| ORAAUDITOR | 100.xx.xxx.xxx | 08-APR-25 | CONNECT    |
| ORAAUDITOR | 100.xx.xxx.xxx | 08-APR-25 | DISCONNECT |
| SYS        | 100.xx.xxx.xxx | 08-APR-25 | CONNECT    |
| ORAAUDITOR | 100.xx.xxx.xxx | 08-APR-25 | CONNECT    |
| ORAAUDITOR | 100.xx.xxx.xxx | 08-APR-25 | DISCONNECT |
| SYS        | 100.xx.xxx.xxx | 08-APR-25 | CONNECT    |
+------------+----------------+-----------+------------+
8 rows in set
```

## References

* Query all audit records in the current tenant: [USER_AUDIT_TRAIL](25400.user_audit_trail-of-oracle-mode.md)

* Query the action ID and corresponding name in the audit records: [AUDIT_ACTIONS](6500.audit_actions-of-oracle-mode.md)

* Query the audit records generated by `AUDIT EXISTS` and `AUDIT NOT EXISTS`: [DBA_AUDIT_EXISTS](6800.dba_audit_exists-of-oracle-mode.md)

* Query the audit records for all objects:

  * [DBA_AUDIT_OBJECT](6900.dba_audit_object-of-oracle-mode.md)

  * [USER_AUDIT_OBJECT](25100.user_audit_object-of-oracle-mode.md)

* Query the audit records for `CONNECT` and `DISCONNECT`:

  * [DBA_AUDIT_SESSION](7000.dba_audit_session-of-oracle-mode.md)

  * [USER_AUDIT_SESSION](25200.user_audit_session-of-oracle-mode.md)

* Query the audit records for `GRANT`, `REVOKE`, `AUDIT`, `NOAUDIT`, and `ALTER SYSTEM` statements:

  * [DBA_AUDIT_STATEMENT](7100.dba_audit_statement-of-oracle-mode.md)

  * [USER_AUDIT_STATEMENT](25300.user_audit_statement-of-oracle-mode.md)

* For more information about security audit, see the following topics:

  * [Enable audit](../../../../600.manage/500.security-and-permissions/600.security-audit/300.security-audit-of-oracle-mode/200.audit-open-of-oracle-mode.md)
  * [Set up and view audit rules](../../../../600.manage/500.security-and-permissions/600.security-audit/300.security-audit-of-oracle-mode/300.set-up-and-view-audit-rules-of-oracle-mode.md)
  * [View audit records](../../../../600.manage/500.security-and-permissions/600.security-audit/300.security-audit-of-oracle-mode/500.audit-records-of-oracle-mode.md)
  * [Audit user login](../../../../600.manage/500.security-and-permissions/600.security-audit/300.security-audit-of-oracle-mode/600.audit-user-logon-of-oracle-mode.md)
  * [Audit user operations](../../../../600.manage/500.security-and-permissions/600.security-audit/300.security-audit-of-oracle-mode/700.audit-user-operations-of-oracle-mode.md)
