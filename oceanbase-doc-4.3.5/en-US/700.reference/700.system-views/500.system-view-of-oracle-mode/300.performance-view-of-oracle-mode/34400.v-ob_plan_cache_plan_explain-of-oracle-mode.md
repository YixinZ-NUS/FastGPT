|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|Oracle Mode|
|machine-translation||

# V$OB_PLAN_CACHE_PLAN_EXPLAIN

<main id="notice" type='explain'>
  <h4>Note</h4>
  <p>This view is introduced since OceanBase Database V4.0.0. </p>
</main>

## Purpose

The `V$OB_PLAN_CACHE_PLAN_EXPLAIN` view displays the physical execution plans that are cached in the plan cache on the current OBServer node.

  <main id="notice" type='explain'>
    <h4>Note</h4>
    <p>This view supports only <code>GET</code> operations. To query information in this view, you must specify the <code>PLAN_ID</code> column. </p>
  </main>

## Columns

| Column | Type | Nullable? | Description |
|--------------|----------------|----------------|------------------|
| TENANT_ID    | NUMBER(38)     | NO             | The ID of the tenant. |
| SVR_IP       | VARCHAR2(46)   | NO             | The IP address of the OBServer node. |
| SVR_PORT     | NUMBER(38)     | NO             | The port number of the OBServer node. |
| PLAN_ID      | NUMBER(38)     | NO             | The ID of the plan. |
| PLAN_DEPTH   | NUMBER(38)     | NO             | The display depth of the operator. |
| PLAN_LINE_ID | NUMBER(38)     | NO             | The ID of the operator. |
| OPERATOR     | VARCHAR2(128)  | NO             | The name of the operator. |
| NAME         | VARCHAR2(256)  | NO             | The name of the table. |
| ROWS         | NUMBER(38)     | NO             | The estimated number of rows in the result. |
| COST         | NUMBER(38)     | NO             | The estimated cost. |
| PROPERTY     | VARCHAR2(4096) | NO             | The information about the corresponding operator. |

## Sample query

1. Query the [`V$OB_PLAN_CACHE_PLAN_STAT`](34500.v-ob_plan_cache_plan_stat-of-oracle-mode.md) view for the `PLAN_ID` value of the current OBServer node.

   ```shell
   obclient [SYS]> SELECT PLAN_ID FROM SYS.V$OB_PLAN_CACHE_PLAN_STAT WHERE ROWNUM < 5;
   ```

   The query result is as follows:

   ```shell
   +---------+
   | PLAN_ID |
   +---------+
   |     800 |
   |     802 |
   |     803 |
   |     804 |
   +---------+
   4 rows in set (0.011 sec)
   ```

2. Query the `V$OB_PLAN_CACHE_PLAN_EXPLAIN` view for the physical execution plan with the `PLAN_ID` value of `800` in the plan cache.

   ```shell
   obclient [SYS]> SELECT * FROM SYS.V$OB_PLAN_CACHE_PLAN_EXPLAIN WHERE PLAN_ID = 800\G
   ```

   The query result is as follows:

   ```shell
   *************************** 1. row ***************************
     TENANT_ID: 1004
         SVR_IP: xx.xx.xx.xx
       SVR_PORT: 2882
       PLAN_ID: 800
     PLAN_DEPTH: 0
   PLAN_LINE_ID: 0
       OPERATOR: PHY_TABLE_SCAN
           NAME: __all_transfer_task
           ROWS: 1
           COST: 2
       PROPERTY: table_rows:1, physical_range_rows:1, logical_range_rows:1, index_back_rows:0, output_rows:1, avaiable_index_name[__all_transfer_task]
   1 row in set (0.023 sec)
   ```

## References

[GV$OB_PLAN_CACHE_PLAN_EXPLAIN](2200.gv-ob_plan_cache_plan_explain-of-oracle-mode.md)