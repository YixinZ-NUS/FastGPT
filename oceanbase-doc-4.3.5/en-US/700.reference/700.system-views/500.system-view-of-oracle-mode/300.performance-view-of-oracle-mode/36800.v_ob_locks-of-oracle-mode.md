|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|Oracle Mode|
|machine-translation||

# V$OB_LOCKS

<main id="notice" type='explain'>
  <h4>Note</h4>
  <p>This view is introduced in V4.2.0. </p>
</main>

## Purpose

This view displays the lock or lock request status of each table for the current user.

## Columns

| **Column** | **Type** | **Nullable?** | **Description** |
| --- | --- | --- | --- |
| SVR_IP | VARCHAR2(46) | NO | The IP address of the OBServer node that holds or requests the lock. |
| SVR_PORT | NUMBER(38) | NO | The port number of the OBServer node that holds or requests the lock. |
| TENANT_ID | NUMBER(38) | NO | The ID of the tenant that holds or requests the lock. |
| TRANS_ID | NUMBER(38) | NO | The transaction ID of the transaction that holds or requests the lock. |
| SESSION_ID | NUMBER(38)    | NO   | The session ID of the session that holds or requests the lock.<ul><li>Before V4.3.5 BP2:<br>In all connection modes (direct mode/ODP mode), this field indicates the server session ID.</li><li>V4.3.5 BP2 and later versions:<ul><li>In direct mode:<br>This field indicates the server session ID.</li><li>In ODP mode:<ul><li>When the ODP parameter <code>client_session_id_version = 2</code> is set, this field indicates the client session ID.</li><li>When <code>client_session_id_version = 1</code>, this field indicates the server session ID.</li></ul> |
| TYPE | VARCHAR2(9) | NO | The type of the lock. Valid values: <ul><li>TM: table lock</li><li>TX: transaction lock</li><li>TR: row lock</li></ul> |
| ID1 | NUMBER | NO | Identifier 1 of the lock. <ul><li>For table locks, this identifier can be either TABLE_ID or TABLET_ID. </li><li>For transaction locks, this identifier is TX_ID. </li><li>For row locks, this identifier is TABLET_ID.</li></ul> |
| ID2 | VARCHAR2(553) | NO | Identifier 2 of the lock. <ul><li>For table locks, this field is NULL. </li><li>For transaction locks, this field is NULL. </li><li>For row locks, this field is TX_ID+rowkey.</li></ul> |
| ID3 | varchar(512) | NO | Identifier 3 of the lock. <ul><li>For table locks, this identifier is TABLE_ID/TABLET_ID. </li><li>For transaction locks, this field is NULL. </li><li>For row locks, this field is TABLET_ID+rowkey.</li></ul> <main id="notice" type='explain'><h4>Note</h4><p><ul><li>In V4.3.x, this field is introduced in V4.3.2. </li><li>In V4.2.x, this field is introduced in V4.2.5. </li></ul></p></main> |
| LMODE | VARCHAR2(8) | NO | The mode in which the current lock is held. <ul><li>NONE: indicates that no lock is held. </li><li>RS: ROW SHARE. </li><li>RX: ROW EXCLUSIVE. </li><li>S: SHARE. </li><li>SRX: SHARE ROW EXCLUSIVE. </li><li>X: EXCLUSIVE. </li></ul> |
| REQUEST | VARCHAR2(8) | NO | The mode in which the current lock is requested. <ul><li>NONE: indicates that no lock is requested. </li><li>RS: ROW SHARE. </li><li>RX: ROW EXCLUSIVE. </li><li>S: SHARE. </li><li>SRX: SHARE ROW EXCLUSIVE. </li><li>X: EXCLUSIVE. </li></ul> |
| CTIME | NUMBER(38) | NO | The time when the lock was obtained or the wait time for the lock, in microseconds. |
| BLOCK | NUMBER | NO | Indicates whether the lock requested by the current transaction is held by another transaction. <ul><li>0: The requested lock is not held by another transaction, which means that the transaction holds the lock. </li><li>1: The requested lock is held by another transaction, which means that the transaction is blocked. </li></ul>|

## Sample query

Check the lock status of each table for the current user on the current OBServer node.

```shell
obclient [SYS]> SELECT * FROM SYS.V$OB_LOCKS;
```

The query result is as follows:

```shell
+----------------+----------+-----------+----------+------------+------+---------+------------+--------+-------+---------+-----------+-------+
| SVR_IP         | SVR_PORT | TENANT_ID | TRANS_ID | SESSION_ID | TYPE | ID1     | ID2        | ID3    | LMODE | REQUEST | CTIME     | BLOCK |
+----------------+----------+-----------+----------+------------+------+---------+------------+--------+-------+---------+-----------+-------+
| 11.xxx.xxx.xxx |    28825 |      1004 |  3966849 | 3221605368 | TM   | 3966849 | 3221605368 | 500084 | X     | NONE    | 343458403 |     0 |
| 11.xxx.xxx.xxx |    28825 |      1004 |  3966849 | 3221605368 | TM   | 3966849 | 3221605368 | 200069 | X     | NONE    | 343441113 |     0 |
| 11.xxx.xxx.xxx |    28825 |      1004 |  3966849 | 3221605368 | TM   | 3966849 | 3221605368 | 200068 | X     | NONE    | 343441120 |     0 |
| 11.xxx.xxx.xxx |    28825 |      1004 |  3966849 | 3221605368 | TM   | 3966849 | 3221605368 | 200067 | X     | NONE    | 343441128 |     0 |
| 11.xxx.xxx.xxx |    28825 |      1004 |  3966849 | 3221605368 | TM   | 3966849 | 3221605368 | 200066 | X     | NONE    | 343441135 |     0 |
| 11.xxx.xxx.xxx |    28825 |      1004 |  3966849 | 3221605368 | TM   | 3966849 | 3221605368 | 200065 | X     | NONE    | 343441144 |     0 |
| 11.xxx.xxx.xxx |    28825 |      1004 |  3966849 | 3221605368 | TM   | 3966849 | 3221605368 | 200064 | X     | NONE    | 343441152 |     0 |
| 11.xxx.xxx.xxx |    28825 |      1004 |  3966849 | 3221605368 | TM   | 3966849 | 3221605368 | 200063 | X     | NONE    | 343441159 |     0 |
| 11.xxx.xxx.xxx |    28825 |      1004 |  3966849 | 3221605368 | TM   | 3966849 | 3221605368 | 200062 | X     | NONE    | 343441187 |     0 |
| 11.xxx.xxx.xxx |    28825 |      1004 |  3966849 | 3221605368 | TM   | 3966849 | 3221605368 | 200061 | X     | NONE    | 343441200 |     0 |
+----------------+----------+-----------+----------+------------+------+---------+------------+--------+-------+---------+-----------+-------+
10 rows in set
```

## References

For more information about table locks, see [Lock a table](../../../300.database-object-management/200.manage-object-of-oracle-mode/100.manage-tables-of-oracle-mode/900.lock-a-table-of-oracle-mode.md).