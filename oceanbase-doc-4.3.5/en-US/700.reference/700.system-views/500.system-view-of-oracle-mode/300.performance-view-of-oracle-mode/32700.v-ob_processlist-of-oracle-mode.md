|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|Oracle Mode|
|machine-translation||

# V$OB_PROCESSLIST

<main id="notice" type='explain'>
  <h4>Note</h4>
  <p>This view is introduced since OceanBase Database V4.0.0. </p>
</main>

## Purpose

The `V$OB_PROCESSLIST` view displays session information on the current OBServer node.

## Columns

| Column |  Type  | Nullable? | Description |
|-----------|----------|----------|-------------|
| SVR_IP     | VARCHAR2(46) | NO | IP address of the server. |
| SVR_PORT   | NUMBER(38) | NO | Port of the server. |
| SQL_PORT   | NUMBER(38) | NO | Port for SQL statements. |
| ID         | NUMBER(38) | NO | Session ID. |
| USER       | CHAR(193) | NO | Username. |
| HOST       | VARCHAR2(128) | NO | Host name of the client. (For example, if you connect to the database through obproxy, this column displays the host address of obproxy.) |
| DB         | VARCHAR2(128) | YES | Name of the database being accessed. |
| TENANT     | VARCHAR2(128) | NO | Name of the tenant being accessed. |
| COMMAND    | VARCHAR2(4096) | NO | Type of the current command. |
| TIME       | NUMBER(38) | NO | Execution time of the current command in seconds. If the command is retried, the value is reset to 0. |
| TOTAL_TIME | NUMBER(38) | NO | Total execution time of the current command in seconds. If the command is retried, the value is not reset. |
| STATE      | VARCHAR2(128) | YES | Current session status. |
| INFO       | VARCHAR2(262143) | YES | This view displays the current command being executed. |
| PROXY_SESSID | NUMBER(38) | YES | If the client is obproxy, this column displays the proxy session ID. |
| MASTER_SESSID | NUMBER(38) | YES | ID of the master session, which is used to chain multiple subsessions of the same SQL statement. |
| USER_CLIENT_IP | VARCHAR2(46) | YES | IP address of the user client. |
| USER_HOST  | VARCHAR2(128) | YES | Host name of the user client. |
| RETRY_CNT  | NUMBER(38) | NO | Number of retries of the current command. |
| RETRY_INFO | NUMBER(38) | NO | Retry information of the current command, which is generally the error code of the last retry. |
| SQL_ID     | VARCHAR2(32) | NO | SQL ID. |
| TRANS_ID   | NUMBER(38) | NO | Transaction ID. |
| THREAD_ID  | NUMBER(38) | NO | Thread ID. |
| SSL_CIPHER | VARCHAR2(4096) | YES | Name of the encryption cipher. |
| TRACE_ID   | VARCHAR2(64) | YES | Trace ID. |
| TRANS_STATE| VARCHAR2(32) | YES | Transaction status. Valid values include:<ul><li>`IDLE`: the transaction is idle, indicating that the transaction has not started. </li> <li>`ACTIVE`: the transaction is explicitly started. You can start a transaction by using the `START TRANSACTION` or `BEGIN` statement. </li> <li>`IMPLICIT_ACTIVE`: the transaction is implicitly started. In the `autocommit = on` mode, a transaction is started after you execute a data modification statement. </li> <li>`ROLLBACK_SAVEPOINT`: the transaction is rolling back to a savepoint. </li> <li>`IN_TERMINATE`: the transaction is being terminated, which can be caused by internal reasons or user-initiated transactions (for example, when you execute the `COMMIT` or `ROLLBACK` statement). </li> <li>`ABORTED`: the transaction is terminated due to an exception. </li> <li>`ROLLED_BACK`: the transaction has been rolled back. </li> <li>`COMMIT_TIMEOUT`: the transaction commit has timed out. </li> <li>`COMMIT_UNKNOWN`: the result of the transaction commit is unknown. </li> <li>`COMMITTED`: the transaction has been committed. </li></ul> |
| ACTION     | VARCHAR2(4096) | YES | Name of the current operation set by calling the DBMS_APPLICATION_INFO.SET_ACTION procedure. |
| MODULE     | VARCHAR2(4096) | YES | Name of the current operation set by calling the DBMS_APPLICATION_INFO.SET_MODULE procedure. |
| CLIENT_INFO| VARCHAR2(4096) | YES | Information set by calling the DBMS_APPLICATION_INFO.SET_CLIENT_INFO procedure. |
| LEVEL      | NUMBER(38) | NO | Level of full-link tracing and monitoring for the session. For example, 1 indicates level 1 diagnostic information. <main id="notice" type='explain'><h4>Note</h4><p>This field was introduced in V4.2.1. </p></main> |
| SAMPLE_PERCENTAGE | NUMBER(38) | NO | Sampling frequency for full-link tracing and monitoring for the session. For example, 50 indicates that diagnostic information is sampled at a 50% frequency. <main id="notice" type='explain'><h4>Note</h4><p>This field was introduced in V4.2.1. </p></main> |
| RECORD_POLICY    | VARCHAR2(32)   | NO         | Recording strategy for full-link tracing and monitoring for the session. Valid values include:<ul><li>ALL: Trace data points of all traces that are sampled and traced are printed to the log file, and are printed to the log file at the end of each span. </li><li>ONLY_SLOW_QUERY: Trace data points of all traces that are sampled and traced are printed to the log file only if the trace is a slow query. Otherwise, the trace data points are discarded. For this printing strategy, the trace logs are printed to the log file after the request is determined to be a slow query. In obproxy, for the root span, which is the span at the transaction level, the root span is printed to the log file when a slow query is detected. </li><li>SAMPLE_AND_SLOW_QUERY: Trace data points of all traces that are sampled and traced are printed to the log file if they meet the following conditions:<ol><li>If you use the hidden parameter <code>_print_sample_ppm</code> to perform sampling at a 1/10,000 probability, the trace data points are printed to the log file only if the sampling result is selected. </li><li>The trace data points meet the printing conditions for the ONLY_SLOW_QUERY mode. </li></ol> In this mode, the trace logs are not printed to the log file at the end of the span. If condition 1 is met, the trace logs are marked as mandatory for printing and are passed to the following link components. If condition 2 is met, the trace logs are printed to the log file at the end of the span. </li></ul><main id="notice" type='explain'><h4>Note</h4><p>This field was introduced in V4.2.1. </p></main> |
| LB_VID           | NUMBER(38)     | NO         | If you directly connect to the database through load balancing in a public cloud environment, this column displays the VPC ID of the load balancing service. Otherwise, it displays NULL. <main id="notice" type='explain'><h4>Note</h4><p>This field was introduced in V4.2.1. </p></main> |
| LB_VIP           | VARCHAR2(46)   | NO         | If you directly connect to the database through load balancing in a public cloud environment, this column displays the IP address of the client connecting to the load balancing service. Otherwise, it displays NULL. <main id="notice" type='explain'><h4>Note</h4><p>This field was introduced in V4.2.1. </p></main> |
| LB_VPORT         | NUMBER(38)     | NO         | If you directly connect to the database through load balancing in a public cloud environment, this column displays the port of the client connecting to the load balancing service. Otherwise, it displays NULL. <main id="notice" type='explain'><h4>Note</h4><p>This field was introduced in V4.2.1. </p></main> |
| IN_BYTES         | NUMBER(38)     | NO         | Incoming traffic of the session in bytes. <main id="notice" type='explain'><h4>Note</h4><p>This field was introduced in V4.2.1. </p></main> |
| OUT_BYTES        | NUMBER(38)     | NO         | Outgoing traffic of the session in bytes. <main id="notice" type='explain'><h4>Note</h4><p>This field was introduced in V4.2.1. </p></main> |
| USER_CLIENT_PORT  | NUMBER(38)          | NO   | Client address information. <main id="notice" type='explain'><h4>Note</h4><ul><li>In V4.3.x, this field was introduced in V4.3.0. </li> <li>In V4.2.x, this field was introduced in V4.2.3. </li></ul></main> |
| PROXY_USER        | VARCHAR2(128) | YES        | <ul><li>If you log in as a proxy user, the name of the proxy user is returned. </li><li>If you log in as a non-proxy user, this column displays an empty string. </li></ul><main id="notice" type='explain'><h4>Note</h4><ul><li>In V4.3.x, this field was introduced in V4.3.2. </li><li>In V4.2.x, this field was introduced in V4.2.3. </li></ul></main> |
| SERVICE_NAME     | VARCHAR2(64)   | YES        | Service name for which the session is created. If the session is not created by a service name, this column displays NULL. <main id="notice" type='explain'><h4>Note</h4><ul><li>In V4.3.x, this field was introduced in V4.3.1. </li> <li>In V4.2.1, this field was introduced in V4.2.1 BP9. For other V4.2.x versions, this field was introduced in V4.2.4. </li></ul></main> |
| TOTAL_CPU_TIME   | NUMBER(38)     | NO         | CPU usage time of the current command in seconds. <main id="notice" type='explain'><h4>Note</h4><ul><li>In V4.3.x, this field was introduced in V4.3.1. </li> <li>In V4.2.1, this field was introduced in V4.2.1 BP5. </li></ul></main>    |
| TOP_INFO         | VARCHAR2(262143) | YES      | This view displays the information of the top-level PL statement where the executing SQL statement is located. <main id="notice" type='explain'><h4>Note</h4><ul><li>In V4.3.x, this field was introduced in V4.3.3. </li> <li>In V4.2.1, this column displays NULL. </li></ul></main> |
| MEMORY_USAGE     | NUMBER(38)     | NO         | The memory occupied by a single SQL statement, in bytes.   <main id="notice" type='explain'><h4>Note</h4><p>For V4.3.5, this field was introduced in V4.3.5 BP2. </p></main>  |
|TOP_TIME|NUMBER(38)|NO|This column displays the total execution time of the PL statement. <main id="notice" type='explain'><h4>Note</h4><p>In V4.3.x, this column was introduced in V4.3.5 BP5. </p></main>|
|TOP_TRACE_ID|VARCHAR2(64)|YES|This column displays the trace ID of the top-level statement. <main id="notice" type='explain'><h4>Note</h4><p>In V4.3.x, this column was introduced in V4.3.5 BP5. </p></main>|

## Sample queries

Query the session information of this OBServer node.

```shell
obclient [SYS]> SELECT * FROM SYS.V$OB_PROCESSLIST WHERE ROWNUM < = 1 \G
```

The query result is as follows:

```shell
*************************** 1. row ***************************
           SVR_IP: 172.xx.xxx.xxx
         SVR_PORT: 2882
         SQL_PORT: 2881
               ID: 3221659094
             USER: SYS
             HOST: 100.xx.xxx.xxx:12716
               DB: SYS
           TENANT: oracle001
          COMMAND: Query
             TIME: 0
       TOTAL_TIME: 0
            STATE: ACTIVE
             INFO: SELECT * FROM SYS.GV$OB_PROCESSLIST
     PROXY_SESSID: NULL
    MASTER_SESSID: NULL
   USER_CLIENT_IP: 100.xx.xxx.xxx
        USER_HOST: %
        RETRY_CNT: 0
       RETRY_INFO: 0
           SQL_ID: 0A6CF0E2AB2C1A1917AB1FFDF2BE9CFF
         TRANS_ID: 23035
        THREAD_ID: 2743
       SSL_CIPHER: NULL
         TRACE_ID: YB4**************************-0-0
      TRANS_STATE: ACTIVE
           ACTION: NULL
           MODULE: NULL
      CLIENT_INFO: NULL
            LEVEL: 1
SAMPLE_PERCENTAGE: 10
    RECORD_POLICY: SAMPLE_AND_SLOW_QUERY
           LB_VID: NULL
           LB_VIP: NULL
         LB_VPORT: NULL
         IN_BYTES: 448
        OUT_BYTES: 0
 USER_CLIENT_PORT: 12716
       PROXY_USER: NULL
     SERVICE_NAME: NULL
   TOTAL_CPU_TIME: 0
         TOP_INFO: NULL
     MEMORY_USAGE: NULL
1 row in set
```

## References

* [GV$OB_PROCESSLIST](2500.gv-ob_processlist-of-oracle-mode.md)
* [Methods](../../../../600.manage/900.daily-inspection/900.full-link-detection/300.full-link-diagnosis.md)