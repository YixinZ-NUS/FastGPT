|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|Oracle Mode|
|machine-translation||

# GV$OB_PROCESSLIST

<main id="notice" type='explain'>
  <h4>Note</h4>
  <p>This view is introduced since OceanBase Database V4.0.0. </p>
</main>

## Purpose

The `GV$OB_PROCESSLIST` view displays session information of all OBServer nodes in the tenant.

## Columns

| Column |  Type  | Nullable? | Description |
|------------|----------|----------|-------------|
| SVR_IP     | VARCHAR2(46) | NO | IP address of the server. |
| SVR_PORT   | NUMBER(38) | NO | Port of the server. |
| SQL_PORT   | NUMBER(38) | NO | Port for SQL statements. |
| ID         | NUMBER(38) | NO | Session ID. |
| USER       | CHAR(193) | NO | Username. |
| HOST       | VARCHAR2(128) | NO | Host name of the client (for example, host address of the obproxy when you connect through obproxy). |
| DB         | VARCHAR2(128) | YES | Name of the accessed database. |
| TENANT     | VARCHAR2(128) | NO | Name of the accessed tenant. |
| COMMAND    | VARCHAR2(4096) | NO | Type of the current command. |
| TIME       | NUMBER(38) | NO | Execution time of the current command in seconds. If the command is retried, the value is reset to 0. |
| TOTAL_TIME | NUMBER(38) | NO | Total execution time of the current command in seconds. If the command is retried, the value is not reset. |
| STATE      | VARCHAR2(128) | YES | Current session status. |
| INFO       | VARCHAR2(262143) | YES | Current command being executed. |
| PROXY_SESSID | NUMBER(38) | YES | If the client is obproxy, this column displays the proxy session ID. |
| MASTER_SESSID | NUMBER(38) | YES | ID of the master session, which is used to chain multiple subsessions of the same SQL statement. |
| USER_CLIENT_IP | VARCHAR2(46) | YES | IP address of the user client. |
| USER_HOST  | VARCHAR2(128) | YES | Host name of the user client. |
| RETRY_CNT  | NUMBER(38) | NO | Number of retries for the current command. |
| RETRY_INFO | NUMBER(38) | NO | Retry information for the current command, which is generally the error code of the last retry. |
| SQL_ID     | VARCHAR2(32) | NO | SQL ID. |
| TRANS_ID   | NUMBER(38) | NO | Transaction ID. |
| THREAD_ID  | NUMBER(38) | NO | Thread ID. |
| SSL_CIPHER | VARCHAR2(4096) | YES | Name of the encryption cipher. |
| TRACE_ID   | VARCHAR2(64) | YES | Trace ID. |
| TRANS_STATE| VARCHAR2(32) | YES | Transaction status. Valid values include:<ul><li>`IDLE`: idle status, indicating that the transaction has not started. </li> <li>`ACTIVE`: transaction explicitly started. The `START TRANSACTION` or `BEGIN` statement is used to explicitly start the transaction. </li> <li>`IMPLICIT_ACTIVE`: transaction implicitly started. In the `autocommit = on` mode, the transaction is implicitly started after a DML statement that modifies data is executed. </li> <li>`ROLLBACK_SAVEPOINT`: the transaction is rolling back to a savepoint. </li> <li>`IN_TERMINATE`: the transaction is ending, which can be caused by internal reasons or user-initiated transactions. For example, the `COMMIT` or `ROLLBACK` statement is executed. </li> <li>`ABORTED`: the transaction is terminated or rolled back due to an exception. </li> <li>`ROLLED_BACK`: the transaction is rolled back. </li> <li>`COMMIT_TIMEOUT`: the transaction commit times out. </li> <li>`COMMIT_UNKNOWN`: the commit result of the transaction is unknown. </li> <li>`COMMITTED`: the transaction is successfully committed. </li></ul> |
| ACTION     | VARCHAR2(4096) | YES | Name of the current operation set by calling the DBMS_APPLICATION_INFO.SET_ACTION procedure. |
| MODULE     | VARCHAR2(4096) | YES | Name of the current operation set by calling the DBMS_APPLICATION_INFO.SET_MODULE procedure. |
| CLIENT_INFO| VARCHAR2(4096) | YES | Information set by calling the DBMS_APPLICATION_INFO.SET_CLIENT_INFO procedure. |
| LEVEL      | NUMBER(38) | NO | Indicates the full chain tracing monitoring level of the session. For example, 1 indicates level 1 diagnostic information. <main id="notice" type='explain'><h4>Note</h4><p>This field was introduced in V4.2.1. </p></main> |
| SAMPLE_PERCENTAGE | NUMBER(38)    | NO         | Sampling frequency of full chain tracing for the session. For example, 50 indicates a 50% sampling rate. <main id="notice" type='explain'><h4>Note</h4><p>This field was introduced in V4.2.1. </p></main> |
| RECORD_POLICY     | VARCHAR2(32)  | NO         | Full chain tracing recording strategy of the session. Valid values include:<ul><li>ALL: Trace points of all sampled traces are printed to the log file, and are printed to the log file when each span ends. </li><li>ONLY_SLOW_QUERY: Only request traces of slow queries are printed to the log file, and all other traces are discarded. For this printing strategy, trace logs are printed to the log file after a request is determined to be a slow query. In obproxy, for root spans, which are spans at the transaction level, trace logs are printed to the log file when a slow query is detected. </li><li>SAMPLE_AND_SLOW_QUERY: Trace points of all sampled traces that meet the following conditions are printed to the log file:<ol><li>If the <code>_print_sample_ppm</code> hidden parameter is used for sampling with a probability of 0.1%, the trace points are printed to the log file only when the sampling result is selected. </li><li>The trace points meet the printing conditions of the ONLY_SLOW_QUERY mode. </li></ol> In this mode, trace logs are not printed to the log file when each span ends. If condition 1 is met, the trace logs are marked as forced to be printed to the log file, and the information is passed to the subsequent link components. If condition 2 is met, the trace logs are printed to the log file at the same time as in the ONLY_SLOW_QUERY mode. </li></ul><main id="notice" type='explain'><h4>Note</h4><p>This field was introduced in V4.2.1. </p></main> |
| LB_VID            | NUMBER(38)    | YES        | If you directly connect to the database through load balancing in a public cloud environment, this column displays the VPC ID of the load balancer service. Otherwise, this column displays NULL. <main id="notice" type='explain'><h4>Note</h4><p>This field was introduced in V4.2.1. </p></main> |
| LB_VIP            | VARCHAR2(46)  | YES        | If you directly connect to the database through load balancing in a public cloud environment, this column displays the IP address of the client connecting to the load balancer service. Otherwise, this column displays NULL. <main id="notice" type='explain'><h4>Note</h4><p>This field was introduced in V4.2.1. </p></main> |
| LB_VPORT          | NUMBER(38)    | YES        | If you directly connect to the database through load balancing in a public cloud environment, this column displays the port of the client connecting to the load balancer service. Otherwise, this column displays NULL. <main id="notice" type='explain'><h4>Note</h4><p>This field was introduced in V4.2.1. </p></main> |
| IN_BYTES          | NUMBER(38)    | NO         | Inbound traffic of the session in bytes. <main id="notice" type='explain'><h4>Note</h4><p>This field was introduced in V4.2.1. </p></main> |
| OUT_BYTES         | NUMBER(38)    | NO         | Outbound traffic of the session in bytes. <main id="notice" type='explain'><h4>Note</h4><p>This field was introduced in V4.2.1. </p></main> |
| USER_CLIENT_PORT  | NUMBER(38)    | NO         | Address information of the client. <main id="notice" type='explain'><h4>Note</h4><ul><li>In V4.3.x, this field was introduced in V4.3.0. </li> <li>In V4.2.x, this field was introduced in V4.2.3. </li></ul></main> |
| PROXY_USER        | VARCHAR2(128) | YES        | <ul><li>The username of the proxy user if the user logs in as a proxy user. </li><li>NULL if the user logs in as a non-proxy user. </li></ul><main id="notice" type='explain'><h4>Note</h4><ul><li>In V4.3.x, this field was introduced in V4.3.2. </li><li>In V4.2.x, this field was introduced in V4.2.3. </li></ul></main> |
| SERVICE_NAME     | VARCHAR2(64)   | YES        | The service name of the session. If the session is created without a service name, the value is NULL. <main id="notice" type='explain'><h4>Note</h4><ul><li>In V4.3.x, this field was introduced in V4.3.1. </li> <li>In V4.2.1, this field was introduced in V4.2.1 BP9. For V4.2.x other than V4.2.1, this field was introduced in V4.2.4. </li></ul></main> |
| TOTAL_CPU_TIME   | NUMBER(38)     | NO         | CPU usage time of the current command in seconds. <main id="notice" type='explain'><h4>Note</h4><ul><li>In V4.3.x, this field was introduced in V4.3.1. </li> <li>In V4.2.1, this field was introduced in V4.2.1 BP5. </li></ul></main>    |
| TOP_INFO         | VARCHAR2(262143) | YES      | Top-level PL statement information of the currently executing SQL statement. <main id="notice" type='explain'><h4>Note</h4><ul><li>In V4.3.x, this field was introduced in V4.3.3. </li> <li>In V4.2.1, this field was introduced in V4.2.1 BP9. </li></ul></main> |
| MEMORY_USAGE     | NUMBER(38)     | YES         | The memory occupied by a single SQL statement, in bytes.   <main id="notice" type='explain'><h4>Note</h4><p>For V4.3.5, this field was introduced in V4.3.5 BP2. </p></main>  |
|TOP_TIME|NUMBER(38)|NO|The top_time column in the PL scenario displays the total execution time of the PL statement. <main id="notice" type='explain'><h4>Note</h4><p>In V4.3.x, this field was introduced in V4.3.5 BP5. </p></main>|
|TOP_TRACE_ID|VARCHAR2(64)|YES|The traceid of the top-level statement. <main id="notice" type='explain'><h4>Note</h4><p>In V4.3.x, this field was introduced in V4.3.5 BP5. </p></main>|

## Sample query

Query the session information of all OBServer nodes in the tenant.

```shell
obclient [SYS]> SELECT * FROM SYS.GV$OB_PROCESSLIST WHERE ROWNUM < = 1 \G
```

The query result is as follows:

```shell
*************************** 1. row ***************************
           SVR_IP: 172.xx.xxx.xxx
         SVR_PORT: 2882
         SQL_PORT: 2881
               ID: 3221659094
             USER: SYS
             HOST: 100.xx.xxx.xxx:12716
               DB: SYS
           TENANT: oracle001
          COMMAND: Query
             TIME: 0
       TOTAL_TIME: 0
            STATE: ACTIVE
             INFO: SELECT * FROM SYS.GV$OB_PROCESSLIST
     PROXY_SESSID: NULL
    MASTER_SESSID: NULL
   USER_CLIENT_IP: 100.xx.xxx.xxx
        USER_HOST: %
        RETRY_CNT: 0
       RETRY_INFO: 0
           SQL_ID: 0A6CF0E2AB2C1A1917AB1FFDF2BE9CFF
         TRANS_ID: 23035
        THREAD_ID: 2743
       SSL_CIPHER: NULL
         TRACE_ID: YB4**************************-0-0
      TRANS_STATE: ACTIVE
           ACTION: NULL
           MODULE: NULL
      CLIENT_INFO: NULL
            LEVEL: 1
SAMPLE_PERCENTAGE: 10
    RECORD_POLICY: SAMPLE_AND_SLOW_QUERY
           LB_VID: NULL
           LB_VIP: NULL
         LB_VPORT: NULL
         IN_BYTES: 448
        OUT_BYTES: 0
 USER_CLIENT_PORT: 12716
       PROXY_USER: NULL
     SERVICE_NAME: NULL
   TOTAL_CPU_TIME: 0
         TOP_INFO: NULL
     MEMORY_USAGE: NULL
1 row in set
```

## References

* [V$OB_PROCESSLIST](32700.v-ob_processlist-of-oracle-mode.md)
* [Methods](../../../../600.manage/900.daily-inspection/900.full-link-detection/300.full-link-diagnosis.md)