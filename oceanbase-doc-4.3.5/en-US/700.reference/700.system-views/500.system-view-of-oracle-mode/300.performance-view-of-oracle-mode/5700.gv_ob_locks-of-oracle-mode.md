|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|Oracle Mode|
|machine-translation||

# GV$OB_LOCKS

<main id="notice" type='explain'>
  <h4>Note</h4>
  <p>This view is introduced in OceanBase Database V4.2.0. </p>
</main>

## Purpose

The `GV$OB_LOCKS` view shows the locks held or requested on each table by the current user.

## Columns

| **Column** | **Type** | **Nullable?** | **Description** |
| ---- | ---- | ---- | ---- |
| SVR_IP | VARCHAR2(46) | NO | The IP address of the OBServer node that holds or requests a lock. |
| SVR_PORT | NUMBER(38) | NO | The port number of the OBServer node that holds or requests a lock. |
| TENANT_ID | NUMBER(38) | NO | The ID of the tenant that holds or requests a lock. |
| TRANS_ID | NUMBER(38) | NO | The ID of the transaction that holds or requests a lock. |
| SESSION_ID | NUMBER(38)    | NO   | The ID of the session that holds or requests a lock.<ul><li>This field was introduced in V4.3.x starting from V4.3.2.<ul><li>For versions earlier than V4.3.5 BP2:<br>This field indicates the server session ID in both direct connection mode and ODP mode. </li><li>For V4.3.5 BP2 and later versions:<ul><li>In direct connection mode:<br>This field indicates the server session ID. </li> <li>In ODP mode:</li><ul><li>If <code>client_session_id_version = 2</code> in ODP, this field indicates the client session ID.  </li> <li>If <code>client_session_id_version = 1</code>, this field indicates the server session ID. </li></ul></ul></ul></li></ul>  |
| TYPE | VARCHAR2(9) | NO | The lock type:<ul><li>TM: table lock</li><li>TX: transaction lock</li><li>TR: row lock</li></ul> |
| ID1 | bigint(20) | NO | Lock identifier 1:<ul><li>TM: transaction ID</li><li>TX: transaction ID</li><li>TR: transaction ID</li></ul> |
| ID2 | bigint(20) | NO | Lock identifier 2:<ul><li>TM: session ID (NULL for transactional table locks)</li><li>TX: session ID</li><li>TR: session ID</li></ul> |
| ID3 | varchar(512) | NO | Lock identifier 3:<ul><li>TM: TABLE_ID or TABLET_ID</li><li>TX: NULL</li><li>TR: TABLET_ID + row key</li></ul> <main id="notice" type='explain'><h4>Note</h4><p><ul><li>This field was introduced in V4.3.x starting from V4.3.2.</li><li>This field was introduced in V4.2.x starting from V4.2.5.</li></ul></p></main>|
| LMODE | VARCHAR2(4) | NO | The lock mode currently held:<ul><li>NONE: indicates no lock is held</li><li>RS: ROW SHARE</li><li>RX: ROW EXCLUSIVE</li><li>S: SHARE</li><li>SRX: SHARE ROW EXCLUSIVE</li><li>X: EXCLUSIVE</li></ul> |
| REQUEST | VARCHAR2(8) | NO | The lock mode currently requested:<ul><li>NONE: indicates no lock is requested</li><li>RS: ROW SHARE</li><li>RX: ROW EXCLUSIVE</li><li>S: SHARE</li><li>SRX: SHARE ROW EXCLUSIVE</li><li>X: EXCLUSIVE</li></ul> |
| CTIME | NUMBER(38) | NO | The time the lock is held or waited, in microseconds. |
| BLOCK | NUMBER | NO | Indicates whether the lock requested by the current transaction is held by other transactions:<ul><li>0: indicates that the lock requested is not held by other transactions, i.e., the transaction holds the lock.  </li><li>1: indicates that the lock requested is held by other transactions, i.e., the transaction is blocked.  </li></ul> |

## Sample query

The following example shows the locks held or requested by the current user on all tables.

```shell
obclient [SYS]> SELECT * FROM SYS.GV$OB_LOCKS;
```

The query result is as follows:

```shell
+----------------+----------+-----------+----------+------------+------+---------+------------+--------+-------+---------+----------+-------+
| SVR_IP         | SVR_PORT | TENANT_ID | TRANS_ID | SESSION_ID | TYPE | ID1     | ID2        | ID3    | LMODE | REQUEST | CTIME    | BLOCK |
+----------------+----------+-----------+----------+------------+------+---------+------------+--------+-------+---------+----------+-------+
| 11.xxx.xxx.xxx |    28825 |      1004 |  3966849 | 3221605368 | TM   | 3966849 | 3221605368 | 500084 | X     | NONE    | 97318270 |     0 |
| 11.xxx.xxx.xxx |    28825 |      1004 |  3966849 | 3221605368 | TM   | 3966849 | 3221605368 | 200069 | X     | NONE    | 97301357 |     0 |
| 11.xxx.xxx.xxx |    28825 |      1004 |  3966849 | 3221605368 | TM   | 3966849 | 3221605368 | 200068 | X     | NONE    | 97301364 |     0 |
| 11.xxx.xxx.xxx |    28825 |      1004 |  3966849 | 3221605368 | TM   | 3966849 | 3221605368 | 200067 | X     | NONE    | 97301372 |     0 |
| 11.xxx.xxx.xxx |    28825 |      1004 |  3966849 | 3221605368 | TM   | 3966849 | 3221605368 | 200066 | X     | NONE    | 97301379 |     0 |
| 11.xxx.xxx.xxx |    28825 |      1004 |  3966849 | 3221605368 | TM   | 3966849 | 3221605368 | 200065 | X     | NONE    | 97301389 |     0 |
| 11.xxx.xxx.xxx |    28825 |      1004 |  3966849 | 3221605368 | TM   | 3966849 | 3221605368 | 200064 | X     | NONE    | 97301396 |     0 |
| 11.xxx.xxx.xxx |    28825 |      1004 |  3966849 | 3221605368 | TM   | 3966849 | 3221605368 | 200063 | X     | NONE    | 97301403 |     0 |
| 11.xxx.xxx.xxx |    28825 |      1004 |  3966849 | 3221605368 | TM   | 3966849 | 3221605368 | 200062 | X     | NONE    | 97301431 |     0 |
| 11.xxx.xxx.xxx |    28825 |      1004 |  3966849 | 3221605368 | TM   | 3966849 | 3221605368 | 200061 | X     | NONE    | 97301442 |     0 |
+----------------+----------+-----------+----------+------------+------+---------+------------+--------+-------+---------+----------+-------+
10 rows in set
```

## References

For more information about table locks, see [Lock a table](../../../300.database-object-management/200.manage-object-of-oracle-mode/100.manage-tables-of-oracle-mode/900.lock-a-table-of-oracle-mode.md).