| Description   |                 |
|---------------|-----------------|
| keywords      |                 |
| dir-name      |                 |
| dir-name-en   |                 |
| tenant-type   |                 |
|machine-translation||

# MODULE DATA

## Purpose

The `MODULE DATA` statement has the following two purposes:

* `ALTER SYSTEM LOAD MODULE DATA ...`: this statement is used to import a specified feature for a specific tenant.
* `ALTER SYSTEM CHECK MODULE DATA ...`: this statement is used to check whether a specified feature is imported for a specific tenant.

<main id="notice" type='explain'>
  <h4>Note</h4>
  <p>For V4.3.5, the <code>MODULE DATA</code> statement is supported starting with V4.3.5 BP4. </p>
</main>

## Limitations and considerations

* This statement can only be executed in the `sys` (system) tenant.
* The current version only supports importing the `REDIS` module feature to MySQL-compatible tenants.
* The current version only supports checking (using the `CHECK MODULE DATA` statement) the imported `REDIS` module feature.

## Privilege requirements

The user executing this statement must have the `ALTER SYSTEM` privilege. For more information about OceanBase Database privileges, see [Privilege types in MySQL-compatible mode](../../../../../600.manage/500.security-and-permissions/300.access-control/200.user-and-permission/200.permission-of-mysql-mode/100.permission-classification-of-mysql.md).

## Syntax

```sql
ALTER SYSTEM {LOAD | CHECK} MODULE DATA
    MODULE = module_value
    TENANT = tenant_name
    [INFILE = file_path];

module_value:
    REDIS
    | GIS
    | TIMEZONE
```

## Parameters

|      Parameter     |            Description            |
|---------------|---------------------------|
| LOAD \| CHECK | Specifies whether to import or check the feature. The options are described as follows: <ul><li>`LOAD`: specifies to import a specified feature to a specified tenant. </li><li>`CHECK`: specifies to check whether a specified feature is imported to a specified tenant. </li><li>|
| tenant_name   | Specifies the name of the tenant to operate on.|
| module_value  | Specifies the feature to operate on. For more information, see [module_value](#module_value).|
| file_path     | Specifies the path of the SQL file to be imported. <main id="notice" type='notice'><h4>Notice</h4><p><ul><li><code>TIMEZONE</code> and <code>GIS</code> may have multiple versions of data. Therefore, you must specify an SQL file of the corresponding version. At present, <code>TIMEZONE</code> and <code>GIS</code> have only one version. Therefore, the default <code>INFILE</code> parameter is supported. </li><li>The <code>INFILE</code> parameter is not supported for the <code>REDIS</code> module. An error will be returned if you specify the path of the <code>INFILE</code> parameter. </li></ul></p></main>|

### module_value

* `REDIS`: specifies to operate on the `REDIS` module.
* `GIS`: specifies to operate on the `GIS` module.
* `TIMEZONE`: specifies to operate on the `TIMEZONE` module.

## Example

### LOAD MODULE DATA example

1. Import the `REDIS` module to the `mysql001` tenant. Currently, the `REDIS` module does not support specifying an `INFILE` path, so an error is returned.

    ```sql
    ALTER SYSTEM LOAD MODULE DATA
        MODULE = REDIS
        TENANT = mysql001
        INFILE = '/home/admin/test.sql';
    ```

    The return result is as follows:

    ```shell
    ERROR 4025 (HY000): loading redis module does not need to specify infile
    ```

2. Import the `REDIS` module to the `mysql001` tenant.

    ```sql
    ALTER SYSTEM LOAD MODULE DATA
        MODULE = REDIS
        TENANT = mysql001;
    ```

    The return result is as follows:

    ```shell
    Query OK, 0 rows affected
    ```

3. Import the `GIS` module to the `mysql001` tenant. The `INFILE` parameter is optional. The default value is `etc/`, and the corresponding file is located in the `etc` directory under the deployment directory.

    ```sql
    ALTER SYSTEM LOAD MODULE DATA
        MODULE = GIS
        TENANT = mysql001
        INFILE = 'etc/';
    ```

    The return result is as follows:

    ```shell
    Query OK, 0 rows affected
    ```

4. Import the `TIMEZONE` module to the `mysql001` tenant. The `INFILE` parameter is optional. The default value is `etc/`, and the corresponding file is located in the `etc` directory under the deployment directory.

    ```sql
    ALTER SYSTEM LOAD MODULE DATA
        MODULE = TIMEZONE
        TENANT = mysql001
        INFILE = 'etc/';
    ```

    The return result is as follows:

    ```shell
    Query OK, 0 rows affected
    ```

### CHECK MODULE DATA example

<main id="notice" type='notice'>
  <h4>Notice</h4>
  <p>The current version only supports checking the functionality of the <code>REDIS</code> module imported (by using the <code>CHECK MODULE DATA</code> statement). </p>
</main>

* If no functionality is imported to the tenant, an error is returned when the `CHECK MODULE DATA` statement is executed. Check whether the `REDIS` module functionality is imported to the tenant `mysql002`.

    ```sql
    ALTER SYSTEM CHECK MODULE DATA
        MODULE = REDIS
        TENANT = mysql002;
    ```

    The return result is as follows:

    ```shell
    ERROR 4025 (HY000): redis info is not complete, please retry loading
    ```

* After the functionality is imported to the tenant, check the import status.

    1. Import the `REDIS` module functionality to the tenant `mysql002`.

        ```sql
        ALTER SYSTEM LOAD MODULE DATA
            MODULE = REDIS
            TENANT = 'mysql002';
        ```

        The return result is as follows:

        ```shell
        Query OK, 0 rows affected
        ```

    2. Check whether the `REDIS` module functionality is imported to the tenant `mysql002`.

        ```sql
        ALTER SYSTEM CHECK MODULE DATA
            MODULE = REDIS
            TENANT = mysql002;
        ```

        The return result is as follows:

        ```shell
        Query OK, 0 rows affected
        ```
