| Description   |                 |
|---------------|-----------------|
| keywords      |                 |
| dir-name      |                 |
| dir-name-en   |                 |
| tenant-type   | Oracle Mode     |
|machine-translation||

# CREATE FORMAT OUTLINE

## Purpose

This statement is used to create a fuzzy outline. You can create a fuzzy outline in two ways, by using `FORMAT_SQL_TEXT` (the original statement with parameters executed by the user) or `FORMAT_SQL_ID`.

## Limitations and considerations

* You must log in as the corresponding user to create an outline.
* If you create an outline by using `FORMAT_SQL_TEXT`, the outline created by using `FORMAT_SQL_TEXT` will override the one created by using `FORMAT_SQL_ID` if they have the same `FORMAT_SQL_ID`. In addition, OceanBase Database uses `FORMAT_SQL_ID` to distinguish different SQL statements, and `FORMAT_SQL_ID` is generated by applying the `MD5` hash encryption to the result of formatting `FORMAT_SQL_TEXT` (removing redundant spaces and line breaks, and converting all characters to uppercase or lowercase). We recommend that you bind an outline by using `FORMAT_SQL_ID` in a production system.

  <main id="notice" type='explain'>
    <h4>Note</h4>
    <p><ul><li>The matching rule for <code>FORMAT_SQL_TEXT</code> ignores differences in parameter content, case, spaces, and line breaks. It only compares the text content after these differences are removed. </li><li><code>FORMAT_SQL_ID</code> is generated by applying the <code>MD5</code> hash encryption to the result of formatting <code>FORMAT_SQL_TEXT</code> (removing redundant spaces and line breaks, and converting all characters to uppercase or lowercase).</li></ul></p>
  </main>

## Syntax

```sql
/* Create an outline by using FORMAT_SQL_TEXT. */
CREATE [OR REPLACE] FORMAT OUTLINE outline_name ON format_stmt [ TO format_target_stmt ]

/* Create an outline by using FORMAT_SQL_ID. */
CREATE [OR REPLACE] FORMAT OUTLINE outline_name ON format_sql_id USING HINT hint;
```

## Parameters

| Parameter   | Description |
|-------------|-------------|
| outline_name | The name of the fuzzy outline to be created. |
| OR REPLACE  | If you specify `OR REPLACE` and the outline to be created already exists, the existing outline will be replaced. |
| format_stmt | The original SQL statement. <main id="notice" type='explain'><h4>Note</h4><p>OceanBase Database automatically formats the unformatted SQL statement. </p></main>|
| TO format_target_stmt | Optional. Specifies the target SQL statement to which `format_stmt` is converted or applied, that is, the SQL statement to which the outline is also applicable. You can use the TO format_target_stmt option to specify these SQL statements. <main id="notice" type='notice'><h4>Notice</h4><p><ul><li>If you want to bind a fixed plan to a statement that contains hints, you must specify <code>format_target_stmt</code> to indicate the original SQL statement. </li><li>When you use the <code>TO format_target_stmt</code> clause, the original SQL statement <code>format_stmt</code> and the target SQL statement <code>format_target_stmt</code> must match after hints are removed and the statements are formatted. </li></ul></p></main>|
| format_sql_id | The `format_sql_id` generated by applying the `MD5` hash encryption to the result of formatting `FORMAT_SQL_TEXT` (removing redundant spaces and line breaks, and converting all characters to uppercase or lowercase) after a series of rules are applied to the SQL statement corresponding to the SQL statement to be bound. |

## Examples

* Create an outline by using `FORMAT_SQL_TEXT`.

  ```sql
  CREATE FORMAT OUTLINE my_outline ON 'SELECT * FROM employees WHERE department_id = ?';
  ```

* Create an outline by using `FORMAT_SQL_ID`.

  ```sql
  CREATE FORMAT OUTLINE my_sql_id_outline ON 'ED570339F2C856BA96008A29EDF04C74' USING HINT /*+ index(tbl1 idx_col2)*/;
  ```

## References

For more information about outlines, see [Plan binding](../../../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/700.manage-execution-plans/200.plan-binding.md).