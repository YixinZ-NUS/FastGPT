| Description   |                 |
|---------------|-----------------|
| keywords      |                 |
| dir-name      |                 |
| dir-name-en   |                 |
| tenant-type   | MySQL Mode      |
|machine-translation||

# Roaring bitmap judgment functions

Roaring bitmap judgment functions perform judgment on the input Roaring bitmap data and return a Boolean value. OceanBase Database supports the `rb_is_empty()` and `rb_contains()` Roaring bitmap judgment functions.

## rb_is_empty

`rb_is_empty()` judges whether the input Roaring bitmap data is empty. The syntax is as follows:

```sql
rb_is_empty(rb)
```

The returned value `1` indicates that the input bitmap data is empty, and `0` indicates that input bitmap data is not empty.

Here are some examples:

```sql
SELECT rb_is_empty(rb_from_string(''));
+---------------------------------+
| rb_is_empty(rb_from_string('')) |
+---------------------------------+
|                               1 |
+---------------------------------+
1 row in set
```

```sql
SELECT rb_is_empty(rb_from_string('1,2,3'));
+--------------------------------------+
| rb_is_empty(rb_from_string('1,2,3')) |
+--------------------------------------+
|                                    0 |
+--------------------------------------+
1 row in set
```

## rb_contains

The `rb_contains()` function has two use cases:

* To check if the first input bitmap (`rb1`) fully contains the second input bitmap (`rb2`).
* To check if the input bitmap contains a specific offset (`offset`).

These two use cases are implemented using different syntax. Details are as follows:

### Use case 1

The `rb_contains()` function can be used to determine whether the first input bitmap (`rb1`) fully contains the second input bitmap (`rb2`). The syntax is as follows:

```sql
rb_contains(rb1, rb2)
```

Specifically:

* The parameter `rb1` serves as the base for the calculation, while `rb2` is the bitmap being checked. The function determines whether every element in `rb2` is also present in `rb1`.
* The order of the parameters `rb1` and `rb2` affects the result.
* The function returns `1` if rb1 fully contains `rb2`, and `0` if it does not.

Here is an example:

```sql
SELECT rb_contains(rb_from_string('1,2,3,4,5'), rb_from_string('1,2,3,4'));
+---------------------------------------------------------------------+
| rb_contains(rb_from_string('1,2,3,4,5'), rb_from_string('1,2,3,4')) |
+---------------------------------------------------------------------+
|                                                                   1 |
+---------------------------------------------------------------------+
1 row in set
```

### Use case 2

The `rb_contains()` function can be used to determine whether the input bitmap data contains a specific offset (`offset`). The syntax is as follows:

```sql
rb_contains(rb, offset)
```

Specifically:

* The parameter `rb` serves as the basis for the calculation and is a bitmap dataset.
* `offset` must be an integer, used to check whether this integer exists in the bitmap data `rb`.
* The function returns `1` if the offset is contained within `rb`, and `0` if it is not.

Here is an example:

```sql
SELECT rb_contains(rb_from_string('1,2,3,4,5'), 1);
+---------------------------------------------+
| rb_contains(rb_from_string('1,2,3,4,5'), 1) |
+---------------------------------------------+
|                                           1 |
+---------------------------------------------+
1 row in set
```

```sql
SELECT rb_contains(rb_from_string('1,2,3,4,6'), 5);
+---------------------------------------------+
| rb_contains(rb_from_string('1,2,3,4,6'), 5) |
+---------------------------------------------+
|                                           0 |
+---------------------------------------------+
1 row in set
```