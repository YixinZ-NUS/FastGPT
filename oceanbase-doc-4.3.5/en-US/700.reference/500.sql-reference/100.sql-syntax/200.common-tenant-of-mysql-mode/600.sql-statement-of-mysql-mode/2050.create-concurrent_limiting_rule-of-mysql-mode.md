| Description   |                 |
|---------------|-----------------|
| keywords      |                 |
| dir-name      |                 |
| dir-name-en   |                 |
| tenant-type   | MySQL Mode      |
|machine-translation||

# CREATE CONCURRENT_LIMITING_RULE

<main id="notice" type='explain'>
  <h4>Note</h4>
  <p>This statement was introduced in OceanBase Database V4.3.5 BP3. </p>
</main>

## Purpose

This statement is used to create a throttling rule that specifies the throttling scope to limit the concurrency of specific SQL statements.

## Privilege requirements

To execute the `CREATE CONCURRENT_LIMITING_RULE` statement, the current user must have the CREATE privilege. For more information about the privileges of OceanBase Database, see [Privilege types in MySQL mode](../../../../../600.manage/500.security-and-permissions/300.access-control/200.user-and-permission/200.permission-of-mysql-mode/100.permission-classification-of-mysql.md)

## Syntax

```sql
CREATE CONCURRENT_LIMITING_RULE [ IF NOT EXISTS ] `ccl_rule_name`
ON `database`.`table`
TO '<usename>'@'ip'
FOR { ALL | UPDATE | SELECT | INSERT | DELETE }
filter_options:
    [ FILTER BY KEYWORD('KEYWORD1', 'KEYWORD2',â€¦) ]
 with_options:
    WITH MAX_CONCURRENCY = value1 [per sql]
```

## Parameters

|  Parameter             |       Description        |
|----------------------------|----------|
|`ccl_rule_name`|Required. The name of the throttling rule.<main id="notice" type='explain'><h4>Note</h4><p>To avoid name conflicts with SQL keywords, we recommend that you add backticks (`) before and after the rule name. </p></main>|
|`database`.`table`|Required. The name of the database and table. You can use the asterisk (*) to match any database or table name.<main id="notice" type='explain'><h4>Note</h4><p>To avoid name conflicts with SQL keywords, we recommend that you add backticks (`) before and after the rule name. </p></main>|
|`<usename>@<host>`|Required. The name of the account. The username can be specified as * to match all users. The host part can be specified as % to match any host.|
|`ALL`\|`UPDATE \| SELECT \| INSERT\| DELETE`|Required. The type of the SQL statement. The supported values are `ALL`, `UPDATE`, `SELECT`, `INSERT`, and `DELETE`. <main id="notice" type='explain'><h4>Note</h4><p>Each throttling rule can only specify one type of SQL statement. </p></main>|
|`[ filter_options ]`|Optional. The throttling keywords.<main id="notice" type='explain'><h4>Note</h4><p><ul><li>The keywords are connected by the wildcard <code>%</code>. For example, if you specify three keywords, <code>'asdasd', 'c2 = 123', and 'xxyyzz'</code>, they are concatenated as <code>'%asdasd%c2 = 123%xxyyzz%'</code>. Subsequent SQL text matching is performed based on this string. </li><li>If a keyword contains <code>'_'</code>, it will be escaped. For example, <code>'table_t1'</code> is recorded as <code>'%table\_t1%'</code>. </li><li>There is no limit on the number of throttling keywords, but the length of the concatenated string must not exceed <code>OB_MAX_VARCHAR_LENGTH=1048576</code>. </li></ul></p></main>|
|`with_options`|Required. Used to control the concurrency of throttling and specify the throttling statistics granularity at the rule level or the Format SQLID statement level. Currently, only the `MAX_CONCURRENCY` parameter is supported, which specifies the maximum concurrency of SQL statements that match the throttling rule.|

## Examples

Execute the following command to throttle by keywords:

```shell
obclient> CREATE CONCURRENT_LIMITING_RULE IF NOT EXISTS  `sql1_keywords_ccl_rule`
ON *.* TO '%'@'%' FOR SELECT
FILTER BY KEYWORD('table1', 'table2', 'c1') WITH MAX_CONCURRENCY 100;
```