| Description   |                 |
|---------------|-----------------|
| keywords      |                 |
| dir-name      |                 |
| dir-name-en   |                 |
| tenant-type   | MySQL Mode      |
|machine-translation||

# CREATE FORMAT OUTLINE

## Purpose

This statement is used to create a fuzzy outline. You can create a fuzzy outline in two ways, by using the `FORMAT_SQL_TEXT` (the original statement with parameters executed by the user) or the `FORMAT_SQL_ID` value.

## Limitations and considerations

* You must log in as the user to create an outline.
* If the `FORMAT_SQL_ID` values are the same, the outline created by using the `FORMAT_SQL_TEXT` method will overwrite the one created by using the `FORMAT_SQL_ID` method, because the priority of the `FORMAT_SQL_TEXT` method is higher. OceanBase Database uses `FORMAT_SQL_ID` to distinguish between different SQL statements, which is generated by using the `MD5` hash encryption of the `FORMAT_SQL_TEXT` value after removing redundant spaces and line breaks and converting all characters to upper or lower case. We recommend that you use `FORMAT_SQL_ID` to bind an outline in a production system.

  <main id="notice" type='explain'>
    <h4>Note</h4>
    <p><ul><li>The matching rule of <code>FORMAT_SQL_TEXT</code> ignores differences in parameter content, case, spaces, and line breaks, and compares only the text content after these differences are removed. </li><li><code>FORMAT_SQL_ID</code> is generated by applying <code>MD5</code> hash encryption to the result after <code>FORMAT_SQL_TEXT</code> is formatted (extra spaces and line breaks are removed, and all characters are converted to upper or lower case). </li></ul></p>
  </main>

## Syntax

```sql
/* Create an outline by using FORMAT_SQL_TEXT. */
CREATE [OR REPLACE] FORMAT OUTLINE outline_name ON format_stmt [ TO format_target_stmt ]

/* Create an outline by using FORMAT_SQL_ID. */
CREATE [OR REPLACE] FORMAT OUTLINE outline_name ON format_sql_id USING HINT hint;
```

## Parameters

| Parameter          | Description |
|----------------------|----------------------------|
| outline_name         | The name of the outline to be created. |
| OR REPLACE           | If you specify `OR REPLACE` and the outline to be created already exists, the existing outline will be replaced. |
| format_stmt          | The original SQL statement, which is the SQL statement or operation to which you want to apply the outline. <main id="notice" type='explain'><h4>Note</h4><p>OceanBase Database automatically formats the unformatted SQL statement. </p></main>|
| TO format_target_stmt | Optional. Specifies the target SQL statement to which the `format_stmt` statement is converted or applied. You can use the TO format_target_stmt clause to declare these SQL statements. <main id="notice" type='notice'><h4>Notice</h4><p><ul><li>If you want to bind a fixed plan to a statement with hints, you must specify the original SQL statement by using <code>format_target_stmt</code>. </li><li>If you use the <code>TO format_target_stmt</code> clause, the original SQL statement <code>format_stmt</code> and the target SQL statement <code>format_target_stmt</code> must match after hints are removed and the statements are formatted. </li></ul></p></main>|
| format_sql_id        | The `format_sql_id` value of the SQL statement after it is rewritten by following a series of rules and the `MD5` value of the `format_stmt` value. |

## Examples

* Create an outline by using the `FORMAT_SQL_TEXT` value.

  ```sql
  CREATE FORMAT OUTLINE my_outline ON SELECT * FROM employees WHERE department_id = ?;
  ```

* Create an outline by using the `FORMAT_SQL_ID` value.

  ```sql
  CREATE FORMAT OUTLINE my_sql_id_outline ON 'ED570339F2C856BA96008A29EDF04C74' USING HINT /*+ index(t1 idx_c2)*/;

  ```

## References

For more information about outlines, see [Plan binding](../../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/700.manage-execution-plans/200.plan-binding.md).