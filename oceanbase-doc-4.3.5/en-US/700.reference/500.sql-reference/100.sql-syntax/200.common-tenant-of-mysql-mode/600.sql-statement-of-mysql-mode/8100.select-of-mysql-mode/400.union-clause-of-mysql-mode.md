| Description   |                 |
|---------------|-----------------|
| keywords      |                 |
| dir-name      |                 |
| dir-name-en   |                 |
| tenant-type   | MySQL Mode      |
|machine-translation||

# UNION clause

## Purpose

The statement is used to perform set operations on the results of multiple `SELECT` queries.

## Limitations and considerations

* Set operators have the same precedence. If an SQL statement contains multiple set operators, OceanBase Database will calculate them from left to right unless parentheses are used to specify the order of operations.

* Each set operator can operate only on the result set of a `SELECT` statement, and the result sets must have the same number of columns and data types.

## Syntax

```sql
select_stmt
    {UNION | UNION ALL | MINUS | EXCEPT | INTERSECT} select_stmt 
    [, {UNION | UNION ALL | MINUS | EXCEPT | INTERSECT} select_stmt ...]
    [ORDER BY order_by_condition_list]
    [LIMIT limit_clause];
```

## Parameters

| Parameter              | Description |
|------------------------|-------------|
| select_stmt            | The `SELECT` statement to perform set operations on. For more information about the `SELECT` statement, see [SELECT](100.select-of-mysql-mode.md). |
| UNION                  | The operator used to merge the result sets of two `SELECT` statements into one set, and remove duplicate rows. |
| UNION ALL              | The operator used to merge the result sets of two `SELECT` statements into one set without removing duplicate rows. |
| MINUS \| EXCEPT        | The operator used to return the rows in the result set of the preceding `SELECT` statement that are not in the result set of the following `SELECT` statement. `MINUS` is synonymous with `EXCEPT`. |
| INTERSECT              | The operator used to return the intersection of the result sets of two `SELECT` statements, and remove duplicate rows. |
| ORDER BY order_by_condition_list | The clause used to specify the order of the rows after set operations are performed. |
| LIMIT limit_clause     | The clause used to specify the number of rows to return after set operations are performed. |

## Examples

1. Create tables `test_tbl1` and `test_tbl2`.

    ```sql
    CREATE TABLE test_tbl1 (col1 INT, col2 INT);
    CREATE TABLE test_tbl2 (col1 INT, col2 INT);
    ```

2. Insert test data into tables `test_tbl1` and `test_tbl2`.

    ```sql
    INSERT INTO test_tbl1 VALUES (1, 1), (2, 2), (4, 4);
    INSERT INTO test_tbl2 VALUES (2, 2), (3, 3), (5, 5);
    ```

* Select the data from the `col1` and `col2` columns of tables `test_tbl1` and `test_tbl2`, and merge the results into one set using the `UNION ALL` operator. Duplicate rows are retained.

    ```sql
    SELECT col1, col2 FROM test_tbl1 
    UNION ALL 
    SELECT col1, col2 FROM test_tbl2;
    ```

    The return result is as follows:

    ```shell
    +------+------+
    | col1 | col2 |
    +------+------+
    |    1 |    1 |
    |    2 |    2 |
    |    4 |    4 |
    |    2 |    2 |
    |    3 |    3 |
    |    5 |    5 |
    +------+------+
    6 rows in set
    ```

* Select the data from the `col1` and `col2` columns of tables `test_tbl1` and `test_tbl2`, and merge the results into one set using the `UNION` operator. Duplicate rows are removed.

    ```sql
    SELECT col1, col2 FROM test_tbl1 
    UNION 
    SELECT col1, col2 FROM test_tbl2;
    ```

    The return result is as follows:

    ```shell
    +------+------+
    | col1 | col2 |
    +------+------+
    |    1 |    1 |
    |    2 |    2 |
    |    4 |    4 |
    |    3 |    3 |
    |    5 |    5 |
    +------+------+
    5 rows in set
    ```

* Select the data from the `col1` and `col2` columns of tables `test_tbl1` and `test_tbl2`, and return the intersection of the two sets. That is, return the duplicate rows in the `col1` and `col2` columns of `test_tbl1` and `test_tbl2`.

    ```sql
    SELECT col1, col2 FROM test_tbl1 
    INTERSECT
    SELECT col1, col2 FROM test_tbl2;
    ```

    The return result is as follows:

    ```shell
    +------+------+
    | col1 | col2 |
    +------+------+
    |    2 |    2 |
    +------+------+
    1 row in set
    ```

* Select the data from the `col1` and `col2` columns of `test_tbl1`, and exclude the data from the `col1` and `col2` columns of `test_tbl2`. That is, return the rows in `test_tbl1` that do not exist in `test_tbl2`.

    ```sql
    SELECT col1, col2 FROM test_tbl1 
    EXCEPT
    SELECT col1, col2 FROM test_tbl2;
    ```

    The return result is as follows:

    ```shell
    +------+------+
    | col1 | col2 |
    +------+------+
    |    1 |    1 |
    |    4 |    4 |
    +------+------+
    2 rows in set
    ```

* Obtain the data from the `col1` and `col2` columns of `test_tbl1` and `test_tbl2`, merge the data, sort the merged data in descending order by `col1`, and return the first three rows.

    ```sql
    SELECT col1, col2 FROM test_tbl1 
    UNION
    SELECT col1, col2 FROM test_tbl2
    ORDER BY col1 DESC
    LIMIT 3;
    ```

    The return result is as follows:

    ```shell
    +------+------+
    | col1 | col2 |
    +------+------+
    |    5 |    5 |
    |    4 |    4 |
    |    3 |    3 |
    +------+------+
    3 rows in set
    ```

## References

* [SELECT](100.select-of-mysql-mode.md)
* [Set operations](../../../../../../300.develop/100.application-development-of-mysql-mode/500.read-data-of-mysql-mode/500.query-collection-operations-of-mysql-mode.md)