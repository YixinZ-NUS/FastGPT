| Description   |                 |
|---------------|-----------------|
| keywords      |                 |
| dir-name      |                 |
| dir-name-en   |                 |
| tenant-type   | MySQL Mode      |
|machine-translation||

# ALTER MATERIALIZED VIEW

## Purpose

This statement is used to modify the attributes of a materialized view.

<main id="notice" type='explain'>
  <h4>Note</h4>
  <p>For OceanBase Database V4.3.5, the <code>ALTER MATERIALIZED VIEW</code> statement is supported starting from V4.3.5 BP1.</p>
</main>

## Privileges

To execute the `ALTER MATERIALIZED VIEW` statement, the current user must have the `ALTER` privilege on the target object. For more information about OceanBase Database privileges, see [Privilege types in MySQL mode](../../../../../600.manage/500.security-and-permissions/300.access-control/200.user-and-permission/200.permission-of-mysql-mode/100.permission-classification-of-mysql.md).

## Syntax

```sql
ALTER MATERIALIZED VIEW [database.]view_name alter_mview_action_list;

alter_mview_action_list:
    alter_mview_action [, alter_mview_action ...]

alter_mview_action:
    parallel_clause
    | REFRESH [nested_refresh_option] [[START WITH expr] [NEXT expr]]

parallel_clause:
    NOPARALLEL
    | PARALLEL integer

nested_refresh_option:
    INDIVIDUAL
    | INCONSISTENT
    | CONSISTENT
```

## Parameters

|        **Parameter**         |       **Description**           |
|-------------------------|--------------------------|
| database.               | Optional. The name of the database where the materialized view to be modified resides. If you omit `database.`, the default materialized view in the database connected to the current session is modified. |
| view_name               | The name of the materialized view to be modified. <main id="notice" type='explain'><h4>Note</h4><p>For OceanBase Database V4.3.5, the <code>RENAME TABLE</code> statement supports renaming a materialized view starting from V4.3.5 BP3. </p></main>|
| alter_mview_action_list | The list of operations that can be performed on the materialized view. Multiple actions can be specified at once, separated by commas (`,`). For more information, see [alter_mview_action](#alter_mview_action).|

### alter_mview_action

* `parallel_clause`: specifies the degree of parallelism for refreshing the materialized view. Valid values:

  * `NOPARALLEL`: the default value. The degree of parallelism is 1.
  * `PARALLEL integer`: specifies the degree of parallelism. The value of `integer` must be an integer greater than or equal to 1.

  **Here is an example:**

  ```sql
  ALTER MATERIALIZED VIEW mv1 PARALLEL 5;
  ```

* `REFRESH [nested_refresh_option] [[START WITH expr] [NEXT expr]]`: specifies the time cycle for scheduling background refresh tasks of the materialized view. You can also modify the refresh strategy of the materialized view by using this statement. The refresh strategy of the materialized view is specified by using the `nested_refresh_option` parameter.

  * `nested_refresh_option`: optional. The refresh strategy of the materialized view.

    * `INDIVIDUAL`: the default value, indicating independent refresh.
    * `INCONSISTENT`: indicates cascaded, non-consistent refresh.
    *`CONSISTENT`: indicates cascaded, consistent refresh.

    <main id="notice" type='explain'>
      <h4>Note</h4>
      <p>For OceanBase Database V4.3.5, you can modify the refresh strategy of a nested materialized view starting from V4.3.5 BP3. </p>
    </main>

    **Here are some examples:**

    ```sql
    ALTER MATERIALIZED VIEW mv1 REFRESH INDIVIDUAL;
    ```

    ```sql
    ALTER MATERIALIZED VIEW mv1 REFRESH INCONSISTENT;
    ```

    ```sql
    ALTER MATERIALIZED VIEW mv1 REFRESH CONSISTENT;
    ```

  * `[START WITH expr]`: optional. The time expression when the refresh plan starts.
  * `[NEXT expr]`: optional. The time expression when the next refresh is scheduled.

    <main id="notice" type='notice'>
      <h4>Notice</h4>
      <p><ul><li>If the <code>NEXT</code> clause is used, the time expression for the refresh schedule must be set to a future time point; otherwise, an error will occur.</li><li>To enable periodic automatic scheduling of refresh tasks for the materialized view, define the <code>NEXT</code> clause to set the scheduling interval.</li></ul></p>
    </main>

  We recommend that you use `sysdate()` to specify the current timezone time. An example of the time expression is as follows:

  ```sql
  START WITH sysdate() NEXT sysdate() + INTERVAL 1 DAY
  ```

  The above clause indicates that the materialized view will be refreshed every day starting from the current time `(sysdate())`.

  **Here are some examples:**

  ```sql
  ALTER MATERIALIZED VIEW mv1
      REFRESH START WITH sysdate();
  ```

  ```sql
  ALTER MATERIALIZED VIEW mv1
      REFRESH NEXT sysdate() + INTERVAL 1 DAY;
  ```

  ```sql
  ALTER MATERIALIZED VIEW mv1
      REFRESH START WITH sysdate() NEXT sysdate() + INTERVAL 1 DAY;
  ```

## References

* [Overview of materialized views](../../../../300.database-object-management/100.manage-object-of-mysql-mode/600.manage-views-of-mysql-mode/200.manage-materialized-views-of-mysql-mode/100.materialized-views-overview-of-mysql-mode.md)
* [Create a materialized view](../../../../300.database-object-management/100.manage-object-of-mysql-mode/600.manage-views-of-mysql-mode/200.manage-materialized-views-of-mysql-mode/300.create-materialized-views-of-mysql-mode.md)
* [Query a materialized view](../../../../300.database-object-management/100.manage-object-of-mysql-mode/600.manage-views-of-mysql-mode/200.manage-materialized-views-of-mysql-mode/600.view-materialized-views-of-mysql-mode.md)
* [Refresh a materialized view](../../../../300.database-object-management/100.manage-object-of-mysql-mode/600.manage-views-of-mysql-mode/200.manage-materialized-views-of-mysql-mode/400.refresh-materialized-views-of-mysql-mode.md)
