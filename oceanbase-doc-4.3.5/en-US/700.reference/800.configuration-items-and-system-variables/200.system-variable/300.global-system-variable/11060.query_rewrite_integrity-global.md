|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# query_rewrite_integrity

<main id="notice" type='explain'>
  <h4>Note</h4>
  <p>This variable was introduced in V4.3.1. </p>
</main>

## Description

The `query_rewrite_integrity` variable specifies the data consistency check level for materialized view-based query rewriting.

## Privilege requirements

* Query variables

  * Global level

    The `sys` tenant and all user tenants can execute the `SHOW VARIABLES` statement or view `SYS.TENANT_VIRTUAL_GLOBAL_VARIABLE` (in Oracle mode) or `information_schema.GLOBAL_VARIABLES` (in MySQL mode) to view the value of a global system variable.

  * Session level

    The `sys` tenant and all user tenants can execute the `SHOW VARIABLES` statement or view `SYS.TENANT_VIRTUAL_SESSION_VARIABLE` (in Oracle mode) or `information_schema.SESSION_VARIABLES` (in MySQL mode) to view the value of a session system variable.

* Modify variables

  * Set the variable at the global level

    * The `sys` tenant can directly modify the value of a global system variable.

    * MySQL user tenants must have the `SUPER` or `ALTER SYSTEM` privilege to modify the value of a global system variable.

    * For V4.x, Oracle user tenants must have the `ALTER SYSTEM` privilege to modify the value of a global system variable starting from V4.2.0.

  * Set the variable at the session level

    The `sys` tenant and all user tenants can directly modify the value of a session system variable in their own tenant.

## Attributes

| **Attribute** |  **Description**    |
|----------|--------------|
| Type   |   enum                   |
| Default value     |   enforced                 |
| Value range   | [enforced, stale_tolerated]  <ul><li> enforced: Real-time materialized views are used for query rewriting. The data in rewritten materialized views is recalculated online to ensure that the rewritten query result is consistent with the original query result. </li><li>stale_tolerated: Non-real-time materialized views are allowed for query rewriting. This may result in inconsistent query results. In this case, even if the rewritten materialized view is a real-time materialized view, it is not recalculated online. </li></ul>    |
| Effective scope   | <ul><li>GLOBAL</li><li>SESSION</li></ul>    |
| Modifiable  | Yes. The value can be modified by using the `SET` statement.|

## Considerations

This variable is meaningful only when the value of the [query_rewrite_enabled](11050.query_rewrite_enabled-global.md) variable is not `false`.

## Examples

The following examples show how to set the value of this variable to `enforced` for session-level and global-level effects, respectively.

* Set the variable at the session level

  ```shell
  obclient> SET  query_rewrite_integrity= enforced;
  ```

* Set the variable at the global level

  ```shell
  obclient> SET GLOBAL  query_rewrite_integrity= enforced;
  ```

## References

[Overview of materialized views](../../../300.database-object-management/200.manage-object-of-oracle-mode/500.manage-views-of-oracle-mode/200.manage-materialized-views-of-oracle-mode/100.materialized-views-overview-of-oracle-mode.md)