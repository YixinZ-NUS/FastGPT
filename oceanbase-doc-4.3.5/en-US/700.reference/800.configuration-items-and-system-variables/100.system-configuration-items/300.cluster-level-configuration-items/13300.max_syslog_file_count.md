|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# max_syslog_file_count

<main id="notice" type='explain'>
<h4>Note</h4>
<p>This parameter is available starting with V1.4. </p>
</main>

## Description

`max_syslog_file_count` specifies the maximum number of log files that can be retained before they are recycled.

<main id="notice" type='explain'>
<h4>Note</h4>
<p>Each log file can occupy up to 256 MB of disk space. </p>
</main>

## Privilege requirements

* Query the parameter

  The `sys` tenant and all user tenants can query this parameter by using the `SHOW PARAMETERS` statement or the `GV$OB_PARAMETERS` view.

* Modify the parameter

  Only the `sys` tenant can modify this parameter. User tenants cannot modify this parameter.

## Attributes

|      **Attribute**      |  **Description**  |
|------------------  |----------|
| Type            | INT       |
| Default value              | 0, which indicates that no log files are deleted.        |
| Value range            | [0, +âˆž) |
| Modifiable          | Yes. You can use the `ALTER SYSTEM SET` statement to modify the parameter.|
| Effective upon OBServer node restart | No. The setting takes effect immediately.        |

## Usage instructions

* The total number of all types of log files is limited by `max_syslog_file_count`, and the FIFO (First-In, First-Out) strategy is used for log file eviction. The FIFO strategy determines the eviction order based on the last modification time of the log files. For example, files like `xxxxxxxx.log.20231123223441234` are sorted by their ending timestamp to decide which files are deleted first.

* The file retention rule is as follows: The total number of all rotated `xxxxxx.log.xxxxx` files is limited by the value of `max_syslog_file_count`, and the same limit applies to all rotated `xxxxxx.log.wf.xxxxx` files. **Note that currently active log files being written (such as observer.log, rootservice.log) and their corresponding WF files are not included in this count.**

* If Trace logs are generated too quickly and in large quantities, they may occupy space intended for OBServer log files, causing OBServer logs to be evicted earlier than expected. In such cases, it is recommended to adjust the full-link tracing level to control the amount of logs generated. For details about Trace log levels, see [End-to-end tracing methods](../../../../600.manage/900.daily-inspection/900.full-link-detection/300.full-link-diagnosis.md).

* The relationship between the parameters `max_syslog_file_count` and [syslog_disk_size](22050.syslog_disk_size.md) is as follows:

  1. `max_syslog_file_count=0`, `syslog_disk_size=0`: No log recycling occurs until the disk is full.
  2. `max_syslog_file_count=0`, `syslog_disk_size>0`: When the total log size approaches `syslog_disk_size`, the oldest log files are deleted to free up space.
  3. `max_syslog_file_count>0`, `syslog_disk_size=0`: When the number of a certain type of log file exceeds `max_syslog_file_count`, the oldest log files are deleted to free up space.
  4. `max_syslog_file_count>0`, `syslog_disk_size>0`: When the number of a certain type of log file exceeds `max_syslog_file_count`, or when the total log size approaches `syslog_disk_size`, the oldest compressed files are deleted.

## Examples

Set the maximum number of log files that can be retained before they are recycled to 20.

```shell
obclient> ALTER SYSTEM SET max_syslog_file_count=20;
```

## References

* [Logs](../../../../700.reference/100.oceanbase-database-concepts/1200.observer-node-architecture/400.log.md)

* [ob_esi_max_syslog_file_count](15700.ob_esi_max_syslog_file_count.md)