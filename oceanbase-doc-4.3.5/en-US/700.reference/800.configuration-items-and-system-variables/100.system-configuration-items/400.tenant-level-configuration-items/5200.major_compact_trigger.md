|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# major_compact_trigger

<main id="notice" type='explain'>
<h4>Note</h4>
<ul><li><p>OceanBase Database V4.x has adaptive major compaction enabled by default, which is controlled by the <code>_enable_adaptive_compaction</code> switch. When adaptive major compaction is enabled, the system collects and statistics user queries and writes in real time, and schedules partition compaction tasks as needed. One scenario where adaptive major compaction is triggered is when a partition experiences frequent minor compactions, which triggers a major compaction for that partition. For more information about adaptive major compaction, see <a href="../../../200.system-management/500.manage-data-storage/200.merge-management/320.adaptive-compaction.md">Adaptive major compaction</a>. </p><p>The <code>major_compact_trigger</code> parameter specifies the number of freeze (a prerequisite for minor compaction) operations before a major compaction is triggered for a tenant. The <code>major_compact_trigger</code> parameter is tenant-level, whereas adaptive major compaction is partition-level. Adaptive major compaction schedules fewer but larger partition compaction tasks, which consumes fewer system resources. Therefore, we recommend that you do not use the <code>major_compact_trigger</code> parameter when adaptive major compaction is enabled. </p></li>
<li>This parameter is effective for tenants from V4.0.0. </li></ul>
</main>

## Description

The `major_compact_trigger` parameter specifies the number of freeze (a prerequisite for minor compaction) operations before a major compaction is triggered for a tenant.

## Privilege requirements

* Query the parameter

  The `sys` tenant and all user tenants can execute the `SHOW PARAMETERS` statement or query the `GV$OB_PARAMETERS` view to obtain the value of this parameter.

* Modify the parameter

  The `sys` tenant and user tenants can modify this parameter.

## Attributes

|      **Attribute**      |    **Description**    |
|------------------|--------------|
| Type             | Int           |
| Default value               | 0, indicating that a major compaction will not be automatically triggered regardless of the number of minor compactions. <main id="notice" type='explain'><h4>Note</h4><p>The default value of this parameter is changed from 5 to 0 in V4.0.0. </p></main>           |
| Value range             | \[0, 65535\] |
| Modifiable           | Yes, you can execute the `ALTER SYSTEM SET` statement to modify this parameter.|
| Effective upon OBServer node restart | No. The setting takes effect immediately.     |

## Example

Set the value of this parameter to 10 to trigger a major compaction after 10 minor compactions.

```shell
obclient> ALTER SYSTEM SET major_compact_trigger=10;
```