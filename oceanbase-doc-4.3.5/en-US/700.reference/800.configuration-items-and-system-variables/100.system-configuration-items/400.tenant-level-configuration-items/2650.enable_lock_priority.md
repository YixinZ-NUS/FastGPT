|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# enable_lock_priority

<main id="notice" type='explain'>
  <h4>Note</h4>
  <p><ul><li>In V4.3.x, this parameter is introduced starting from V4.3.5 BP2. </li><li>In V4.2.x, this parameter is introduced starting from V4.2.5. </li></ul></p>
</main>

## Description

`enable_lock_priority` is a switch for table lock priority. Once enabled, specific DDL operations (`RENAME TABLE`) will have the highest lock priority. This means that when other DDL, locking operations, or DML are waiting for locks simultaneously, `RENAME TABLE` will be the first to acquire the lock once the corresponding lock is released.

## Privilege requirements

* Query the parameters

  The `sys` tenant and all user tenants can use the `SHOW PARAMETERS` statement or the `GV$OB_PARAMETERS` view to query this parameter.

* Modify a parameter

  The `sys` tenant and user tenants can use the `ALTER SYSTEM SET` statement to modify this parameter.

## Attributes

|  **Attribute** | **Description** |
|-----------|----------|
| Parameter type | Bool |
| Default value | FALSE |
| Value range | <ul><li>TRUE: specifies to enable lock priority. </li><li>FALSE (default): specifies to disable lock priority. </li></ul>|
| Modifiable | Yes. You can modify it by using the `ALTER SYSTEM SET` statement. |
| Effective upon OBServer node restart | No. The setting takes effect immediately.

## Considerations

Before using gh-ost or OceanBase Developer Center (ODC) to execute Online DDL, you need to enable the `enable_lock_priority` for the corresponding tenant. After enabling it, query the `GV$OB_PARAMETERS` view to ensure it takes effect on all machines under the tenant. Once the online DDL operation is complete, disable this parameter to prevent DDL operations from affecting user DML transactions.

## Configuration example

1. Enable the table lock priority.

   ```sql
   ALTER SYSTEM SET enable_lock_priority = TRUE;
   ```

2. View the value of the parameter.

   ```sql
   SHOW PARAMETERS LIKE 'enable_lock_priority';
   ```

   The return result is as follows:

   ```shell
   +-------+----------+----------------+----------+----------------------+-----------+-------+-----------------------------------------------------------------------------------------------------------------------------------+---------+--------+---------+-------------------+---------------+-----------+
   | zone  | svr_type | svr_ip         | svr_port | name                 | data_type | value | info                                                                                                                              | section | scope  | source  | edit_level        | default_value | isdefault |
   +-------+----------+----------------+----------+----------------------+-----------+-------+-----------------------------------------------------------------------------------------------------------------------------------+---------+--------+---------+-------------------+---------------+-----------+
   | zone1 | observer | xxx.xx.xxx.001 |     2882 | enable_lock_priority | NULL      | True  | specifies whether to enable lock priority, which, when activated, gives certain DDL operations the highest table lock precedence. | TRANS   | TENANT | DEFAULT | DYNAMIC_EFFECTIVE | False         |         0 |
   | zone2 | observer | xxx.xx.xxx.002 |     2882 | enable_lock_priority | NULL      | True  | specifies whether to enable lock priority, which, when activated, gives certain DDL operations the highest table lock precedence. | TRANS   | TENANT | DEFAULT | DYNAMIC_EFFECTIVE | False         |         0 |
   | zone3 | observer | xxx.xx.xxx.003 |     2882 | enable_lock_priority | NULL      | True  | specifies whether to enable lock priority, which, when activated, gives certain DDL operations the highest table lock precedence. | TRANS   | TENANT | DEFAULT | DYNAMIC_EFFECTIVE | False         |         0 |
   +-------+----------+----------------+----------+----------------------+-----------+-------+-----------------------------------------------------------------------------------------------------------------------------------+---------+--------+---------+-------------------+---------------+-----------+
   3 row in set
   ```

3. Set the priority of table lock to low.

   ```sql
   ALTER SYSTEM SET enable_lock_priority = FALSE;
   ```

## References

[GV$OB_PARAMETERS](../../../../700.reference/700.system-views/300.system-view-of-sys-tenant/300.performance-view-of-sys-tenant/2100.gv-ob_parameters-of-sys-tenant.md)