|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||

# GV$OB_TRANSACTION_PARTICIPANTS

## Purpose

The `GV$OB_TRANSACTION_PARTICIPANTS` view displays information about participants of active transactions on all OBServer nodes.


## Fields

| Field | Type | Nullable? | Description |
|-------------------------|---------------|------------|-----------------|
| TENANT_ID | bigint(20) | NO | The ID of the tenant. |
| SVR_IP | varchar(46) | NO | The IP address of the server. |
| SVR_PORT | bigint(20) | NO | The port number of the server. |
| SESSION_ID | bigint(20) | NO | The session ID. |
| SCHEDULER_ADDR | varchar(64) | NO | The address of the node where the scheduler resides. |
| TX_TYPE | varchar(11) | NO | The type of the transaction. Valid values include:<ul><li><code>LOCAL</code>: a non-nested single-participant transaction. </li><li><code>DISTRIBUTED</code>: a distributed transaction. |
| TX_ID | bigint(20) | NO | The transaction ID. |
| LS_ID | bigint(20) | NO | The ID of the log stream to which the transaction belongs. |
| PARTICIPANTS | varchar(1024) | NO | The list of participants. |
| CTX_CREATE_TIME | timestamp(6) | YES | The time when the context was created. |
| TX_EXPIRED_TIME | timestamp(6) | YES | The time when the transaction expires. |
| STATE | varchar(13) | NO | The context commit status. |
| ACTION | varchar(10) | NO | The action performed by the last transaction. Valid values include:<ul><li>UNKNOWN: unknown. </li><li>START TASK: start. </li><li>END TASK: end. </li><li>COMMIT: commit request received. </li><li>ABORT: rollback request received. </li><li> DIED: self-driven rollback. </li></ul> |
| PENDING_LOG_SIZE | bigint(20) | NO | The size of logs that have not been flushed to the disk by the participant in the current transaction. |
| FLUSHED_LOG_SIZE | bigint(20) | NO | The size of logs that have been flushed to the disk by the participant in the current transaction. |
| ROLE | varchar(8) | NO | The role of the replica. Valid values: `0` and `1`. The value `0` indicates a leader, and the value `1` indicates a follower.  |
| COORD | bigint(20) | NO | The ID of the coordinator log stream (valid only after the transaction enters the commit phase). |
| LAST_REQUEST_TIME | timestamp(6) | YES | The time when the last external request was received. |
| FORMATID | bigint(20) | NO | The format ID. |
| GLOBALID | varchar(257) | NO | The global ID of the XA transaction. |
| BRANCHID | varchar(257) | NO | The branch qualifier of the XA transaction. |

## Common SQL statements

The `GV$OB_TRANSACTION_PARTICIPANTS` view displays the statistics on all active transactions in a cluster. A transaction involves write operations of N log streams, and each log stream generates a record. You can query this view for time-consuming transactions.

Query the `GV$OB_TRANSACTION_PARTICIPANTS` view for participants of active transactions that take more than 100s. The syntax is as follows:

```sql
obclient> SELECT svr_ip, tx_id, ls_id from GV$OB_TRANSACTION_PARTICIPANTS where tenant_id = xxx and ctx_create_time < date_sub(now(), INTERVAL 100 SECOND);
```

You can query the `GV$OB_SQL_AUDIT` view based on the `tx_id` field for all SQL statements in the transaction and their time consumption information.
