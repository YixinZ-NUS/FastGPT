|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||

# Analyze an ASH report

After an ASH report is generated, view its content to determine the possible causes of the instantaneous performance issues.

## ASH report content

In the ASH report, the **ASH Report** section records statistical data about the ASH report, including information such as the system version, operating system environment, sampling time period, analysis time period, ASH and WR data sources, number of samples, number of events, and average active session count. It generates information for 18 modules, such as **Top Active Tenants**, **Top Node Load**, **Top Groups**, **Top Foreground DB Time**, **Top Background DB Time**, **Top Sessions**, **Top IO Bandwidth**, **Top Blocking Sessions**, **Top Latches**, **Top DB Objects**, **Activity Over Time**, **Top Execution Phase**, **Top IO Events**, **Top SQL Statement Types**, **Top SQL with Top Events**, **Top SQL with Top Operator**, **Top PL/SQL Procedures**, and **Complete List of SQL Text**. These modules provide performance analysis from multiple dimensions or combinations such as time, session, module, operation, or SQL statements.

### ASH report

This section displays some statistics about sampling time, analysis time, and general statistics in the ASH (Active Session History) report.

* Cluster Name: the name of the cluster, which is the name of the database cluster.
* Observer Version: the version information of OceanBase Database, including the version number and build version.
* Operation System Info: the operating system information, including the kernel version and architecture.
* User Input Begin Time: the start time of sampling, which indicates the time when session activities are recorded.
* User Input End Time: the end time of sampling, which indicates the time when session activities are stopped.
* Analysis Begin Time: the start time of analysis, which indicates the start time of analyzing sampling data.
* Analysis End Time: the end time of analysis, which indicates the end time of analyzing sampling data.
* Ash Data Source: the ASH data source. This column does not exist if ASH is not used.
* Wr Data Source: the WR data source. This column does not exist if WR is not used.
* Elapsed Time: the total sampling time in seconds.
* Ash Num of Sample: the number of ASH samples, which indicates the number of recorded session activities.
* Wr Num of Sample: the number of WR samples, which indicates the number of performance snapshots generated in the analysis time period.
* Average Active Sessions: the average number of active sessions, which indicates the average number of active database sessions during the sampling period.

The statistics provide information about the activities, number of sessions, and system activity during the sampling period.

```shell
ASH Report

           Cluster Name: test425
       Observer Version: OceanBase 4.2.5.3 (203000012025022717-866087xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx)
  Operation System Info: Linux(3.10.0-327.ali2019.alios7.x86_64)_x86_64
  User Input Begin Time: 2024-09-22 10:26:47
    User Input End Time: 2025-06-22 20:27:07
Ash Analysis Begin Time: 2025-03-05 12:59:50
  Ash Analysis End Time: 2025-03-05 15:47:12
 Wr Analysis Begin Time: 2025-02-28 09:43:43
   Wr Analysis End Time: 2025-03-05 12:59:35
        Ash Data Source: oceanbase.GV$ACTIVE_SESSION_HISTORY
         Wr Data Source: oceanbase.DBA_WR_ACTIVE_SESSION_HISTORY
           Elapsed Time: 453793
      Ash Num of Sample: 11019
       Wr Num of Sample: 475940
Average Active Sessions: 1.07
```

### Top Active Tenants

This section displays information about the most active tenants.

* Tenant Name: the name of the tenant, which identifies the tenant.
* Session Type: the session type, which can be BACKGROUND or FOREGROUND. BACKGROUND indicates a background process, and FOREGROUND indicates a foreground process.
* Total Samples: the total number of records, which indicates the total number of samples in the analysis time period of the ASH report.
* Wait Event Count: the number of waiting events, which indicates the number of samples on waiting events.
* On CPU Samples: the number of samples on CPU, which indicates the number of samples on CPU.
* Avg Active Sessions: the average number of active sessions, which indicates the average number of active database sessions during the sampling period (on CPU or on waiting events).
* % Activity: the activity percentage, which indicates the activity percentage of the tenant (CPU + waiting) in the specified time period.
* Equivalent Client Load: the number of active connections between the client and the database during the ASH report analysis period. The higher the ratio (Avg Active Sessions/Equivalent Client Load), the greater the impact of internal database overhead on performance. Conversely, the lower the ratio, the greater the impact of the network link or client on performance.

The statistics provide information about tenant activities, revealing different aspects of database performance and resource usage by tenants.

```shell
Top Active Tenants:
  - this section lists top active tenant information
  - Total Samples: num of records during ash report analysis time period
  - Wait Event Samples: num of records when session is on wait event
  - On CPU Samples: num of records when session is on cpu
  - Avg Active Sessions: average active sessions during ash report analysis time period
  - % Activity: activity(cpu + wait) percentage for given tenant
  - Equivalent Client Load: equivalent client average active sessions during ash report analysis time period
+----------------------------------------------------------------+------------+------------------+-----------------------+-------------------+--------------------+-----------+------------------------+
|                                                     Tenant Name|Session Type|     Total Samples|     Wait Event Samples|     On CPU Samples| Avg Active Sessions| % Activity|  Equivalent Client Load|
+----------------------------------------------------------------+------------+------------------+-----------------------+-------------------+--------------------+-----------+------------------------+
|                                                        mysql001|  BACKGROUND|            486959|                   9338|             477621|                1.07|    100.00%|                       -|
+----------------------------------------------------------------+------------+------------------+-----------------------+-------------------+--------------------+-----------+------------------------+
```

### Top Node Load

This section displays performance metrics of top nodes based on the DB time metric.

* IP: the IP address of the server.

* Port: the port number of the server.

* Session Type: the session type, which can be BACKGROUND or FOREGROUND. BACKGROUND indicates a background process, and FOREGROUND indicates a foreground process.

* Total Samples: the total number of records, which indicates the total number of samples in the analysis time period of the ASH report.

* Wait Event Samples: the number of waiting events, which indicates the number of samples on waiting events.

* On CPU Samples: the number of samples on CPU, which indicates the number of samples on CPU.

* Avg Active Sessions: the average number of active sessions, which indicates the average number of active database sessions during the sampling period (on CPU or on waiting events).

* % Activity: the activity percentage, which indicates the activity percentage of the tenant (CPU + waiting) in the specified time period.

* Equivalent Client Load: the number of active connections between the client and the database. A higher ratio (Avg Active Sessions/Equivalent Client Load) indicates that internal database overhead has a greater impact on performance, while a lower ratio suggests that the network link or client has a greater impact on performance.

The statistics provide information about the load of nodes in the database cluster.

```shell
Top Node Load:
  - this section lists top node measured by DB time
  - IP: OceanBase instance svr_ip
  - Port: OceanBase instance svr_port
  - Total Samples: num of records during ash report analysis time period
  - Wait Event Samples: num of records when session is on wait event
  - On CPU Samples: num of records when session is on cpu
  - Avg Active Sessions: average active sessions during ash report analysis time period
  - % Activity: activity(cpu + wait) percentage for given tenant
  - Equivalent Client Load: equivalent client average active sessions during ash report analysis time period
+----------------+-------+------------+------------------+-----------------------+-------------------+--------------------+-----------+------------------------+
|              IP|   Port|Session Type|     Total Samples|     Wait Event Samples|     On CPU Samples| Avg Active Sessions| % Activity|  Equivalent Client Load|
+----------------+-------+------------+------------------+-----------------------+-------------------+--------------------+-----------+------------------------+
|  xx.xx.xx.xx   |   2882|  BACKGROUND|            486959|                   9338|             477621|                1.07|    100.00%|                       -|
+----------------+-------+------------+------------------+-----------------------+-------------------+--------------------+-----------+------------------------+
```

### Top Groups

This section displays the resource consumer groups with the highest resource consumption.

* Node: the node address.

* Group Name: the name of the resource group.

* Group Samples: the number of session activity records sampled in the current resource group.

* % Activity: the percentage of activity for an event, representing the percentage of activity (CPU + wait) for a given tenant during the specified time period.  

* Program: the process name corresponding to the background session.  

* % Program: the proportion of this background session process within the resource group (for example, CPU, threads).  

* Module: the name of the functional module in the program.  

* % Module: the proportion of this module in the program's active sessions, used to identify hotspot operations within the program.  

* Action: the specific operation within the module.  

* % Action: the proportion of this operation in the module's active sessions, further refining the granularity of performance analysis.  

* Avg Active Sessions: the average number of active sessions, indicating how many database sessions were simultaneously active (whether on the CPU or waiting for events) during the sampling period.  

* Slot Begin Time: the start time of the session activity period, formatted as `YYYY-MM-DD HH:MM:SS(+ offset seconds)`, representing the beginning of the statistical period.  

* Slot Count: the total number of samples within the current time period. ASH samples the active session state once per second by default, so the Slot Count value equals the length of the time period in seconds.  

* Action Key: Identifies the type of operation triggering active sessions, used to locate the resource consumption of specific services or components. It typically includes the following information:  
  * Source Node: For example, `xx.xx.xx.xx:2882` (IP and port).  
  * Tenant and Resource Group: For example, `tenant:1002/group:0`.  
  * Service Type: For example, `T1002_LogService-LogRestoreService-RemoteLogWriter` (log restore service).  

* Action Samples: the number of active session samples for this operation (Action Key) during the current time period. A higher value indicates that this operation consumes more database resources.


This information provides details about the top resource consumer groups and their key performance metrics, including the main performance events they encountered, the frequency of these events, the percentage of activity, and the average level of concurrent sessions.

```shell
Top Groups:
  - this section lists top resource consumer groups
  - Group Name: resource consumer group name
  - Group Samples: num of sampled session activity records in the current resource group
  - % Activity: activity percentage for given event resource group
  - Avg Active Sessions: average active sessions during ash report analysis time period
+----------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------+-------------+-----------+----------------------------------------------------------------+-----------+--------------------------------+-----------+--------------------------------+-----------+--------------------+
|                                                            Node|                                                                                                                      Group Name|Group Samples| % Activity|                                                         Program|  % Program|                          Module|   % Module|                          Action|   % Action| Avg Active Sessions|
+----------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------+-------------+-----------+----------------------------------------------------------------+-----------+--------------------------------+-----------+--------------------------------+-----------+--------------------+
|                                             xx.xx.xx.xx:2882   |                                                                                                             tenant:1002/group:0|       486712|     99.95%|                                                T1002_LogService|     94.17%|               LogRestoreService|     90.18%|                 RemoteLogWriter|     90.17%|                0.97|
|                                                                |                                                                                                                                |             |           |                                                                |           |               LogArchiveService|      3.62%|                   ArchiveSender|      3.56%|                0.04|
+----------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------+-------------+-----------+----------------------------------------------------------------+-----------+--------------------------------+-----------+--------------------------------+-----------+--------------------+
+----------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------+--------------------+-----------+--------------------+
|             Slot Begin Time|   Slot Count|                                                                                                                      Action Key|      Action Samples| % Activity| Avg Active Sessions|
+----------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------+--------------------+-----------+--------------------+
|2025-02-28 09:43:43(+28337s)|        30060|                                      xx.xx.xx.xx:2882-tenant:1002/group:0-T1002_LogService-LogRestoreService-RemoteLogWriter|               27000|     89.82%|                0.95|
|                            |             |                                        xx.xx.xx.xx:2882-tenant:1002/group:0-T1002_LogService-LogArchiveService-ArchiveSender|                1130|      3.76%|                0.04|
|2025-02-28 17:36:00(+45360s)|        47450|                                      xx.xx.xx.xx:2882-tenant:1002/group:0-T1002_LogService-LogRestoreService-RemoteLogWriter|               42920|     90.45%|                0.95|
|                            |             |                                        xx.xx.xx.xx:2882-tenant:1002/group:0-T1002_LogService-LogArchiveService-ArchiveSender|                1300|      2.74%|                0.03|
+----------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------+--------------------+-----------+--------------------+
```

### Top Foreground DB Time

This section lists the primary consumers of database foreground activity time by event type.

* Node: the node address.

* Event Name: the events consuming the most DB Time, including both wait events and CPU events.

* Wait Class: the type of wait to which the event belongs.

* Event Samples: the number of session activity records sampled for each event.

* Avg Active Sessions: the average number of active sessions, indicating how many database sessions were simultaneously active (whether on the CPU or waiting for events) during the sampling period.

* % Activity: the percentage of activity for an event, representing the percentage of activity (CPU + wait) for a given tenant during the specified time period.

This information provides details about the top-ranked DB Time consumption by foreground sessions during the specified analysis period.

```shell
Top Foreground DB Time:
  - This section lists top foreground db time categorized by event
  - Event Name: comprise wait event and on cpu event
  - Event Samples: num of sampled session activity records
  - % Activity: activity percentage for given event
  - Avg Active Sessions: average active sessions during ash report analysis time period
+----------------------------------------------------------------+----------------------------------------------------------------+--------------------+-------------+--------------------+-----------+
|                                                            Node|                                                      Event Name|          Wait Class|Event Samples| Avg Active Sessions| % Activity|
+----------------------------------------------------------------+----------------------------------------------------------------+--------------------+-------------+--------------------+-----------+
|                                                xx.xx.xx.xx:2882|                                             exec inner sql wait|               OTHER|           21|                0.00|      0.00%|
+----------------------------------------------------------------+----------------------------------------------------------------+--------------------+-------------+--------------------+-----------+

```

### Top Background DB Time

This section displays the DB Time generated by background sessions.

* Node: the node address.

* Program: the process name corresponding to the background session.

* Module: the functional module name in the program.

* Action: the specific operation within the module.

* Event Name: the events consuming the most DB Time, including both wait events and CPU events.

* Wait Class: the type of wait to which the event belongs.

* Event Samples: the number of session activity records sampled for each event.

* % Activity: the percentage of activity for an event, representing the percentage of activity (CPU + wait) for a given tenant during the specified time period.

* Avg Active Sessions: the average number of active sessions, indicating how many database sessions were simultaneously active (whether on the CPU or waiting for events) during the sampling period.

This information provides details about the most resource-intensive background processes, the main types of events they experienced and their activity frequency, their contribution to overall DB Time, and the average level of concurrent active sessions.

```shell

Top Background DB Time:
  - this section lists top DB Time for background sessions
  - Program: process name for background sessions
  - Event Name: comprise wait event and on cpu event
  - Event Samples: num of sampled session activity records
  - % Activity: activity percentage for given event
  - Avg Active Sessions: average active sessions during ash report analysis time period
+----------------------------------------------------------------+-----------------------------------------------------------------+----------------------------------------------------------------+----------------------------------------------------------------+----------------------------------------------------------------+--------------------+-------------+-----------+--------------------+
|                                                            Node|                                                          Program|                                                          Module|                                                          Action|                                                      Event Name|          Wait Class|Event Samples| % Activity| Avg Active Sessions|
+----------------------------------------------------------------+-----------------------------------------------------------------+----------------------------------------------------------------+----------------------------------------------------------------+----------------------------------------------------------------+--------------------+-------------+-----------+--------------------+
|                                                xx.xx.xx.xx:2882|                                                 T1002_LogService|                                               LogRestoreService|                                                 RemoteLogWriter|                                                          ON CPU|                NULL|       619213|     90.08%|                0.98|
|                                                                |                                                 T1002_LogService|                                               LogArchiveService|                                                   ArchiveSender|                                                          ON CPU|                NULL|        24790|      3.61%|                0.04|
|                                                                |                                      T1002_TenantWeakReadService|                                           TenantWeakReadService|                                             gen_cluster_version|                                                          ON CPU|                NULL|         4521|      0.66%|                0.01|
|                                                                |                                                     T1002_PLSSer|                                                          PLSSer|                                                       UNDEFINED|                                                          ON CPU|                NULL|         4395|      0.64%|                0.01|
|                                                                |                                      T1002_TenantWeakReadService|                                           TenantWeakReadService|                                             gen_cluster_version|                                             exec inner sql wait|               OTHER|         2478|      0.36%|                0.00|
+----------------------------------------------------------------+-----------------------------------------------------------------+----------------------------------------------------------------+----------------------------------------------------------------+----------------------------------------------------------------+--------------------+-------------+-----------+--------------------+

```

### Top Sessions

This section displays information about the top sessions (Top Sessions).

* Session ID: the sampled session ID.

* Program: the process name corresponding to the background session.

* % Activity: the percentage of activity for an event, representing the percentage of activity (CPU + wait) for a given tenant during the specified time period.

* Avg Active Sessions: the average number of active sessions, indicating how many database sessions were simultaneously active (whether on the CPU or waiting for events) during the sampling period.

* Event Name: the events consuming the most DB Time, including both wait events and CPU events.

* Wait Class: the type of wait to which the event belongs.

* % Event: the proportion of this event in the total database activity. A high percentage may indicate that this event is a key bottleneck for system performance.

* SQL ID: the unique identifier for the SQL query.

* Plan Hash: the numerical value of the current SQL execution plan. Identical plans will have the same hash value.

* % SQL ID: the proportion of the SQL statement associated with this event in the total database activity. A high percentage indicates that this SQL statement is a primary source of resource consumption.

* Sql Executions: the number of times the SQL statement was executed during the analysis time period. High-frequency executions may lead to resource contention or lock conflicts.

This information provides a ranking and statistical analysis of active sessions based on the session dimension. By comparing the sampled session ID, percentage of active sessions, events, event counts, event percentages, and the current user's sampled activity state, it becomes easier to identify problematic sessions.

```shell
Top Sessions:
  - this section lists top Active Sessions with the largest wait event and SQL_ID
  - Session ID: user session id
  - % Activity: represents the load on the database caused by this session
  - Avg Active Sessions: average active sessions during ash report analysis time period
  - Event Name: comprise wait event and on cpu event
  - % Event: represents the activity load of the event on the database
  - % SQL ID: represents the activity load of the event on the database
  - Sql Executions: represents the execution count of the SQL_ID
+--------------------+----------------------------------------------------------------+-----------+--------------------+----------------------------------------------------------------+--------------------+-----------+----------------------------------------+--------------------+-----------+--------------------+
|          Session ID|                                                         Program| % Activity| Avg Active Sessions|                                                      Event Name|          Wait Class|    % Event|                                  SQL ID|           Plan Hash|   % SQL ID|      Sql Executions|
+--------------------+----------------------------------------------------------------+-----------+--------------------+----------------------------------------------------------------+--------------------+-----------+----------------------------------------+--------------------+-----------+--------------------+
|          3221731236|                                                   T1002_SQL_CMD|      0.00%|                0.00|                                             exec inner sql wait|               OTHER|      0.00%|        1DCD1A13FF867BD1C03DE1582C274EE6| 6388442502389984409|      0.00%|                   1|
|          3221731635|                                                   T1002_SQL_CMD|      0.00%|                0.00|                                             exec inner sql wait|               OTHER|      0.00%|        73D0527F0F1AE01E34A477EB2E920B26|                   0|      0.00%|                   1|
+--------------------+----------------------------------------------------------------+-----------+--------------------+----------------------------------------------------------------+--------------------+-----------+----------------------------------------+--------------------+-----------+--------------------+
```

### Top IO Bandwidth

This section displays the TOP I/O throughput from the perspective of SQL and background tasks.

* Node: the node address.

* Program Module Action/SQL ID: the type of background task (for example, log aggregation, transaction log writing) or the unique identifier of the SQL query, used to track the resource consumption of specific SQL statements.

* Plan Hash: the numerical value of the current SQL execution plan. Identical plans will have the same hash value.

* Type: the type of I/O operation, distinguishing the source of read/write load.

* IOPS: the number of I/O requests per second, reflecting the load pressure on the storage device. High IOPS may indicate frequent small-volume operations.

* IO Size (MB): the total amount of data read or written (in MB) by the task or SQL during the sampling period. Background tasks typically involve larger data volumes (for example, batch log writing).

* IO Bandwidth (MB/s): the I/O throughput per second, measuring the actual utilization of storage bandwidth. Low bandwidth may result from data fragmentation or hardware limitations.

* Object ID: the primary data shard involved in the I/O operation. No data indicates no data fragmentation or no data collected during the sampling period.

* % Object ID: the proportion of I/O dominated by the primary shard.

This information provides parameters such as Node, SQL ID, and IOPS to analyze the I/O throughput of SQL and background tasks. By combining read/write types, data volume, and distribution characteristics, it helps identify performance bottlenecks.

```shell
Top IO Bandwidth:
  - This section lists the top io bandwidth from the perspective of SQL and background tasks
  - Node: The IP address and port number of the observer
  - Program Module Action / SQL ID: Program Module Action represent the type of background tasks, which is only effective in background tasks. And SQL ID is only effective in foreground tasks
  - Plan Hash: Numeric representation of the current SQL plan, which is only effective in foreground tasks.
  - IOPS: Average IO requests executed per second
  - IO Size: The total read or write size(MB) of background task or SQL
  - IO Bandwidth: Average IO size(MB) consumed per second
  - Type: read or write
  - Object ID: The tablet_id with the highest read or write samples
  - % Object ID: The ratio of the tablet_id with the highest read or write samples to the total samples of tablet_ids in entire background task or SQL
+---------------------+------------------------------------------------------------------------------------------------+--------------------+--------+----------------+--------------------+--------------------+----------+------------+
|                 Node|                                                                  Program Module Action / SQL ID|           Plan Hash|    Type|            IOPS|         IO Size(MB)|  IO Bandwidth(MB/s)| Object ID| % Object ID|
+---------------------+------------------------------------------------------------------------------------------------+--------------------+--------+----------------+--------------------+--------------------+----------+------------+
|     xx.xx.xx.xx:2882|                                                                2832371C55D53551E663F66BF66FD461| 3290318591324336132|disk_read|           61.32|                0.19|                0.29|         -|           -|
|     xx.xx.xx.xx:2882|                                                  T1002_LogService/LogIOWorker/aggregate io task|                   0|disk_write|            9.19|              731.36|                0.04|         -|           -|
|     xx.xx.xx.xx:2882|                                                                          T1002_OB_SLOG/OB_SLOG/|                   0|disk_write|            2.20|               95.86|                0.01|         -|           -|
+---------------------+------------------------------------------------------------------------------------------------+--------------------+--------+----------------+--------------------+--------------------+----------+------------+
```

### Top Blocking Sessions

This section displays issues with blocking sessions in the database caused by locks (enqueues), latches, and buffer busy contention.

* Blocking Session ID: the identifier of the session blocking other sessions, used to locate the root cause of the issue.

* % Activity: the percentage of activity caused by events triggered by the blocking session. A high percentage indicates that this session is a primary source of contention.

* Avg Active Sessions: the average number of active sessions for the blocking session during the sampling period, indicating how many database sessions were simultaneously active (whether on the CPU or waiting for events) during the sampling period.

* Holder User: the user holding the lock or resource.

* Holder TX ID: the transaction ID holding the resource.

* Holder SQL ID: the identifier of the SQL statement holding the resource, used to associate specific operations.

* Event Caused: the type of wait event caused by the blocking session.

* % Event: the proportion of this event among similar blocking events, helping to identify high-frequency contention types.

* XIDs: the chain of associated transaction IDs, used to trace dependencies between transactions.

* Top Waiting SQL ID: the identifier of the SQL statement most severely affected by the blocking session.

* % SQL ID: the proportion of this SQL statement in the total blocking waits, used to prioritize optimization of high-impact queries.

This information provides fields such as `Blocking Session ID` and `Holder TX ID` to precisely locate the source of the blocking. By combining `% Activity` and `% Event` to quantify the impact of contention, and using `Holder SQL ID` and `Top Waiting SQL ID` to associate root causes at the SQL level, along with XIDs to trace transaction chains, it enables full-stack diagnostics from session, transaction, to SQL for identifying database performance bottlenecks.

```shell
Top Blocking Sessions:
  - Blocking session activity percentages are calculated with respect to waits on enqueues, latches and "buffer busy" only.
  - '% Activity' represents the load on the database caused by a particular blocking session.
  - '# Avg Active Sessions' shows the number of ASH samples in which the blocking session was found active.
+---------------------+--------------------+--------------------+----------------------------------------------------------------+---------------------+----------------------------------------+----------------------------------------------------------------+--------------------+--------------------+----------------------------------------+--------------------+
|  Blocking Session ID|          % Activity| Avg Active Sessions|                                                     Holder User|         Holder TX ID|                           Holder SQL ID|                                                    Event Caused|             % Event|                XIDs|                     Top Waitting SQL ID|            % SQL ID|
+---------------------+--------------------+--------------------+----------------------------------------------------------------+---------------------+----------------------------------------+----------------------------------------------------------------+--------------------+--------------------+----------------------------------------+--------------------+
+---------------------+--------------------+--------------------+----------------------------------------------------------------+---------------------+----------------------------------------+----------------------------------------------------------------+--------------------+--------------------+----------------------------------------+--------------------+
```

### Top Latches

This section displays the most highly contested latches in the database.

* Latch Wait Event: the name of the latch wait event.

* Event Samples: the number of session activity records sampled for each event.

* % Activity: the percentage of activity for the event, representing the percentage of activity (CPU + wait) for a given tenant during the specified time period.

* Avg Active Sessions: the average number of active sessions, indicating how many database sessions were simultaneously active (whether on the CPU or waiting for events) during the sampling period.

This information identifies the latches causing the highest waits, their wait event counts, activity percentages, and average active sessions. It directly points to critical bottlenecks in database concurrency control. These insights are crucial for diagnosing and resolving latch contention issues, reducing wait times, and improving system responsiveness and overall performance.

```shell
Top Latchs:
  - this section lists top latches
  - Latch Wait Event: event that waiting for latch
  - Event Samples: num of sampled session activity records
  - % Activity: activity percentage for given event
  - Avg Active Sessions: average active sessions during ash report analysis time period
+----------------------------------------------------------------+-------------+-----------+--------------------+
|                                                Latch Wait Event|Event Samples| % Activity| Avg Active Sessions|
+----------------------------------------------------------------+-------------+-----------+--------------------+
+----------------------------------------------------------------+-------------+-----------+--------------------+
```

### Top DB Objects

This section analyzes four key types of wait events—Application, Cluster, User I/O, and Buffer Busy—to quantify the access load on database objects (for example, tables, partitions) and their associated SQL, helping to identify high-contention hotspots.

* Node Address: the node address (in the format IP:Port), used to identify the physical location of nodes in a distributed environment.

* Tenant ID: the unique identifier for the tenant.

* Object ID: the tablet_id of the database table, used for metadata association.

* Avg Active Sessions: the average number of active sessions, indicating how many database sessions were simultaneously active (whether on the CPU or waiting for events) during the sampling period.

* % Activity: the percentage of activity for the event, representing the percentage of activity (CPU + wait) for a given tenant during the specified time period.

* Execution Count: the total number of SQL executions for this object. High-frequency access may lead to resource contention.

* Event: the corresponding top wait events (up to 5 events are displayed).

* % Event: the percentage of the top wait events (up to 5 events are displayed).

* SQL ID: the SQL ID with the highest load in the wait events.

* % SQL ID/Module: the percentage of the SQL ID or Module with the highest load in the wait events, used to prioritize optimization of high-impact queries.

* Object Name (Type/Partition Name): the name, type, and partition information of the database object being accessed.

This information quantifies the access load, associated SQL, and wait events for database objects (for example, tables, partitions). It helps pinpoint hotspot objects causing high resource contention and provides direct guidance for optimizing table structures, index designs, and SQL performance.

```shell
Top DB Objects:
  - With respect to Application, Cluster, User I/O and buffer busy waits only.
  - Object ID: tablet_id of the database table.
  - Avg Active Sessions: average active sessions during ash report analysis time period.
  - % Activity:the load on the database caused by accessing the databsae object.
  - Execution Count:represents how many executions involve this object
  - Event:When accessing the object, the corresponding Top waiting events (up to 5 are printed).
  - % Event:The percentage of the corresponding Top wait events when accessing the object (up to 5 events are printed).
  - SQL ID:the SQL ID with the highest load when accessing the object and in the wait event.
  - %SQL ID/Module:The percentage of SQL ID or Module with the highest load in this wait event when accessing the object.
  - Object Name (Type/ Partition Name):the name and type/partition_name of the database object being accessed
+-------------------------+--------------------+--------------------+--------------------+--------------------+--------------------+----------------------------------------------------------------+--------------------+----------------------------------------------------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------+
|             Node Address|           Tenant ID|           Object ID| Avg Active Sessions|          % Activity|     Execution Count|                                                           Event|             % Event|                                                          SQL ID|      %SQL ID/Module|                                                                                               Object Name (Type/Partition Name)|
+-------------------------+--------------------+--------------------+--------------------+--------------------+--------------------+----------------------------------------------------------------+--------------------+----------------------------------------------------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------+
|        xx.xx.xx.xx:2882|                1002|                 226|                0.00|               0.08%|                   1|                                             exec inner sql wait|               0.08%|                                24D486F20861EBD9E0217692DB0E9C61|               0.08%|                                                                                               oceanbase.__all_weak_read_service|
|                         |                1002|                 370|                0.00|               0.04%|                  27|                                             exec inner sql wait|               0.04%|                                CE0CBF9D375FF36DC8F7169FA767C065|               0.02%|                                                                                                                                |
|                         |                1002|                 366|                0.00|               0.02%|                  12|                                             exec inner sql wait|               0.02%|                                4415130B8B5B8E541AA7B66CA0F164A9|               0.00%|                                                                                                                                |
|                         |                1002|                 345|                0.00|               0.02%|                  15|                                             exec inner sql wait|               0.02%|                                664BF7B4A5CCEC68B4A59C0132E738BA|               0.01%|                                                                                                                                |
+-------------------------+--------------------+--------------------+--------------------+--------------------+--------------------+----------------------------------------------------------------+--------------------+----------------------------------------------------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------+
```

### Activity Over Time

This section presents the dynamic database activity during the analysis period based on time intervals.

* Slot Begin Time: the start time of the current time slot. Each time slot ends when the next time slot begins.

* Slot Count: the total number of samples taken during the current time slot. By default, ASH samples the active session state once per second, so the Slot Count value equals the length of the time slot in seconds.

* Event Name: the event consuming the most DB Time, including both wait events and CPU events.

* Wait Class: the type or category to which the wait event belongs.

* Event Samples: the number of session activity records sampled for each event.

* % Activity: the percentage of activity for the event, representing the percentage of activity (CPU + wait) for a given tenant during the specified time period.

* Avg Active Sessions: the average number of active sessions, indicating how many database sessions were simultaneously active (whether on the CPU or waiting for events) during the sampling period.

This information, presented in a time-series format, provides a detailed depiction of the dynamic changes in database activity during the analysis period. It includes the distribution of key events, activity intensity, and the evolution of resource contention over time. This is invaluable for identifying performance trends, managing peak periods, and developing time-based performance optimization strategies.

```shell
Activity Over Time:
  - this section lists time slot information during the analysis period.
  - The numbers in parentheses represent the time (in seconds) that has passed since the beginning and end stages.
  - Slot Begin Time: current slot's begin time. current slot end with next slot begin time.
  - Event Name: comprise wait event and on cpu event.
  - Event Samples: num of sampled session activity records.
  - % Activity: activity percentage for given event.
  - Avg Active Sessions: average active sessions during ash report analysis time period.
+----------------------------+-------------+----------------------------------------------------------------+--------------------+-------------+-----------+--------------------+
|             Slot Begin Time|   Slot Count|                                                      Event Name|          Wait Class|Event Samples| % Activity| Avg Active Sessions|
+----------------------------+-------------+----------------------------------------------------------------+--------------------+-------------+-----------+--------------------+
|2025-03-03 06:42:07(+32753s)|        34830|                                                          ON CPU|                NULL|        34150|     98.05%|                1.04|
|                            |             |                                             exec inner sql wait|               OTHER|          460|      1.32%|                0.01|
|                            |             |                                                      palf write|           SYSTEM_IO|          150|      0.43%|                0.01|
|                            |             |                                           db file compact write|           SYSTEM_IO|           40|      0.12%|                0.00|
|                            |             |                                       slog flush condition wait|         CONCURRENCY|           20|      0.06%|                0.00|
|         2025-03-03 15:48:00|        68710|                                                          ON CPU|                NULL|        67340|     98.01%|                1.07|
+----------------------------+-------------+----------------------------------------------------------------+--------------------+-------------+-----------+--------------------+
```

### Top Execution Phase

This section displays the activities with the highest proportions during execution phases, categorized by session type. It covers various aspects such as SQL execution, PL/SQL processing, and storage read/write operations.

* Session Type: the type of session, with possible values including BACKGROUND and FOREGROUND, representing background processes and foreground processes, respectively.

* Phase of Execution: the name of the execution phase, such as IN_SQL_EXECUTION (SQL execution), IN_COMMITTING (commit process), and IN_PLSQL_EXECUTION (PL/SQL execution).

* Active Samples: the number of occurrences or records for each execution phase.

* % Activity: the percentage of activity for the event, representing the percentage of activity (CPU + wait) for a given tenant during the specified time period.

* SQL ID: the SQL ID with the highest load in the wait events.

* % SQL ID/Module: the percentage of the SQL ID or Module with the highest load in the wait events, used to prioritize optimization of high-impact queries.

This information provides insights into the activity frequency, activity proportion, and average concurrent sessions for critical execution phases.

```shell
Top Execution Phase:
  - this section lists top phases of execution, such as SQL, PL/SQL, STORAGE, etc.
+------------+----------------------------------------+--------------------+-----------+----------------------------------------+-----------+
|Session Type|                      Phase of Execution|      Active Samples| % Activity|                                  SQL_ID|   % SQL_ID|
+------------+----------------------------------------+--------------------+-----------+----------------------------------------+-----------+
|  FOREGROUND|                        IN_SQL_EXECUTION|                  21|      0.00%|        1DCD1A13FF867BD1C03DE1582C274EE6|      0.00%|
|            |                      IN_PLSQL_EXECUTION|                  21|      0.00%|        1DCD1A13FF867BD1C03DE1582C274EE6|      0.00%|
|            |                    IN_PLSQL_COMPILATION|                   1|      0.00%|        73D0527F0F1AE01E34A477EB2E920B26|      0.00%|
|  BACKGROUND|                           IN_COMMITTING|                1479|      0.21%|        24D486F20861EBD9E0217692DB0E9C61|      0.16%|
|            |                       IN_CONNECTION_MGR|                1204|      0.17%|                                        |      0.17%|
|            |                         IN_STORAGE_READ|                 760|      0.11%|        24D486F20861EBD9E0217692DB0E9C61|      0.02%|
|            |                        IN_STORAGE_WRITE|                 616|      0.09%|        24D486F20861EBD9E0217692DB0E9C61|      0.06%|
|            |                           IN_PLAN_CACHE|                 120|      0.02%|        B7A6FA97FEC98C06F9586D23935AC4C6|      0.01%|
|            |                                IN_PARSE|                  51|      0.01%|        B7A6FA97FEC98C06F9586D23935AC4C6|      0.00%|
|            |                      IN_PLSQL_EXECUTION|                  22|      0.00%|        E9E2014C8CE705871C555597A6A32456|      0.00%|
|            |                         IN_SQL_OPTIMIZE|                  21|      0.00%|        7CD2A594EC200CA448DCE42CB3C043A6|      0.00%|
|            |                           IN_RPC_ENCODE|                  20|      0.00%|                                        |      0.00%|
|            |                IN_CHECK_ROW_CONFLICTION|                   1|      0.00%|        2832371C55D53551E663F66BF66FD461|      0.00%|
+------------+----------------------------------------+--------------------+-----------+----------------------------------------+-----------+
```

### Top IO Events

This section provides statistics on I/O wait events for SQL and background tasks, identifying the sources of disk I/O bottlenecks, including high-load SQL, types of background tasks, and specific device performance metrics.

* Node: the node address.

* Program Module Action/SQL ID: the type of background task (such as log aggregation or transaction log writing) or the unique identifier of an SQL query, used to trace the resource consumption of specific SQL statements.

* Plan Hash: the numeric value of the current SQL execution plan. Identical plans will have the same hash value.

* IO Event Samples: the total number of samples of I/O wait events during task execution.

* %IO Event Samples: the proportion of I/O wait event samples among all sampling points, reflecting the frequency of I/O requests.

* Top Event: the name of the primary I/O wait event.

* IO Type: the type of I/O wait event (read, write, or asynchronous), used to distinguish operation modes.

* % EVENT: the percentage of activity for the I/O wait event.

* Enqueue Time (S): the total time spent queuing for I/O requests, in seconds, reflecting the level of device congestion.

* Device Time (S): the total time spent executing I/O requests on the device, in seconds, measuring disk performance.

* Callback Time (S): the total time spent executing I/O request callbacks, in seconds.

This information quantifies I/O wait events for SQL and background tasks, combining device queuing time (Enqueue Time) and execution time (Device Time) to identify high-load SQL (via SQL ID and Plan Hash) and disk performance bottlenecks. It provides a basis for optimizing I/O-intensive operations.

```shell
Top IO Events:
  - This section lists the top io event from the perspective of SQL and background tasks
  - Node: The IP address and port number of the observer
  - Program Module Action / SQL ID: Program Module Action represent the type of background tasks, which is only effective in background tasks. And SQL ID is only effective in foreground tasks
  - Plan Hash: Numeric representation of the current SQL plan, which is only effective in foreground tasks
  - IO Event Samples: The total samples of io wait event during task execution.
  - %IO Event Samples: The proportion of total io wait event samples among all sampled points
  - Top Event: The top io wait event name.
  - IO Type: The type of io wait event.
  - % EVENT: activity percentage for the io wait event.
  - Enqueue Time: The total time(in seconds) spent queuing for I/O requests.
  - Device Time: The total time (in seconds) spent executing I/O requests on the device.
  - Callback Time: The total time (in seconds) spent executing callbacks for I/O requests.
+---------------------+------------------------------------------------------------------------------------------------+--------------------+--------------------+--------------------+----------+--------------------+----------+--------------------+--------------------+--------------------+
|                 Node|                                                                  Program Module Action / SQL ID|           Plan Hash|    IO Event Samples|   %IO Event Samples| Top Event|             IO Type|   % EVENT|     Enqueue Time(S)|      Device Time(S)|    Callback Time(S)|
+---------------------+------------------------------------------------------------------------------------------------+--------------------+--------------------+--------------------+----------+--------------------+----------+--------------------+--------------------+--------------------+
|     xx.xx.xx.xx:2882|                                                  T1002_LogService/LogIOWorker/aggregate io task|                   0|                  25|               0.00%|palf write|           SYSTEM_IO|     0.00%|                2.18|               21.50|                0.00|
+---------------------+------------------------------------------------------------------------------------------------+--------------------+--------------------+--------------------+----------+--------------------+----------+--------------------+--------------------+--------------------+
```

### Top SQL Statement Types

This section displays the most active SQL statement activities by type during the ASH report analysis period.

* SQL Statement Type: Lists the most frequently executed SQL statement types, such as SELECT, UPDATE, INSERT, or DELETE.

* Total Samples: the total number of executions for a given SQL statement type during the entire ASH report analysis period.

* % Activity: the percentage of activity for the event, representing the percentage of activity (CPU + wait) for a given tenant during the specified time period.

* Sampled Executions: the number of sampled executions for this type of SQL (multiple executions may be independently counted due to differing parameters).

* Node: the node address.

* % Node: the activity proportion of this type of SQL on the node, used to evaluate node load balancing.

* % On CPU: the percentage of time this type of SQL spends running on the CPU. A high value indicates it is compute-intensive (such as complex aggregations).

* % Event: the percentage of this event in the total database activity. A high percentage may indicate that this event is the primary bottleneck of system performance.

This information provides a categorized analysis of SQL statement execution, revealing the impact of different operation types (such as queries and updates) on database resource consumption and system activity. These insights are valuable for identifying high-load SQL types, optimizing query strategies, balancing resource allocation, and conducting targeted performance tuning.

```shell
Top SQL Statement Types:
  - this section lists top sql statement type.
  - SQL Statement Type: SQL statement types such as SELECT or UPDATE
  - Total Samples: num of records during ash report analysis time period
  - % Event: activity percentage of records when session is on wait event
  - % On CPU: activity percentage of records when session is on cpu
  - % Activity: activity(cpu + wait) percentage for given tenant
  - Node: the server address where the statement was executed
+---------------------------------------------+---------------------+---------------------+---------------------+----------------------------------------------------------------+---------------------+---------------------+---------------------+
|                           SQL Statement Type|        Total Samples|           % Activity|   Sampled Executions|                                                            Node|               % Node|             % On CPU|              % Event|
+---------------------------------------------+---------------------+---------------------+---------------------+----------------------------------------------------------------+---------------------+---------------------+---------------------+
|                                     T_UPDATE|                 2194|                0.32%|                   34|                                                xx.xx.xx.xx:2882|                0.32%|                0.07%|                0.25%|
|                                     T_SELECT|                 1531|                0.22%|                  118|                                             xx.xx.xx.xx:2882|                0.22%|                0.06%|                0.16%|
|                                  T_END_TRANS|                  310|                0.04%|                   40|                                             xx.xx.xx.xx:2882|                0.04%|                0.00%|                0.04%|
+---------------------------------------------+---------------------+---------------------+---------------------+----------------------------------------------------------------+---------------------+---------------------+---------------------+
```

### Top SQL with Top Events

This section displays SQL statements most closely associated with specific top events.

* SQL ID: the SQL ID with the highest load in the wait events.

* Plan Hash: the numeric value of the current SQL execution plan. Identical plans will have the same hash value.

* Active Samples: the number of occurrences or records at each execution stage.

* % Activity: the percentage of activity for the event, representing the percentage of activity (CPU + wait) for a given tenant during the specified time period.

* Sampled Executions: the number of sampled executions for this type of SQL (multiple executions may be independently counted due to differing parameters).

* Top Event: the name of the primary I/O wait event.

* % Event: the percentage of this event in the total database activity. A high percentage may indicate that this event is the primary bottleneck of system performance.

* Top Operator/ExecPhase: the operation that takes the most time in the current SQL execution plan.

* % Operator/ExecPhase: the percentage of total SQL execution time consumed by this operation/phase, used to locate bottlenecks in the execution plan.

* SQL Text: the text of the SQL query.

This information highlights the specific events causing the highest activity proportion during SQL statement execution, directly pointing to the core performance bottlenecks. By identifying these "bottleneck" events and the associated SQL, database administrators can optimize SQL statements, adjust execution plans, or improve system configurations to reduce wait times and enhance resource utilization.

```shell
Top SQL with Top Events:
  - This Section lists the SQL statements that accounted for the highest percentages event.
  - Plan Hash: Numeric representation of the current SQL plan
  - Active Samples: num of samples for top current SQL
  - % Activity: activity percentage for given SQL ID
  - Sampled Executions: represents the number of times the current SQL execution has been sampled
  - Top Event: top event name for current SQL plan
  - % Event: activity percentage for current SQL plan
  - Top Operator/ExecPhase: top operator name or execution phase for current event
  - % Operator/ExecPhase: activity percentage for given operator
+----------------------------------------+--------------------+--------------------+--------------+--------------------+----------------------------------------------------------------+--------------+--------------------------------------------------------------------------------------------------------------------------------+------------------------+----------------------------------------------------------------+
|                                  SQL ID|           Plan Hash|      Active Samples|    % Activity|  Sampled Executions|                                                       Top Event|       % Event|                                                                                                          Top Operator/ExecPhase|    % Operator/ExecPhase|                                                        SQL Text|
+----------------------------------------+--------------------+--------------------+--------------+--------------------+----------------------------------------------------------------+--------------+--------------------------------------------------------------------------------------------------------------------------------+------------------------+----------------------------------------------------------------+
+----------------------------------------+--------------------+--------------------+--------------+--------------------+----------------------------------------------------------------+--------------+--------------------------------------------------------------------------------------------------------------------------------+------------------------+----------------------------------------------------------------+
```

### Top SQL with Top Operator

This section displays SQL statements that use specific operators in their execution plans and account for a high proportion of sampled session activity.

* SQL ID: the SQL ID with the highest load in the wait events.

* Plan Hash: the hash value of the current SQL execution plan, used to uniquely identify the SQL execution plan.

* Active Samples: the number of occurrences or records at each execution stage.

* % Activity: the percentage of activity for the event, representing the percentage of activity (CPU + wait) for a given tenant during the specified time period.

* Sampled Executions: the number of sampled executions for this type of SQL (multiple executions may be independently counted due to differing parameters).

* Top Operator: the operation that takes the most time in the current SQL execution plan.

* % Operator: the percentage of total SQL execution time consumed by this phase, used to locate bottlenecks in the execution plan.

* Top Event: the name of the primary I/O wait event.

* % Event: the percentage of this event in the total database activity. A high percentage may indicate that this event is the primary bottleneck of system performance.

* SQL Text: the text of the SQL query.

This information provides insights into SQL operators associated with the highest activity proportions, offering precise guidance for database administrators and developers to optimize SQL execution paths.

```shell
Top SQL with Top Operator:
  - This Section lists the SQL statements that accounted for the highest percentages of sampled session activity with sql operator
  - Plan Hash: Numeric representation of the current SQL plan
  - Active Samples: num of samples for top current SQL
  - % Activity: activity percentage for given SQL ID
  - Sampled Executions: represents the number of times the current SQL execution has been sampled
  - Top Operator: top operator name for current SQL plan
  - % Operator: activity percentage for given operator
  - Top Event: top event name for current operator
  - % Event: activity percentage for given event
+----------------------------------------+--------------------+--------------+--------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------+--------------+----------------------------------------------------------------+--------------+----------------------------------------------------------------+
|                                  SQL ID|           Plan Hash|Active Samples|    % Activity|  Sampled Executions|                                                                                                                    Top Operator|    % Operator|                                                       Top Event|       % Event|                                                        SQL Text|
+----------------------------------------+--------------------+--------------+--------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------+--------------+----------------------------------------------------------------+--------------+----------------------------------------------------------------+
+----------------------------------------+--------------------+--------------+--------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------+--------------+----------------------------------------------------------------+--------------+----------------------------------------------------------------+
```

### Top PL/SQL Procedures

This section displays information about the top PL/SQL stored procedures.

* PLSQL Entry Subprogram: Shows the top-level PL/SQL entry subprogram of the application, which can be a procedure, function, trigger, or package initialization.

* % Activity: the percentage of activity for the event, representing the percentage of activity (CPU + wait) for a given tenant during the specified time period.

* PLSQL Current Subprogram: Shows the currently executing PL/SQL subprogram at the sampling point. If the value is `SQL`, it indicates the percentage of time spent executing SQL within the specific PL/SQL entry subprogram. If the value is `--`, it means no specific subprogram is being executed.

* % Current: the percentage of time the current subprogram (PL/SQL Current Subprogram) spends within the entry subprogram. If the current subprogram is SQL, it reflects the percentage of time spent executing SQL.

This information provides insights into the execution of top PL/SQL stored procedures, including details about the top-level entry subprograms, currently executing subprograms, and their respective activity percentages.

```shell
Top PL/SQL Procedures:
  - "PL/SQL Entry Subprogram" represents the application's top-level entry-point(procedure, function, trigger, package initialization) into PL/SQL.
  - "PL/SQL Current Subprogram" is the pl/sql subprogram being executed at the point of sampling. If the value is "SQL", it represents the percentage of time spent executing SQL for the particular plsql entry subprogram.
  - "PL/SQL Entry Subprogram" represents the application's top-level subprogram name
+------------------------------------------------------------+--------------------+------------------------------------------------------------+--------------------+
|                                      PLSQL Entry Subprogram|          % Activity|                                    PLSQL Current Subprogram|           % Current|
+------------------------------------------------------------+--------------------+------------------------------------------------------------+--------------------+
|               oceanbase.dbms_workload_repository.ASH_REPORT|               0.00%|          oceanbase.dbms_workload_repository.ASH_REPORT_TEXT|               0.00%|
+------------------------------------------------------------+--------------------+------------------------------------------------------------+--------------------+
```

### Complete List of SQL Text

This section displays a list of SQL texts (SQL Text), which includes the SQL ID and the text information of SQL queries.

* SQL ID: the unique identifier for the SQL query.

* SQL Text: the text of the SQL query.  

This information provides a list of SQL queries that can be used to identify, analyze, and optimize query performance.

```shell
Complete List of SQL Text:
  SQL ID: B7A6FA97FEC98C06F9586D23935AC4C6
SQL Text: START TRANSACTION

  SQL ID: E9E2014C8CE705871C555597A6A32456
SQL Text: CALL DBMS_STATS.ASYNC_GATHER_STATS_JOB_PROC(600000000);

  SQL ID: 1DCD1A13FF867BD1C03DE1582C274EE6
SQL Text: SELECT DBMS_WORKLOAD_REPOSITORY.ASH_REPORT_TEXT(:0, :1,:2,:3,:4, :6, :7, :8, LOWER(:5)) AS REPORT

  SQL ID: 73D0527F0F1AE01E34A477EB2E920B26
SQL Text: CALL DBMS_WORKLOAD_REPOSITORY.ASH_REPORT(  '2024-09-22 10:26:47',  '2025-03-22 20:27:07', NULL, NULL, NULL, 'TEXT', NULL, NULL, NULL)
```

### Complete report

The complete ASH report is shown below:

```shell
ASH Report

           Cluster Name: test425
       Observer Version: OceanBase 4.2.5.3 (203000012025022717-866087xxxxxxxxxxxxxxxxxxxxx)
  Operation System Info: Linux(3.10.0-327.ali2019.alios7.x86_64)_x86_64
  User Input Begin Time: 2024-09-22 10:26:47
    User Input End Time: 2025-03-10 20:27:07
Ash Analysis Begin Time: 2025-03-10 11:26:32
  Ash Analysis End Time: 2025-03-10 14:13:45
 Wr Analysis Begin Time: 2025-03-03 06:42:07
   Wr Analysis End Time: 2025-03-10 11:26:18
        Ash Data Source: oceanbase.GV$ACTIVE_SESSION_HISTORY
         Wr Data Source: oceanbase.DBA_WR_ACTIVE_SESSION_HISTORY
           Elapsed Time: 631884
      Ash Num of Sample: 11015
       Wr Num of Sample: 676400
Average Active Sessions: 1.09

Top Active Tenants:
  - this section lists top active tenant information
  - Total Samples: num of records during ash report analysis time period
  - Wait Event Samples: num of records when session is on wait event
  - On CPU Samples: num of records when session is on cpu
  - Avg Active Sessions: average active sessions during ash report analysis time period
  - % Activity: activity(cpu + wait) percentage for given tenant
  - Equivalent Client Load: equivalent client average active sessions during ash report analysis time period
+----------------------------------------------------------------+------------+------------------+-----------------------+-------------------+--------------------+-----------+------------------------+
|                                                     Tenant Name|Session Type|     Total Samples|     Wait Event Samples|     On CPU Samples| Avg Active Sessions| % Activity|  Equivalent Client Load|
+----------------------------------------------------------------+------------+------------------+-----------------------+-------------------+--------------------+-----------+------------------------+
|                                                        mysql001|  BACKGROUND|            687393|                  13200|             674193|                1.09|    100.00%|                       -|
|                                                        mysql001|  FOREGROUND|                21|                     21|                  0|                0.00|      0.00%|                    0.00|
+----------------------------------------------------------------+------------+------------------+-----------------------+-------------------+--------------------+-----------+------------------------+

Top Node Load:
  - this section lists top node measured by DB time
  - IP: OceanBase instance svr_ip
  - Port: OceanBase instance svr_port
  - Total Samples: num of records during ash report analysis time period
  - Wait Event Samples: num of records when session is on wait event
  - On CPU Samples: num of records when session is on cpu
  - Avg Active Sessions: average active sessions during ash report analysis time period
  - % Activity: activity(cpu + wait) percentage for given tenant
  - Equivalent Client Load: equivalent client average active sessions during ash report analysis time period
+----------------+-------+------------+------------------+-----------------------+-------------------+--------------------+-----------+------------------------+
|              IP|   Port|Session Type|     Total Samples|     Wait Event Samples|     On CPU Samples| Avg Active Sessions| % Activity|  Equivalent Client Load|
+----------------+-------+------------+------------------+-----------------------+-------------------+--------------------+-----------+------------------------+
|     xx.xx.xx.xx|   2882|  BACKGROUND|            687393|                  13200|             674193|                1.09|    100.00%|                       -|
|     xx.xx.xx.xx|   2882|  FOREGROUND|                21|                     21|                  0|                0.00|      0.00%|                    0.00|
+----------------+-------+------------+------------------+-----------------------+-------------------+--------------------+-----------+------------------------+

Top Groups:
  - this section lists top resource consumer groups
  - Group Name: resource consumer group name
  - Group Samples: num of sampled session activity records in the current resource group
  - % Activity: activity percentage for given event resource group
  - Avg Active Sessions: average active sessions during ash report analysis time period
+----------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------+-------------+-----------+----------------------------------------------------------------+-----------+--------------------------------+-----------+--------------------------------+-----------+--------------------+
|                                                            Node|                                                                                                                      Group Name|Group Samples| % Activity|                                                         Program|  % Program|                          Module|   % Module|                          Action|   % Action| Avg Active Sessions|
+----------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------+-------------+-----------+----------------------------------------------------------------+-----------+--------------------------------+-----------+--------------------------------+-----------+--------------------+
|                                                xx.xx.xx.xx:2882|                                                                                                             tenant:1002/group:0|       687015|     99.94%|                                                T1002_LogService|     94.14%|               LogRestoreService|     90.09%|                 RemoteLogWriter|     90.08%|                0.98|
|                                                                |                                                                                                                                |             |           |                                                                |           |               LogArchiveService|      3.66%|                   ArchiveSender|      3.61%|                0.04|
|                                                                |                                                                                                                                |             |           |                                     T1002_TenantWeakReadService|      1.35%|           TenantWeakReadService|      1.07%|             gen_cluster_version|      1.02%|                0.01|
+----------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------+-------------+-----------+----------------------------------------------------------------+-----------+--------------------------------+-----------+--------------------------------+-----------+--------------------+
+----------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------+--------------------+-----------+--------------------+
|             Slot Begin Time|   Slot Count|                                                                                                                      Action Key|      Action Samples| % Activity| Avg Active Sessions|
+----------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------+--------------------+-----------+--------------------+
|2025-03-03 06:42:07(+32753s)|        34830|                                         xx.xx.xx.xx:2882-tenant:1002/group:0-T1002_LogService-LogRestoreService-RemoteLogWriter|               31730|     91.10%|                0.97|
|                            |             |                                           xx.xx.xx.xx:2882-tenant:1002/group:0-T1002_LogService-LogArchiveService-ArchiveSender|                 810|      2.33%|                0.03|
|                            |             |                      xx.xx.xx.xx:2882-tenant:1002/group:0-T1002_TenantWeakReadService-TenantWeakReadService-gen_cluster_version|                 320|      0.92%|                0.01|
|2025-03-03 15:48:00(+63180s)|        68710|                                         xx.xx.xx.xx:2882-tenant:1002/group:0-T1002_LogService-LogRestoreService-RemoteLogWriter|               61840|     90.00%|                0.98|
|                            |             |                                           xx.xx.xx.xx:2882-tenant:1002/group:0-T1002_LogService-LogArchiveService-ArchiveSender|                2330|      3.39%|                0.04|
+----------------------------+-------------+--------------------------------------------------------------------------------------------------------------------------------+--------------------+-----------+--------------------+

Top Foreground DB Time:
  - This section lists top foreground db time categorized by event
  - Event Name: comprise wait event and on cpu event
  - Event Samples: num of sampled session activity records
  - % Activity: activity percentage for given event
  - Avg Active Sessions: average active sessions during ash report analysis time period
+----------------------------------------------------------------+----------------------------------------------------------------+--------------------+-------------+--------------------+-----------+
|                                                            Node|                                                      Event Name|          Wait Class|Event Samples| Avg Active Sessions| % Activity|
+----------------------------------------------------------------+----------------------------------------------------------------+--------------------+-------------+--------------------+-----------+
|                                                xx.xx.xx.xx:2882|                                             exec inner sql wait|               OTHER|           21|                0.00|      0.00%|
+----------------------------------------------------------------+----------------------------------------------------------------+--------------------+-------------+--------------------+-----------+

Top Background DB Time:
  - this section lists top DB Time for background sessions
  - Program: process name for background sessions
  - Event Name: comprise wait event and on cpu event
  - Event Samples: num of sampled session activity records
  - % Activity: activity percentage for given event
  - Avg Active Sessions: average active sessions during ash report analysis time period
+----------------------------------------------------------------+-----------------------------------------------------------------+----------------------------------------------------------------+----------------------------------------------------------------+----------------------------------------------------------------+--------------------+-------------+-----------+--------------------+
|                                                            Node|                                                          Program|                                                          Module|                                                          Action|                                                      Event Name|          Wait Class|Event Samples| % Activity| Avg Active Sessions|
+----------------------------------------------------------------+-----------------------------------------------------------------+----------------------------------------------------------------+----------------------------------------------------------------+----------------------------------------------------------------+--------------------+-------------+-----------+--------------------+
|                                                xx.xx.xx.xx:2882|                                                 T1002_LogService|                                               LogRestoreService|                                                 RemoteLogWriter|                                                          ON CPU|                NULL|       619213|     90.08%|                0.98|
|                                                                |                                                 T1002_LogService|                                               LogArchiveService|                                                   ArchiveSender|                                                          ON CPU|                NULL|        24790|      3.61%|                0.04|
|                                                                |                                      T1002_TenantWeakReadService|                                           TenantWeakReadService|                                             gen_cluster_version|                                                          ON CPU|                NULL|         4521|      0.66%|                0.01|
|                                                                |                                                     T1002_PLSSer|                                                          PLSSer|                                                       UNDEFINED|                                                          ON CPU|                NULL|         4395|      0.64%|                0.01|
+----------------------------------------------------------------+-----------------------------------------------------------------+----------------------------------------------------------------+----------------------------------------------------------------+----------------------------------------------------------------+--------------------+-------------+-----------+--------------------+

Top Sessions:
  - this section lists top Active Sessions with the largest wait event and SQL_ID
  - Session ID: user session id
  - % Activity: represents the load on the database caused by this session
  - Avg Active Sessions: average active sessions during ash report analysis time period
  - Event Name: comprise wait event and on cpu event
  - % Event: represents the activity load of the event on the database
  - % SQL ID: represents the activity load of the event on the database
  - Sql Executions: represents the execution count of the SQL_ID
+--------------------+----------------------------------------------------------------+-----------+--------------------+----------------------------------------------------------------+--------------------+-----------+----------------------------------------+--------------------+-----------+--------------------+
|          Session ID|                                                         Program| % Activity| Avg Active Sessions|                                                      Event Name|          Wait Class|    % Event|                                  SQL ID|           Plan Hash|   % SQL ID|      Sql Executions|
+--------------------+----------------------------------------------------------------+-----------+--------------------+----------------------------------------------------------------+--------------------+-----------+----------------------------------------+--------------------+-----------+--------------------+
|          3221731236|                                                   T1002_SQL_CMD|      0.00%|                0.00|                                             exec inner sql wait|               OTHER|      0.00%|        1DCD1A13FF867BD1C03DE1582C274EE6| 6388442502389984409|      0.00%|                   1|
|          3221731635|                                                   T1002_SQL_CMD|      0.00%|                0.00|                                             exec inner sql wait|               OTHER|      0.00%|        73D0527F0F1AE01E34A477EB2E920B26|                   0|      0.00%|                   1|
+--------------------+----------------------------------------------------------------+-----------+--------------------+----------------------------------------------------------------+--------------------+-----------+----------------------------------------+--------------------+-----------+--------------------+

Top IO Bandwidth:
  - This section lists the top io bandwidth from the perspective of SQL and background tasks
  - Node: The IP address and port number of the observer
  - Program Module Action / SQL ID: Program Module Action represent the type of background tasks, which is only effective in background tasks. And SQL ID is only effective in foreground tasks
  - Plan Hash: Numeric representation of the current SQL plan, which is only effective in foreground tasks.
  - IOPS: Average IO requests executed per second
  - IO Size: The total read or write size(MB) of background task or SQL
  - IO Bandwidth: Average IO size(MB) consumed per second
  - Type: read or write
  - Object ID: The tablet_id with the highest read or write samples
  - % Object ID: The ratio of the tablet_id with the highest read or write samples to the total samples of tablet_ids in entire background task or SQL
+---------------------+------------------------------------------------------------------------------------------------+--------------------+--------+----------------+--------------------+--------------------+----------+------------+
|                 Node|                                                                  Program Module Action / SQL ID|           Plan Hash|    Type|            IOPS|         IO Size(MB)|  IO Bandwidth(MB/s)| Object ID| % Object ID|
+---------------------+------------------------------------------------------------------------------------------------+--------------------+--------+----------------+--------------------+--------------------+----------+------------+
|     xx.xx.xx.xx:2882|                                                                2832371C55D53551E663F66BF66FD461| 3290318591324336132|disk_read|           61.32|                0.19|                0.29|         -|           -|
|     xx.xx.xx.xx:2882|                                                  T1002_LogService/LogIOWorker/aggregate io task|                   0|disk_write|            9.19|              731.36|                0.04|         -|           -|
|     xx.xx.xx.xx:2882|                                                                          T1002_OB_SLOG/OB_SLOG/|                   0|disk_write|            2.20|               95.86|                0.01|         -|           -|
|     xx.xx.xx.xx:2882|                                                                            T1002_TxCkpt/TxCkpt/|                   0|disk_read|            2.00|               65.47|                0.01|         -|           -|
|     xx.xx.xx.xx:2882|                                                              T1002_DAG/COMPACTION/MINOR_EXECUTE|                   0|disk_read|            0.01|               25.20|                0.00|         -|           -|
+---------------------+------------------------------------------------------------------------------------------------+--------------------+--------+----------------+--------------------+--------------------+----------+------------+

Top Blocking Sessions:
  - Blocking session activity percentages are calculated with respect to waits on enqueues, latches and "buffer busy" only.
  - '% Activity' represents the load on the database caused by a particular blocking session.
  - '# Avg Active Sessions' shows the number of ASH samples in which the blocking session was found active.
+---------------------+--------------------+--------------------+----------------------------------------------------------------+---------------------+----------------------------------------+----------------------------------------------------------------+--------------------+--------------------+----------------------------------------+--------------------+
|  Blocking Session ID|          % Activity| Avg Active Sessions|                                                     Holder User|         Holder TX ID|                           Holder SQL ID|                                                    Event Caused|             % Event|                XIDs|                     Top Waitting SQL ID|            % SQL ID|
+---------------------+--------------------+--------------------+----------------------------------------------------------------+---------------------+----------------------------------------+----------------------------------------------------------------+--------------------+--------------------+----------------------------------------+--------------------+
+---------------------+--------------------+--------------------+----------------------------------------------------------------+---------------------+----------------------------------------+----------------------------------------------------------------+--------------------+--------------------+----------------------------------------+--------------------+

Top Latchs:
  - this section lists top latches
  - Latch Wait Event: event that waiting for latch
  - Event Samples: num of sampled session activity records
  - % Activity: activity percentage for given event
  - Avg Active Sessions: average active sessions during ash report analysis time period
+----------------------------------------------------------------+-------------+-----------+--------------------+
|                                                Latch Wait Event|Event Samples| % Activity| Avg Active Sessions|
+----------------------------------------------------------------+-------------+-----------+--------------------+
+----------------------------------------------------------------+-------------+-----------+--------------------+

Top DB Objects:
  - With respect to Application, Cluster, User I/O and buffer busy waits only.
  - Object ID: tablet_id of the database table.
  - Avg Active Sessions: average active sessions during ash report analysis time period.
  - % Activity:the load on the database caused by accessing the databsae object.
  - Execution Count:represents how many executions involve this object
  - Event:When accessing the object, the corresponding Top waiting events (up to 5 are printed).
  - % Event:The percentage of the corresponding Top wait events when accessing the object (up to 5 events are printed).
  - SQL ID:the SQL ID with the highest load when accessing the object and in the wait event.
  - %SQL ID/Module:The percentage of SQL ID or Module with the highest load in this wait event when accessing the object.
  - Object Name (Type/ Partition Name):the name and type/partition_name of the database object being accessed
+-------------------------+--------------------+--------------------+--------------------+--------------------+--------------------+----------------------------------------------------------------+--------------------+----------------------------------------------------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------+
|             Node Address|           Tenant ID|           Object ID| Avg Active Sessions|          % Activity|     Execution Count|                                                           Event|             % Event|                                                          SQL ID|      %SQL ID/Module|                                                                                               Object Name (Type/Partition Name)|
+-------------------------+--------------------+--------------------+--------------------+--------------------+--------------------+----------------------------------------------------------------+--------------------+----------------------------------------------------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------+
|         xx.xx.xx.xx:2882|                1002|                 226|                0.00|               0.08%|                   1|                                             exec inner sql wait|               0.08%|                                24D486F20861EBD9E0217692DB0E9C61|               0.08%|                                                                                               oceanbase.__all_weak_read_service|
|                         |                1002|                 370|                0.00|               0.04%|                  27|                                             exec inner sql wait|               0.04%|                                CE0CBF9D375FF36DC8F7169FA767C065|               0.02%|                                                                                                                                |
|                         |                1002|                 366|                0.00|               0.02%|                  12|                                             exec inner sql wait|               0.02%|                                4415130B8B5B8E541AA7B66CA0F164A9|               0.00%|                                                                                                                                |
+-------------------------+--------------------+--------------------+--------------------+--------------------+--------------------+----------------------------------------------------------------+--------------------+----------------------------------------------------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------+

Activity Over Time:
  - this section lists time slot information during the analysis period.
  - The numbers in parentheses represent the time (in seconds) that has passed since the beginning and end stages.
  - Slot Begin Time: current slot's begin time. current slot end with next slot begin time.
  - Event Name: comprise wait event and on cpu event.
  - Event Samples: num of sampled session activity records.
  - % Activity: activity percentage for given event.
  - Avg Active Sessions: average active sessions during ash report analysis time period.
+----------------------------+-------------+----------------------------------------------------------------+--------------------+-------------+-----------+--------------------+
|             Slot Begin Time|   Slot Count|                                                      Event Name|          Wait Class|Event Samples| % Activity| Avg Active Sessions|
+----------------------------+-------------+----------------------------------------------------------------+--------------------+-------------+-----------+--------------------+
|2025-03-03 06:42:07(+32753s)|        34830|                                                          ON CPU|                NULL|        34150|     98.05%|                1.04|
|                            |             |                                             exec inner sql wait|               OTHER|          460|      1.32%|                0.01|
|                            |             |                                                      palf write|           SYSTEM_IO|          150|      0.43%|                0.01|
|                            |             |                                           db file compact write|           SYSTEM_IO|           40|      0.12%|                0.00|
|                            |             |                                       slog flush condition wait|         CONCURRENCY|           20|      0.06%|                0.00|
|         2025-03-03 15:48:00|        68710|                                                          ON CPU|                NULL|        67340|     98.01%|                1.07|
|                            |             |                                             exec inner sql wait|               OTHER|          950|      1.38%|                0.01|
|                            |             |                                                      palf write|           SYSTEM_IO|          270|      0.39%|                0.00|
|                            |             |                                          default condition wait|         CONCURRENCY|           60|      0.09%|                0.00|
|                            |             |                                       slog flush condition wait|         CONCURRENCY|           50|      0.07%|                0.00|
|         2025-03-04 09:21:00|        67960|                                                          ON CPU|                NULL|        66620|     98.03%|                1.05|
|                            |             |                                             exec inner sql wait|               OTHER|          950|      1.40%|                0.01|
|                            |             |                                                      palf write|           SYSTEM_IO|          160|      0.23%|                0.00|
|                            |             |                                          default condition wait|         CONCURRENCY|          100|      0.15%|                0.00|
|                            |             |                                           db file compact write|           SYSTEM_IO|           40|      0.06%|                0.00|
|         2025-03-05 02:54:00|        70370|                                                          ON CPU|                NULL|        69210|     98.35%|                1.09|
|                            |             |                                             exec inner sql wait|               OTHER|          820|      1.17%|                0.01|
|                            |             |                                                      palf write|           SYSTEM_IO|          150|      0.21%|                0.00|
|                            |             |                                          default condition wait|         CONCURRENCY|          100|      0.14%|                0.00|
|                            |             |                                  async rpc proxy condition wait|             NETWORK|           70|      0.10%|                0.00|
|         2025-03-05 20:27:00|        70570|                                                          ON CPU|                NULL|        69240|     98.11%|                1.10|
|                            |             |                                             exec inner sql wait|               OTHER|         1010|      1.43%|                0.02|
|                            |             |                                                      palf write|           SYSTEM_IO|          160|      0.23%|                0.00|
|                            |             |                                          default condition wait|         CONCURRENCY|           90|      0.13%|                0.00|
|                            |             |                                       slog flush condition wait|         CONCURRENCY|           30|      0.04%|                0.00|
|         2025-03-06 14:00:00|        68780|                                                          ON CPU|                NULL|        67320|     97.88%|                1.07|
|                            |             |                                             exec inner sql wait|               OTHER|         1040|      1.51%|                0.02|
|                            |             |                                                      palf write|           SYSTEM_IO|          170|      0.25%|                0.00|
|                            |             |                                          default condition wait|         CONCURRENCY|          130|      0.19%|                0.00|
|                            |             |                                           db file compact write|           SYSTEM_IO|           40|      0.06%|                0.00|
|         2025-03-07 07:33:00|        70080|                                                          ON CPU|                NULL|        68610|     97.90%|                1.09|
|                            |             |                                             exec inner sql wait|               OTHER|          980|      1.40%|                0.02|
|                            |             |                                                      palf write|           SYSTEM_IO|          250|      0.36%|                0.00|
|                            |             |                                          default condition wait|         CONCURRENCY|          110|      0.16%|                0.00|
|                            |             |                                           db file compact write|           SYSTEM_IO|           40|      0.06%|                0.00|
|         2025-03-08 01:06:00|        67300|                                                          ON CPU|                NULL|        65790|     97.76%|                1.04|
|                            |             |                                             exec inner sql wait|               OTHER|          900|      1.34%|                0.01|
|                            |             |                                                      palf write|           SYSTEM_IO|          250|      0.37%|                0.00|
|                            |             |                                          default condition wait|         CONCURRENCY|          130|      0.19%|                0.00|
|                            |             |                                           db file compact write|           SYSTEM_IO|          100|      0.15%|                0.00|
|         2025-03-08 18:39:00|        67380|                                                          ON CPU|                NULL|        66240|     98.31%|                1.05|
|                            |             |                                             exec inner sql wait|               OTHER|          830|      1.23%|                0.01|
|                            |             |                                                      palf write|           SYSTEM_IO|          190|      0.28%|                0.00|
|                            |             |                                       slog flush condition wait|         CONCURRENCY|           50|      0.07%|                0.00|
|                            |             |                                          default condition wait|         CONCURRENCY|           40|      0.06%|                0.00|
|         2025-03-09 12:12:00|        67580|                                                          ON CPU|                NULL|        66460|     98.34%|                1.05|
|                            |             |                                             exec inner sql wait|               OTHER|          750|      1.11%|                0.01|
|                            |             |                                                      palf write|           SYSTEM_IO|          200|      0.30%|                0.00|
|                            |             |                                          default condition wait|         CONCURRENCY|          100|      0.15%|                0.00|
|                            |             |                                       slog flush condition wait|         CONCURRENCY|           20|      0.03%|                0.00|
+----------------------------+-------------+----------------------------------------------------------------+--------------------+-------------+-----------+--------------------+

Top Execution Phase:
  - this section lists top phases of execution, such as SQL, PL/SQL, STORAGE, etc.
+------------+----------------------------------------+--------------------+-----------+----------------------------------------+-----------+
|Session Type|                      Phase of Execution|      Active Samples| % Activity|                                  SQL_ID|   % SQL_ID|
+------------+----------------------------------------+--------------------+-----------+----------------------------------------+-----------+
|  FOREGROUND|                        IN_SQL_EXECUTION|                  21|      0.00%|        1DCD1A13FF867BD1C03DE1582C274EE6|      0.00%|
|            |                      IN_PLSQL_EXECUTION|                  21|      0.00%|        1DCD1A13FF867BD1C03DE1582C274EE6|      0.00%|
|            |                    IN_PLSQL_COMPILATION|                   1|      0.00%|        73D0527F0F1AE01E34A477EB2E920B26|      0.00%|
|  BACKGROUND|                           IN_COMMITTING|                1479|      0.21%|        24D486F20861EBD9E0217692DB0E9C61|      0.16%|
|            |                       IN_CONNECTION_MGR|                1204|      0.17%|                                        |      0.17%|
|            |                         IN_STORAGE_READ|                 760|      0.11%|        24D486F20861EBD9E0217692DB0E9C61|      0.02%|
|            |                        IN_STORAGE_WRITE|                 616|      0.09%|        24D486F20861EBD9E0217692DB0E9C61|      0.06%|
|            |                           IN_PLAN_CACHE|                 120|      0.02%|        B7A6FA97FEC98C06F9586D23935AC4C6|      0.01%|
|            |                                IN_PARSE|                  51|      0.01%|        B7A6FA97FEC98C06F9586D23935AC4C6|      0.00%|
|            |                      IN_PLSQL_EXECUTION|                  22|      0.00%|        E9E2014C8CE705871C555597A6A32456|      0.00%|
|            |                         IN_SQL_OPTIMIZE|                  21|      0.00%|        7CD2A594EC200CA448DCE42CB3C043A6|      0.00%|
|            |                           IN_RPC_ENCODE|                  20|      0.00%|                                        |      0.00%|
|            |                IN_CHECK_ROW_CONFLICTION|                   1|      0.00%|        2832371C55D53551E663F66BF66FD461|      0.00%|
+------------+----------------------------------------+--------------------+-----------+----------------------------------------+-----------+

Top IO Events:
  - This section lists the top io event from the perspective of SQL and background tasks
  - Node: The IP address and port number of the observer
  - Program Module Action / SQL ID: Program Module Action represent the type of background tasks, which is only effective in background tasks. And SQL ID is only effective in foreground tasks
  - Plan Hash: Numeric representation of the current SQL plan, which is only effective in foreground tasks
  - IO Event Samples: The total samples of io wait event during task execution.
  - %IO Event Samples: The proportion of total io wait event samples among all sampled points
  - Top Event: The top io wait event name.
  - IO Type: The type of io wait event.
  - % EVENT: activity percentage for the io wait event.
  - Enqueue Time: The total time(in seconds) spent queuing for I/O requests.
  - Device Time: The total time (in seconds) spent executing I/O requests on the device.
  - Callback Time: The total time (in seconds) spent executing callbacks for I/O requests.
+---------------------+------------------------------------------------------------------------------------------------+--------------------+--------------------+--------------------+----------+--------------------+----------+--------------------+--------------------+--------------------+
|                 Node|                                                                  Program Module Action / SQL ID|           Plan Hash|    IO Event Samples|   %IO Event Samples| Top Event|             IO Type|   % EVENT|     Enqueue Time(S)|      Device Time(S)|    Callback Time(S)|
+---------------------+------------------------------------------------------------------------------------------------+--------------------+--------------------+--------------------+----------+--------------------+----------+--------------------+--------------------+--------------------+
|     xx.xx.xx.xx:2882|                                                  T1002_LogService/LogIOWorker/aggregate io task|                   0|                  25|               0.00%|palf write|           SYSTEM_IO|     0.00%|                2.18|               21.50|                0.00|
+---------------------+------------------------------------------------------------------------------------------------+--------------------+--------------------+--------------------+----------+--------------------+----------+--------------------+--------------------+--------------------+

Top SQL Statement Types:
  - this section lists top sql statement type.
  - SQL Statement Type: SQL statement types such as SELECT or UPDATE
  - Total Samples: num of records during ash report analysis time period
  - % Event: activity percentage of records when session is on wait event
  - % On CPU: activity percentage of records when session is on cpu
  - % Activity: activity(cpu + wait) percentage for given tenant
  - Node: the server address where the statement was executed
+---------------------------------------------+---------------------+---------------------+---------------------+----------------------------------------------------------------+---------------------+---------------------+---------------------+
|                           SQL Statement Type|        Total Samples|           % Activity|   Sampled Executions|                                                            Node|               % Node|             % On CPU|              % Event|
+---------------------------------------------+---------------------+---------------------+---------------------+----------------------------------------------------------------+---------------------+---------------------+---------------------+
|                                     T_UPDATE|                 2194|                0.32%|                   34|                                                xx.xx.xx.xx:2882|                0.32%|                0.07%|                0.25%|
|                                     T_SELECT|                 1531|                0.22%|                  118|                                                xx.xx.xx.xx:2882|                0.22%|                0.06%|                0.16%|
|                                  T_END_TRANS|                  310|                0.04%|                   40|                                                xx.xx.xx.xx:2882|                0.04%|                0.00%|                0.04%|
|                                T_START_TRANS|                  144|                0.02%|                   18|                                                xx.xx.xx.xx:2882|                0.02%|                0.02%|                0.00%|
|                                     T_INSERT|                   74|                0.01%|                   11|                                                xx.xx.xx.xx:2882|                0.01%|                0.01%|                0.01%|
|                             T_CALL_PROCEDURE|                   23|                0.00%|                    5|                                                xx.xx.xx.xx:2882|                0.00%|                0.00%|                0.00%|
|                                     T_DELETE|                   20|                0.00%|                    1|                                                xx.xx.xx.xx:2882|                0.00%|                0.00%|                0.00%|
+---------------------------------------------+---------------------+---------------------+---------------------+----------------------------------------------------------------+---------------------+---------------------+---------------------+

Top SQL with Top Events:
  - This Section lists the SQL statements that accounted for the highest percentages event.
  - Plan Hash: Numeric representation of the current SQL plan
  - Active Samples: num of samples for top current SQL
  - % Activity: activity percentage for given SQL ID
  - Sampled Executions: represents the number of times the current SQL execution has been sampled
  - Top Event: top event name for current SQL plan
  - % Event: activity percentage for current SQL plan
  - Top Operator/ExecPhase: top operator name or execution phase for current event
  - % Operator/ExecPhase: activity percentage for given operator
+----------------------------------------+--------------------+--------------------+--------------+--------------------+----------------------------------------------------------------+--------------+--------------------------------------------------------------------------------------------------------------------------------+------------------------+----------------------------------------------------------------+
|                                  SQL ID|           Plan Hash|      Active Samples|    % Activity|  Sampled Executions|                                                       Top Event|       % Event|                                                                                                          Top Operator/ExecPhase|    % Operator/ExecPhase|                                                        SQL Text|
+----------------------------------------+--------------------+--------------------+--------------+--------------------+----------------------------------------------------------------+--------------+--------------------------------------------------------------------------------------------------------------------------------+------------------------+----------------------------------------------------------------+
+----------------------------------------+--------------------+--------------------+--------------+--------------------+----------------------------------------------------------------+--------------+--------------------------------------------------------------------------------------------------------------------------------+------------------------+----------------------------------------------------------------+

Top SQL with Top Operator:
  - This Section lists the SQL statements that accounted for the highest percentages of sampled session activity with sql operator
  - Plan Hash: Numeric representation of the current SQL plan
  - Active Samples: num of samples for top current SQL
  - % Activity: activity percentage for given SQL ID
  - Sampled Executions: represents the number of times the current SQL execution has been sampled
  - Top Operator: top operator name for current SQL plan
  - % Operator: activity percentage for given operator
  - Top Event: top event name for current operator
  - % Event: activity percentage for given event
+----------------------------------------+--------------------+--------------+--------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------+--------------+----------------------------------------------------------------+--------------+----------------------------------------------------------------+
|                                  SQL ID|           Plan Hash|Active Samples|    % Activity|  Sampled Executions|                                                                                                                    Top Operator|    % Operator|                                                       Top Event|       % Event|                                                        SQL Text|
+----------------------------------------+--------------------+--------------+--------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------+--------------+----------------------------------------------------------------+--------------+----------------------------------------------------------------+
+----------------------------------------+--------------------+--------------+--------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------+--------------+----------------------------------------------------------------+--------------+----------------------------------------------------------------+

Top PL/SQL Procedures:
  - "PL/SQL Entry Subprogram" represents the application's top-level entry-point(procedure, function, trigger, package initialization) into PL/SQL.
  - "PL/SQL Current Subprogram" is the pl/sql subprogram being executed at the point of sampling. If the value is "SQL", it represents the percentage of time spent executing SQL for the particular plsql entry subprogram.
  - "PL/SQL Entry Subprogram" represents the application's top-level subprogram name
+------------------------------------------------------------+--------------------+------------------------------------------------------------+--------------------+
|                                      PLSQL Entry Subprogram|          % Activity|                                    PLSQL Current Subprogram|           % Current|
+------------------------------------------------------------+--------------------+------------------------------------------------------------+--------------------+
|               oceanbase.dbms_workload_repository.ASH_REPORT|               0.00%|          oceanbase.dbms_workload_repository.ASH_REPORT_TEXT|               0.00%|
+------------------------------------------------------------+--------------------+------------------------------------------------------------+--------------------+

Complete List of SQL Text:
  SQL ID: B7A6FA97FEC98C06F9586D23935AC4C6
SQL Text: START TRANSACTION

  SQL ID: E9E2014C8CE705871C555597A6A32456
SQL Text: CALL DBMS_STATS.ASYNC_GATHER_STATS_JOB_PROC(600000000);

  SQL ID: 1DCD1A13FF867BD1C03DE1582C274EE6
SQL Text: SELECT DBMS_WORKLOAD_REPOSITORY.ASH_REPORT_TEXT(:0, :1,:2,:3,:4, :6, :7, :8, LOWER(:5)) AS REPORT

  SQL ID: 73D0527F0F1AE01E34A477EB2E920B26
SQL Text: CALL DBMS_WORKLOAD_REPOSITORY.ASH_REPORT(  '2024-09-22 10:26:47',  '2025-03-22 20:27:07', NULL, NULL, NULL, 'TEXT', NULL, NULL, NULL)
```

## Related wait events

Refer to [Common wait events](../../../../700.reference/700.system-views/520.wait-event-description.md) to understand the meaning of each wait event. This helps you quickly pinpoint issues while analyzing the report.

## References

* [Introduction to ASH](../500.ash-report-diagnosis/100.ash-introduction.md).  
* [Generate ASH report](../500.ash-report-diagnosis/200.generate-ash-report.md).
