|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|MySQL Mode|

# Query materialized views

This topic describes how to query materialized views.

## Query the definition of a materialized view

You can execute the `SHOW CREATE TABLE` statement to query the definition of a materialized view.

**Here is an example:**

Query the definition of the materialized view `mv_tbl1`.

```sql
SHOW CREATE TABLE mv_tbl1;
```

The return result is as follows:

```shell
+---------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+
| View    | Create View                                                                                                                                                                                                                                                                                                                                                                      | character_set_client | collation_connection |
+---------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+
| mv_tbl1 | CREATE MATERIALIZED VIEW `mv_tbl1` DEFAULT CHARSET = utf8mb4 ROW_FORMAT = DYNAMIC COMPRESSION = 'zstd_1.3.8' REPLICA_NUM = 1 BLOCK_SIZE = 16384 USE_BLOOM_FILTER = FALSE TABLET_SIZE = 134217728 PCTFREE = 10 REFRESH FORCE ON DEMAND  AS select `db_test`.`tbl1`.`col1` AS `col1`,`db_test`.`tbl1`.`col2` AS `col2` from `db_test`.`tbl1` where (`db_test`.`tbl1`.`col3` >= 20) | utf8mb4              | utf8mb4_general_ci   |
+---------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+
1 row in set
```

## Query information about materialized views by using views

You can query information about materialized views by using the following views:

| **View** | **Description** |
|------------|--------------|
| [DBA_MVIEWS](../../../../700.system-views/400.system-view-of-mysql-mode/200.dictionary-view-of-mysql-mode/5000.o-dba_mviews-of-mysql-mode.md) | Displays information about materialized views.|
| [DBA_MVREF_STATS_SYS_DEFAULTS](../../../../700.system-views/400.system-view-of-mysql-mode/200.dictionary-view-of-mysql-mode/5500.o-dba_mvref_stats_sys_defaults-of-mysql-mode.md) | Displays the system default values of refresh statistics attributes for materialized views.|
| [DBA_MVREF_STATS_PARAMS](../../../../700.system-views/400.system-view-of-mysql-mode/200.dictionary-view-of-mysql-mode/5400.o-dba_mvref_stats_params-of-mysql-mode.md) | Displays the refresh statistics attributes associated with each materialized view.|
| [DBA_MVREF_RUN_STATS](../../../../700.system-views/400.system-view-of-mysql-mode/200.dictionary-view-of-mysql-mode/5200.o-dba_mvref_run_stats-of-mysql-mode.md) | Displays information about each refresh run of a materialized view, which is identified by the REFRESH_ID.|
| [DBA_MVREF_STATS](../../../../700.system-views/400.system-view-of-mysql-mode/200.dictionary-view-of-mysql-mode/5300.o-dba_mvref_stats-of-mysql-mode.md) | Displays basic timing statistics about materialized view refreshes.|
| [DBA_MVREF_CHANGE_STATS](../../../../700.system-views/400.system-view-of-mysql-mode/200.dictionary-view-of-mysql-mode/5100.o-dba_mvref_change_stats-of-mysql-mode.md) | Displays statistics about materialized view refreshes.|
| [DBA_MVREF_STMT_STATS](../../../../700.system-views/400.system-view-of-mysql-mode/200.dictionary-view-of-mysql-mode/5600.o-dba_mvref_stmt_stats-of-mysql-mode.md) | Displays information about refresh statements.|
| [DBA_SCHEDULER_JOBS](../../../../700.system-views/400.system-view-of-mysql-mode/200.dictionary-view-of-mysql-mode/14100.o-dba_scheduler_jobs-of-mysql-mode.md) | Displays information about all scheduler jobs in the database.|

**Here is an example:**

Query the background refresh task of the automatically refreshed materialized view `mv_rc_swn1_tbl1` by using the `DBA_SCHEDULER_JOBS` view.

```sql
SELECT JOB_NAME,JOB_ACTION,START_DATE,REPEAT_INTERVAL,LAST_START_DATE,NEXT_RUN_DATE
FROM oceanbase.DBA_SCHEDULER_JOBS
WHERE JOB_ACTION like "%mv_rc_swn1_tbl1%";
```

The return result is as follows:

```shell
+----------------------------------+----------------------------------------------------------------------+----------------------------+--------------------------------+----------------------------+----------------------------+
| JOB_NAME                         | JOB_ACTION                                                           | START_DATE                 | REPEAT_INTERVAL                | LAST_START_DATE            | NEXT_RUN_DATE              |
+----------------------------------+----------------------------------------------------------------------+----------------------------+--------------------------------+----------------------------+----------------------------+
| MVIEW_REFRESH$J_1125899908922625 | DBMS_MVIEW.refresh('db_test.mv_rc_swn1_tbl1', refresh_parallel => 1) | 2024-12-17 17:54:54.000000 | sysdate() + interval 30 minute | 2024-12-18 09:24:57.006246 | 2024-12-18 09:54:57.000000 |
+----------------------------------+----------------------------------------------------------------------+----------------------------+--------------------------------+----------------------------+----------------------------+
1 row in set
```

## References

* [Overview of materialized views](100.materialized-views-overview-of-mysql-mode.md)
* [Materialized view logs](200.materialized-views-log-of-mysql-mode.md)
* [Create materialized views](300.create-materialized-views-of-mysql-mode.md)
* [Refresh materialized views](400.refresh-materialized-views-of-mysql-mode.md)
* [Query rewriting for materialized views](500.materialized-views-rewrite-of-mysql-mode.md)
* [Drop materialized views](700.delete-materialized-views-of-mysql-mode.md)