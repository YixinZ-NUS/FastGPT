|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|Oracle Mode|

# Query materialized views

This topic describes how to query materialized views.

## Query the definition of a materialized view

You can execute the `SHOW CREATE TABLE` statement to query the definition of a materialized view.

**Here is an example:**

Query the definition of the materialized view `mv_tbl1`.

```sql
SHOW CREATE TABLE mv_tbl1;
```

The return result is as follows:

```shell
+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+
| VIEW    | CREATE VIEW                                                                                                                                                                                                                                                                                                                                                      | CHARACTER_SET_CLIENT | COLLATION_CONNECTION |
+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+
| MV_TBL1 | CREATE MATERIALIZED VIEW "MV_TBL1" ("COL1", "COL2") COMPRESS FOR ARCHIVE REPLICA_NUM = 1 BLOCK_SIZE = 16384 USE_BLOOM_FILTER = FALSE TABLET_SIZE = 134217728 PCTFREE = 10 REFRESH FORCE ON DEMAND  AS select "TEST_USER001"."TBL1"."COL1" AS "COL1","TEST_USER001"."TBL1"."COL2" AS "COL2" from "TEST_USER001"."TBL1" where ("TEST_USER001"."TBL1"."COL3" >= 20) | utf8mb4              | utf8mb4_bin          |
+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+
1 row in set
```

## Query information about materialized views by using views

You can query information about materialized views by using the following views:

| **View** | **Description** |
|------------|--------------|
| [ALL_MVIEWS](../../../../700.system-views/500.system-view-of-oracle-mode/200.dictionary-view-of-oracle-mode/2200.all_mviews-of-oracle-mode.md) | Displays information about materialized views. |
| [DBA_MVREF_STATS_SYS_DEFAULTS](../../../../700.system-views/500.system-view-of-oracle-mode/200.dictionary-view-of-oracle-mode/9900.dba_mvref_stats_sys_defaults-of-oracle-mode.md) | Displays the system default values of statistics attributes for materialized view refreshes. |
| [DBA_MVREF_STATS_PARAMS](../../../../700.system-views/500.system-view-of-oracle-mode/200.dictionary-view-of-oracle-mode/9800.dba_mvref_stats_params-of-oracle-mode.md) | Displays the refresh statistics attributes associated with each materialized view. |
| [DBA_MVREF_RUN_STATS](../../../../700.system-views/500.system-view-of-oracle-mode/200.dictionary-view-of-oracle-mode/9600.dba_mvref_run_stats-of-oracle-mode.md) | Displays information about each refresh run of a materialized view. Each run is identified by a REFRESH_ID. |
| [DBA_MVREF_STATS](../../../../700.system-views/500.system-view-of-oracle-mode/200.dictionary-view-of-oracle-mode/9700.dba_mvref_stats-of-oracle-mode.md) | Displays basic timing statistics for materialized view refreshes. |
| [DBA_MVREF_CHANGE_STATS](../../../../700.system-views/500.system-view-of-oracle-mode/200.dictionary-view-of-oracle-mode/9500.dba_mvref_change_stats-of-oracle-mode.md) | Displays statistics about materialized view refreshes. |
| [DBA_MVREF_STMT_STATS](../../../../700.system-views/500.system-view-of-oracle-mode/200.dictionary-view-of-oracle-mode/10000.dba_mvref_stmt_stats-of-oracle-mode.md) | Displays information about refresh statements. |
| [DBA_SCHEDULER_JOBS](../../../../700.system-views/500.system-view-of-oracle-mode/200.dictionary-view-of-oracle-mode/19000.dba_scheduler_jobs-of-oracle-mode.md) | Displays information about all scheduled jobs in the database. |

**Here is an example:**

Query the background refresh task of the automatically refreshed materialized view `mv_rc_swn_tbl1` by using the `DBA_SCHEDULER_JOBS` view.

```sql
SELECT JOB_NAME,JOB_ACTION,START_DATE,REPEAT_INTERVAL,LAST_START_DATE,NEXT_RUN_DATE
FROM sys.DBA_SCHEDULER_JOBS
WHERE JOB_ACTION like '%MV_RC_SWN_TBL1%';
```

<main id="notice" type='notice'>
  <h4>Notice</h4>
  <p>In Oracle mode, the <code>sys.DBA_SCHEDULER_JOBS</code> view contains a column named <code>JOB_ACTION</code>. When you query the column for a table name, the table name must be in uppercase letters. </p>
</main>

The return result is as follows:

```shell
+----------------------------------+--------------------------------------------------------------------------+-------------------------------------+----------------------------------+-------------------------------------+-------------------------------------+
| JOB_NAME                         | JOB_ACTION                                                               | START_DATE                          | REPEAT_INTERVAL                  | LAST_START_DATE                     | NEXT_RUN_DATE                       |
+----------------------------------+--------------------------------------------------------------------------+-------------------------------------+----------------------------------+-------------------------------------+-------------------------------------+
| MVIEW_REFRESH$J_1125899909162864 | DBMS_MVIEW.refresh('TEST_USER001.MV_RC_SWN_TBL1', refresh_parallel => 1) | 18-DEC-24 05.04.48.000000 PM +08:00 | current_date + INTERVAL '1' HOUR | 18-DEC-24 05.04.51.502947 PM +08:00 | 18-DEC-24 06.04.51.000000 PM +08:00 |
+----------------------------------+--------------------------------------------------------------------------+-------------------------------------+----------------------------------+-------------------------------------+-------------------------------------+
1 row in set
```

## References

* [Overview of materialized views](100.materialized-views-overview-of-oracle-mode.md)
* [Materialized view logs](200.materialized-views-log-of-oracle-mode.md)
* [Create materialized views](300.create-materialized-views-of-oracle-mode.md)
* [Refresh materialized views](400.refresh-materialized-views-of-oracle-mode.md)
* [Query rewriting for materialized views](500.materialized-views-rewrite-of-oracle-mode.md)
* [Drop materialized views](700.delete-materialized-views-of-oracle-mode.md)