# Recommended parameter configurations in AP scenarios

This topic provides parameter configuration recommendations for two business scenarios: hybrid transactional and analytical processing (HTAP) and online analytical processing (OLAP).

To ensure that OceanBase Database delivers optimal performance across various business scenarios, OceanBase has summarized recommended configurations for key parameters and variables based on extensive tuning experience from real-world use cases. These recommended configurations are included in the installation packages for OceanBase Database V4.3.2 and later, and can be viewed after deployment.

For your convenience, parameter templates are supported in both the **OceanBase Cloud Platform (OCP)** and **OceanBase Deployer (obd)**. When creating a cluster or tenant using OCP or obd, you can directly select the corresponding parameter template for your scenario to complete the configuration.

## Parameter configuration templates

After installing the OceanBase Database RPM package, you can find parameter configuration templates with recommended settings for different business scenarios in the `/home/admin/oceanbase/etc` directory.

+ `default_parameter.json`: Contains recommended configurations for parameters.
+ `default_system_variable.json`: Contains recommended configurations for system variables.

## Scenario introduction

### HTAP scenario

HTAP refers to database management systems or architectures that support both online transactional processing (OLTP) and online analytical processing (OLAP). HTAP scenarios are common in business environments that require real-time data analysis and queries, such as finance, retail, and logistics. These industries need efficient transaction processing alongside real-time analytics to support business decision-making. The main advantage of the HTAP architecture is its ability to reduce the costs associated with data replication and transformation, deliver real-time analytics, and accelerate the decision-making process.

+ For more information about the recommended configurations abd examples for this scenarios, see [Recommeded configurations](../../400.deploy/700.best-practices.md).

#### Recommended parameter values for HTAP scenarios

| **Parameter** | **Recommended value** | **Description** | **Level** |
| --- | --- | --- | --- |
| [large_query_threshold](../../700.reference/800.configuration-items-and-system-variables/100.system-configuration-items/300.cluster-level-configuration-items/11100.large_query_threshold.md) | 600s | AP queries are present in HTAP workloads, and we also want them to run quickly. | cluster |
| [enable_record_trace_log](../../700.reference/800.configuration-items-and-system-variables/100.system-configuration-items/300.cluster-level-configuration-items/7900.enable_record_trace_log.md) | false | Disabling trace logs can improve AP performance. | cluster |
| [enable_syslog_recycle](../../700.reference/800.configuration-items-and-system-variables/100.system-configuration-items/300.cluster-level-configuration-items/9000.enable_syslog_recycle.md) | true | Enabling syslog auto-recycling prevents log files from filling up disk space. | cluster |
| [max_syslog_file_count](../../700.reference/800.configuration-items-and-system-variables/100.system-configuration-items/300.cluster-level-configuration-items/13300.max_syslog_file_count.md) | 300 | When `enable_syslog_recycle` is enabled, set this to an appropriate value. 300 is a recommended baseline. | cluster |
| [log_transport_compress_all](../../700.reference/800.configuration-items-and-system-variables/100.system-configuration-items/400.tenant-level-configuration-items/4900.log_transport_compress_all.md) | true | In bandwidth-constrained scenarios, RPC compression can save network bandwidth with minimal CPU overhead. | tenant |
| [default_load_mode](../../700.reference/800.configuration-items-and-system-variables/100.system-configuration-items/400.tenant-level-configuration-items/2050.default_load_mode.md) | disabled | For typical HTAP workloads, bypass import is disabled by default. | tenant |
| [direct_load_allow_fallback](../../700.reference/800.configuration-items-and-system-variables/100.system-configuration-items/400.tenant-level-configuration-items/2240.direct_load_allow_fallback.md) | true | For typical HTAP workloads, fallback to regular import is allowed if bypass import fails. | tenant |

### OLAP scenario

OLAP is a data processing technology used for multidimensional analysis of large datasets. It allows users to perform complex analyses on data from different perspectives, including dimensions, measures, filters, and sorting. OLAP helps users identify and understand patterns, trends, and relationships within the data, supporting decision-making and business intelligence. OLAP technology is commonly used in data warehouses and business intelligence systems.

+ For detailed recommendations and example configurations for this scenario, see [Recommended configurations](../../400.deploy/700.best-practices.md).

#### Recommended parameter values for OLAP scenarios
| **Parameter** | **Recommended value** | **Description** | **Level** |
| --- | --- | --- | --- |
| [enable_record_trace_log](../../700.reference/800.configuration-items-and-system-variables/100.system-configuration-items/300.cluster-level-configuration-items/7900.enable_record_trace_log.md) | false | Disabling trace logs can improve AP performance. | cluster |
| [trace_log_slow_query_watermark](../../700.reference/800.configuration-items-and-system-variables/100.system-configuration-items/300.cluster-level-configuration-items/23900.trace_log_slow_query_watermark.md) | 7d | In AP scenarios, defining slow queries is unnecessary. | cluster |
| [large_query_threshold](../../700.reference/800.configuration-items-and-system-variables/100.system-configuration-items/300.cluster-level-configuration-items/11100.large_query_threshold.md) | 0ms | Disables large query detection. | cluster |
| [enable_syslog_recycle](../../700.reference/800.configuration-items-and-system-variables/100.system-configuration-items/300.cluster-level-configuration-items/9000.enable_syslog_recycle.md) | true | Enabling syslog auto-recycling prevents log files from filling up disk space. | cluster |
| [max_syslog_file_count](../../700.reference/800.configuration-items-and-system-variables/100.system-configuration-items/300.cluster-level-configuration-items/13300.max_syslog_file_count.md) | 300 | When `enable_syslog_recycle` is enabled, set this to an appropriate value. 300 is a recommended baseline. | cluster |
| [default_table_store_format](../../700.reference/800.configuration-items-and-system-variables/100.system-configuration-items/400.tenant-level-configuration-items/2200.default_table_store_format.md) | column | The default format for AP workloads is pure columnar storage. | tenant |
| _io_read_batch_size | 128K | The maximum batch size for a single IO read request. | tenant |
| _io_read_redundant_limit_percentage | 50 | The maximum percentage of redundant data in a single IO read request (redundant data refers to blocks that must be read in the batch but are already cached or filtered by skip indexes). | tenant |
| [default_load_mode](../../700.reference/800.configuration-items-and-system-variables/100.system-configuration-items/400.tenant-level-configuration-items/2050.default_load_mode.md) | FULL_DIRECT_WRITE | For classic OLAP workloads, full direct load is used by default. | tenant |
| [direct_load_allow_fallback](../../700.reference/800.configuration-items-and-system-variables/100.system-configuration-items/400.tenant-level-configuration-items/2240.direct_load_allow_fallback.md) | false | For classic OLAP workloads, fallback to regular import is not allowed if direct load fails; an error is returned instead. | tenant |
| _nested_loop_join_enabled | false | For classic OLAP workloads, nested loop joins are disabled. | tenant |
| default_table_organization | HEAP | The storage order of rows in the table. For AP scenarios, rows are not stored in any specific order.<br/>**Note:** This parameter is available starting from version V4.3.5 BP1. | tenant |


#### Recommended values for OLAP scenarios
| **Variable** | **Recommended value** | **Description** | **Level** |
| --- | --- | --- | --- |
| [ob_query_timeout](../../700.reference/800.configuration-items-and-system-variables/200.system-variable/300.global-system-variable/8600.ob_query_timeout-global.md) | 604800000000 | Sets to 7 days. | tenant |
| [ob_trx_timeout](../../700.reference/800.configuration-items-and-system-variables/200.system-variable/300.global-system-variable/9700.ob_trx_timeout-global.md) | 604800000000 | Sets to 7 days. | tenant |
| [parallel_degree_policy](../../700.reference/800.configuration-items-and-system-variables/200.system-variable/300.global-system-variable/10300.parallel_degree_policy-global.md) | AUTO | Enables the Auto DOP policy. For more details, see [Auto DOP](../../700.reference/1000.performance-tuning-guide/500.sql-optimization/300.distributed-execution-plan/600.auto-dop.md). | tenant |
| [parallel_min_scan_time_threshold](../../700.reference/800.configuration-items-and-system-variables/200.system-variable/300.global-system-variable/10500.parallel_min_scan_time_threshold-global.md) | 10 | Provides optimal parallel execution performance for queries with execution times over 100 ms. | tenant |
| [ob_sql_work_area_percentage](../../700.reference/800.configuration-items-and-system-variables/200.system-variable/300.global-system-variable/9100.ob_sql_work_area_percentage-global.md) | 30 | Allocating a larger work area memory can reduce costs caused by memory leaks. | tenant |
| [collation_server](../../700.reference/800.configuration-items-and-system-variables/200.system-variable/300.global-system-variable/1600.collation_server-global.md) | utf8mb4_bin | Compared to other collations, using binary collation can improve performance by 20%. | tenant |
| [collation_connection](../../700.reference/800.configuration-items-and-system-variables/200.system-variable/300.global-system-variable/1400.collation_connection-global.md) | utf8mb4_bin | Compared to other collations, using binary collation can improve performance by 20%. | tenant |


## References
+ [Overview of parameters and system variables](../../700.reference/800.configuration-items-and-system-variables/000.configuration-items-and-system-variables-overview.md)
+ [Set parameters](../../700.reference/200.system-management/200.configuration-management/200.set-parameters.md)
+ [Set variables](../../700.reference/200.system-management/200.configuration-management/300.set-variables.md)
+ [Configure built-in templates of OCP](https://en.oceanbase.com/docs/common-ocp-10000000002169362)
