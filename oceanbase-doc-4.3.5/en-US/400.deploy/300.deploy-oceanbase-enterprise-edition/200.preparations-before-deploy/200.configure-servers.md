|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||

# Configure servers

This topic describes the hardware and software configuration requirements for servers, including the operating system, BIOS settings, disk mounting, and NIC settings.

## Prepare the operating system

### Operating systems supported by OAT/OCP

You can delpy OceanBase Admin Toolkit (OAT) and OceanBase Cloud Platform (OCP) on the following operating systems.

|                Operating system                 | Supported version | Server type  |
|----------------------------------------|---------|------------|
| Rocky Linux         | 9      | x86_64/ARM aarch64 |
| Alibaba Cloud Linux | 2, 3   | x86_64/ARM aarch64 |
| Anolis OS        | 8      | x86_64/ARM aarch64 |
| KylinOS   | V10, V11 | x86_64/ARM aarch64 |
| UOS             | V20   | x86_64/ARM aarch64 |
| NFSChina    | 4.0   | x86_64/ARM aarch64 |
| CentOS/Red Hat Enterprise Linux (RHEL) | 7, 8, 9   | x86_64/ARM aarch64 |
| openSUSE             | 12SP5                | x86_64/ARM aarch64 |
| Debian               | 12                   | x86_64/ARM aarch64 |
| openEuler            | 20.03 LTS, 22.03 LTS | x86_64/ARM aarch64 |
| NeoKylin OS              | V6.0.99, V6.0.100   | x86_64/ARM aarch64 |
| Ubuntu               | 22.04 LTS, 24.04 LTS | x86_64/ARM aarch64 |

### Operating systems supported by OceanBase Database

You can install OceanBase Database on the Linux operating systems listed in the following table.

|       Linux operating system     |    Version   |             Server architecture         |
|-------------------------|-----------|-------------------------------|
| Rocky Linux             | 9           | x86_64 (including Hygon), ARM_64 (Kunpeng, Phytium)|
| Alibaba Cloud Linux     | 2, 3        | x86_64 (including Hygon), ARM_64 (Kunpeng, Phytium)|
| AnolisOS                | 8           | x86_64 (including Hygon), ARM_64 (Kunpeng, Phytium)|
| KylinOS                 | V10         | x86_64 (including Hygon), ARM_64 (Kunpeng, Phytium)|
| UOS                     | V20         | x86_64 (including Hygon), ARM_64 (Kunpeng, Phytium)|
| NFSChina                | 4.0         | x86_64 (including Hygon), ARM_64 (Kunpeng, Phytium)|
| Inspur kos              | 5.8         | x86_64 (including Hygon), ARM_64 (Kunpeng, Phytium)|
| CentOS and Red Hat Enterprise Linux (RHEL) | 7, 8 | x86_64 (including Hygon), ARM_64 (Kunpeng, Phytium)|
| SUSE Enterprise Linux     | 12 SP5        | x86_64 (including Hygon)|
| Debian                   | 12           | x86_64 (including Hygon)|
| openEuler                 | 20.03 LTS, 22.03 LTS | x86_64 (including Hygon), ARM_64 (Kunpeng, Phytium)|
| Linux                   | V6.0.99, V6.0.100   | x86_64 (including Hygon), ARM_64 (Kunpeng, Phytium)|
| Ubuntu                   | 22.04 LTS, 24.04 LTS | x86_64 (including Hygon)|

<main id="notice" type='explain'>
  <h4>Note</h4>
  <p><ul><li>The operating system must be configured with network access and a software package manager (YUM or Zypper sources).</li><li>The servers used to deploy the OceanBase cluster must operate in little-endian mode. </li><li>If you are using the Hygon 7490 chip, you must install the operating system recommended by the Hygon server manufacturer, which already includes Patch 4. </li></ul></p>
</main>

## BIOS settings for OceanBase Database server

### Special settings

* In an Intel x86 architecture environment:

  * We recommend that you modify the `/etc/sysctl.conf` file and set the `vm.swappiness` parameter to `0`. The steps are as follows:

    ```bash
    [root@xxx /]
    $vi /etc/sysctl.conf
    vm.swappiness = 0
    ```

    Apply the values in the sysctl.conf file:

    ```bash
    [root@xxx /]
    $sysctl -p
    ```

* In an AMD or ARM architecture environment, we recommend that you enable Numa.

* In an ARM or Hygon architecture, we recommend that you modify the `/etc/sysctl.conf` configuration file and set the parameters `kernel.numa_balancing`, `vm.zone_reclaim_mode`, and `vm.swappiness` to `0`. The steps are as follows:

  ```bash
  [root@xxx /]
  $vi /etc/sysctl.conf
  kernel.numa_balancing = 0
  vm.zone_reclaim_mode = 0
  vm.swappiness = 0
  ```

  Apply the values in the sysctl.conf file:

  ```bash
  [root@xxx /]
  $sysctl -p
  ```

### BIOS settings to be disabled

* Cstate

* Pstate

* EIST

* Power saving

* SMMU (ARM architecture)

### BIOS settings to be configured

* Automatic Power on After Power Loss: Always on

* Intel Virtualization Technology: Enabled

* Hyper-threading: Enabled

* Hardware prefetcher: Enabled

* VT-d: Enabled

* SR-IOV: Enabled

* Turbo Mode: Enabled

* Energy performance: Maximum performance

  <main id="notice" type='explain'>
    <h4>Note</h4>
    <p>BIOS settings vary by server model. For specific instructions, refer to the server's operation manual.</p>
  </main>

## Mount disks

<main id="notice" type='notice'>
  <h4>Notice</h4>
  <p>If the directory file capacity of a mount point exceeds 16 TB, only the xfs file system is supported.</p>
</main>

* The following table describes the disk mount points of an OCP server.

  |    Mount point     |       Size       |     Purpose      |          Disk format           |
  |------------|----------------|-------------|-------------------------|
  | /home      | 100 GB\~300 GB | Log disk for running components    | Ext4 or XFS is recommended. |
  | /data/log1 | 3\~4 times the memory size   | Log disk for the OCP MetaDB | Ext4 or XFS is recommended. |
  | /data/1    | Depends on the amount of data to be stored   | Data disk for the OCP MetaDB | Ext4 or XFS is recommended. |
  | /docker    | 200 GB\~500 GB | Root directory of Docker  | Ext4 or XFS is recommended. |

* The following table describes the disk mount points of an OBServer node.

  |    Mount point     |       Size       |       Purpose       |         File system format          |
  |------------|----------------|----------------|-------------------------|
  | /home      | 100 GB\~300 GB | Log disk for observer processes | Ext4 or XFS is recommended. |
  | /data/log1 | 3\~4 times the memory size   | Log disk for observer processes   | Ext4 or XFS is recommended. |
  | /data/1    | Depends on the amount of data to be stored   | Data disk for observer processes   | Ext4 or XFS is recommended. |

  <main id="notice" type='explain'>
    <h4>Note</h4>
    <p>We recommend that the root directory be at least 50 GB in size. If you use LVM, we recommend that you specify the striping parameters when you create it. Here is an example: </p>
    <p><code>lvcreate -n data -L 3000G obvg --stripes=3 --stripesize=128</code></p>
  </main>

## NIC Settings

It is recommended to configure two 10-Gbit/s NICs:

* Name the bond interface bond0. The bonding mode can be set to mode1 or mode4, but mode4 is recommended. For mode4, configure the switch to support the 802.3ad protocol.
* Name the NICs eth0 and eth1.

## Recommended I/O scheduler for SSD

* The default I/O scheduler for NVMe SSD is `none`, and no adjustment is needed.
* For SATA SSD, it is recommended to set the I/O scheduler to `none`.

## Considerations

Starting from V4.2.5 BP3, V4.2.5 BP4, V4.2.5 BP5, V4.3.5 BP1, V4.3.5 BP2, and V4.3.5 BP3, OceanBase Database introduced instruction set requirements for running on x86 architecture. Before startup, the OBServer process checks whether the current environment supports the AVX instruction set. If not, the process will not start.

<main id="notice" type='explain'>
  <h4>Note</h4>
  <p>Beginning with the following versions, OceanBase Database no longer requires support for the AVX instruction set:<ul><li>For V4.3.5, starting from V4.3.5 BP4.</li><li>For V4.2.5, starting from V4.2.5 BP6.</li><li>For V4.4.0, starting from V4.4.1.</li></ul></p>
</main>