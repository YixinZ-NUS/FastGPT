|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||

# View parameters related to data backup

After a backup operation is performed, you can view the parameters related to backup by checking the settings of the relevant parameters.

## Procedure

1. Log in to the `sys` tenant of the cluster as the `root` user.

2. Execute the following statements to query parameters related to backup:

   * Query the current number of worker threads for high availability tasks with low priority, such as backup and backup cleanup.

      Here is the sample code:

      ```sql
      obclient [(none)]> SHOW PARAMETERS LIKE '%ha_low_thread_score%'\G
      ```

      Here is the sample result:

      ```shell
      *************************** 1. row ***************************
               zone: zone1
           svr_type: observer
             svr_ip: 172.xx.xxx.xxx
           svr_port: 2882
               name: ha_low_thread_score
          data_type: INT
              value: 0
               info: the current work thread score of high availability low thread. Range: [0,100] in integer. Especially, 0 means default value
            section: OBSERVER
              scope: TENANT
             source: DEFAULT
         edit_level: DYNAMIC_EFFECTIVE
      default_value: 0
          isdefault: 1
      1 row in set
      ```

      The tenant-level parameter `ha_low_thread_score` specifies the current number of worker threads for high availability tasks with low priority, such as backup and backup cleanup. The default value is `0`. If you find that the data backup task is running too slowly, you can appropriately increase the value of the `ha_low_thread_score` parameter. We recommend that you double the value each time. For more information about the `ha_low_thread_score` parameter, see [ha_low_thread_score](../../../700.reference/800.configuration-items-and-system-variables/100.system-configuration-items/400.tenant-level-configuration-items/3500.ha_low_thread_score.md).

      Here is the sample code for setting the number of concurrent writes to the file system when performing a backup:

      ```shell
      obclient [(none)]>  ALTER SYSTEM SET ha_low_thread_score = 4 TENANT = mysql_tenant;
      ```

      In this example, the value of the `ha_low_thread_score` parameter is set to `4`, which specifies the number of worker threads for backup tasks in the `mysql_tenant` tenant.

   * Query the backup parameters of a tenant.

      The `sys` tenant can query the backup parameters configured for each tenant in the current cluster by using the `oceanbase.CDB_OB_BACKUP_PARAMETER` view. A user tenant can query the backup parameters configured for the tenant by using the `oceanbase.DBA_OB_BACKUP_PARAMETER` view in MySQL mode or the `SYS.DBA_OB_BACKUP_PARAMETER` view in Oracle mode.

      ```sql
      obclient [(none)]> SELECT * FROM oceanbase.CDB_OB_BACKUP_PARAMETER\G
      ```

      Here is the sample result:

      ```shell
      *************************** 1. row ***************************
      TENANT_ID: 1004
           NAME: data_backup_dest
          VALUE: oss://oceanbase-test-bucket/backup/data/?host=xxx.aliyun-inc.com&access_id=xxx&access_key=xxx&delete_mode=delete&checksum_type=md5&enable_worm=true
      1 row in set
      ```

     In this example, the data backup path (`data_backup_dest`) for the tenant with `TENANT_ID` of `1004` is `oss://oceanbase-test-bucket/backup/?host=xxx.aliyun-inc.com&access_id=xxx&access_key=xxx`, and its backup file cleanup mode (`delete_mode`) is `delete`. The `delete_mode` parameter can take the following two values:

      * `delete`: Directly delete the eligible backup files when performing backup file cleanup.

          In this mode, when you clean up backup files, the system directly deletes the files that meet the cleanup criteria.

      * `tagging`: Set a tag for the eligible backup files when performing backup file cleanup. The files will still be retained.

         In this mode, the system tags the backup files that meet the specified requirements during backup file cleanup. The tag `key` is `delete_mode`, and the tag `value` is `tagging`. You can manage these backup files on Alibaba Cloud Object Storage Service (OSS), Tencent Cloud Object Storage (COS), or Amazon Simple Storage Service (S3) over their lifecycle by tag.

      Additionally, in the parameters of the backup path for the tenant, `checksum_type=md5` indicates that the MD5 algorithm is used to verify the integrity of backup files, and `enable_worm=true` specifies that OceanBase Database performs write and delete operations on the path according to the WORM policy.

    * View information related to the backup path of a tenant.

       The `CDB_OB_BACKUP_STORAGE_INFO` view records information about the backup or archive paths for all tenants.

       ```shell
       obclient [oceanbase]> SELECT PATH, DEST_TYPE, EXTENSION FROM oceanbase.CDB_OB_BACKUP_STORAGE_INFO WHERE DEST_TYPE='backup_data';
       ```

       An example of the query result is as follows:

       ```shell
       +-----------+---------------------------------------------+-------------+------------------------------------+
       | TENANT_ID | PATH                                        | DEST_TYPE   | EXTENSION                          | 
       +-----------+---------------------------------------------+-------------+------------------------------------+
       |      1004 | oss://oceanbase-test-bucket/backup/data     | backup_data | checksum_type=md5&enable_worm=true |
       +-----------+---------------------------------------------+-------------+------------------------------------+
       1 row in set
       ```

       In the query result, for the tenant with ID `1004`, the backup path is `oss://oceanbase-test-bucket/backup/data`. The `checksum_type=md5` indicates that the MD5 algorithm is used to verify the integrity of backup files, and `enable_worm=true` specifies that OceanBase Database performs write and delete operations on the path according to the WORM policy.
