|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||

# Back up parameters

OceanBase Database supports backing up tenant-level and cluster-level parameters. These backups provide configuration references for quickly restoring the status of clusters and tenants in the future.

## Back up cluster-level parameters

Cluster-level parameters are not included in data backups. To back up cluster-level parameters, you need to manually execute a command to save the original cluster-level parameters to a specified path (only non-default parameters within the cluster scope are backed up).

### Limitations and considerations

* Cluster-level parameters can only be backed up from the `sys` tenant. You cannot back up cluster-level parameters from a user tenant.

* When backing up cluster-level parameters, parameters such as `all_server_list`, `rootservice_list`, and `debug_sync_timeout` are not backed up, regardless of whether their values are default or not.

### Procedure

1. Log in to the `sys` tenant of the cluster as the `root` user.

2. Execute the following SQL statement to back up the cluster-level parameters.

   The sample SQL statement is as follows:

   ```sql
   ALTER SYSTEM BACKUP CLUSTER PARAMETERS TO 'parameters_backup_path';
   ```

   In this statement, `parameters_backup_path` is the destination path for backing up cluster-level parameters, which must be specified by users. The path requirements are the same as those for the destination path of data backup. For more information, see [Prepare for backup](100.preparation-before-data-backup.md).

   Here is an example:

   :::tab
   tab Alibaba Cloud OSS

   Back up the cluster-level parameters to the `oss://oceanbase-test-bucket/backup/cluster_parameters?host=***.aliyun-inc.com&access_id=***&access_key=***` directory:

   ```shell
   obclient> ALTER SYSTEM BACKUP CLUSTER PARAMETERS TO 'oss://oceanbase-test-bucket/backup/cluster_parameters?host=***.aliyun-inc.com&access_id=***&access_key=***';
   ```

   tab NFS

   Back up the cluster-level parameters to the `file:///data/nfs/backup/cluster_parameters` directory:

   ```shell
   obclient> ALTER SYSTEM BACKUP CLUSTER PARAMETERS TO 'file:///data/nfs/backup/cluster_parameters';
   ```

   tab Tencent Cloud COS

   Back up the cluster-level parameters to the `cos://oceanbase-test-appid/backup/cluster_parameters?host=cos.ap-xxxx.myqcloud.com&access_id=***&access_key=***&appid=***` directory:

   ```shell
   obclient> ALTER SYSTEM BACKUP CLUSTER PARAMETERS TO 'cos://oceanbase-test-appid/backup/cluster_parameters?host=cos.ap-xxxx.myqcloud.com&access_id=***&access_key=***&appid=***';
   ```

   tab AWS S3

   Back up the cluster-level parameters to the `s3://oceanbase-test-bucket/backup/data/cluster_parameters?host=s3.***.amazonaws.com&access_id=****&access_key=****&s3_region=****` directory:

   ```shell
   obclient> ALTER SYSTEM BACKUP CLUSTER PARAMETERS TO 's3://oceanbase-test-bucket/backup/data/cluster_parameters?host=s3.***.amazonaws.com&access_id=****&access_key=****&s3_region=****';
   ```

   tab S3 protocol-compatible object storage services that support

   * Back up the cluster-level parameters to the `s3://oceanbase-test-bucket/backup/data/cluster_parameters?host=obs.****.myhuaweicloud.com&access_id=****&access_key=****` directory of Huawei OBS:

      ```shell
      obclient> ALTER SYSTEM BACKUP CLUSTER PARAMETERS TO 's3://oceanbase-test-bucket/backup/data/cluster_parameters?host=obs.****.myhuaweicloud.com&access_id=****&access_key=****';
      ```

   * Back up the cluster-level parameters to the `s3://oceanbase-test-bucket/backup/data/cluster_parameters?host=https://storage.googleapis.com&access_id=****&access_key=****` directory of GCS:

      ```shell
      obclient> ALTER SYSTEM BACKUP CLUSTER PARAMETERS TO 's3://oceanbase-test-bucket/backup/data/cluster_parameters?host=https://storage.googleapis.com&access_id=****&access_key=****';
      ```

   * Back up the cluster-level parameters to the `s3://oceanbase-test-bucket/backup/data/cluster_parameters?host=cos.ap-xxxx.myqcloud.com&access_id=***&access_key=***` directory of COS:

      ```shell
      obclient> ALTER SYSTEM BACKUP CLUSTER PARAMETERS TO 's3://oceanbase-test-bucket/backup/data/cluster_parameters?host=cos.ap-xxxx.myqcloud.com&access_id=***&access_key=***';
      ```
   :::

## Back up tenant-level parameters

When you [initiate a full data backup](200.initiate-full-data-backup.md) or [initiate an incremental data backup](300.initiate-incremental-data-backup.md), the system automatically backs up the tenant-level parameters (non-default tenant scope parameters) and the tenant's resource configurations as part of the tenant data to the backup destination without the need to perform additional backup operations.

<main id="notice" type='notice'>
<h4>Notice</h4>
<p>Parameters <code>external_kms_info</code> and <code>tde_method</code> contain sensitive encryption-related information. Therefore, regardless of whether their values are default, these parameters are not backed up. </p>
</main>

## What to do next

After the backup is successful, you can obtain the backup files of the tenant-level and cluster-level parameters from the destination path that you specified earlier. For more information about the directory structure of the backup parameters, see [Physical backup and restore](../100.overview-of-physical-backup-and-recovery.md).

After you obtain the backup files of the parameters, you can use the `dump_backup` command of the ob_admin tool to parse the files and obtain the parameters. For more information, see [dump_backup](../../../700.reference/1500.Components-and-Tools/100.manage/200.ob-admin/400.backup-and-recovery/600.dump-backup.md).

## References

* [Physical backup and restore](../100.overview-of-physical-backup-and-recovery.md)

* [Prepare for backup](100.preparation-before-data-backup.md)
