# 基于 OceanBase 数据库搭建 WordPress 网站

本教程为您介绍如何基于 OceanBase 数据库搭建 WordPress 网站。

## 背景信息

* WordPress：WordPress 是一个基于 PHP 和 MySQL 的开源内容管理系统（Content Management System, CMS）。详情参见 [WordPress 官方网站](https://www.hostinger.com/wordpress-hosting?ppc_campaign=google_search_generic_hosting_wordpress&bidkw=wordpress&gad_source=1&gclid=EAIaIQobChMIi9-WkdmIigMV8lsPAh2tpR84EAAYASAAEgIgo_D_BwE)。WordPress 的易用性、可扩展性和强大的社区支持使其成为许多用户的首选，因此我们选择使用它为您介绍如何基于 OB Cloud 搭建网站。
* MAMP：MAMP 是一个用于 macOS 和 Windows 的软件包，它提供了一个完整的本地开发环境，使得开发者可以在自己的计算机上轻松地开发和测试基于 PHP 和 MySQL 的 Web 应用程序，可为 WordPress 提供一个运行环境。详情参见 [MAMP 官方网站](https://www.mamp.info/)。

## 前提条件

* 您已部署 OceanBase V4.3.3 及以上版本的集群并且创建了 MySQL 模式租户。更多有关部署 OceanBase 集群的信息，请参见 [部署概述](../400.deploy/100.deploy-overview.md)
  
* 您所创建的 MySQL 模式租户需要拥有插入及查询的权限。更多有关权限设置的信息，请参见 [直接授予权限](../600.manage/500.security-and-permissions/300.access-control/200.user-and-permission/200.permission-of-mysql-mode/200.authority-of-mysql-mode.md)。

* 您已创建数据库。更多有关创建数据库的信息，请参见 [创建数据库](../300.develop/100.application-development-of-mysql-mode/300.database-object-planning-of-mysql-mode/100.create-database-of-mysql-mode-in-develop.md)。

* 已安装 Apache、PHP。

  * 执行如下命令，安装 Apache

    ```shell
    brew install httpd
    ```

  * 执行如下命令，安装 PHP

    ```shell
    brew install php
    ```

## 操作步骤

1. 安装 WordPress

    1. 执行如下命令， 下载 WordPress。

        ```shell
        curl -O https://wordpress.org/latest.tar.gz
        ```

    2. 执行如下命令， 解压 WordPress。

        ```shell
        tar -xzvf latest.tar.gz
        ```

    3. 执行如下命令，将解压后的 WordPress 文件夹重命名为你想要的名字（如 your-wordpress-site），然后将其移动到 MAMP 的 htdocs 目录下，路径通常是 ` /Applications/MAMP/htdocs/ ` 。 

        ```shell
        mv wordpress /Applications/MAMP/htdocs/your-wordpress-site
        ```

2. 编辑 WordPress 配置文件。

    * 编辑 WordPress 的 `wp-config-sample.php` 文件，位于你的 WordPress 安装目录，配置数据库连接信息。

        ```php
            /** The name of the database for WordPress */
            define('DB_NAME', 'your_db_name');    ## 设置对应的数据库名
            /** MySQL database username */
            define('DB_USER', 'your_db_user');    ## 设置对应的租户及用户名
            /** MySQL database password */
            define('DB_PASSWORD', 'your_db_password');  ## 设置对应的租户用户的密码
            /** MySQL hostname */
            define('DB_HOST', 'your_ob_cloud_host'); // ## 设置对应租户的 IP 和端口
        ```

    * 编辑 WordPress 的 `class-wpdb.php` 文件,将 utf8mb4_unicode_520_ci，修改为 utf8mb4_general_ci。

        ```php
            if ( $this->has_cap( 'utf8mb4_520' ) && 'utf8mb4_unicode_ci' === $collate ) {
                        $collate = 'utf8mb4_general_ci';
                    }
        ```

3. 访问您的网站链接：http://localhost:8888/your-wordpress-site
    ![1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/cloud/24V5/zh/1202.png)
