|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||

# 查表的信息

## 查询表关联的对象

不同于 V2.x 和 V3.x 版本，OceanBase 数据库 V4.x 版本通过 `object_id` 来对一些数据库对象进行全局统一编码。通过 `object_id` 分配的编码为租户内唯一。

此外，在 OceanBase 数据库 V4.x 版本中，表的 `object_id` 与表的 `table_id` 相同，已知一个表的 `table_id` 时，可以通过 `table_id`  来查询该表的信息，包括表名、表所属的数据库、表的子对象（例如，分区名）等信息。

* 系统租户

  视图 `CDB_OBJECTS` 中记录了所有租户下所有表的信息，用户可以通过该视图查询任意表的关联信息。语句如下：

  ```shell
  obclient> SELECT * FROM oceanbase.CDB_OBJECTS WHERE CON_ID=tenant_id AND OBJECT_ID=table_id AND OBJECT_TYPE='TABLE';
  ```

  例如，假设 `tenant_id` 为 `1002` 的租户下有一个表的 `table_id` 为 `500007`，则系统租户下查询该表的语句如下：

  ```shell
  obclient> SELECT * FROM oceanbase.CDB_OBJECTS WHERE CON_ID=1002 AND OBJECT_ID=500007 AND OBJECT_TYPE='TABLE';
  ```

* 用户租户

  MySQL 模式的用户租户下，可以通过以下语句进行查询。

  ```shell
  obclient> SELECT * FROM oceanbase.DBA_OBJECTS WHERE OBJECT_ID=table_id AND OBJECT_TYPE='TABLE';
  ```

  Oracle 模式的用户租户下，可以通过以下语句进行查询。

  ```shell
  obclient> SELECT * FROM SYS.DBA_OBJECTS WHERE OBJECT_ID=table_id AND OBJECT_TYPE='TABLE';
  ```

## 查询表或分区所在的位置

已知一个表的 `table_id` 时，还可以通过 `table_id` 来查询该表上分区副本分布的节点信息。

* 系统租户

  系统租户下，可以通过以下语句进行查询。

  ```sql
  obclient> SELECT * FROM oceanbase.CDB_OB_TABLE_LOCATIONS WHERE TENANT_ID=tenant_id AND TABLE_ID=table_id AND TABLE_TYPE='USER TABLE';
  ```

* 用户租户

  MySQL 模式的用户租户下，可以通过以下语句进行查询。

  ```shell
  obclient> SELECT * FROM oceanbase.DBA_OB_TABLE_LOCATIONS WHERE TABLE_ID=table_id AND TABLE_TYPE='USER TABLE';
  ```

  Oracle 模式的用户租户下，可以通过以下语句进行查询。

  ```shell
  obclient> SELECT * FROM SYS.DBA_OB_TABLE_LOCATIONS WHERE TABLE_ID=table_id AND TABLE_TYPE='USER TABLE';
  ```
