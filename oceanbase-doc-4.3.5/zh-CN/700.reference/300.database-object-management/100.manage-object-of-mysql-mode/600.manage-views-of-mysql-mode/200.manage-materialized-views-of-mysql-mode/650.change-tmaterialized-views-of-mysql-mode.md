|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|MySQL Mode|

# 修改物化视图属性

本文将向您介绍如何使用 SQL 语句修改物化视图属性。

<main id="notice" type='explain'>
  <h4>说明</h4>
  <p>对于 OceanBase 数据库 V4.3.5 版本，从 V4.3.5 BP1 版本开始支持修改物化视图属性。</p>
</main>

## 权限要求

修改物化视图需要当前用户拥有待操作对象的 `ALTER` 权限。更多有关 OceanBase 数据库权限的详细介绍，请参见 [MySQL 模式下的权限分类](../../../../../600.manage/500.security-and-permissions/300.access-control/200.user-and-permission/200.permission-of-mysql-mode/100.permission-classification-of-mysql.md)。

## 语法

修改物化视图的 SQL 语句格式如下：

```sql
ALTER MATERIALIZED VIEW [database.]view_name alter_mview_action_list;

alter_mview_action_list:
    alter_mview_action [, alter_mview_action ...]

alter_mview_action:
    parallel_clause
    | REFRESH [nested_refresh_option] [[START WITH expr] [NEXT expr]]

parallel_clause:
    NOPARALLEL
    | PARALLEL integer

nested_refresh_option:
    INDIVIDUAL
    | INCONSISTENT
    | CONSISTENT
```

## 参数说明

* `database.`：可选项，指定物化视图所在的数据库。如果省略 `database.`，则默认物化视图在当前会话连接的数据库中。
* `view_name`：指定待修改的物化视图的名称。

  <main id="notice" type='explain'>
    <h4>说明</h4>
    <p>对于 OceanBase 数据库 V4.3.5 版本，<code>RENAME TABLE</code> 语句从 V4.3.5 BP3 版本开始支持对物化视图重命名。</p>
  </main>

* `alter_mview_action_list`：表示可以对物化视图执行修改的操作列表。可以同时指定多个操作，使用英文逗号（`,`）分隔。

有关修改物化视图语法的详细参数说明信息，请参见 [ALTER MATERIALIZED VIEW](../../../../500.sql-reference/100.sql-syntax/200.common-tenant-of-mysql-mode/600.sql-statement-of-mysql-mode/1250.alter-materialized-view-of-mysql-mode-in-sql.md)。

## 示例

1. 创建表 `test_tbl1`。

    ```sql
    CREATE TABLE test_tbl1 (col1 INT PRIMARY KEY, col2 VARCHAR(20), col3 INT, col4 TEXT);
    ```

2. 创建名为 `mv_test_tbl1` 的物化视图。

    ```sql
    CREATE MATERIALIZED VIEW mv_test_tbl1(c1, c2, c3, PRIMARY KEY(c1))
        AS SELECT col1, col2, col3
           FROM test_tbl1;
    ```

3. 修改物化视图 `mv_test_tbl1` 的并行度为 5。

    ```sql
    ALTER MATERIALIZED VIEW mv_test_tbl1 PARALLEL 5;
    ```

4. 修改物化视图 `mv_test_tbl1` 的刷新计划中初始刷新时间为当前日期，之后每隔 1 天刷新一次物化视图。

    ```sql
    ALTER MATERIALIZED VIEW mv_test_tbl1
        REFRESH START WITH sysdate() NEXT sysdate() + interval 1 DAY;
    ```

5. 基于物化视图 `mv_test_tbl1` 创建名为 `mv_mv_test_tbl1` 的嵌套物化视图，刷新策略为 `INDIVIDUAL`。

    ```sql
    CREATE MATERIALIZED VIEW mv_mv_test_tbl1
        REFRESH COMPLETE INDIVIDUAL
        AS SELECT c1, c2
           FROM mv_test_tbl1;
    ```

6. 修改嵌套物化视图 `mv_mv_test_tbl1` 的刷新策略为 `INCONSISTENT`。

    ```sql
    ALTER MATERIALIZED VIEW mv_mv_test_tbl1
        REFRESH INCONSISTENT;
    ```

## 相关文档

* [物化视图概述](100.materialized-views-overview-of-mysql-mode.md)
* [物化视图日志](200.materialized-views-log-of-mysql-mode.md)
* [创建物化视图](300.create-materialized-views-of-mysql-mode.md)
* [刷新物化视图](400.refresh-materialized-views-of-mysql-mode.md)
* [物化视图查询改写](500.materialized-views-rewrite-of-mysql-mode.md)
* [查询物化视图](600.view-materialized-views-of-mysql-mode.md)
* [删除物化视图](700.delete-materialized-views-of-mysql-mode.md)
