# 发起恢复

obshell Dashboard 支持对已备份的租户发起恢复，您可通过以下两个入口发起恢复：

+ **入口一**：登录 obshell Dashboard，进入 **租户管理** 页面，单击右上角的 **发起恢复**。

+ **入口二**：登录 obshell Dashboard，进入 **租户管理** 页面，单击租户列表中租户名，进入 **总览** 页面后单击左侧导航栏 **备份恢复** 进入 **备份恢复** 页面，点击页面右上方 **发起恢复**。

<main id="notice" type='explain'>
  <h4>说明</h4>
  <p>入口一是从 <b>租户管理</b> 全局页面发起恢复，发起恢复时需填写或修改存储配置。入口二是从租户列表中选择的对应租户中发起恢复，发起恢复时可复用该租户的备份存储配置，无需填写或修改存储配置。</p>
</main>

## 操作步骤

以下步骤以 **入口一** 为例。

1. 登录 obshell Dashboard。

2. 在左侧导航栏中单击 **租户管理**。

3. 单击页面右上方 **发起恢复** 进入 **发起恢复** 页面。

4. 在全局页面发起恢复时，需填写待恢复的已备份文件存储配置（该步骤仅 **入口一** 需配置）。

5. 填写或修改完成后，单击 **测试**。

   <main id="notice" type='explain'>
     <h4>说明</h4>
     <p>单击 <b>测试</b> 后，obshell 会测试待恢复的已备份文件的存储配置，测试成功后，<b>恢复源信息栏</b> 会显示对应的待恢复源租户名，若测试失败会报错，请填写正确的存储配置。</p>
   </main>

   ![存储配置](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.4.1/obshell/V4.3.2/300.Initiate-restoration-01.png)

6. 填写 **恢复源信息**，恢复日期需在提示的可恢复时间段内。若需获取可恢复时间范围，请安装工具集成包：oceanbase-ce-utils，以便系统解析备份集相关信息，详细安装操作请参见 [ob_admin 简介](../../../../200.ob-admin/100.overview-of-ob-admin.md)。若未指定恢复时间，默认恢复至最新位点。

   ![恢复源信息](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.4.1/obshell/V4.3.2/300.Initiate-restoration-04.png)

7. 填写 **恢复目标信息**。

   ![恢复目标信息](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.4.1/obshell/V4.3.2/300.Initiate-restoration-03.png)

   | 参数  | 说明  |
   |-------|------|
   | 目标租户 | 请自定义一个租户名，且租户名不能与已有租户重复，系统将根据这里的租户名创建对应租户，并将备份内容恢复到该租户中。 |
   | 各 Zone 的 Unit 数量 | 请设置各 Zone 的 Unit 数量。Zone 中最少 OBServer 数决定 Unit 可设最大个数。 |
   | 副本类型 | 取值范围：<ul><li>全能型副本：目前支持的普通副本，拥有事务日志、MemTable 和 SSTable 等全部完整的数据和功能。它可以随时快速切换为 Leader 以对外提供服务。</li><li>只读型副本：包含完整的日志、MemTable 和 SSTable 等。建议在业务对读取数据的一致性要求不高时选择。</li></ul> |
   | Unit 规格 | 该 Unit 所占用的资源规格。您可手动输入在当前可配置范围值内的值。 |
   | Unit 数量 | 展示各 Zone 的 Unit 数量。<main id="notice" type='explain'><h4>说明</h4><p>Unit 数量与 <b>各 Zone 的 Unit 数量</b> 配置一致，且不支持修改。</p></main>  |
   | Zone 优先级 | 为租户的主副本指定优先级。最高优先级的 Zone 会被视为 Primary Zone，且只能有一个。若未配置任何 Zone 优先级，则为 Random 优先级。排序方法如下：<ol><li>勾选左侧列表框中的一个或多个 Zone。左侧列表框中显示了当前集群中所有可选的 Zone。</li><li> 单击中间的 **>** 按钮。此时勾选的 Zone 就会被移动到 <b>优先级排序</b> 列表中。</li><li>重复 a、b 动作，添加低一优先级的 Zone。</li><li>如需调整优先级，可在 <b>优先级排序</b> 列表中拖拽以调整顺序。列表中从上到下，优先级一次递减。</li><li>单击 Zone 后的删除按钮，或单击 **恢复为默认** 可将 <b>优先级排序</b> 列表中的 Zone 重新移回左侧列表。</li></ol>  |

8. 单击 **发起恢复**，会生成恢复任务，可单击 **查看任务** 跳转查看恢复任务进度。