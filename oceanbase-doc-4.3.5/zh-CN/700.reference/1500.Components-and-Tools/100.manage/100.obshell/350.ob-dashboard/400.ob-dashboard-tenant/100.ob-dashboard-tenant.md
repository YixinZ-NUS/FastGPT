# 租户管理概述

租户是一个逻辑概念，在 OceanBase 里是资源分配的单位，是数据库对象管理和资源管理的基础。登录 obshell Dashboard 后，在左侧导航栏中单击 **租户管理** 可以进入 **租户管理** 页面，页面默认展示集群所有租户列表信息。此页面支持查看所有租户的基础信息，以及 [新建租户](#新建租户)。

## 租户列表

**租户列表** 中展示租户的 **租户名**、**租户模式**、**连接字符串**、是否 **只读**、是否 **锁定**、**状态**、**创建时间** 等信息，以及可执行的 **操作**。

* 单击租户名可在 [总览](200.ob-dashboard-tenant-overview.md) 页面查看对应租户的具体信息，并支持对租户中的数据库、用户和参数进行管理，具体操作可参见 [数据库管理](300.ob-dashboard-tenant-db.md)、[用户管理](400.ob-dashboard-tenant-user.md) 及 [参数管理](../500.ob-dashboard-parameter.md) 功能。

* 单击 **连接字符串** 列的 <span style="vertical-align: middle;"><img src="https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.3.5/700.reference/1500.Components-and-Tools/100.obshell/500.icon/100.ob-dashboard-tenant-01.png" alt="复制" style="height: 20px;"></span> 图标，可复制租户的连接字符串以备后续使用。

* 单击 **状态** 后的 <span style="vertical-align: middle;"><img src="https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.3.5/700.reference/1500.Components-and-Tools/100.obshell/500.icon/100.ob-dashboard-tenant-02.png" alt="筛选" style="height: 20px;"></span> 图标，可按照不同的租户状态进行筛选。

* 单击 **创建时间** 后的 <span style="vertical-align: middle;"><img src="https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.3.5/700.reference/1500.Components-and-Tools/100.obshell/500.icon/100.ob-dashboard-tenant-03.png" alt="排序" style="height: 20px;"></span> 图标，可选择按照升序、降序方式展示租户，方便查看集群租户。

* 单击 **操作** 列下的 **锁定** 字段可锁定对应租户，锁定租户会导致用户无法访问该租户，请谨慎操作。

## 新建租户

单击页面右上角 **新建租户**，可进入到 **新建租户** 页面。新建租户需设置 **基础信息**、**Zone 信息**、**安全设置** 以及 **参数设置**，本节将分别进行介绍。

1. 基础信息

   **基础信息** 部分用于设置租户模式、名称、密码等信息，内容如下。

   ![基础信息](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/oceanbase-database-standalone/V4.3.5/obshell/V4.3.2/100.ob-dashboard-tenant-01.png)

   |  参数  | 说明  |
   |--------|------|
   | 租户模式 | 可通过下拉框中选择租户模式。<main id="notice" type='explain'><h4>说明</h4><p>目前仅支持通过 obshell Dashboard 创建 MySQL 模式租户。</p></main> |
   | 租户名称  | 设置待新建租户的租户名。租户名需满足如下要求：<ul><li>长度为 2 ~ 32 个字符。</li><li>可包含大小写英文字母、数字和下划线，但需以英文字母开头，并以英文或数字结尾。</li></ul>  |
   | 管理员初始密码 | 可单击 **随机生成**，由 obshell Dashboard 自动生成随机字符串，也可自定义设置。自定义设置时，密码复杂度需满足如下要求：<ul><li>长度为 8 ~ 32 个字符</li><li>至少包含以下四种类型字符各 2 个：数字（0 ~ 9）、大写字母（A ~ Z）、小写字母（a ~ z）和特殊字符（~!@#%^&*_-+=\|(){}[]:;,.?/）</li></ul> 配置后可单击 **复制密码**，复制后保存已配置的密码以备后续使用。  |
   | 字符集 | 默认为 utf8mb4，可通过下拉框中选择其他字符集。 |
   | Collation（可选） | 可通过下拉框中选择合适的 Collation。 |
   | 表名大小写敏感 | 可通过下拉框进行设置，支持设置为 `0`、`1` 或 `2`。<ul><li>`0`：表名将按照指定的大小写形式进行存储，并以区分大小写形式进行比较。</li><li>`1`：表名将按照小写形式进行存储，并以不区分大小写形式进行比较。</li><li>`2`：表名将按照指定的大小写形式进行存储，并以不区分大小写形式进行比较。</li></ul> |
   | 时区 | 默认为（GMT+08:00）中国标准时间，可通过下拉框选择其他时区。 |
   | 备注（可选）  | 租户的说明，便于更好地管理租户。 |
   | 负载类型 | 可单击 **负载类型** 下的下拉框，根据实际业务需求选择合适的负载类型。可选项包括：<ul><li>COMPLEX_OLAP：适用于银行、保险系统等工作负载。它们通常具有复杂的联接、复杂的相关子查询、用 PL 编写的批处理作业，以及长事务和大事务。有时对短时间运行的查询使用并行执行。</li><li>OLAP：用于实时数据仓库分析场景。</li><li>KV：用于键值工作负载和类似 Hbase 的宽列工作负载，这些工作负载通常具有非常高的吞吐量并且对延迟敏感。</li><li>HTAP：适用于混合 OLAP 和 OLTP 工作负载。通常用于从活动运营数据、欺诈检测和个性化建议中获取即时见解。</li><li>EXPRESS_OLTP：适用于贸易、支付核心系统、互联网高吞吐量应用程序等工作负载。没有外键等限制，没有存储过程，没有长交易，没有大交易，没有复杂的连接，没有复杂的子查询。</li></ul> |

2. Zone 信息

   **Zone 信息** 部分用于设置 **各 Zone 的 Unit 数量**、Zone 的 **副本类型**、**Unit 规格** 和 **Zone 优先级排序**，内容如下。

   ![Zone 信息](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.3.5/700.reference/1500.Components-and-Tools/100.obshell/400.tenant/100.ob-dashboard-tenant-02.png)

   | 参数  | 说明  |
   |---------|-----|
   | 各 Zone 的 Unit 数量 | Zone 中最少 OBServer 数决定 Unit 可设最大个数。 |
   | Zone 名称  | 默认为集群中的 Zone 名称，且无法修改。可通过单击对应 Zone 前的勾选框设置在哪些 Zone 上创建 Unit。 |
   | 副本类型 | 可通过下拉框选择副本类型，支持配置为 **全能型副本** 和 **只读型副本**。 |
   | Unit 规格 | 设置 Unit 的 CPU 规格上限和内存规格，集群资源不同时可配置范围不同，根据对应输入框下的范围设置即可。  |
   | Unit 数量  | 展示各 Zone 的 Unit 数量。 |
   | Zone 优先级排序 | 为租户的主副本分布指定优先级。最高优先级的 Zone 会被视为 Primary Zone，且只能有一个。排序方法如下：<ol><li>勾选左侧列表框中的一个或多个 Zone。左侧列表框中显示了当前集群中所有可选的 Zone。</li><li> 单击中间的 **>** 按钮。此时勾选的 Zone 就会被移动到 <b>优先级排序</b> 列表中。同时勾选的多个 Zone 具有相同的优先级。</li><li>重复 a、b 动作，添加低一优先级的 Zone。</li><li>如需调整优先级，可在 <b>优先级排序</b> 列表中拖拽以调整顺序。列表中从上到下，优先级依次递减。</li><li>单击 Zone 后的删除按钮，或单击 **恢复为默认** 可将 <b>优先级排序</b> 列表中的 Zone 重新移回左侧列表。</li></ol>   |

3. 安全设置

   **安全设置** 部分用于设置 IP 地址白名单，支持自定义设置可访问 IP，或设置为所有 IP 都可访问。选择自定义设置时，可在 **自定义 IP** 下的输入框中指定允许登陆的客户端列表，输入 IP 后单击键盘 Enter 键或输入英文逗号（`,`）可配置多个节点 IP。光标悬停在 **查看配置说明** 上可查看配置 IP 的说明，配置 IP 时支持的格式如下：

   * IP 地址，示例：127.0.0.10,127.0.0.11

   * 子网/掩码，示例：127.0.0.0/24

   * 模糊匹配，示例：127.0.0.% 或 127.0.0._

   * 多种格式混合，示例：127.0.0.10,127.0.0.11,127.0.0.%,127.0.0._,127.0.0.0/24

   <main id="notice" type='explain'>
     <h4>说明</h4>
     <p>设置为 <code>%</code> 表示所有客户端都可以连接，存在访问安全风险，请谨慎操作。</p>
   </main>

   ![安全设置](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.3.5/700.reference/1500.Components-and-Tools/100.obshell/400.tenant/100.ob-dashboard-tenant-03.png)

4. 参数设置

   单击 **参数设置** 后的按钮设置租户参数，可单击 **+添加租户参数** 设置多个租户参数。可在 **参数名** 下手动输入或通过下拉框选择待设置的租户参数，在 **参数值** 下的输入框中设置对应参数的值，单击 **操作** 列下的 **删除** 选项可删除设置的对应参数。

   ![参数设置](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.3.5/700.reference/1500.Components-and-Tools/100.obshell/400.tenant/100.ob-dashboard-tenant-04.png)

5. 提交

   配置完成后，单击页面右下角 **提交** 按钮发起新建租户任务。您可选择 **返回租户列表** 或 **查看任务详情**。

   ![提交](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.3.5/700.reference/1500.Components-and-Tools/100.obshell/400.tenant/100.ob-dashboard-tenant-05.png)

## 锁定租户

单击 **操作** 列的 **锁定** 字段，在弹出的窗口中单击 **锁定** 即可锁定对应租户。锁定租户会导致用户无法访问该租户，请谨慎操作。

![锁定租户](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.3.5/700.reference/1500.Components-and-Tools/100.obshell/400.tenant/100.ob-dashboard-tenant-06.png)
