# 统计信息收集方式概述

目前 OceanBase 数据库优化器支持手动收集统计信息、自动收集统计信息和在线统计信息收集三种方式，同时提供了对应的视图用于查询收集的统计信息。

## 表级统计信息

OceanBase 数据库提供了查询表级统计信息收集状态：

:::tab
tab MySQL mode

  |       视图名称                     |                        描述                       |
  |--------------------------------------|----------------------------------------------|
  | oceanbase.DBA_TAB_STATISTICS         |  用于查询表级的统计信息。                      |

tab Oracle mode

  |         视图名称                     |                        描述                       |
  |--------------------------------------|---------------------------------------------------|
  | <ul><li>ALL_TAB_STATISTICS</ul></li> <ul><li>DBA_TAB_STATISTICS</ul></li> <ul><li>USER_TAB_STATISTICS</ul></li>      |  用于查询表级的统计信息。     |
  | sys.ALL_VIRTUAL_TABLE_STAT_REAL_AGENT          | 用于查询表级的统计信息的代理表。             |

:::

## 列级统计信息

OceanBase 数据库提供了查询列级统计信息收集状态：

:::tab
tab MySQL mode

  |       视图名称                     |                        描述                       |
  |--------------------------------------|----------------------------------------------|
  | oceanbase.DBA_TAB_COL_STATISTICS     |  用于查询 `GLOBAL` 级别的列级统计信息。         |
  | oceanbase.DBA_PART_COL_STATISTICS    |  用于查询 `PARTITON` 级别的列级统计信息。       |
  | oceanbase.DBA_SUBPART_COL_STATISTICS |  用于查询 `SUBPARTITON` 级别的列级统计信息。    |
  | oceanbase.DBA_TAB_HISTOGRAMS         |  用于查询 `GLOBAL` 级别的列级直方图统计信息。   |
  | oceanbase.DBA_PART_HISTOGRAMS        |  用于查询 `PARTITON` 级别的列级直方图统计信息。    |
  | oceanbase.DBA_SUBPART_HISTOGRAMS     |  用于查询 `SUBPARTITON` 级别的列级直方图统计信息。 |

tab Oracle mode

  |         视图名称                     |                        描述                       |
  |--------------------------------------|---------------------------------------------------|
  | <ul><li>ALL_TAB_COL_STATISTICS</ul></li><ul><li>DBA_TAB_COL_STATISTICS</ul></li><ul><li>USER_TAB_COL_STATISTICS</ul></li>             |  用于查询 `GLOBAL` 级别的列级统计信息。         |
  | <ul><li>ALL_PART_COL_STATISTICS</ul></li><ul><li>DBA_PART_COL_STATISTICS</ul></li><ul><li>USER_PART_COL_STATISTICS</ul></li>          |  用于查询 `PARTITON` 级别的列级统计信息。       |
  | <ul><li>ALL_SUBPART_COL_STATISTICS</ul></li><ul><li>DBA_SUBPART_COL_STATISTICS</ul></li><ul><li>USER_SUBPART_COL_STATISTICS</ul></li> |  用于查询 `SUBPARTITON` 级别的列级统计信息。    |
  | <ul><li>ALL_TAB_HISTOGRAMS</ul></li><ul><li>DBA_TAB_HISTOGRAMS</ul></li><ul><li>USER_TAB_HISTOGRAMS</ul></li>                         |  用于查询 `GLOBAL` 级别的列级直方图统计信息。      |
  | <ul><li>ALL_PART_HISTOGRAMS</ul></li><ul><li>DBA_PART_HISTOGRAMS</ul></li><ul><li>USER_PART_HISTOGRAMS</ul></li>                      |  用于查询 `PARTITON` 级别的列级直方图统计信息。    |
  | <ul><li>ALL_SUBPART_HISTOGRAMS</ul></li><ul><li>DBA_SUBPART_HISTOGRAMS</ul></li><ul><li>USER_SUBPART_HISTOGRAMS</ul></li>             |  用于查询 `SUBPARTITON` 级别的列级直方图统计信息。 |
  | sys.ALL_VIRTUAL_COLUMN_STAT_REAL_AGENT                              | 用于查询列级的基本统计信息的代理表。                                 |
  | sys.ALL_VIRTUAL_HISTOGRAM_STAT_REAL_AGENT                           | 用于查询列级的直方图信息的代理表。                                  |


:::

## 索引级统计信息

OceanBase 数据库提供了查询索引统计信息收集状态：

:::tab
tab MySQL mode

  |       视图名称                     |                        描述                       |
  |--------------------------------------|----------------------------------------------|
  | oceanbase.DBA_IND_STATISTICS         |  用于查询索引统计信息。 |

tab Oracle mode

  |         视图名称                     |                        描述                       |
  |--------------------------------------|---------------------------------------------------|
  | <ul><li>ALL_IND_STATISTICS</ul></li><ul><li>DBA_IND_STATISTICS</ul></li><ul><li>USER_IND_STATISTICS </ul></li>                        |  用于查询索引统计信息。 |

:::

## 刷新物化视图统计信息

OceanBase 数据库提供了查询刷新物化视图统计信息收集状态：

:::tab
tab MySQL mode

  |       视图名称                     |                        描述                       |
  |--------------------------------------|----------------------------------------------|
  | oceanbase.DBA_MVREF_STATS_PARAMS            |  用于查询每个物化视图关联的刷新统计信息属性。 |
  | oceanbase.DBA_MVREF_STATS                    |  用于查询物化视图刷新的基本计时统计信息。                  |
  | oceanbase.DBA_MVREF_CHANGE_STATS             |  用于查询展示物化视图刷新相关的统计信息。

tab Oracle mode

  |         视图名称                     |                        描述                       |
  |--------------------------------------|---------------------------------------------------|
  | DBA_MVREF_STATS_PARAMS            |  用于查询每个物化视图关联的刷新统计信息属性。 |
  | DBA_MVREF_STATS                    |  用于查询物化视图刷新的基本计时统计信息。                  |
  | DBA_MVREF_CHANGE_STATS             |  用于查询展示物化视图刷新相关的统计信息。                  |

:::


### 更多信息

[直方图简介](../200.statistics-collection-methods/200.histogram-introduction.md)
