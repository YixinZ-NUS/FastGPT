|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||

# 监测历史会话性能

WR 通过定期采集性能视图的数据信息，将所采集的 ASH、统计信息、等待事件和 SQL 执行情况等数据进行持久化和展示。

## 查看历史会话数据

* **通过 `oceanbase.CDB_WR_ACTIVE_SESSION_HISTORY` 视图查看所有租户持久化后的 ASH 数据。**

  ```shell
  obclient [oceanbase]> SELECT * FROM oceanbase.CDB_WR_ACTIVE_SESSION_HISTORY limit 1\G
  ```

    返回结果如下：

    ```shell
    *************************** 1. row ***************************
                    CLUSTER_ID: 10001
                      TENANT_ID: 1002
                        SNAP_ID: 1
                        SVR_IP: xx.xx.xx.xx
                      SVR_PORT: 2882
                      SAMPLE_ID: 740
                    SESSION_ID: -9223372036854729597
                    SAMPLE_TIME: 2025-02-28 09:43:43.809287
                        USER_ID: 200001
                  SESSION_TYPE: 1
                  SESSION_STATE: WAITING
                        SQL_ID:
                      TRACE_ID: YB42AC1E87F8-00062F29EA381666-0-0
                      EVENT_NO: 29
                      EVENT_ID: 15102
                    TIME_WAITED: 199579
                            P1: 200000
                            P2: 0
                            P3: 0
              SQL_PLAN_LINE_ID: NULL
                      GROUP_ID: 0
                      PLAN_HASH: NULL
                      THREAD_ID: 82046
                      STMT_TYPE: NULL
                    TIME_MODEL: 0
                      IN_PARSE: N
                    IN_PL_PARSE: N
                  IN_PLAN_CACHE: N
                IN_SQL_OPTIMIZE: N
              IN_SQL_EXECUTION: N
                IN_PX_EXECUTION: N
              IN_SEQUENCE_LOAD: N
                  IN_COMMITTING: N
                IN_STORAGE_READ: N
              IN_STORAGE_WRITE: N
        IN_REMOTE_DAS_EXECUTION: N
                IN_FILTER_ROWS: N
                  IN_RPC_ENCODE: N
                  IN_RPC_DECODE: N
              IN_CONNECTION_MGR: N
                        PROGRAM: T1002_LogService
                        MODULE: LOCAL INNER SQL EXEC
                        ACTION: NULL_INNER_SQL
                      CLIENT_ID: NULL
                      BACKTRACE: NULL
                        PLAN_ID: 0
                  TM_DELTA_TIME: 739151
              TM_DELTA_CPU_TIME: 165
              TM_DELTA_DB_TIME: 165
              TOP_LEVEL_SQL_ID: NULL
          IN_PLSQL_COMPILATION: N
            IN_PLSQL_EXECUTION: N
          PLSQL_ENTRY_OBJECT_ID: NULL
      PLSQL_ENTRY_SUBPROGRAM_ID: NULL
    PLSQL_ENTRY_SUBPROGRAM_NAME: NULL
                PLSQL_OBJECT_ID: NULL
            PLSQL_SUBPROGRAM_ID: NULL
          PLSQL_SUBPROGRAM_NAME: NULL
            BLOCKING_SESSION_ID: NULL
                      TABLET_ID: NULL
                      PROXY_SID: -9223372036854729597
                          TX_ID: NULL
        DELTA_READ_IO_REQUESTS: 0
            DELTA_READ_IO_BYTES: 0
        DELTA_WRITE_IO_REQUESTS: 0
          DELTA_WRITE_IO_BYTES: 0
    1 row in set (0.200 sec)
    ```

  各字段的解释如下：

  | **字段**| **描述** |
  | --- | --- |
  | CLUSTER_ID  | 集群 ID |
  | TENANT_ID  | 租户 ID |
  | SNAP_ID  | 快照 ID |
  | SVR_IP  | 节点 IP |
  | SVR_PORT  | 节点 PORT |
  | SAMPLE_ID  | 采样 ID |
  | SESSION_ID  | 被采样会话的 ID |
  | SAMPLE_TIME  | 采样时间 |
  | USER_ID  | 被采样 SESSION 的用户 ID |
  | SESSION_TYPE  | SESSION 类型 <ul><li>N：FOREGROUND 表示前台会话，即用户会话  </li><li>Y：BACKGROUND 表示后台会话 </li></ul> |
  | SESSION_STATE| SESSION 采样时刻的状态 <ul><li>`EVENT_NO == 0`："ON CPU" 表示当前没有等待，正在执行 SQL 逻辑  </li><li>`EVENT_NO ≠ 0`： "WAITTING" 表示当前正在等待，详细等待内容参考 EVENT 字段 </li></ul> |
  | SQL_ID  | SQL ID |
  | TRACE_ID| TRACE_ID |
  | EVENT_NO  | 等待事件内部编号，用于和其他表关联查询 |
  | EVENT_ID  | 表示当前等待事件的 ID |
  | TIME_WAITED  | 该等待事件的总等待时间，单位为微秒（us） |
  | P1  | 等待事件参数 1 的值 |
  | P2  | 等待事件参数 2 的值 |
  | P3  | 等待事件参数 3 的值 |
  | SQL_PLAN_LINE_ID  | 采样时对应 SQL 算子 ID。无对应算子时值为 NULL |
  | GROUP_ID          | 采样点的 Group 信息|
  | PLAN_HASH                   | 当前执行 SQL 命令对应 Plan Hash     |
  | THREAD_ID                   | 当前活跃会话所在的线程 ID    |
  | STMT_TYPE                   | 当前活跃会话的 SQL 类型     |
  | TIME_MODEL  | TIME MODEL 的相关信息 |
  | IN_PARSE  | 采样时当前 SESSION 是否正在做 SQL Parse |
  | IN_PL_PARSE  | 采样时当前 SESSION 是否正在做 SQL PL Parse |
  | IN_PLAN_CACHE  | 采样时当前 SESSION 是否正在做 plan cache |
  | IN_SQL_OPTIMIZE  | 采样时当前 SESSION 是否正在做 SQL 优化 |
  | IN_SQL_EXECUTION  | 采样时当前 SESSION 是否正在做 SQL 执行 |
  | IN_PX_EXECUTION  | 采样时当前 SESSION 是否正在做 SQL  并行执行。当 SESSION 处于本状态时，一定也处于 IN_SQL_EXECUTION 状态。 |
  | IN_SEQUENCE_LOAD  | 采样时当前 SESSION 是否正在做自增列或 SEQUENCE 取值 |
  | IN_COMMITTING  | 当前采样点是否处于事务提交阶段 |
  | IN_STORAGE_READ  | 当前采样点是否处于存储读阶段 |
  | IN_STORAGE_WRITE  | 当前采样点是否处于存储写阶段 |
  | IN_REMOTE_DAS_EXECUTION  | 当前采样点是否处于 DAS 远程执行阶段 |
  | IN_FILTER_ROWS           | 当前采样点的是否处于存储下压执行阶段  |
  | IN_RPC_ENCODE               | 当前 SQL 正在进行的序列化操作    |
  | IN_RPC_DECODE               | 当前 SQL 正在进行的反序列化操作     |
  | IN_CONNECTION_MGR           | 当前 SQL 正在进行建链接操作     |
  | PROGRAM                  |当前采样点正在执行的程序名:<ul><li>后台线程：指线程名称，例如 `observer`、`WrTimer` 等  </li><li>前台线程:<ul><li>普通请求为 `user@client_ip (thread_name)`  </li><li>`inner_sql` 远程执行为 `INNER SQL REMOTE EXEC (thread_name)` </li><li>DAS 远程执行为 `DAS REMOTE EXEC (thread_name)` </li></ul> </li></ul>  |
  | MODULE| 采样时刻当前 SESSION 上记录的 MODULE 值，通过 `DBMS_APPLICATION_INFO.SET_MODULE` 包设置 |
  | ACTION| 采样时刻当前 SESSION 上记录的 ACTION 值，通过 `DBMS_APPLICATION_INFO.SET_ACTION` 包设置 |
  | CLIENT_ID| 采样时刻当前 SESSION 上记录的 CLIENT_ID 值，通过 `DBMS_APPLICATION_INFO.set_identifier` 包设置 |
  | BACKTRACE | 辅助调试字段，用于记录事件发生时的代码调用栈 |
  | PLAN_ID  | 采样到的 SQL 在 PLAN CACHE 中的计划 ID，用于将采样点与计划关联起来 |
  | TM_DELTA_TIME |计算 time model 的时间间隔，单位为微秒 |
  | TM_DELTA_CPU_TIME |过去 `TM_DELTA_TIME` 时间段内在 CPU 上花费的时间量 |
  | TM_DELTA_DB_TIME |过去 `TM_DELTA_TIME` 时间段内在数据库调用中花费的时间量 |
  | TOP_LEVEL_SQL_ID |顶层 SQL ID |
  | IN_PLSQL_COMPILATION |当前 PL 编译状态：Y/N |
  | IN_PLSQL_EXECUTION |当前 PL 执行状态：Y/N |
  | PLSQL_ENTRY_OBJECT_ID |顶层 PL 的 OBJECT ID |
  | PLSQL_ENTRY_SUBPROGRAM_ID |顶层 PL 的 Sub project ID |
  | PLSQL_ENTRY_SUBPROGRAM_NAME |顶层 PL 的 Sub project name |
  | PLSQL_OBJECT_ID |当前正在执行的 PL object ID |
  | PLSQL_SUBPROGRAM_ID |当前正在执行的 PL subprogram ID |
  | PLSQL_SUBPROGRAM_NAME |当前正在执行的 PL subprogram  name |
  | BLOCKING_SESSION_ID         | 如果当前会话被阻塞，显示阻塞该会话的会话 ID，目前仅在锁冲突场景生效，展示持有锁的会话 ID     |
  | TABLET_ID                   | 当前 SQL 正在处理的 Tablet 的 ID    |
  | PROXY_SID                   | 代理会话 ID     |
  | TX_ID                       | 当前事务 ID     |
  | DELTA_READ_IO_REQUESTS      | 两次采样之间读的次数     |
  | DELTA_READ_IO_BYTES         | 两次采样之间读的文件累计大小     |
  | DELTA_WRITE_IO_REQUESTS     | 两次采样之间写的次数     |
  | DELTA_WRITE_IO_BYTES        | 两次采样之间写的文件累计大小     |

    有关 oceanbase.CDB_WR_ACTIVE_SESSION_HISTORY 视图的更多信息，请参见 [oceanbase.CDB_WR_ACTIVE_SESSION_HISTORY](../../../700.system-views/300.system-view-of-sys-tenant/200.dictionary-view-of-sys-tenant/13300.o-cdb_wr_active_session_history-of-sys-tenant.md)。

* **通过 `oceanbase.DBA_WR_ACTIVE_SESSION_HISTORY` 视图查看本租户持久化后的 ASH 数据。**

  ```shell
  obclient [oceanbase]> SELECT * FROM oceanbase.DBA_WR_ACTIVE_SESSION_HISTORY limit 1\G
  ```

    返回结果如下：

    ```shell
    *************************** 1. row ***************************
                    CLUSTER_ID: 10001
                      TENANT_ID: 1002
                        SNAP_ID: 1
                        SVR_IP: xx.xx.xx.xx
                      SVR_PORT: 2882
                      SAMPLE_ID: 740
                    SESSION_ID: -9223372036854729597
                    SAMPLE_TIME: 2025-02-28 09:43:43.809287
                        USER_ID: 200001
                  SESSION_TYPE: 1
                  SESSION_STATE: WAITING
                        SQL_ID:
                      TRACE_ID: YBXXXXXXXX-000XXXXXXXXXXXX-0-0
                      EVENT_NO: 29
                      EVENT_ID: 15102
                    TIME_WAITED: 199579
                            P1: 200000
                            P2: 0
                            P3: 0
              SQL_PLAN_LINE_ID: NULL
                      GROUP_ID: 0
                      PLAN_HASH: NULL
                      THREAD_ID: 82046
                      STMT_TYPE: NULL
                    TIME_MODEL: 0
                      IN_PARSE: N
                    IN_PL_PARSE: N
                  IN_PLAN_CACHE: N
                IN_SQL_OPTIMIZE: N
              IN_SQL_EXECUTION: N
                IN_PX_EXECUTION: N
              IN_SEQUENCE_LOAD: N
                  IN_COMMITTING: N
                IN_STORAGE_READ: N
              IN_STORAGE_WRITE: N
        IN_REMOTE_DAS_EXECUTION: N
                IN_FILTER_ROWS: N
                  IN_RPC_ENCODE: N
                  IN_RPC_DECODE: N
              IN_CONNECTION_MGR: N
                        PROGRAM: T1002_LogService
                        MODULE: LOCAL INNER SQL EXEC
                        ACTION: NULL_INNER_SQL
                      CLIENT_ID: NULL
                      BACKTRACE: NULL
                        PLAN_ID: 0
                  TM_DELTA_TIME: 739151
              TM_DELTA_CPU_TIME: 165
              TM_DELTA_DB_TIME: 165
              TOP_LEVEL_SQL_ID: NULL
          IN_PLSQL_COMPILATION: N
            IN_PLSQL_EXECUTION: N
          PLSQL_ENTRY_OBJECT_ID: NULL
      PLSQL_ENTRY_SUBPROGRAM_ID: NULL
    PLSQL_ENTRY_SUBPROGRAM_NAME: NULL
                PLSQL_OBJECT_ID: NULL
            PLSQL_SUBPROGRAM_ID: NULL
          PLSQL_SUBPROGRAM_NAME: NULL
            BLOCKING_SESSION_ID: NULL
                      TABLET_ID: NULL
                      PROXY_SID: -9223372036854729597
                          TX_ID: NULL
        DELTA_READ_IO_REQUESTS: 0
            DELTA_READ_IO_BYTES: 0
        DELTA_WRITE_IO_REQUESTS: 0
          DELTA_WRITE_IO_BYTES: 0
    1 row in set (0.093 sec)
    ```

  各字段的解释如下：

  | **字段**  | **描述** |
  | --- | --- |
  | CLUSTER_ID  | 集群 ID |
  | TENANT_ID  | 租户 ID |
  | SNAP_ID  | 快照 ID |
  | SVR_IP  | 节点 IP |
  | SVR_PORT  | 节点 PORT |
  | SAMPLE_ID  | 采样 ID |
  | SESSION_ID  | 被采样会话的 ID |
  | SAMPLE_TIME  | 采样时间 |
  | USER_ID  | 被采样 SESSION 的用户 ID |
  | SESSION_TYPE  | SESSION 类型 <ul><li>N：FOREGROUND 表示前台会话，即用户会话  </li><li>Y：BACKGROUND 表示后台会话 </li></ul> |
  | SESSION_STATE| SESSION 采样时刻的状态 <ul><li>`EVENT_NO == 0`："ON CPU" 表示当前没有等待，正在执行 SQL 逻辑  </li><li>`EVENT_NO ≠ 0`： "WAITTING" 表示当前正在等待，详细等待内容参考 EVENT 字段 </li></ul> |
  | SQL_ID  | SQL ID |
  | TRACE_ID| TRACE_ID |
  | EVENT_NO  | 等待事件内部编号，用于和其他表关联查询 |
  | EVENT_ID  | 表示当前等待事件的 ID |
  | TIME_WAITED  | 该等待事件的总等待时间，单位为微秒（us） |
  | P1  | 等待事件参数 1 的值 |
  | P2  | 等待事件参数 2 的值 |
  | P3  | 等待事件参数 3 的值 |
  | SQL_PLAN_LINE_ID  | 采样时对应 SQL 算子 ID。无对应算子时值为 NULL |
  | GROUP_ID          | 采样点的 Group 信息|
  | PLAN_HASH                   | 当前执行 SQL 命令对应 Plan Hash     |
  | THREAD_ID                   | 当前活跃会话所在的线程 ID    |
  | STMT_TYPE                   | 当前活跃会话的 SQL 类型     |  
  | TIME_MODEL  | TIME MODEL 的相关信息 |
  | IN_PARSE  | 采样时当前 SESSION 是否正在做 SQL Parse |
  | IN_PL_PARSE  | 采样时当前 SESSION 是否正在做 SQL PL Parse |
  | IN_PLAN_CACHE  | 采样时当前 SESSION 是否正在做 plan cache |
  | IN_SQL_OPTIMIZE  | 采样时当前 SESSION 是否正在做 SQL 优化 |
  | IN_SQL_EXECUTION  | 采样时当前 SESSION 是否正在做 SQL 执行 |
  | IN_PX_EXECUTION  | 采样时当前 SESSION 是否正在做 SQL  并行执行。当 SESSION 处于本状态时，一定也处于 IN_SQL_EXECUTION 状态。 |
  | IN_SEQUENCE_LOAD  | 采样时当前 SESSION 是否正在做自增列或 SEQUENCE 取值 |
  | IN_COMMITTING  | 当前采样点是否处于事务提交阶段 |
  | IN_STORAGE_READ  | 当前采样点是否处于存储读阶段 |
  | IN_STORAGE_WRITE  | 当前采样点是否处于存储写阶段 |
  | IN_REMOTE_DAS_EXECUTION  | 当前采样点是否处于 DAS 远程执行阶段 |
  | IN_FILTER_ROWS           | 当前采样点的是否处于存储下压执行阶段  |
  | IN_RPC_ENCODE               | 当前 SQL 正在进行的序列化操作    |
  | IN_RPC_DECODE               | 当前 SQL 正在进行的反序列化操作     |
  | IN_CONNECTION_MGR           | 当前 SQL 正在进行建链接操作     |
  | PROGRAM                  |当前采样点正在执行的程序名:<ul><li>后台线程：指线程名称，例如 `observer`、`WrTimer` 等  </li><li>前台线程:<ul><li>普通请求为 `user@client_ip (thread_name)`  </li><li>`inner_sql` 远程执行为 `INNER SQL REMOTE EXEC (thread_name)` </li><li>DAS 远程执行为 `DAS REMOTE EXEC (thread_name)` </li></ul> </li></ul>  |
  | MODULE| 采样时刻当前 SESSION 上记录的 MODULE 值，通过 `DBMS_APPLICATION_INFO.SET_MODULE` 包设置 |
  | ACTION| 采样时刻当前 SESSION 上记录的 ACTION 值，通过 `DBMS_APPLICATION_INFO.SET_ACTION` 包设置 |
  | CLIENT_ID| 采样时刻当前 SESSION 上记录的 CLIENT_ID 值，通过 `DBMS_APPLICATION_INFO.set_identifier` 包设置 |
  | BACKTRACE | 辅助调试字段，用于记录事件发生时的代码调用栈 |
  | PLAN_ID  | 采样到的 SQL 在 PLAN CACHE 中的计划 ID，用于将采样点与计划关联起来 |
  | TM_DELTA_TIME |计算 time model 的时间间隔，单位为微秒 |
  | TM_DELTA_CPU_TIME |过去 `TM_DELTA_TIME` 时间段内在 CPU 上花费的时间量 |
  | TM_DELTA_DB_TIME |过去 `TM_DELTA_TIME` 时间段内在数据库调用中花费的时间量 |
  | TOP_LEVEL_SQL_ID |顶层 SQL ID |
  | IN_PLSQL_COMPILATION |当前 PL 编译状态：Y/N |
  | IN_PLSQL_EXECUTION |当前 PL 执行状态：Y/N |
  | PLSQL_ENTRY_OBJECT_ID |顶层 PL 的 OBJECT ID |
  | PLSQL_ENTRY_SUBPROGRAM_ID |顶层 PL 的 Sub project ID |
  | PLSQL_ENTRY_SUBPROGRAM_NAME |顶层 PL 的 Sub project name |
  | PLSQL_OBJECT_ID |当前正在执行的 PL object ID |
  | PLSQL_SUBPROGRAM_ID |当前正在执行的 PL subprogram ID |
  | PLSQL_SUBPROGRAM_NAME |当前正在执行的 PL subprogram  name |
  | BLOCKING_SESSION_ID         | 如果当前会话被阻塞，显示阻塞该会话的会话 ID，目前仅在锁冲突场景生效，展示持有锁的会话 ID     |
  | TABLET_ID                   | 当前 SQL 正在处理的 Tablet 的 ID    |
  | PROXY_SID                   | 代理会话 ID     |
  | TX_ID                       | 当前事务 ID     |
  | DELTA_READ_IO_REQUESTS      | 两次采样之间读的次数     |
  | DELTA_READ_IO_BYTES         | 两次采样之间读的文件累计大小     |
  | DELTA_WRITE_IO_REQUESTS     | 两次采样之间写的次数     |
  | DELTA_WRITE_IO_BYTES        | 两次采样之间写的文件累计大小     |

    有关 `DBA_WR_ACTIVE_SESSION_HISTORY` 视图的更多信息，请参见 [oceanbase.DBA_WR_ACTIVE_SESSION_HISTORY](../../../700.system-views/400.system-view-of-mysql-mode/200.dictionary-view-of-mysql-mode/15700.o-dba_wr_active_session_history-of-mysql-mode.md) 和 [DBA_WR_ACTIVE_SESSION_HISTORY](../../../700.system-views/500.system-view-of-oracle-mode/200.dictionary-view-of-oracle-mode/22700.dba_wr_active_session_history-of-oracle-mode.md)。

* **通过 `GV$OB_ACTIVE_SESSION_HISTORY` 视图查看活跃会话历史记录。**

  ```shell
  obclient [oceanbase]> SELECT * FROM oceanbase.GV$OB_ACTIVE_SESSION_HISTORY limit 1\G
  ```

  查询结果如下：

  ```shell
    *************************** 1. row ***************************
                        SVR_IP: xx.xx.xx.xx
                      SVR_PORT: 2882
                      SAMPLE_ID: 1912993
                    SAMPLE_TIME: 2025-03-04 10:25:06.155640
                        CON_ID: 1001
                        USER_ID: 0
                    SESSION_ID: -9223372036854729409
                  SESSION_TYPE: BACKGROUND
                  SESSION_STATE: ON CPU
                        SQL_ID: NULL
                        PLAN_ID: 0
                      TRACE_ID: NULL
                          EVENT:
                      EVENT_NO: 0
                      EVENT_ID: NULL
                        P1TEXT:
                            P1: 0
                        P2TEXT:
                            P2: 0
                        P3TEXT:
                            P3: 0
                    WAIT_CLASS: OTHER
                  WAIT_CLASS_ID: 100
                    TIME_WAITED: 0
              SQL_PLAN_LINE_ID: NULL
                      GROUP_ID: 0
                      PLAN_HASH: NULL
                      THREAD_ID: 82216
                      STMT_TYPE: NULL
                    TIME_MODEL: 0
                      IN_PARSE: N
                    IN_PL_PARSE: N
                  IN_PLAN_CACHE: N
                IN_SQL_OPTIMIZE: N
              IN_SQL_EXECUTION: N
                IN_PX_EXECUTION: N
              IN_SEQUENCE_LOAD: N
                  IN_COMMITTING: N
                IN_STORAGE_READ: N
              IN_STORAGE_WRITE: N
        IN_REMOTE_DAS_EXECUTION: N
                IN_FILTER_ROWS: N
                  IN_RPC_ENCODE: N
                  IN_RPC_DECODE: N
              IN_CONNECTION_MGR: N
                        PROGRAM: T1001_LogService
                        MODULE: LogRestoreService
                        ACTION: RemoteLogWriter
                      CLIENT_ID: NULL
                      BACKTRACE: NULL
                  TM_DELTA_TIME: 1017574
              TM_DELTA_CPU_TIME: 1017574
              TM_DELTA_DB_TIME: 1017574
              TOP_LEVEL_SQL_ID: NULL
          IN_PLSQL_COMPILATION: N
            IN_PLSQL_EXECUTION: N
          PLSQL_ENTRY_OBJECT_ID: NULL
      PLSQL_ENTRY_SUBPROGRAM_ID: NULL
    PLSQL_ENTRY_SUBPROGRAM_NAME: NULL
                PLSQL_OBJECT_ID: NULL
            PLSQL_SUBPROGRAM_ID: NULL
          PLSQL_SUBPROGRAM_NAME: NULL
            BLOCKING_SESSION_ID: NULL
                      TABLET_ID: NULL
                      PROXY_SID: -9223372036854729409
                          TX_ID: NULL
        DELTA_READ_IO_REQUESTS: 0
            DELTA_READ_IO_BYTES: 0
        DELTA_WRITE_IO_REQUESTS: 0
          DELTA_WRITE_IO_BYTES: 0
    1 row in set (0.052 sec)
  ```

  各字段的解释如下：

  | **字段**  | **描述** |
  | --- | --- |
  | SVR_IP |样本所属服务器 IP |
  | SVR_PORT | 样本所属服务器端口号 |
  | SAMPLE_ID | 样本本机唯一编号 |
  | SAMPLE_TIME | 采样时间 |
  | CON_ID | 租户 ID |
  | USER_ID | 被采样会话的用户 ID |
  | SESSION_ID | 被采样会话的 ID |
  | SESSION_TYPE | 会话类型：<ul><li>FOREGROUND：前台会话，即：用户会话  </li><li>（暂不支持）BACKGROUND：后台会话 </li></ul>|
  | SESSION_STATE | 会话状态：<ul><li>ON CPU：当前没有等待，正在执行 SQL 逻辑  </li><li>WAITING：当前正在等待，详细等待内容参考 EVENT 字段 </li></ul>|
  | SQL_ID | SQL ID |
  | PLAN_ID | 采样到的 SQL 在 PLAN CACHE 中的计划 ID，用于将采样点与计划关联起来 |
  | TRACE_ID | 算子的 Trace ID |
  | EVENT | 等待事件的描述 |
  | EVENT_NO | 等待事件内部编号，用于和其他表关联查询 |
  | EVENT_ID | 表示当前等待事件的 ID |
  | P1TEXT | 等待事件的参数 1 的名称，EVENT 不同，这里的名称也会相应变化 |
  | P1 | 等待事件参数 1 的值 |
  | P2TEXT | 等待事件的参数 2 的名称，EVENT 不同，这里的名称也会相应变化 |
  | P2 | 等待事件参数 2 的值 |
  | P3TEXT | 等待事件的参数 3 的名称，EVENT 不同，这里的名称也会相应变化 |
  | P3 | 等待事件参数 3 的值 |
  | WAIT_CLASS | 等待事件所属类型 |
  | WAIT_CLASS_ID | 等待事件所属类型的 ID，用于和其他表关联查询 |
  | TIME_WAITED | 该等待事件的总等待时间，单位为微秒（us） |
  | SQL_PLAN_LINE_ID | 会话在采样时 SQL 算子在 SQL 计划中的编号 |
  | GROUP_ID         | 采样点的 Group 信息|
  | PLAN_HASH                   | 当前执行 SQL 命令对应 Plan Hash     |
  | THREAD_ID                   | 当前活跃会话所在的线程 ID    |
  | STMT_TYPE                   | 当前活跃会话的 SQL 类型     |  
  | IN_PARSE | 会话在采样时是否正在做 SQL Parse |
  | IN_PL_PARSE | 会话在采样时是否正在做 SQL PL Parse |
  | IN_PLAN_CACHE | 会话在采样时是否正在做 Plan Cache 匹配 |
  | IN_SQL_OPTIMIZE | 会话在采样时是否正在做 SQL 解析优化 |
  | IN_SQL_EXECUTION | 会话在采样时是否正在做 SQL 执行 |
  | IN_PX_EXECUTION | 会话在采样时是否正在做 SQL 并行执行。当会话处于本状态时，一定也处于 IN_SQL_EXECUTION 状态 |
  | IN_SEQUENCE_LOAD | 会话在采样时是否正在做自增列或 SEQUENCE 取值 |
  | IN_COMMITTING | 当前采样点是否处于事务提交阶段 |
  | IN_STORAGE_READ | 当前采样点是否处于存储读阶段 |
  | IN_STORAGE_WRITE | 当前采样点是否处于存储写阶段 |
  | IN_REMOTE_DAS_EXECUTION | 当前采样点是否处于 DAS 远程执行阶段 |
  | IN_FILTER_ROWS | 表示当前采样点的是否处于存储下压执行阶段 |
  | IN_RPC_ENCODE               | 当前 SQL 正在进行的序列化操作    |
  | IN_RPC_DECODE               | 当前 SQL 正在进行的反序列化操作     |
  | IN_CONNECTION_MGR           | 当前 SQL 正在进行建链接操作     |
  | PROGRAM | 当前采样点正在执行的程序名:<ul><li>后台线程：指线程名称，例如 `observer`、`WrTimer` 等  </li><li>前台线程:<ul><li>普通请求为 `user@client_ip (thread_name)`  </li><li>`inner_sql` 远程执行为 `INNER SQL REMOTE EXEC (thread_name)` </li><li>DAS 远程执行为 `DAS REMOTE EXEC (thread_name)` </li></ul> </li></ul>|
  | MODULE | 会话在采样时记录的 MODULE 值，通过 `DBMS_APPLICATION_INFO.SET_MODULE` 包设置。 |
  | ACTION | 会话在采样时记录的 ACTION 值，通过 `DBMS_APPLICATION_INFO.SET_ACTION` 包设置。 |
  | CLIENT_ID | 会话在采样时记录的 CLIENT_ID 值，通过 `DBMS_APPLICATION_INFO.set_identifier` 包设置。 |
  | BACKTRACE | 辅助调试字段，用于记录事件发生时的代码调用栈。该字段的值一直为 NULL |
  | TM_DELTA_TIME | 计算 time model 的时间间隔，单位为微秒 |
  | TM_DELTA_CPU_TIME | 过去 `TM_DELTA_TIME` 时间段内在 CPU 上花费的时间量 |
  | TM_DELTA_DB_TIME | 过去 `TM_DELTA_TIME` 时间段内在数据库调用中花费的时间量 |
  | TOP_LEVEL_SQL_ID | 顶层 SQL ID |
  | IN_PLSQL_COMPILATION | 当前 PL 编译状态：Y/N |
  | IN_PLSQL_EXECUTION | 当前 PL 执行状态：Y/N |
  | PLSQL_ENTRY_OBJECT_ID | 顶层 PL 的 OBJECT ID |
  | PLSQL_ENTRY_SUBPROGRAM_ID | 顶层 PL 的 Sub project ID |
  | PLSQL_ENTRY_SUBPROGRAM_NAME | 顶层 PL 的 Sub project name |
  | PLSQL_OBJECT_ID | 当前正在执行的 PL object ID |
  | PLSQL_SUBPROGRAM_ID | 当前正在执行的 PL subprogram ID |
  | PLSQL_SUBPROGRAM_NAME | 当前正在执行的 PL subprogram  name |
  | BLOCKING_SESSION_ID         | 如果当前会话被阻塞，显示阻塞该会话的会话 ID，目前仅在锁冲突场景生效，展示持有锁的会话 ID     |
  | TABLET_ID                   | 当前 SQL 正在处理的 Tablet 的 ID    |
  | PROXY_SID                   | 代理会话 ID     |
  | TX_ID                       | 当前事务 ID     |
  | DELTA_READ_IO_REQUESTS      | 两次采样之间读的次数     |
  | DELTA_READ_IO_BYTES         | 两次采样之间读的文件累计大小     |
  | DELTA_WRITE_IO_REQUESTS     | 两次采样之间写的次数     |
  | DELTA_WRITE_IO_BYTES        | 两次采样之间写的文件累计大小     |

    有关 `GV$OB_ACTIVE_SESSION_HISTORY` 视图的更多信息，请参见 [GV$OB_ACTIVE_SESSION_HISTORY](../../../700.system-views/400.system-view-of-mysql-mode/300.performance-view-of-mysql-mode/400.gv-ob_active_session_history-of-mysql-mode.md)。

* **通过 `V$OB_ACTIVE_SESSION_HISTORY` 视图查看当前活跃会话历史记录。**

  ```shell
  obclient [oceanbase]> SELECT * FROM oceanbase.V$OB_ACTIVE_SESSION_HISTORY limit 1\G
  ```

  查询结果如下：

  ```shell
  *************************** 1. row ***************************
                      SVR_IP: xx.xx.xx.xx
                    SVR_PORT: 2882
                    SAMPLE_ID: 1919434
                  SAMPLE_TIME: 2025-03-04 10:44:17.593988
                      CON_ID: 1001
                      USER_ID: 0
                  SESSION_ID: -9223372036854729409
                SESSION_TYPE: BACKGROUND
                SESSION_STATE: ON CPU
                      SQL_ID: NULL
                      PLAN_ID: 0
                    TRACE_ID: NULL
                        EVENT:
                    EVENT_NO: 0
                    EVENT_ID: NULL
                      P1TEXT:
                          P1: 0
                      P2TEXT:
                          P2: 0
                      P3TEXT:
                          P3: 0
                  WAIT_CLASS: OTHER
                WAIT_CLASS_ID: 100
                  TIME_WAITED: 0
            SQL_PLAN_LINE_ID: NULL
                    GROUP_ID: 0
                    PLAN_HASH: NULL
                    THREAD_ID: 82216
                    STMT_TYPE: NULL
                  TIME_MODEL: 0
                    IN_PARSE: N
                  IN_PL_PARSE: N
                IN_PLAN_CACHE: N
              IN_SQL_OPTIMIZE: N
            IN_SQL_EXECUTION: N
              IN_PX_EXECUTION: N
            IN_SEQUENCE_LOAD: N
                IN_COMMITTING: N
              IN_STORAGE_READ: N
            IN_STORAGE_WRITE: N
      IN_REMOTE_DAS_EXECUTION: N
              IN_FILTER_ROWS: N
                IN_RPC_ENCODE: N
                IN_RPC_DECODE: N
            IN_CONNECTION_MGR: N
                      PROGRAM: T1001_LogService
                      MODULE: LogRestoreService
                      ACTION: RemoteLogWriter
                    CLIENT_ID: NULL
                    BACKTRACE: NULL
                TM_DELTA_TIME: 1017436
            TM_DELTA_CPU_TIME: 1017436
            TM_DELTA_DB_TIME: 1017436
            TOP_LEVEL_SQL_ID: NULL
        IN_PLSQL_COMPILATION: N
          IN_PLSQL_EXECUTION: N
        PLSQL_ENTRY_OBJECT_ID: NULL
    PLSQL_ENTRY_SUBPROGRAM_ID: NULL
  PLSQL_ENTRY_SUBPROGRAM_NAME: NULL
              PLSQL_OBJECT_ID: NULL
          PLSQL_SUBPROGRAM_ID: NULL
        PLSQL_SUBPROGRAM_NAME: NULL
          BLOCKING_SESSION_ID: NULL
                    TABLET_ID: NULL
                    PROXY_SID: -9223372036854729409
                        TX_ID: NULL
      DELTA_READ_IO_REQUESTS: 0
          DELTA_READ_IO_BYTES: 0
      DELTA_WRITE_IO_REQUESTS: 0
        DELTA_WRITE_IO_BYTES: 0
  1 row in set (0.026 sec)
  ```

  各字段的解释如下：

  | **字段**  | **描述** |
  | --- | --- |
  | SVR_IP |样本所属服务器 IP |
  | SVR_PORT | 样本所属服务器端口号 |
  | SAMPLE_ID | 样本本机唯一编号 |
  | SAMPLE_TIME | 采样时间 |
  | CON_ID | 租户 ID |
  | USER_ID | 被采样会话的用户 ID |
  | SESSION_ID | 被采样会话的 ID |
  | SESSION_TYPE | 会话类型：<ul><li>FOREGROUND：前台会话，即：用户会话  </li><li>（暂不支持）BACKGROUND：后台会话 </li></ul>|
  | SESSION_STATE | 会话状态：<ul><li>ON CPU：当前没有等待，正在执行 SQL 逻辑  </li><li>WAITING：当前正在等待，详细等待内容参考 EVENT 字段 </li></ul>|
  | SQL_ID | SQL ID |
  | PLAN_ID | 采样到的 SQL 在 PLAN CACHE 中的计划 ID，用于将采样点与计划关联起来 |
  | TRACE_ID | 算子的 Trace ID |
  | EVENT | 等待事件的描述 |
  | EVENT_NO | 等待事件内部编号，用于和其他表关联查询 |
  | EVENT_ID | 表示当前等待事件的 ID |
  | P1TEXT | 等待事件的参数 1 的名称，EVENT 不同，这里的名称也会相应变化 |
  | P1 | 等待事件参数 1 的值 |
  | P2TEXT | 等待事件的参数 2 的名称，EVENT 不同，这里的名称也会相应变化 |
  | P2 | 等待事件参数 2 的值 |
  | P3TEXT | 等待事件的参数 3 的名称，EVENT 不同，这里的名称也会相应变化 |
  | P3 | 等待事件参数 3 的值 |
  | WAIT_CLASS | 等待事件所属类型 |
  | WAIT_CLASS_ID | 等待事件所属类型的 ID，用于和其他表关联查询 |
  | TIME_WAITED | 该等待事件的总等待时间，单位为微秒（us） |
  | SQL_PLAN_LINE_ID | 会话在采样时 SQL 算子在 SQL 计划中的编号 |
  | GROUP_ID         | 采样点的 Group 信息|
  | PLAN_HASH                   | 当前执行 SQL 命令对应 Plan Hash     |
  | THREAD_ID                   | 当前活跃会话所在的线程 ID    |
  | STMT_TYPE                   | 当前活跃会话的 SQL 类型     |
  | IN_PARSE | 会话在采样时是否正在做 SQL Parse |
  | IN_PL_PARSE | 会话在采样时是否正在做 SQL PL Parse |
  | IN_PLAN_CACHE | 会话在采样时是否正在做 Plan Cache 匹配 |
  | IN_SQL_OPTIMIZE | 会话在采样时是否正在做 SQL 解析优化 |
  | IN_SQL_EXECUTION | 会话在采样时是否正在做 SQL 执行 |
  | IN_PX_EXECUTION | 会话在采样时是否正在做 SQL 并行执行。当会话处于本状态时，一定也处于 IN_SQL_EXECUTION 状态 |
  | IN_SEQUENCE_LOAD | 会话在采样时是否正在做自增列或 SEQUENCE 取值 |
  | IN_COMMITTING | 当前采样点是否处于事务提交阶段 |
  | IN_STORAGE_READ | 当前采样点是否处于存储读阶段 |
  | IN_STORAGE_WRITE | 当前采样点是否处于存储写阶段 |
  | IN_REMOTE_DAS_EXECUTION | 当前采样点是否处于 DAS 远程执行阶段 |
  | IN_FILTER_ROWS | 表示当前采样点的是否处于存储下压执行阶段 |
  | IN_RPC_ENCODE               | 当前 SQL 正在进行的序列化操作    |
  | IN_RPC_DECODE               | 当前 SQL 正在进行的反序列化操作     |
  | IN_CONNECTION_MGR           | 当前 SQL 正在进行建链接操作     |
  | PROGRAM | 当前采样点正在执行的程序名:<ul><li>后台线程：指线程名称，例如 `observer`、`WrTimer` 等  </li><li>前台线程:<ul><li>普通请求为 `user@client_ip (thread_name)`  </li><li>`inner_sql` 远程执行为 `INNER SQL REMOTE EXEC (thread_name)` </li><li>DAS 远程执行为 `DAS REMOTE EXEC (thread_name)` </li></ul> </li></ul>|
  | MODULE | 会话在采样时记录的 MODULE 值，通过 `DBMS_APPLICATION_INFO.SET_MODULE` 包设置。 |
  | ACTION | 会话在采样时记录的 ACTION 值，通过 `DBMS_APPLICATION_INFO.SET_ACTION` 包设置。 |
  | CLIENT_ID | 会话在采样时记录的 CLIENT_ID 值，通过 `DBMS_APPLICATION_INFO.set_identifier` 包设置。 |
  | BACKTRACE | 辅助调试字段，用于记录事件发生时的代码调用栈。该字段的值一直为 NULL |
  | TM_DELTA_TIME | 计算 time model 的时间间隔，单位为微秒 |
  | TM_DELTA_CPU_TIME | 过去 `TM_DELTA_TIME` 时间段内在 CPU 上花费的时间量 |
  | TM_DELTA_DB_TIME | 过去 `TM_DELTA_TIME` 时间段内在数据库调用中花费的时间量 |
  | TOP_LEVEL_SQL_ID | 顶层 SQL ID |
  | IN_PLSQL_COMPILATION | 当前 PL 编译状态：Y/N |
  | IN_PLSQL_EXECUTION | 当前 PL 执行状态：Y/N |
  | PLSQL_ENTRY_OBJECT_ID | 顶层 PL 的 OBJECT ID |
  | PLSQL_ENTRY_SUBPROGRAM_ID | 顶层 PL 的 Sub project ID |
  | PLSQL_ENTRY_SUBPROGRAM_NAME | 顶层 PL 的 Sub project name |
  | PLSQL_OBJECT_ID | 当前正在执行的 PL object ID |
  | PLSQL_SUBPROGRAM_ID | 当前正在执行的 PL subprogram ID |
  | PLSQL_SUBPROGRAM_NAME | 当前正在执行的 PL subprogram  name |
  | BLOCKING_SESSION_ID         | 如果当前会话被阻塞，显示阻塞该会话的会话 ID，目前仅在锁冲突场景生效，展示持有锁的会话 ID     |
  | TABLET_ID                   | 当前 SQL 正在处理的 Tablet 的 ID    |
  | PROXY_SID                   | 代理会话 ID     |
  | TX_ID                       | 当前事务 ID     |
  | DELTA_READ_IO_REQUESTS      | 两次采样之间读的次数     |
  | DELTA_READ_IO_BYTES         | 两次采样之间读的文件累计大小     |
  | DELTA_WRITE_IO_REQUESTS     | 两次采样之间写的次数     |
  | DELTA_WRITE_IO_BYTES        | 两次采样之间写的文件累计大小     |

    有关 `V$OB_ACTIVE_SESSION_HISTORY` 视图的更多信息，请参见 [V$OB_ACTIVE_SESSION_HISTORY](../../../700.system-views/400.system-view-of-mysql-mode/300.performance-view-of-mysql-mode/30400.v-ob_active_session_history-of-mysql-mode.md)。

## 查看历史会话统计项

* **通过 `oceanbase.CDB_WR_STATNAME` 视图查看所有租户的系统统计项的名称。**

  ```sql
  obclient [oceanbase]> SELECT * FROM oceanbase.CDB_WR_STATNAME limit 1;
  ```

  返回结果如下：

  ```sql
    +------------+-----------+---------+---------------+
    | CLUSTER_ID | TENANT_ID | STAT_ID | STAT_NAME     |
    +------------+-----------+---------+---------------+
    |       4000 |         1 |   10000 | rpc packet in |
    +------------+-----------+---------+---------------+
    1 row in set (0.001 sec)
  ```

  各字段的解释如下：

  | **字段**  | **描述** |
  | --- | --- |
  | CLUSTER_ID  | 集群 ID |
  | TENANT_ID  | 租户 ID |
  | STAT_ID  | 统计项 ID |
  | STAT_NAME | 统计项名字 |

    有关 oceanbase.CDB_WR_STATNAME 视图的更多信息，请参见 [oceanbase.CDB_WR_STATNAME](../../../700.system-views/300.system-view-of-sys-tenant/200.dictionary-view-of-sys-tenant/13900.o-cdb_wr_statname-of-sys-tenant.md)。

* **通过 `oceanbase.DBA_WR_STATNAME` 视图查看本租户的系统统计项的名称。**

  ```sql
  obclient [oceanbase]> SELECT * FROM oceanbase.DBA_WR_STATNAME limit 1;
  ```

  返回结果如下：

  ```sql
    +------------+-----------+---------+---------------+
    | CLUSTER_ID | TENANT_ID | STAT_ID | STAT_NAME     |
    +------------+-----------+---------+---------------+
    |       4000 |         1 |   10000 | rpc packet in |
    +------------+-----------+---------+---------------+
    1 row in set (0.004 sec)
  ```

  各字段的解释如下：

  | **字段**  | **描述** |
  | --- | --- |
  | CLUSTER_ID  | 集群 ID |
  | TENANT_ID  | 租户 ID |
  | STAT_ID  | 统计项 ID |
  | STAT_NAME | 统计项名字 |

    有关 DBA_WR_STATNAME 视图的更多信息，请参见 [oceanbase.DBA_WR_STATNAME](../../../700.system-views/400.system-view-of-mysql-mode/200.dictionary-view-of-mysql-mode/16300.o-dba_wr_statname-of-mysql-mode.md) 和 [DBA_WR_STATNAME](../../../700.system-views/500.system-view-of-oracle-mode/200.dictionary-view-of-oracle-mode/23300.dba_wr_statname-of-oracle-mode.md)。

* **通过 `oceanbase.CDB_WR_SYSSTAT` 视图查看所有租户的系统统计项的详细信息。**

  ```shell
  obclient [oceanbase]> SELECT * FROM oceanbase.CDB_WR_SYSSTAT limit 1;
  ```

  返回结果如下：

  ```sql
    +------------+-----------+---------+----------------+----------+---------+--------+
    | CLUSTER_ID | TENANT_ID | SNAP_ID | SVR_IP         | SVR_PORT | STAT_ID | VALUE  |
    +------------+-----------+---------+----------------+----------+---------+--------+
    |       4000 |         1 |     114 | xx.xx.xx.xx    |     2882 |   10000 | 228856 |
    +------------+-----------+---------+----------------+----------+---------+--------+
    1 row in set (0.036 sec)
  ```

  各字段的解释如下：

  | **字段**  | **描述** |
  | --- | --- | 
  | CLUSTER_ID  | 集群 ID |
  | TENANT_ID  | 租户 ID |
  | SNAP_ID  | 快照 ID |
  | SVR_IP  | 节点 IP |
  | SVR_PORT  | 节点 PORT |
  | STAT_ID  | 统计项 ID |
  | VALUE  | 统计项的值 |

    有关 oceanbase.CDB_WR_SYSSTAT 视图的更多信息，请参见 [oceanbase.CDB_WR_SYSSTAT](../../../700.system-views/300.system-view-of-sys-tenant/200.dictionary-view-of-sys-tenant/14100.o-cdb_wr_sysstat-of-sys-tenant.md)。

* **通过 `oceanbase.DBA_WR_SYSSTAT` 视图查看本租户的系统统计项的详细信息。**

  ```shell
  obclient [oceanbase]> SELECT * FROM oceanbase.DBA_WR_SYSSTAT limit 1;
  ```

  返回结果如下：

  ```sql
    +------------+-----------+---------+----------------+----------+---------+--------+
    | CLUSTER_ID | TENANT_ID | SNAP_ID | SVR_IP         | SVR_PORT | STAT_ID | VALUE  |
    +------------+-----------+---------+----------------+----------+---------+--------+
    |       4000 |         1 |     114 | xx.xx.xx.xx    |     2882 |   10000 | 228856 |
    +------------+-----------+---------+----------------+----------+---------+--------+
    1 row in set (0.026 sec)
  ```

  各字段的解释如下：

  | **字段**  | **描述** |
  | --- | --- |
  | CLUSTER_ID  | 集群 ID |
  | TENANT_ID  | 租户 ID |
  | SNAP_ID  | 快照 ID |
  | SVR_IP  | 节点 IP |
  | SVR_PORT  | 节点 PORT |
  | STAT_ID  | 统计项 ID |
  | VALUE  | 统计项的值 |

    有关 DBA_WR_STATNAME 视图的更多信息，请参见 [oceanbase.DBA_WR_SYSSTAT](../../../700.system-views/400.system-view-of-mysql-mode/200.dictionary-view-of-mysql-mode/16500.o-dba_wr_sysstat-of-mysql-mode.md) 和 [DBA_WR_SYSSTAT](../../../700.system-views/500.system-view-of-oracle-mode/200.dictionary-view-of-oracle-mode/23500.dba_wr_sysstat-of-oracle-mode.md)。

## 查看 time model 统计项

* **通过 `GV$OB_SESS_TIME_MODEL` 查看集群中 Session 级别的 Time Model 统计项。**

  ```shell
  obclient [oceanbase]> SELECT * FROM oceanbase.GV$OB_SESS_TIME_MODEL LIMIT 10;
  ```

  返回结果如下：

  ```shell
  +---------------+-----------+----------------+----------+---------+--------------------+-------+
  | SID           | TENANT_ID | SVR_IP         | SVR_PORT | STAT_ID | STAT_NAME          | VALUE |
  +---------------+-----------+----------------+----------+---------+--------------------+-------+
  | 3298534883328 |      1002 | 172.xx.xxx.xxx |     2882 |  200010 | non idle wait time |     0 |
  | 3298534883328 |      1002 | 172.xx.xxx.xxx |     2882 |  200011 | idle wait time     |     0 |
  | 3848290697216 |      1001 | 172.xx.xxx.xxx |     2882 |  200010 | non idle wait time |     0 |
  | 3848290697216 |      1001 | 172.xx.xxx.xxx |     2882 |  200011 | idle wait time     |     0 |
  |    3221659555 |         1 | 172.xx.xxx.xxx |     2882 |  200010 | non idle wait time |     3 |
  |    3221659555 |         1 | 172.xx.xxx.xxx |     2882 |  200011 | idle wait time     |     0 |
  | 4398046511104 |      1001 | 172.xx.xxx.xxx |     2882 |  200010 | non idle wait time |     0 |
  | 4398046511104 |      1001 | 172.xx.xxx.xxx |     2882 |  200011 | idle wait time     |     0 |
  | 4947802324992 |      1004 | 172.xx.xxx.xxx |     2882 |  200010 | non idle wait time |     0 |
  | 4947802324992 |      1004 | 172.xx.xxx.xxx |     2882 |  200011 | idle wait time     |     0 |
  +---------------+-----------+----------------+----------+---------+--------------------+-------+
  10 rows in set
  ```

  各字段的解释如下：

  | **字段**  | **描述** |
  | --- | --- |
  | SID        |  会话 ID     |
  | TENANT_ID  |  租户 ID     |
  | SVR_IP     |  节点 IP       |
  | SVR_PORT   |  节点端口号        |
  | STAT_ID    |  统计项 ID         |
  | STAT_NAME  |  统计项名称       |
  | VALUE      |  统计项值        |

    有关 `GV$OB_SESS_TIME_MODEL` 视图的更多信息，请参见 [GV$OB_SESS_TIME_MODEL](../../../700.system-views/400.system-view-of-mysql-mode/300.performance-view-of-mysql-mode/3300.gv-ob_sess_time_model-of-mysql-mode.md)。

* **通过 `V$OB_SESS_TIME_MODEL` 视图查看当前节点上 Session 级别的 Time Model 统计项。**

  ```shell
  obclient [oceanbase]> SELECT * FROM oceanbase.V$OB_SESS_TIME_MODEL LIMIT 10;
  ```

  查询结果如下：

  ```shell
  +---------------+-----------+----------------+----------+---------+--------------------+-------+
  | SID           | TENANT_ID | SVR_IP         | SVR_PORT | STAT_ID | STAT_NAME          | VALUE |
  +---------------+-----------+----------------+----------+---------+--------------------+-------+
  | 3298534883328 |      1002 | 172.xx.xxx.xxx |     2882 |  200010 | non idle wait time |     0 |
  | 3298534883328 |      1002 | 172.xx.xxx.xxx |     2882 |  200011 | idle wait time     |     0 |
  | 3848290697216 |      1001 | 172.xx.xxx.xxx |     2882 |  200010 | non idle wait time |     0 |
  | 3848290697216 |      1001 | 172.xx.xxx.xxx |     2882 |  200011 | idle wait time     |     0 |
  | 4398046511104 |      1001 | 172.xx.xxx.xxx |     2882 |  200010 | non idle wait time |     0 |
  | 4398046511104 |      1001 | 172.xx.xxx.xxx |     2882 |  200011 | idle wait time     |     0 |
  |    3221667747 |         1 | 172.xx.xxx.xxx |     2882 |  200010 | non idle wait time |     0 |
  |    3221667747 |         1 | 172.xx.xxx.xxx |     2882 |  200011 | idle wait time     |     0 |
  | 4947802324992 |      1004 | 172.xx.xxx.xxx |     2882 |  200010 | non idle wait time |     0 |
  | 4947802324992 |      1004 | 172.xx.xxx.xxx |     2882 |  200011 | idle wait time     |     0 |
  +---------------+-----------+----------------+----------+---------+--------------------+-------+
  10 rows in set
  ```

  各字段的解释如下：

  | **字段**  | **描述** |
  | --- | --- |
  | SID        |  会话 ID     |
  | TENANT_ID  |  租户 ID     |
  | SVR_IP     |  节点 IP       |
  | SVR_PORT   |  节点端口号        |
  | STAT_ID    |  统计项 ID         |
  | STAT_NAME  |  统计项名称       |
  | VALUE      |  统计项值        |

    有关 `V$OB_SESS_TIME_MODEL` 视图的更多信息，请参见 [V$OB_SESS_TIME_MODEL](../../../700.system-views/400.system-view-of-mysql-mode/300.performance-view-of-mysql-mode/33800.v-ob_sess_time_model-of-mysql-mode.md)。

* **通过 `GV$OB_SYS_TIME_MODEL` 视图查看集群中租户级别的 Time Model 统计项。**

  ```shell
  obclient [oceanbase]> SELECT * FROM oceanbase.GV$OB_SYS_TIME_MODEL;
  ```

  查询结果如下：

  ```shell
  +-----------+----------------+----------+---------+-------------------------+------------+
  | TENANT_ID | SVR_IP         | SVR_PORT | STAT_ID | STAT_NAME               | VALUE      |
  +-----------+----------------+----------+---------+-------------------------+------------+
  |      1002 | 172.xx.xxx.xxx |     2882 |  200001 | DB time                 |    6135115 |
  |      1002 | 172.xx.xxx.xxx |     2882 |  200002 | DB CPU                  |    5500079 |
  |      1002 | 172.xx.xxx.xxx |     2882 |  200005 | background elapsed time | 3398189713 |
  |      1002 | 172.xx.xxx.xxx |     2882 |  200006 | background cpu time     | 3088552955 |
  |      1002 | 172.xx.xxx.xxx |     2882 |  200010 | non idle wait time      |     635036 |
  |      1002 | 172.xx.xxx.xxx |     2882 |  200011 | idle wait time          |      80414 |
  +-----------+----------------+----------+---------+-------------------------+------------+
  6 rows in set
  ```

  各字段的解释如下：

  | **字段**  | **描述** |
  | --- | --- |
  | TENANT_ID  | 租户 ID     |
  | SVR_IP     | 节点 IP       |
  | SVR_PORT   | 节点端口号        |
  | STAT_ID    | 统计项 ID         |
  | STAT_NAME  | 统计项名称       |
  | VALUE      | 统计项值        |

    有关 `GV$OB_SYS_TIME_MODEL` 视图的更多信息，请参见 [GV$OB_SYS_TIME_MODEL](../../../700.system-views/400.system-view-of-mysql-mode/300.performance-view-of-mysql-mode/4100.gv-ob_sys_time_model-of-mysql-mode.md)。

* **通过 `V$OB_SYS_TIME_MODEL` 视图查看当前节点上租户级别的 Time Model 统计项。**

  ```shell
  obclient [oceanbase]> SELECT * FROM oceanbase.V$OB_SYS_TIME_MODEL;
  ```

  查询结果如下：

  ```shell
  +-----------+----------------+----------+---------+-------------------------+------------+
  | TENANT_ID | SVR_IP         | SVR_PORT | STAT_ID | STAT_NAME               | VALUE      |
  +-----------+----------------+----------+---------+-------------------------+------------+
  |      1002 | 172.xx.xxx.xxx |     2882 |  200001 | DB time                 |    6227784 |
  |      1002 | 172.xx.xxx.xxx |     2882 |  200002 | DB CPU                  |    5586418 |
  |      1002 | 172.xx.xxx.xxx |     2882 |  200005 | background elapsed time | 3399416601 |
  |      1002 | 172.xx.xxx.xxx |     2882 |  200006 | background cpu time     | 3089779843 |
  |      1002 | 172.xx.xxx.xxx |     2882 |  200010 | non idle wait time      |     641366 |
  |      1002 | 172.xx.xxx.xxx |     2882 |  200011 | idle wait time          |      80414 |
  +-----------+----------------+----------+---------+-------------------------+------------+
  6 rows in set
  ```

  各字段的解释如下：

  | **字段**  | **描述** |
  | --- | --- |
  | TENANT_ID  | 租户 ID     |
  | SVR_IP     | 节点 IP       |
  | SVR_PORT   | 节点端口号        |
  | STAT_ID    | 统计项 ID         |
  | STAT_NAME  | 统计项名称       |
  | VALUE      | 统计项值        |

    有关 `V$OB_SYS_TIME_MODEL` 视图的更多信息，请参见 [V$OB_SYS_TIME_MODEL](../../../700.system-views/400.system-view-of-mysql-mode/300.performance-view-of-mysql-mode/34700.v-ob_sys_time_model-of-mysql-mode.md)。

* **通过 `oceanbase.CDB_WR_SYS_TIME_MODEL` 视图查看所有租户 Time Model 统计项的 WR 数据。**

  ```shell
  obclient [oceanbase]> SELECT * FROM oceanbase.CDB_WR_SYS_TIME_MODEL LIMIT 10;
  ```

  查询结果如下：

  ```shell
  +------------+-----------+---------+----------------+----------+---------+-------------------------+-----------+
  | CLUSTER_ID | TENANT_ID | SNAP_ID | SVR_IP         | SVR_PORT | STAT_ID | STAT_NAME               | VALUE     |
  +------------+-----------+---------+----------------+----------+---------+-------------------------+-----------+
  |      10001 |      1002 |       2 | 172.xx.xxx.xxx |     2882 |  200001 | DB time                 |     34505 |
  |      10001 |      1002 |       1 | 172.xx.xxx.xxx |     2882 |  200001 | DB time                 |     34505 |
  |      10001 |      1002 |       2 | 172.xx.xxx.xxx |     2882 |  200002 | DB CPU                  |      1966 |
  |      10001 |      1002 |       1 | 172.xx.xxx.xxx |     2882 |  200002 | DB CPU                  |      1966 |
  |      10001 |      1002 |       2 | 172.xx.xxx.xxx |     2882 |  200005 | background elapsed time | 233110335 |
  |      10001 |      1002 |       1 | 172.xx.xxx.xxx |     2882 |  200005 | background elapsed time | 116267272 |
  |      10001 |      1002 |       2 | 172.xx.xxx.xxx |     2882 |  200006 | background cpu time     | 209738761 |
  |      10001 |      1002 |       1 | 172.xx.xxx.xxx |     2882 |  200006 | background cpu time     | 104674501 |
  |      10001 |      1002 |       1 | 172.xx.xxx.xxx |     2882 |  200010 | non idle wait time      |     32539 |
  |      10001 |      1002 |       1 | 172.xx.xxx.xxx |     2882 |  200011 | idle wait time          |         0 |
  +------------+-----------+---------+----------------+----------+---------+-------------------------+-----------+
  10 rows in set
  ```

  各字段的解释如下：

  | **字段**  | **描述** |
  | --- | --- |
  | CLUSTER_ID | 集群 ID     |
  | TENANT_ID  | 租户 ID     |
  | SNAP_ID    | 快照 ID      |
  | SVR_IP     | 节点 IP       |
  | SVR_PORT   | 节点端口号        |
  | STAT_ID    | 统计项 ID         |
  | STAT_NAME  | 统计项名称       |
  | VALUE      | 统计项值        |

    有关 oceanbase.CDB_WR_SYSSTAT 视图的更多信息，请参见 [oceanbase.CDB_WR_SYS_TIME_MODEL](../../../700.system-views/300.system-view-of-sys-tenant/200.dictionary-view-of-sys-tenant/14000.o-cdb_wr_sys_time_model-of-sys-tenant.md)。

* **通过 `oceanbase.DBA_WR_SYS_TIME_MODEL` 视图查看本租户 Time Model 统计项的 WR 数据。**

  ```shell
  obclient [oceanbase]> SELECT * FROM oceanbase.DBA_WR_SYS_TIME_MODEL LIMIT 10;
  ```

  查询结果如下：

  ```shell
  +---------+----------------+----------+---------+-------------------------+-----------+
  | SNAP_ID | SVR_IP         | SVR_PORT | STAT_ID | STAT_NAME               | VALUE     |
  +---------+----------------+----------+---------+-------------------------+-----------+
  |       2 | 172.xx.xxx.xxx |     2882 |  200001 | DB time                 |     34505 |
  |       1 | 172.xx.xxx.xxx |     2882 |  200001 | DB time                 |     34505 |
  |       2 | 172.xx.xxx.xxx |     2882 |  200002 | DB CPU                  |      1966 |
  |       1 | 172.xx.xxx.xxx |     2882 |  200002 | DB CPU                  |      1966 |
  |       2 | 172.xx.xxx.xxx |     2882 |  200005 | background elapsed time | 233110335 |
  |       1 | 172.xx.xxx.xxx |     2882 |  200005 | background elapsed time | 116267272 |
  |       2 | 172.xx.xxx.xxx |     2882 |  200006 | background cpu time     | 209738761 |
  |       1 | 172.xx.xxx.xxx |     2882 |  200006 | background cpu time     | 104674501 |
  |       1 | 172.xx.xxx.xxx |     2882 |  200010 | non idle wait time      |     32539 |
  |       1 | 172.xx.xxx.xxx |     2882 |  200011 | idle wait time          |         0 |
  +---------+----------------+----------+---------+-------------------------+-----------+
  10 rows in set
  ```

  各字段的解释如下：

  | **字段**  | **描述** |
  | --- | --- |
  | SNAP_ID    | 快照 ID      |
  | SVR_IP     | 节点 IP       |
  | SVR_PORT   | 节点端口号        |
  | STAT_ID    | 统计项 ID         |
  | STAT_NAME  | 统计项名称       |
  | VALUE      | 统计项值        |

    有关 DBA_WR_STATNAME 视图的更多信息，请参见 [oceanbase.DBA_WR_SYS_TIME_MODEL](../../../700.system-views/400.system-view-of-mysql-mode/200.dictionary-view-of-mysql-mode/16400.o-dba_wr_sys_time_model-of-mysql-mode.md) 和 [DBA_WR_SYS_TIME_MODEL](../../../700.system-views/500.system-view-of-oracle-mode/200.dictionary-view-of-oracle-mode/23400.dba_wr_sys_time_model-of-oracle-mode.md)。

## 查看 SQLSTAT 数据

* **通过 `GV$OB_SQLSTAT` 视图查看集群中 SQL 的基本性能统计数据。**
  
  每个 SQL 语句为一行（即每个 `SQL_ID` + `Plan_Hash` 的唯一值为一行）。其中，含 `_DELTA` 的列表示从上次采集 WR 快照到当前时间为止统计值的增量。

  ```shell
  obclient [oceanbase]> SELECT * FROM oceanbase.GV$OB_SQLSTAT LIMIT 1\G
  ```

  查询结果如下：

  ```shell
  *************************** 1. row ***************************
                        SVR_IP: xx.xx.xx.xx
                      SVR_PORT: 2882
                      TENANT_ID: 1002
                        SQL_ID: D9EB4937E65F94AA38F6B0FE72B06D13
                        PLAN_ID: 6
                      PLAN_HASH: 12254811659671915614
                      PLAN_TYPE: 1
                      QUERY_SQL: SELECT column_value FROM __all_core_table WHERE TABLE_NAME = ? AND COLUMN_NAME = ?
                      SQL_TYPE: 1
                        MODULE: NULL
                        ACTION: NULL
                  PARSING_DB_ID: 201001
                PARSING_DB_NAME: oceanbase
                PARSING_USER_ID: 200001
              EXECUTIONS_TOTAL: 173231
              EXECUTIONS_DELTA: 844
              DISK_READS_TOTAL: 332
              DISK_READS_DELTA: 0
              BUFFER_GETS_TOTAL: 1377
              BUFFER_GETS_DELTA: 0
            ELAPSED_TIME_TOTAL: 95356089
            ELAPSED_TIME_DELTA: 459584
                CPU_TIME_TOTAL: 0
                CPU_TIME_DELTA: 0
                  CCWAIT_TOTAL: 0
                  CCWAIT_DELTA: 0
              USERIO_WAIT_TOTAL: 0
              USERIO_WAIT_DELTA: 0
                  APWAIT_TOTAL: 0
                  APWAIT_DELTA: 0
  PHYSICAL_READ_REQUESTS_TOTAL: 332
  PHYSICAL_READ_REQUESTS_DELTA: 0
      PHYSICAL_READ_BYTES_TOTAL: 5255494
      PHYSICAL_READ_BYTES_DELTA: 0
          WRITE_THROTTLE_TOTAL: 0
          WRITE_THROTTLE_DELTA: 0
          ROWS_PROCESSED_TOTAL: 173230
          ROWS_PROCESSED_DELTA: 844
      MEMSTORE_READ_ROWS_TOTAL: 282368
      MEMSTORE_READ_ROWS_DELTA: 844
  MINOR_SSSTORE_READ_ROWS_TOTAL: 242171
  MINOR_SSSTORE_READ_ROWS_DELTA: 844
  MAJOR_SSSTORE_READ_ROWS_TOTAL: 1084601
  MAJOR_SSSTORE_READ_ROWS_DELTA: 5908
                      RPC_TOTAL: 0
                      RPC_DELTA: 0
                  FETCHES_TOTAL: 0
                  FETCHES_DELTA: 0
                    RETRY_TOTAL: 0
                    RETRY_DELTA: 0
                PARTITION_TOTAL: 173231
                PARTITION_DELTA: 844
              NESTED_SQL_TOTAL: 0
              NESTED_SQL_DELTA: 0
                      SOURCE_IP: xx.xx.xx.xx
                    SOURCE_PORT: 2882
              ROUTE_MISS_TOTAL: 0
              ROUTE_MISS_DELTA: 0
                FIRST_LOAD_TIME: 2025-11-14 10:48:40.653781
          PLAN_CACHE_HIT_TOTAL: 173230
          PLAN_CACHE_HIT_DELTA: 844
              MUTI_QUERY_TOTAL: 0
              MUTI_QUERY_DELTA: 0
        MUTI_QUERY_BATCH_TOTAL: 0
        MUTI_QUERY_BATCH_DELTA: 0
          FULL_TABLE_SCAN_TOTAL: 0
          FULL_TABLE_SCAN_DELTA: 0
              ERROR_COUNT_TOTAL: 1
              ERROR_COUNT_DELTA: 0
  1 row in set (0.014 sec)
  ```

  各字段的解释如下：

  | **字段**  | **描述** |
  | ---- | ---- |
  | SVR_IP                        |   节点 IP |
  | SVR_PORT                      |   节点端口号     |
  | TENANT_ID                     |   租户 ID |
  | SQL_ID                        |   SQL 语句 ID   |
  | PLAN_ID                       |   执行计划 ID   |
  | PLAN_HASH                     |   执行计划的 Hash 值   |
  | PLAN_TYPE                     |   对于 SQL 计划的缓存，该字段表示计划的类型：<ul><li>`1`：表示 Local Plan </li> <li>`2`：表示 Remote Plan</li> <li>`3`：表示 Distributed Plan </li></ul> </br>对于 PL 对象缓存，该字段表示 PL 对象的类型：<ul><li>`1`：表示 Procedure</li> <li>`2`：表示 Function</li> <li>`3`：表示 Package</li> <li>`4`：表示 Anonymous Block </li></ul> |
  | QUERY_SQL                     |   全量的 SQL 文本 |
  | SQL_TYPE                      |   语句类型 |
  | MODULE                        |   该语句第一次被解析时的应用程序 Module，通过 `DBMS_APPLICATION_INFO.SET_MODULE` 包设置    |
  | ACTION                        |   该语句第一次被解析时的应用程序 Action，通过 `DBMS_APPLICATION_INFO.SET_ACTION` 包设置      |
  | PARSING_DB_ID                 |   语句解析时的数据库 ID    |
  | PARSING_DB_NAME               |   语句解析时的数据库名称     |
  | PARSING_USER_ID               |   语句解析时的用户 ID     |
  | EXECUTIONS_TOTAL              |   计划缓存中该计划的总执行次数     |
  | EXECUTIONS_DELTA              |   计划缓存中该计划总执行次数的增量      |
  | DISK_READS_TOTAL              |   磁盘读的总次数 |
  | DISK_READS_DELTA              |   磁盘读次数的增量 |
  | BUFFER_GETS_TOTAL             |   从缓存中逻辑读的总次数       |
  | BUFFER_GETS_DELTA             |   从缓存中逻辑读次数的增量      |
  | ELAPSED_TIME_TOTAL            |   该语句消耗的总时间。对于并行执行场景，该值为每个执行线程的累加值。          |
  | ELAPSED_TIME_DELTA            |   该语句消耗时间的增量   |
  | CPU_TIME_TOTAL                |   总的 CPU 耗时       |
  | CPU_TIME_DELTA                |   总 CPU 耗时的增量     |
  | CCWAIT_TOTAL                  |   并发类等待事件的总耗时       |
  | CCWAIT_DELTA                  |   并发类等待事件总耗时的增量       |
  | USERIO_WAIT_TOTAL             |   I/O 等待的总耗时      |
  | USERIO_WAIT_DELTA             |   I/O 等待的总耗时的增量      |
  | APWAIT_TOTAL                  |   应用类等待事件的总耗时        |
  | APWAIT_DELTA                  |   应用类等待事件总耗时的增量      |
  | PHYSICAL_READ_REQUESTS_TOTAL  |   物理读请求的总次数       |
  | PHYSICAL_READ_REQUESTS_DELTA  |   物理读请求次数的增量      |
  | PHYSICAL_READ_BYTES_TOTAL     |   物理读的总字节数     |
  | PHYSICAL_READ_BYTES_DELTA     |   物理读字节数的增量   |
  | WRITE_THROTTLE_TOTAL          |   写入 MemStore 时被限流的总时间    |
  | WRITE_THROTTLE_DELTA          |   写入 MemStore 时被限流的总时间的增量    |
  | ROWS_PROCESSED_TOTAL          |   语句处理的总行数    |
  | ROWS_PROCESSED_DELTA          |   语句处理的总行数的增量     |
  | MEMSTORE_READ_ROWS_TOTAL      |   从 MemStore 读取的总行数    |
  | MEMSTORE_READ_ROWS_DELTA      |   从 MemStore 读取的总行数的增量    |
  | MINOR_SSSTORE_READ_ROWS_TOTAL |   从 MINOR SSStore 读取的总行数   |
  | MINOR_SSSTORE_READ_ROWS_DELTA |   从 MINOR SSStore 读取的总行数的增量  |
  | MAJOR_SSSTORE_READ_ROWS_TOTAL |   从 MAJOR SSStore 读取的总行数     |
  | MAJOR_SSSTORE_READ_ROWS_DELTA |   从 MAJOR SSStore 读取的总行数的增量   |
  | RPC_TOTAL                     |   RPC 的总次数    |
  | RPC_DELTA                     |   RPC 次数的增量   |
  | FETCHES_TOTAL                 |   获取结果集的总次数   |
  | FETCHES_DELTA                 |   获取结果集次数的增量     |
  | RETRY_TOTAL                   |   SQL 重试的总次数   |
  | RETRY_DELTA                   |   SQL 重试次数的增量      |
  | PARTITION_TOTAL               |   SQL 执行扫描的分区数的总量      |
  | PARTITION_DELTA               |   SQL 执行扫描的分区数的增量    |
  | NESTED_SQL_TOTAL              |   嵌套 SQL 执行的总量，每多执行一次子 SQL 即增加 1     |
  | NESTED_SQL_DELTA              |   嵌套 SQL 执行的增量    |
  | SOURCE_IP                     |   请求来源的 IP     |
  | SOURCE_PORT                   |   请求来源的端口号      |
  | ROUTE_MISS_TOTAL              |   自执行计划生成以来，未正确命中请求分区的总次数   |
  | ROUTE_MISS_DELTA              |   自上次 WR 快照采集后至今，未正确命中请求分区的总次数   |
  | FIRST_LOAD_TIME               |   执行计划生成时间  |
  | PLAN_CACHE_HIT_TOTAL          |   自执行计划生成以来，命中 Plan Cache 的总次数  |
  | PLAN_CACHE_HIT_DELTA          |   自上次 WR 快照采集后至今，命中 Plan Cache 的次数  |
  | MUTI_QUERY_TOTAL              |  自执行计划生成以来，该 SQL 位于 Muti Query 的次数|
  | MUTI_QUERY_DELTA              |  自上次 WR 快照采集后至今，该 SQL 位于 Muti Query 中的次数|
  | MUTI_QUERY_BATCH_TOTAL        |  自执行计划生成以来，该 SQL Batch 执行的次数|
  | MUTI_QUERY_BATCH_DELTA        |  自上次 WR 快照采集后至今，该 SQL Batch 执行的次数|
  | FULL_TABLE_SCAN_TOTAL         |  自执行计划生成以来，该 SQL 全表扫的次数|
  | FULL_TABLE_SCAN_DELTA         |  自上次 WR 快照采集后至今，该 SQL 全表扫的次数|
  | ERROR_COUNT_TOTAL             |  自执行计划生成以来，该 SQL 报错的次数|
  | ERROR_COUNT_DELTA             |  自上次 WR 快照采集后至今，该 SQL 报错的次数|

    有关 `GV$OB_SQLSTAT` 视图的更多信息，请参见 [GV$OB_SQLSTAT](../../../700.system-views/400.system-view-of-mysql-mode/300.performance-view-of-mysql-mode/3900.gv-ob_sqlstat-of-mysql-mode.md)。

* **通过 `V$OB_SQLSTAT` 视图查看当前节点上 SQL 的基本性能统计数据。**
  
  每个 SQL 语句为一行（即每个 `SQL_ID` + `Plan_Hash` 的唯一值为一行）。其中，含 `_DELTA` 的列表示从上次采集 WR 快照到当前时间为止统计值的增量。

  ```shell
  obclient [oceanbase]> SELECT * FROM oceanbase.V$OB_SQLSTAT LIMIT 1\G
  ```

  查询结果如下：

  ```shell
  *************************** 1. row ***************************
                        SVR_IP: xx.xx.xx.xx
                      SVR_PORT: 2882
                      TENANT_ID: 1002
                        SQL_ID: FD4390F00BA50EBCC4BBAE0C3A06BD8E
                        PLAN_ID: 133
                      PLAN_HASH: 10950220524135603512
                      PLAN_TYPE: 1
                      QUERY_SQL: SELECT column_value FROM __all_core_table WHERE TABLE_NAME = ? AND COLUMN_NAME = ? FOR UPDATE
                      SQL_TYPE: 1
                        MODULE: NULL
                        ACTION: NULL
                  PARSING_DB_ID: 201001
                PARSING_DB_NAME: oceanbase
                PARSING_USER_ID: 200001
              EXECUTIONS_TOTAL: 226974
              EXECUTIONS_DELTA: 269
              DISK_READS_TOTAL: 54
              DISK_READS_DELTA: 0
              BUFFER_GETS_TOTAL: 1896
              BUFFER_GETS_DELTA: 0
            ELAPSED_TIME_TOTAL: 143148603
            ELAPSED_TIME_DELTA: 176810
                CPU_TIME_TOTAL: 0
                CPU_TIME_DELTA: 0
                  CCWAIT_TOTAL: 0
                  CCWAIT_DELTA: 0
              USERIO_WAIT_TOTAL: 0
              USERIO_WAIT_DELTA: 0
                  APWAIT_TOTAL: 0
                  APWAIT_DELTA: 0
  PHYSICAL_READ_REQUESTS_TOTAL: 54
  PHYSICAL_READ_REQUESTS_DELTA: 0
      PHYSICAL_READ_BYTES_TOTAL: 131546
      PHYSICAL_READ_BYTES_DELTA: 0
          WRITE_THROTTLE_TOTAL: 0
          WRITE_THROTTLE_DELTA: 0
          ROWS_PROCESSED_TOTAL: 226974
          ROWS_PROCESSED_DELTA: 269
      MEMSTORE_READ_ROWS_TOTAL: 264401
      MEMSTORE_READ_ROWS_DELTA: 269
  MINOR_SSSTORE_READ_ROWS_TOTAL: 334616
  MINOR_SSSTORE_READ_ROWS_DELTA: 269
  MAJOR_SSSTORE_READ_ROWS_TOTAL: 1544893
  MAJOR_SSSTORE_READ_ROWS_DELTA: 1883
                      RPC_TOTAL: 0
                      RPC_DELTA: 0
                  FETCHES_TOTAL: 0
                  FETCHES_DELTA: 0
                    RETRY_TOTAL: 0
                    RETRY_DELTA: 0
                PARTITION_TOTAL: 226974
                PARTITION_DELTA: 269
              NESTED_SQL_TOTAL: 0
              NESTED_SQL_DELTA: 0
                      SOURCE_IP: xx.xx.xx.xx
                    SOURCE_PORT: 2882
              ROUTE_MISS_TOTAL: 0
              ROUTE_MISS_DELTA: 0
                FIRST_LOAD_TIME: 2025-09-25 11:11:09.123018
          PLAN_CACHE_HIT_TOTAL: 226973
          PLAN_CACHE_HIT_DELTA: 269
              MUTI_QUERY_TOTAL: 0
              MUTI_QUERY_DELTA: 0
        MUTI_QUERY_BATCH_TOTAL: 0
        MUTI_QUERY_BATCH_DELTA: 0
          FULL_TABLE_SCAN_TOTAL: 0
          FULL_TABLE_SCAN_DELTA: 0
              ERROR_COUNT_TOTAL: 0
              ERROR_COUNT_DELTA: 0
    1 row in set
  ```

  各字段的解释如下：

  | **字段**  | **描述** |
  | ---- | ---- |
  | SVR_IP                        |   节点 IP |
  | SVR_PORT                      |   节点端口号     |
  | TENANT_ID                     |   租户 ID |
  | SQL_ID                        |   SQL 语句 ID   |
  | PLAN_ID                       |   执行计划 ID   |
  | PLAN_HASH                     |   执行计划的 Hash 值   |
  | PLAN_TYPE                     |   对于 SQL 计划的缓存，该字段表示计划的类型：<ul><li>`1`：表示 Local Plan </li> <li>`2`：表示 Remote Plan</li> <li>`3`：表示 Distributed Plan </li></ul> </br>对于 PL 对象缓存，该字段表示 PL 对象的类型：<ul><li>`1`：表示 Procedure</li> <li>`2`：表示 Function</li> <li>`3`：表示 Package</li> <li>`4`：表示 Anonymous Block </li></ul> |
  | QUERY_SQL                     |   全量的 SQL 文本 |
  | SQL_TYPE                      |   语句类型 |
  | MODULE                        |   该语句第一次被解析时的应用程序 Module，通过 `DBMS_APPLICATION_INFO.SET_MODULE` 包设置    |
  | ACTION                        |   该语句第一次被解析时的应用程序 Action，通过 `DBMS_APPLICATION_INFO.SET_ACTION` 包设置      |
  | PARSING_DB_ID                 |   语句解析时的数据库 ID    |
  | PARSING_DB_NAME               |   语句解析时的数据库名称     |
  | PARSING_USER_ID               |   语句解析时的用户 ID     |
  | EXECUTIONS_TOTAL              |   计划缓存中该计划的总执行次数     |
  | EXECUTIONS_DELTA              |   计划缓存中该计划总执行次数的增量      |
  | DISK_READS_TOTAL              |   磁盘读的总次数 |
  | DISK_READS_DELTA              |   磁盘读次数的增量 |
  | BUFFER_GETS_TOTAL             |   从缓存中逻辑读的总次数       |
  | BUFFER_GETS_DELTA             |   从缓存中逻辑读次数的增量      |
  | ELAPSED_TIME_TOTAL            |   该语句消耗的总时间。对于并行执行场景，该值为每个执行线程的累加值。          |
  | ELAPSED_TIME_DELTA            |   该语句消耗时间的增量   |
  | CPU_TIME_TOTAL                |   总的 CPU 耗时       |
  | CPU_TIME_DELTA                |   总 CPU 耗时的增量     |
  | CCWAIT_TOTAL                  |   并发类等待事件的总耗时       |
  | CCWAIT_DELTA                  |   并发类等待事件总耗时的增量       |
  | USERIO_WAIT_TOTAL             |   I/O 等待的总耗时      |
  | USERIO_WAIT_DELTA             |   I/O 等待的总耗时的增量      |
  | APWAIT_TOTAL                  |   应用类等待事件的总耗时        |
  | APWAIT_DELTA                  |   应用类等待事件总耗时的增量      |
  | PHYSICAL_READ_REQUESTS_TOTAL  |   物理读请求的总次数       |
  | PHYSICAL_READ_REQUESTS_DELTA  |   物理读请求次数的增量      |
  | PHYSICAL_READ_BYTES_TOTAL     |   物理读的总字节数     |
  | PHYSICAL_READ_BYTES_DELTA     |   物理读字节数的增量   |
  | WRITE_THROTTLE_TOTAL          |   写入 MemStore 时被限流的总时间    |
  | WRITE_THROTTLE_DELTA          |   写入 MemStore 时被限流的总时间的增量    |
  | ROWS_PROCESSED_TOTAL          |   语句处理的总行数    |
  | ROWS_PROCESSED_DELTA          |   语句处理的总行数的增量     |
  | MEMSTORE_READ_ROWS_TOTAL      |   从 MemStore 读取的总行数    |
  | MEMSTORE_READ_ROWS_DELTA      |   从 MemStore 读取的总行数的增量    |
  | MINOR_SSSTORE_READ_ROWS_TOTAL |   从 MINOR SSStore 读取的总行数   |
  | MINOR_SSSTORE_READ_ROWS_DELTA |   从 MINOR SSStore 读取的总行数的增量  |
  | MAJOR_SSSTORE_READ_ROWS_TOTAL |   从 MAJOR SSStore 读取的总行数     |
  | MAJOR_SSSTORE_READ_ROWS_DELTA |   从 MAJOR SSStore 读取的总行数的增量   |
  | RPC_TOTAL                     |   RPC 的总次数    |
  | RPC_DELTA                     |   RPC 次数的增量   |
  | FETCHES_TOTAL                 |   获取结果集的总次数   |
  | FETCHES_DELTA                 |   获取结果集次数的增量     |
  | RETRY_TOTAL                   |   SQL 重试的总次数   |
  | RETRY_DELTA                   |   SQL 重试次数的增量      |
  | PARTITION_TOTAL               |   SQL 执行扫描的分区数的总量      |
  | PARTITION_DELTA               |   SQL 执行扫描的分区数的增量    |
  | NESTED_SQL_TOTAL              |   嵌套 SQL 执行的总量，每多执行一次子 SQL 即增加 1     |
  | NESTED_SQL_DELTA              |   嵌套 SQL 执行的增量    |
  | SOURCE_IP                     |   请求来源的 IP     |
  | SOURCE_PORT                   |   请求来源的端口号      |
  | ROUTE_MISS_TOTAL              |   自执行计划生成以来，未正确命中请求分区的总次数   |
  | ROUTE_MISS_DELTA              |   自上次 WR 快照采集后至今，未正确命中请求分区的总次数   |
  | FIRST_LOAD_TIME               |   执行计划生成时间  |
  | PLAN_CACHE_HIT_TOTAL          |   自执行计划生成以来，命中 Plan Cache 的总次数  |
  | PLAN_CACHE_HIT_DELTA          |   自上次 WR 快照采集后至今，命中 Plan Cache 的次数  |
  | MUTI_QUERY_TOTAL              |  自执行计划生成以来，该 SQL 位于 Muti Query 的次数|
  | MUTI_QUERY_DELTA              |  自上次 WR 快照采集后至今，该 SQL 位于 Muti Query 中的次数|
  | MUTI_QUERY_BATCH_TOTAL        |  自执行计划生成以来，该 SQL Batch 执行的次数|
  | MUTI_QUERY_BATCH_DELTA        |  自上次 WR 快照采集后至今，该 SQL Batch 执行的次数|
  | FULL_TABLE_SCAN_TOTAL         |  自执行计划生成以来，该 SQL 全表扫的次数|
  | FULL_TABLE_SCAN_DELTA         |  自上次 WR 快照采集后至今，该 SQL 全表扫的次数|
  | ERROR_COUNT_TOTAL             |  自执行计划生成以来，该 SQL 报错的次数|
  | ERROR_COUNT_DELTA             |  自上次 WR 快照采集后至今，该 SQL 报错的次数|

    有关 `V$OB_SQLSTAT` 视图的更多信息，请参见 [V$OB_SQLSTAT](../../../700.system-views/400.system-view-of-mysql-mode/300.performance-view-of-mysql-mode/34500.v-ob_sqlstat-of-mysql-mode.md)。

* **通过 `oceanbase.CDB_WR_SQLSTAT` 视图查看所有租户执行过的 SQL 的基本性能统计数据。**
  
  每个 SQL 语句为一行（即每个 `SQL_ID` + `Plan_Hash` 的唯一值为一行）。其中，含 `_DELTA` 的列表示从上次采集 WR 快照到当前时间为止统计值的增量。

  ```shell
  obclient [oceanbase]> SELECT * FROM oceanbase.CDB_WR_SQLSTAT LIMIT 1;
  ```

  查询结果如下：

  ```shell
  *************************** 1. row ***************************
                      TENANT_ID: 1
                        SNAP_ID: 1
                        SVR_IP: xx.xx.xx.xx
                      SVR_PORT: 2882
                        SQL_ID: 01058E374A5EF26873BA4D99C4A74582
                      PLAN_HASH: 5547575357486659143
                      PLAN_TYPE: 1
                        MODULE: NULL
                        ACTION: NULL
                  PARSING_DB_ID: 201001
                PARSING_DB_NAME: oceanbase
                PARSING_USER_ID: 200001
              EXECUTIONS_TOTAL: 3
              EXECUTIONS_DELTA: 3
              DISK_READS_TOTAL: 1
              DISK_READS_DELTA: 1
              BUFFER_GETS_TOTAL: 1
              BUFFER_GETS_DELTA: 1
            ELAPSED_TIME_TOTAL: 4864
            ELAPSED_TIME_DELTA: 4864
                CPU_TIME_TOTAL: 0
                CPU_TIME_DELTA: 0
                  CCWAIT_TOTAL: 0
                  CCWAIT_DELTA: 0
              USERIO_WAIT_TOTAL: 0
              USERIO_WAIT_DELTA: 0
                  APWAIT_TOTAL: 0
                  APWAIT_DELTA: 0
  PHYSICAL_READ_REQUESTS_TOTAL: 1
  PHYSICAL_READ_REQUESTS_DELTA: 1
      PHYSICAL_READ_BYTES_TOTAL: 194
      PHYSICAL_READ_BYTES_DELTA: 194
          WRITE_THROTTLE_TOTAL: 0
          WRITE_THROTTLE_DELTA: 0
          ROWS_PROCESSED_TOTAL: 0
          ROWS_PROCESSED_DELTA: 0
      MEMSTORE_READ_ROWS_TOTAL: 0
      MEMSTORE_READ_ROWS_DELTA: 0
  MINOR_SSSTORE_READ_ROWS_TOTAL: 0
  MINOR_SSSTORE_READ_ROWS_DELTA: 0
  MAJOR_SSSTORE_READ_ROWS_TOTAL: 0
  MAJOR_SSSTORE_READ_ROWS_DELTA: 0
                      RPC_TOTAL: 0
                      RPC_DELTA: 0
                  FETCHES_TOTAL: 0
                  FETCHES_DELTA: 0
                    RETRY_TOTAL: 0
                    RETRY_DELTA: 0
                PARTITION_TOTAL: 1
                PARTITION_DELTA: 1
              NESTED_SQL_TOTAL: 0
              NESTED_SQL_DELTA: 0
                      SOURCE_IP: xx.xx.xx.xx
                    SOURCE_PORT: 2882
              ROUTE_MISS_TOTAL: 0
              ROUTE_MISS_DELTA: 0
                FIRST_LOAD_TIME: 2025-10-15 11:11:19.638416
          PLAN_CACHE_HIT_TOTAL: 1
          PLAN_CACHE_HIT_DELTA: 1
              MUTI_QUERY_TOTAL: 0
              MUTI_QUERY_DELTA: 0
        MUTI_QUERY_BATCH_TOTAL: 0
        MUTI_QUERY_BATCH_DELTA: 0
          FULL_TABLE_SCAN_TOTAL: 0
          FULL_TABLE_SCAN_DELTA: 0
              ERROR_COUNT_TOTAL: 0
              ERROR_COUNT_DELTA: 0
  1 row in set
  ```

  各字段的解释如下：

  | **字段**  | **描述** |
  | ---- | ---- |
  | TENANT_ID                     |  租户 ID |
  | SNAP_ID                       |  快照 ID  |
  | SVR_IP                        |  节点 IP |
  | SVR_PORT                      |  节点端口号     |
  | SQL_ID                        |  SQL 语句 ID   |
  | PLAN_HASH                     |  执行计划的 Hash 值   |
  | PLAN_ID                       |  执行计划 ID   |
  | PLAN_TYPE                     |  对于 SQL 计划的缓存，该字段表示计划的类型：<ul><li>`1`：表示 Local Plan </li> <li>`2`：表示 Remote Plan</li> <li>`3`：表示 Distributed Plan </li></ul> </br>对于 PL 对象缓存，该字段表示 PL 对象的类型：<ul><li>`1`：表示 Procedure</li> <li>`2`：表示 Function</li> <li>`3`：表示 Package</li> <li>`4`：表示 Anonymous Block </li></ul> |
  | MODULE                        | 该语句第一次被解析时的应用程序 Module，通过 `DBMS_APPLICATION_INFO.SET_MODULE` 包设置    |
  | ACTION                        | 该语句第一次被解析时的应用程序 Action，通过 `DBMS_APPLICATION_INFO.SET_ACTION` 包设置      |
  | PARSING_DB_ID                 | 语句解析时的数据库 ID    |
  | PARSING_DB_NAME               | 语句解析时的数据库名称     |
  | PARSING_USER_ID               | 语句解析时的用户 ID     |
  | EXECUTIONS_TOTAL              | 计划缓存中该计划的总执行次数     |
  | EXECUTIONS_DELTA              | 计划缓存中该计划总执行次数的增量      |
  | DISK_READS_TOTAL              | 磁盘读的总次数 |
  | DISK_READS_DELTA              | 磁盘读次数的增量 |
  | BUFFER_GETS_TOTAL             | 从缓存中逻辑读的总次数       |
  | BUFFER_GETS_DELTA             | 从缓存中逻辑读次数的增量      |
  | ELAPSED_TIME_TOTAL            | 该语句消耗的总时间。对于并行执行场景，该值为每个执行线程的累加值。          |
  | ELAPSED_TIME_DELTA            | 该语句消耗时间的增量   |
  | CPU_TIME_TOTAL                | 总的 CPU 耗时       |
  | CPU_TIME_DELTA                | 总 CPU 耗时的增量     |
  | CCWAIT_TOTAL                  | 并发类等待事件的总耗时       |
  | CCWAIT_DELTA                  | 并发类等待事件总耗时的增量       |
  | USERIO_WAIT_TOTAL             | I/O 等待的总耗时      |
  | USERIO_WAIT_DELTA             | I/O 等待的总耗时的增量      |
  | APWAIT_TOTAL                  | 应用类等待事件的总耗时        |
  | APWAIT_DELTA                  | 应用类等待事件总耗时的增量      |
  | PHYSICAL_READ_REQUESTS_TOTAL  | 物理读请求的总次数       |
  | PHYSICAL_READ_REQUESTS_DELTA  | 物理读请求次数的增量      |
  | PHYSICAL_READ_BYTES_TOTAL     | 物理读的总字节数     |
  | PHYSICAL_READ_BYTES_DELTA     | 物理读字节数的增量   |
  | WRITE_THROTTLE_TOTAL          | 写入 MemStore 时被限流的总时间    |
  | WRITE_THROTTLE_DELTA          | 写入 MemStore 时被限流的总时间的增量    |
  | ROWS_PROCESSED_TOTAL          | 语句处理的总行数    |
  | ROWS_PROCESSED_DELTA          | 语句处理的总行数的增量     |
  | MEMSTORE_READ_ROWS_TOTAL      | 从 MemStore 读取的总行数    |
  | MEMSTORE_READ_ROWS_DELTA      | 从 MemStore 读取的总行数的增量    |
  | MINOR_SSSTORE_READ_ROWS_TOTAL | 从 MINOR SSStore 读取的总行数   |
  | MINOR_SSSTORE_READ_ROWS_DELTA | 从 MINOR SSStore 读取的总行数的增量  |
  | MAJOR_SSSTORE_READ_ROWS_TOTAL | 从 MAJOR SSStore 读取的总行数     |
  | MAJOR_SSSTORE_READ_ROWS_DELTA | 从 MAJOR SSStore 读取的总行数的增量   |
  | RPC_TOTAL                     | RPC 的总次数    |
  | RPC_DELTA                     | RPC 次数的增量   |
  | FETCHES_TOTAL                 | 获取结果集的总次数   |
  | FETCHES_DELTA                 | 获取结果集次数的增量     |
  | RETRY_TOTAL                   | SQL 重试的总次数   |
  | RETRY_DELTA                   | SQL 重试次数的增量      |
  | PARTITION_TOTAL               | SQL 执行扫描的分区数的总量      |
  | PARTITION_DELTA               | SQL 执行扫描的分区数的增量    |
  | NESTED_SQL_TOTAL              | 嵌套 SQL 执行的总量，每多执行一次子 SQL 即增加 1     |
  | NESTED_SQL_DELTA              | 嵌套 SQL 执行的增量    |
  | SOURCE_IP                     | 请求来源的 IP     |
  | SOURCE_PORT                   | 请求来源的端口号      |
  | ROUTE_MISS_TOTAL              |   自执行计划生成以来，未正确命中请求分区的总次数   |
  | ROUTE_MISS_DELTA              |   自上次 WR 快照采集后至今，未正确命中请求分区的总次数   |
  | FIRST_LOAD_TIME               |   执行计划生成时间  |
  | PLAN_CACHE_HIT_TOTAL          |   自执行计划生成以来，命中 Plan Cache 的总次数  |
  | PLAN_CACHE_HIT_DELTA          |   自上次 WR 快照采集后至今，命中 Plan Cache 的次数  |
  | MUTI_QUERY_TOTAL              |  自执行计划生成以来，该 SQL 位于 Muti Query 的次数|
  | MUTI_QUERY_DELTA              |  自上次 WR 快照采集后至今，该 SQL 位于 Muti Query 中的次数|
  | MUTI_QUERY_BATCH_TOTAL        |  自执行计划生成以来，该 SQL Batch 执行的次数|
  | MUTI_QUERY_BATCH_DELTA        |  自上次 WR 快照采集后至今，该 SQL Batch 执行的次数|
  | FULL_TABLE_SCAN_TOTAL         |  自执行计划生成以来，该 SQL 全表扫的次数|
  | FULL_TABLE_SCAN_DELTA         |  自上次 WR 快照采集后至今，该 SQL 全表扫的次数|
  | ERROR_COUNT_TOTAL             |  自执行计划生成以来，该 SQL 报错的次数|
  | ERROR_COUNT_DELTA             |  自上次 WR 快照采集后至今，该 SQL 报错的次数|

    有关 `oceanbase.CDB_WR_SQLSTAT` 视图的更多信息，请参见 [oceanbase.CDB_WR_SQLSTAT](../../../700.system-views/300.system-view-of-sys-tenant/200.dictionary-view-of-sys-tenant/13700.o-cdb_wr_sqlstat-of-sys-tenant.md)。

* **通过 `oceanbase.DBA_WR_SQLSTAT` 视图查看本租户执行过的 SQL 的基本性能统计数据。**
  
  其中，含 `_DELTA` 的列表示从上次采集 WR 快照到当前时间为止统计值的增量。

  ```shell
  obclient [SYS]> SELECT * FROM SYS.DBA_WR_SQLSTAT WHERE ROWNUM = 1;
  ```

  查询结果如下：

  ```shell
  *************************** 1. row ***************************
                        SNAP_ID: 1
                        SVR_IP: xx.xx.xx.xx
                      SVR_PORT: 2882
                        SQL_ID: 056E37B2111B414A8B917B1C29F3C9F6
                      PLAN_HASH: 9282102774431564901
                      PLAN_TYPE: 1
                        MODULE: NULL
                        ACTION: NULL
                  PARSING_DB_ID: 201001
                PARSING_DB_NAME: oceanbase
                PARSING_USER_ID: 200001
              EXECUTIONS_TOTAL: 5
              EXECUTIONS_DELTA: 5
              DISK_READS_TOTAL: 1
              DISK_READS_DELTA: 1
              BUFFER_GETS_TOTAL: 1
              BUFFER_GETS_DELTA: 1
            ELAPSED_TIME_TOTAL: 3364
            ELAPSED_TIME_DELTA: 3364
                CPU_TIME_TOTAL: 0
                CPU_TIME_DELTA: 0
                  CCWAIT_TOTAL: 0
                  CCWAIT_DELTA: 0
              USERIO_WAIT_TOTAL: 0
              USERIO_WAIT_DELTA: 0
                  APWAIT_TOTAL: 0
                  APWAIT_DELTA: 0
  PHYSICAL_READ_REQUESTS_TOTAL: 1
  PHYSICAL_READ_REQUESTS_DELTA: 1
      PHYSICAL_READ_BYTES_TOTAL: 193
      PHYSICAL_READ_BYTES_DELTA: 193
          WRITE_THROTTLE_TOTAL: 0
          WRITE_THROTTLE_DELTA: 0
          ROWS_PROCESSED_TOTAL: 0
          ROWS_PROCESSED_DELTA: 0
      MEMSTORE_READ_ROWS_TOTAL: 0
      MEMSTORE_READ_ROWS_DELTA: 0
  MINOR_SSSTORE_READ_ROWS_TOTAL: 0
  MINOR_SSSTORE_READ_ROWS_DELTA: 0
  MAJOR_SSSTORE_READ_ROWS_TOTAL: 0
  MAJOR_SSSTORE_READ_ROWS_DELTA: 0
                      RPC_TOTAL: 0
                      RPC_DELTA: 0
                  FETCHES_TOTAL: 0
                  FETCHES_DELTA: 0
                    RETRY_TOTAL: 0
                    RETRY_DELTA: 0
                PARTITION_TOTAL: 5
                PARTITION_DELTA: 5
              NESTED_SQL_TOTAL: 0
              NESTED_SQL_DELTA: 0
                      SOURCE_IP: xx.xx.xx.xx
                    SOURCE_PORT: 2882
              ROUTE_MISS_TOTAL: 0
              ROUTE_MISS_DELTA: 0
                FIRST_LOAD_TIME: 15-OCT-25 11.15.20.963356 AM
          PLAN_CACHE_HIT_TOTAL: 4
          PLAN_CACHE_HIT_DELTA: 4
              MUTI_QUERY_TOTAL: 0
              MUTI_QUERY_DELTA: 0
        MUTI_QUERY_BATCH_TOTAL: 0
        MUTI_QUERY_BATCH_DELTA: 0
          FULL_TABLE_SCAN_TOTAL: 0
          FULL_TABLE_SCAN_DELTA: 0
              ERROR_COUNT_TOTAL: 0
              ERROR_COUNT_DELTA: 0
  1 row in set
  ```

  各字段的解释如下：

  | **字段**  | **描述** |
  | --- | --- |
  | SNAP_ID                       | 快照 ID  |
  | SVR_IP                        | 节点 IP |
  | SVR_PORT                      | 节点端口号     |
  | SQL_ID                        | SQL 语句 ID   |
  | PLAN_HASH                     | 执行计划的 Hash 值   |
  | PLAN_ID                       | 执行计划 ID   |
  | PLAN_TYPE                     | 对于 SQL 计划的缓存，该字段表示计划的类型：<ul><li>`1`：表示 Local Plan </li> <li>`2`：表示 Remote Plan</li> <li>`3`：表示 Distributed Plan </li></ul> </br>对于 PL 对象缓存，该字段表示 PL 对象的类型：<ul><li>`1`：表示 Procedure</li> <li>`2`：表示 Function</li> <li>`3`：表示 Package</li> <li>`4`：表示 Anonymous Block </li></ul> |
  | MODULE                        | 该语句第一次被解析时的应用程序 Module，通过 `DBMS_APPLICATION_INFO.SET_MODULE` 包设置    |
  | ACTION                        | 该语句第一次被解析时的应用程序 Action，通过 `DBMS_APPLICATION_INFO.SET_ACTION` 包设置      |
  | PARSING_DB_ID                 | 语句解析时的数据库 ID    |
  | PARSING_DB_NAME               | 语句解析时的数据库名称     |
  | PARSING_USER_ID               | 语句解析时的用户 ID     |
  | EXECUTIONS_TOTAL              | 计划缓存中该计划的总执行次数     |
  | EXECUTIONS_DELTA              | 计划缓存中该计划总执行次数的增量      |
  | DISK_READS_TOTAL              | 磁盘读的总次数 |
  | DISK_READS_DELTA              | 磁盘读次数的增量 |
  | BUFFER_GETS_TOTAL             | 从缓存中逻辑读的总次数       |
  | BUFFER_GETS_DELTA             | 从缓存中逻辑读次数的增量      |
  | ELAPSED_TIME_TOTAL            | 该语句消耗的总时间。对于并行执行场景，该值为每个执行线程的累加值。          |
  | ELAPSED_TIME_DELTA            | 该语句消耗时间的增量   |
  | CPU_TIME_TOTAL                | 总的 CPU 耗时       |
  | CPU_TIME_DELTA                | 总 CPU 耗时的增量     |
  | CCWAIT_TOTAL                  | 并发类等待事件的总耗时       |
  | CCWAIT_DELTA                  | 并发类等待事件总耗时的增量       |
  | USERIO_WAIT_TOTAL             | I/O 等待的总耗时      |
  | USERIO_WAIT_DELTA             | I/O 等待的总耗时的增量      |
  | APWAIT_TOTAL                  | 应用类等待事件的总耗时        |
  | APWAIT_DELTA                  | 应用类等待事件总耗时的增量      |
  | PHYSICAL_READ_REQUESTS_TOTAL  | 物理读请求的总次数       |
  | PHYSICAL_READ_REQUESTS_DELTA  | 物理读请求次数的增量      |
  | PHYSICAL_READ_BYTES_TOTAL     | 物理读的总字节数     |
  | PHYSICAL_READ_BYTES_DELTA     | 物理读字节数的增量   |
  | WRITE_THROTTLE_TOTAL          | 写入 MemStore 时被限流的总时间    |
  | WRITE_THROTTLE_DELTA          | 写入 MemStore 时被限流的总时间的增量    |
  | ROWS_PROCESSED_TOTAL          | 语句处理的总行数    |
  | ROWS_PROCESSED_DELTA          | 语句处理的总行数的增量     |
  | MEMSTORE_READ_ROWS_TOTAL      | 从 MemStore 读取的总行数    |
  | MEMSTORE_READ_ROWS_DELTA      | 从 MemStore 读取的总行数的增量    |
  | MINOR_SSSTORE_READ_ROWS_TOTAL | 从 MINOR SSStore 读取的总行数   |
  | MINOR_SSSTORE_READ_ROWS_DELTA | 从 MINOR SSStore 读取的总行数的增量  |
  | MAJOR_SSSTORE_READ_ROWS_TOTAL | 从 MAJOR SSStore 读取的总行数     |
  | MAJOR_SSSTORE_READ_ROWS_DELTA | 从 MAJOR SSStore 读取的总行数的增量   |
  | RPC_TOTAL                     | RPC 的总次数    |
  | RPC_DELTA                     | RPC 次数的增量   |
  | FETCHES_TOTAL                 | 获取结果集的总次数   |
  | FETCHES_DELTA                 | 获取结果集次数的增量     |
  | RETRY_TOTAL                   | SQL 重试的总次数   |
  | RETRY_DELTA                   | SQL 重试次数的增量      |
  | PARTITION_TOTAL               | SQL 执行扫描的分区数的总量      |
  | PARTITION_DELTA               | SQL 执行扫描的分区数的增量    |
  | NESTED_SQL_TOTAL              | 嵌套 SQL 执行的总量，每多执行一次子 SQL 即增加 1     |
  | NESTED_SQL_DELTA              | 嵌套 SQL 执行的增量    |
  | SOURCE_IP                     | VARCHAR2(46)        |
  | SOURCE_PORT                   | 请求来源的端口号      |
  | ROUTE_MISS_TOTAL              |   自执行计划生成以来，未正确命中请求分区的总次数   |
  | ROUTE_MISS_DELTA              |   自上次 WR 快照采集后至今，未正确命中请求分区的总次数   |
  | FIRST_LOAD_TIME               |   执行计划生成时间  |
  | PLAN_CACHE_HIT_TOTAL          |   自执行计划生成以来，命中 Plan Cache 的总次数  |
  | PLAN_CACHE_HIT_DELTA          |   自上次 WR 快照采集后至今，命中 Plan Cache 的次数  |
  | MUTI_QUERY_TOTAL              |  自执行计划生成以来，该 SQL 位于 Muti Query 的次数|
  | MUTI_QUERY_DELTA              |  自上次 WR 快照采集后至今，该 SQL 位于 Muti Query 中的次数|
  | MUTI_QUERY_BATCH_TOTAL        |  自执行计划生成以来，该 SQL Batch 执行的次数|
  | MUTI_QUERY_BATCH_DELTA        |  自上次 WR 快照采集后至今，该 SQL Batch 执行的次数|
  | FULL_TABLE_SCAN_TOTAL         |  自执行计划生成以来，该 SQL 全表扫的次数|
  | FULL_TABLE_SCAN_DELTA         |  自上次 WR 快照采集后至今，该 SQL 全表扫的次数|
  | ERROR_COUNT_TOTAL             |  自执行计划生成以来，该 SQL 报错的次数|
  | ERROR_COUNT_DELTA             |  自上次 WR 快照采集后至今，该 SQL 报错的次数|

    有关 `DBA_WR_SQLSTAT` 视图的更多信息，请参见 [oceanbase.DBA_WR_SQLSTAT](../../../700.system-views/400.system-view-of-mysql-mode/200.dictionary-view-of-mysql-mode/16100.o-dba_wr_sqlstat-of-mysql-mode.md) 和 [DBA_WR_SQLSTAT](../../../700.system-views/500.system-view-of-oracle-mode/200.dictionary-view-of-oracle-mode/23100.dba_wr_sqlstat-of-oracle-mode.md)。

## 查看 OBServer 资源组信息

* **通过 `GV$OB_RES_MGR_SYSSTAT` 视图查看所有 OBServer 中资源组的统计项信息。**

  ```shell
  obclient [oceanbase]> SELECT * FROM oceanbase.GV$OB_RES_MGR_SYSSTAT LIMIT 10;
  ```

  查询结果如下：

  ```shell
  +--------+----------+----------------+----------+------------+-----------------------+-------+------------+------------+---------+
  | CON_ID | GROUP_ID | SVR_IP         | SVR_PORT | STATISTIC# | NAME                  | CLASS | VALUE      | VALUE_TYPE | STAT_ID |
  +--------+----------+----------------+----------+------------+-----------------------+-------+------------+------------+---------+
  |      1 |        0 |  xx.xx.xx.xx   |     2882 |          0 | rpc packet in         |     1 |   12995014 | ADD_VALUE  |   10000 |
  |      1 |        0 |  xx.xx.xx.xx   |     2882 |          1 | rpc packet in bytes   |     1 | 3080600714 | ADD_VALUE  |   10001 |
  |      1 |        0 |  xx.xx.xx.xx   |     2882 |          2 | rpc packet out        |     1 |    7975192 | ADD_VALUE  |   10002 |
  |      1 |        0 |  xx.xx.xx.xx   |     2882 |          3 | rpc packet out bytes  |     1 | 2401633337 | ADD_VALUE  |   10003 |
  |      1 |        0 |  xx.xx.xx.xx   |     2882 |          4 | rpc deliver fail      |     1 |          0 | ADD_VALUE  |   10004 |
  |      1 |        0 |  xx.xx.xx.xx   |     2882 |          5 | rpc net delay         |     1 |   23735015 | ADD_VALUE  |   10005 |
  |      1 |        0 |  xx.xx.xx.xx   |     2882 |          6 | rpc net frame delay   |     1 |     240711 | ADD_VALUE  |   10006 |
  |      1 |        0 |  xx.xx.xx.xx   |     2882 |          7 | mysql packet in       |     1 |         66 | ADD_VALUE  |   10007 |
  |      1 |        0 |  xx.xx.xx.xx   |     2882 |          8 | mysql packet in bytes |     1 |      13725 | ADD_VALUE  |   10008 |
  |      1 |        0 |  xx.xx.xx.xx   |     2882 |          9 | mysql packet out      |     1 |         86 | ADD_VALUE  |   10009 |
  +--------+----------+----------------+----------+------------+-----------------------+-------+------------+------------+---------+
  10 rows in set (0.026 sec)
  ```

  各字段的解释如下：

  | **字段**  | **描述** |
  | ---- | ---- |
  | CON_ID     | 租户 ID     |
  | GROUP_ID   | 消费者组 ID     |
  | SVR_IP     | 节点 IP     |
  | SVR_PORT   | 节点 PORT    |
  | STATISTIC# | 统计项序号     |
  | NAME       | 统计项名字    |
  | CLASS      | 统计项类别     |
  | VALUE      | 统计项值     |
  | VALUE_TYPE | 值类型：累加型、赋值型     |
  | STAT_ID    | 统计项 ID     |

    有关 `GV$OB_RES_MGR_SYSSTAT` 视图的更多信息，请参见 [GV$OB_RES_MGR_SYSSTAT](../../../700.system-views/400.system-view-of-mysql-mode/300.performance-view-of-mysql-mode/3050.gv-ob_res_mgr_sysstat-of-mysql-mode.md)。

* **通过 `V$OB_RES_MGR_SYSSTAT` 视图查看本 OBServer 中资源组的统计项信息。**
  
  ```shell
  obclient [oceanbase]> SELECT * FROM oceanbase.V$OB_RES_MGR_SYSSTAT LIMIT 10;
  ```

  查询结果如下：

  ```shell
  +--------+----------+----------------+----------+------------+-----------------------+-------+------------+------------+---------+
  | CON_ID | GROUP_ID | SVR_IP         | SVR_PORT | STATISTIC# | NAME                  | CLASS | VALUE      | VALUE_TYPE | STAT_ID |
  +--------+----------+----------------+----------+------------+-----------------------+-------+------------+------------+---------+
  |      1 |        0 |  xx.xx.xx.xx   |     2882 |          0 | rpc packet in         |     1 |   13010269 | ADD_VALUE  |   10000 |
  |      1 |        0 |  xx.xx.xx.xx   |     2882 |          1 | rpc packet in bytes   |     1 | 3084188226 | ADD_VALUE  |   10001 |
  |      1 |        0 |  xx.xx.xx.xx   |     2882 |          2 | rpc packet out        |     1 |    7984551 | ADD_VALUE  |   10002 |
  |      1 |        0 |  xx.xx.xx.xx   |     2882 |          3 | rpc packet out bytes  |     1 | 2404425894 | ADD_VALUE  |   10003 |
  |      1 |        0 |  xx.xx.xx.xx   |     2882 |          4 | rpc deliver fail      |     1 |          0 | ADD_VALUE  |   10004 |
  |      1 |        0 |  xx.xx.xx.xx   |     2882 |          5 | rpc net delay         |     1 |   23766006 | ADD_VALUE  |   10005 |
  |      1 |        0 |  xx.xx.xx.xx   |     2882 |          6 | rpc net frame delay   |     1 |     241049 | ADD_VALUE  |   10006 |
  |      1 |        0 |  xx.xx.xx.xx   |     2882 |          7 | mysql packet in       |     1 |         69 | ADD_VALUE  |   10007 |
  |      1 |        0 |  xx.xx.xx.xx   |     2882 |          8 | mysql packet in bytes |     1 |      13871 | ADD_VALUE  |   10008 |
  |      1 |        0 |  xx.xx.xx.xx   |     2882 |          9 | mysql packet out      |     1 |        142 | ADD_VALUE  |   10009 |
  +--------+----------+----------------+----------+------------+-----------------------+-------+------------+------------+---------+
  10 rows in set (0.007 sec)
  ```

  各字段的解释如下：

  | **字段**  | **描述** |
  | ---- | ---- |
  | CON_ID     | 租户 ID     |
  | GROUP_ID   | 消费者组 ID     |
  | SVR_IP     | 节点 IP     |
  | SVR_PORT   | 节点 PORT    |
  | STATISTIC# | 统计项序号     |
  | NAME       | 统计项名字    |
  | CLASS      | 统计项类别     |
  | VALUE      | 统计项值     |
  | VALUE_TYPE | 值类型：累加型、赋值型     |
  | STAT_ID    | 统计项 ID     |
    有关 `V$OB_RES_MGR_SYSSTAT` 视图的更多信息，请参见 [V$OB_RES_MGR_SYSSTAT](../../../700.system-views/400.system-view-of-mysql-mode/300.performance-view-of-mysql-mode/33450.v-ob_res_mgr_sysstat-of-mysql-mode.md)。

## 相关文档

* [WR 概述](100.wr-overview.md)
* [管理 WR](200.manage-wr.md)
* [清理 WR 数据](400.clean-up-wr-data.md)