|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# datafile_maxsize

<main id="notice" type='explain'>
  <h4>说明</h4>
  <ul><li>对于 V4.2.x 版本，该配置项从 V4.2.0 版本开始引入。</li>
  <li>对于 V3.x 版本，该配置项从 V3.1.5 版本开始引入。</li></ul>
</main>

## 功能描述

* 无共享（Shared-Nothing，SN）模式下，配置项 `datafile_maxsize` 用于设置磁盘文件自动扩容的空间最大值。

* 共享存储（Shared-Storage，SS）模式下，配置项 `datafile_maxsize` 的值无意义，可修改，但修改不会生效。

## 权限要求

* 查询配置项

  `sys` 租户和所有用户租户均可以使用 `SHOW PARAMETERS` 语句或视图 `GV$OB_PARAMETERS` 查询该配置项。

* 修改配置项

  仅 `sys` 租户可以修改该配置项，用户租户不能修改该配置项。

## 属性说明

| 属性 | 描述 |
| --- | --- |
| 参数类型 | Capacity |
| 默认值 | 0 |
| 取值范围 | [0M, +∞) |
| 是否可修改    | 是，支持通过 `ALTER SYSTEM SET` 语句修改。|
| 是否重启 OBServer 节点生效 | 否，设置后立即生效。 |

## 使用说明

SN 模式下，`ddatafile_maxsize` 默认值为 0，表示不启动磁盘文件的自动扩容，如果需要开启自动扩容，则需要设置为非 0 的值：

* `datafile_maxsize` 的值需要大于当前数据文件占用的磁盘空间大小 `datafile_size`（或 `datafile_disk_percentage`），如果设置的值小于当前数据文件占用的磁盘空间大小，则不会触发自动扩容。

* 如果 `datafile_maxsize` 的值超过了当前磁盘的最大可用空间，则以实际磁盘的可用大小作为最大值。

## 配置示例

SN 模式下，设置磁盘文件自动扩容的空间最大值为 10G。

```shell
obclient> ALTER SYSTEM SET datafile_maxsize = '10G';
```

## 相关文档

* [datafile_next](4600.datafile_next.md)

* [datafile_size](4700.datafile_size.md)

* [datafile_disk_percentage](4400.datafile_disk_percentage.md)

* [配置磁盘数据文件](../../../../700.reference/200.system-management/1000.disk-data-file-management/100.disk-data-file-dynamic-expansion.md)