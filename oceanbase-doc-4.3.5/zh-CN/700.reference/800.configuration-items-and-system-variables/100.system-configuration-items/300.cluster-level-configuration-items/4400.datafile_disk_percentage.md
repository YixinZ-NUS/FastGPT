|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# datafile_disk_percentage

<main id="notice" type='explain'>
  <h4>说明</h4>
  <p>该配置项从 V2.2.50 版本开始引入。</p>
</main>

## 功能描述

* 无共享（Shared-Nothing，SN）模式下，配置项 `datafile_disk_percentage` 用于设置数据文件占用其所在磁盘总空间的百分比（ `data_dir` 所在磁盘将被 OceanBase 数据库系统初始化用于存储数据）。

* 共享存储（Shared-Storage，SS）模式下，配置项 `datafile_disk_percentage` 用于设置本地可用缓存空间占磁盘总空间的百分比。

## 权限要求

* 查询配置项

  `sys` 租户和所有用户租户均可以使用 `SHOW PARAMETERS` 语句或视图 `GV$OB_PARAMETERS` 查询该配置项。

* 修改配置项

  仅 `sys` 租户可以修改该配置项，用户租户不能修改该配置项。

## 属性说明

|  **属性**  | **描述**|
|------------|---------|
| 参数类型    | Int    |
| 默认值      | 0 <main id="notice" type='explain'><h4>说明</h4><p>从 V4.0.0 版本开始，默认值由 90 调整为 0。</p></main>       |
| 取值范围    | [0，99]<main id="notice" type='explain'><h4>说明</h4><p>从 V4.0.0 版本开始，取值范围由 [5，99] 调整为 [0，99]。</p></main> |
| 是否可修改  | 是，支持通过 `ALTER SYSTEM SET` 语句修改。|
| 是否重启 OBServer 节点生效 | 否，设置后立即生效。   |

## 使用说明

* 该配置项的值为 0 时，系统会根据日志和数据是否共用同一磁盘来自动计算数据文件（ SN 模式）或本地缓存空间（SS 模式）占用其所在磁盘总空间的百分比：

  * 共用时，数据文件或本地缓存空间占用其所在磁盘总空间的百分比为 60%。
  * 独占时，数据文件或本地缓存空间占用其所在磁盘总空间的百分比为 90%。

* 该配置项与 <code>datafile_size</code> 同时配置时，以 <code>datafile_size</code> 设置的值为准。有关 <code>datafile_size</code> 的详细介绍，请参见 <a href="4700.datafile_size.md">datafile_size</a>。

## 配置示例

SN 模式下，设置数据文件占用其所在磁盘总空间的 90%。

```shell
obclient> ALTER SYSTEM SET datafile_disk_percentage=90;
```

## 相关文档

* [datafile_next](4600.datafile_next.md)

* [datafile_maxsize](4500.datafile_maxsize.md)

* [datafile_size](4700.datafile_size.md)

* [磁盘数据的动态扩容](../../../../700.reference/200.system-management/1000.disk-data-file-management/100.disk-data-file-dynamic-expansion.md)