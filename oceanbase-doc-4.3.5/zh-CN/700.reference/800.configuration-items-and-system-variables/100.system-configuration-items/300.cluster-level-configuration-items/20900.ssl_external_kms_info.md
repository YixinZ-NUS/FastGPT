|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# ssl_external_kms_info

<main id="notice" type='explain'>
  <h4>说明</h4>
  <p>该配置项从 V2.2.77 版本开始引入。</p>
</main>

## 功能描述

`ssl_external_kms_info` 配置项用于记录 OceanBase 数据库 SSL 功能运行依赖的一些信息，通过 Json 字符串方式记录不同 SSL 使用方式下依赖的相关配置，Json 中至少包含类型 `ssl_mode` 字段。

## 权限要求

* 查询配置项

  `sys` 租户和所有用户租户均可以使用 `SHOW PARAMETERS` 语句或视图 `GV$OB_PARAMETERS` 查询该配置项。

* 修改配置项

  仅 `sys` 租户可以修改该配置项，用户租户不能修改该配置项。

## 属性说明

| **属性** | **描述** |
| -------- | -------- |
| 参数类型             | String  |
| 默认值               | ""，表示空字符串 |
| 是否可修改           | 是，支持通过 `ALTER SYSTEM SET` 语句修改。|
| 是否重启 OBServer 节点生效 | 否，设置后立即生效。|

## 使用说明

* 该配置项的默认值为空字符串。当 SSL 开关打开后，SSL 使用密钥将取值默认路径下的默认文件。

* 该配置项取值必须为有效 Json，否则配置项设置会检查失败。

* 该配置项当前仅支持两种取值：file 和 bkmi，用于指定 `ssl_mode`。

  * 指定为 file 时，从本地默认路径读取 SSL 密钥和证书文件，无需额外配置 JSON 字段。

  * 指定为 bkmi 时，运行时向 bkmi 获取 SSL 文件，本地不持久化存储。同时，Json 字符串还需要提供完整的应用名、bkmi url、bkmi 根证书、身份秘钥、身份秘钥口令、SSL 私钥名称、SSL 私钥版本号、SSL 证书名称等。并且这些信息确实有效可用，即能通过这些从 bkmi 中获取私钥和证书，否则会报响应错误码。

  为了支持外部其他各自的证书颁发体系，`ssl_external_kms_info` 还可以定制扩展为其他内容 Json 串。

## 使用示例

设置 SSL 证书配置采用 file 模式。

```shell
obclient> ALTER SYSTEM SET ssl_external_kms_info = '
          {
          "ssl_mode":"file"
          }';
```