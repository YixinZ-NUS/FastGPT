|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# ob_java_opts

<main id="notice" type='explain'>
  <h4>说明</h4>
  <p>该配置项从 V4.3.5 BP1 版本开始引入。</p>
</main>

## 功能描述

`ob_java_opts` 用于设置 java 运行的 jvm 启动配置项。

## 权限要求

* 查询配置项

  sys 租户和所有用户租户均可以使用 `SHOW PARAMETERS` 语句或视图 `GV$OB_PARAMETERS` 查询该配置项。

* 修改配置项

  仅 sys 租户可以修改该配置项，用户租户不能修改该配置项。

## 属性说明

|属性|描述|
|---|---|
|参数类型|STRING|
|默认值| 空字符串 |
|是否可修改|是，支持通过 `ALTER SYSTEM SET` 语句修改。|
|是否重启 OBServer 节点生效|否，设置后立即生效。<main id="notice" type='explain'><h4>说明</h4><p>由于 JVM 启动参数属于运行时环境基础配置，其加载机制遵循 Java 虚拟机规范：<li>参数初始化发生在 JVM 启动阶段。</li><li>禁止运行时动态重载（Runtime Reloading）。</li><li>不支持热更新（Hot-swapping）机制。</li></p></main>|
|必填项|<ul><li>-XX:-CriticalJNINatives</ul></li><ul><li>-Djdk.lang.processReaperUseDefaultStackSize=true</ul></li><ul><li>-Xrs</ul></li>|

## 配置示例

在 SYS 租户下，通过如下命令设置开启或者配置。

```shell
ALTER SYSTEM SET ob_java_opts="-Xmx2048m -Xmn2048m -XX:-CriticalJNINatives -Djdk.lang.processReaperUseDefaultStackSize=true -Xrs -XX:+HeapDumpOnOutOfMemoryError -Xloggc:/home/admin/gc.log -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/home/admin/heapdumps/ -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:CMSInitiatingOccupancyFraction=75 -XX:+UseCMSInitiatingOccupancyOnly -XX:+CMSClassUnloadingEnabled -XX:+TieredCompilation -XX:+ExplicitGCInvokesConcurrentAndUnloadsClasses ";
```

<main id="notice" type='notice'>
  <h4>注意</h4>
  <p>请确保 <code>/home/observer/heapdumps</code> 和 <code>/home/observer</code> 目录存在。如果这些目录不存在，需要使用 OBServer 的部署用户手动创建。请注意，这里的路径仅为示例，您可以根据实际情况指定其他路径。</p>
</main>
