|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# external_kms_info

<main id="notice" type='explain'>
  <h4>说明</h4>
  <p>该配置项从 V2.2.50 版本开始引入。</p>
</main>

## 功能描述

`external_kms_info` 用于存储一些密钥管理信息。

## 权限要求

* 查询配置项

  `sys` 租户和所有用户租户均可以使用 `SHOW PARAMETERS` 语句或视图 `GV$OB_PARAMETERS` 查询该配置项。

* 修改配置项

  `sys` 租户和用户租户均可修改该配置项。

## 属性说明

| **属性** | **描述** |
| -------- | -------- |
| 参数类型             | String  |
| 默认值               | ""，表示空字符串     |
| 是否可修改           | 是，支持通过 `ALTER SYSTEM SET` 语句修改。|
| 是否重启 OBServer 节点生效 | 否，设置后立即生效。 |

## 使用说明

使用外部密钥管理中心时，可通过配置项 `external_kms_info` 存储一些密钥管理信息。具体格式如下：

```json
{
    "KMS_HOST": "TEST_SERVER",                     // kms 地址
    "ROOT_CERT": "TEST_CERT",                       // 证书公钥
    "PRIVATE_KEY": "TEST_PKEY",                     // 证书私钥
    "PRIVATE_KEY_PHRASE": "TEST_PHRASE",            // 证书私钥口令
    "SCENE": "HK",                                  // 场景，取值包括 HK, ANT, HK_SM 和 ANT_SM
    "KEY_NAME": "TEST_NAME",                       // 密钥名称
    "CALLER": "TEST_CALLER"                         // 应用名称
}
```

## 配置示例

在 KMS 中创建密钥 `ob_cluster_key` 并通过 `external_kms_info` 配置。

```shell
obclient> ALTER SYSTEM SET external_kms_info = '
            {
            "KMS_HOST": "kms.ob.com:443",
            "ROOT_CERT": "******",
            "PRIVATE_KEY": "******",
            "PRIVATE_KEY_PHRASE": "ob2025",
            "SCENE": "ANT",
            "KEY_NAME": "ob_cluster_key",
            "CALLER": "oceanbase_admin"
            }';
```