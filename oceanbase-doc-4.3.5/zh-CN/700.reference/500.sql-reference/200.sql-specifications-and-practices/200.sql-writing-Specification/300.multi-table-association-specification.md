|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# 多表关联规范

本文介绍在 OceanBase 中进行数据库多表关联语句的编写规范。

* 多表连接查询推荐使用别名，且 SELECT 列表中要用别名引用字段，数据库.表格式。

  示例 `select a.cid from deposit_account.tbluser a where ...`

* 多表连接场景中建议优先使用内连接。

  <main id="notice" type='explain'>
    <h4>说明</h4>
    <p>OceanBase 数据库支持 <code>LEFT JOIN</code>、<code>RIGHT JOIN</code> 和 <code>FULL JOIN</code> 等外连接语法，但在生产环境中，不推荐直接使用外连接。</p>
  </main>

* 在多表连接的查询中，驱动表须要选择结果集较小的表。

* 不推荐写成多层子查询嵌套的 SQL 语句，推荐改写成表顺序连接的格式。

* 多表关联时禁止出现笛卡尔积：笛卡尔积场景一般不合理，一般由于设计缺陷或漏写关联条件导致，且易出现性能问题。

* 确保表关联条件中的两个字段具有相同的排序规则（collation type），否则可能会导致无法正确使用索引。

* 冗余 SQL 多表查询建议考虑使用 CTE 进行优化改写。