| Description   |                 |
|---------------|-----------------|
| keywords      |                 |
| dir-name      |                 |
| dir-name-en   |                 |
| tenant-type   | Oracle Mode     |
|machine-translation||

# ALTER SESSION

## 描述

`ALTER SESSION` 语句用于修改当前会话的属性。

  <main id="notice" type='explain'>
    <h4>说明</h4>
    <p><code>ALTER SESSION</code> 对应了多种功能的语句，OceanBase 数据库目前支持以下四种：</p>
    <ul>
    <li>切换当前 Session 连接的数据库。</li>
    <li>修改当前 Session 的隔离级别。</li>
    <li>设置 Session 变量，支持同一个语句设置多个变量。</li>
    <li>设置 <code>QUERY</code> 或 <code>DML</code> 的并行执行能力。</li>
    </ul>
  </main>

## 语法

```sql
ALTER SESSION
{
    SET {
        CURRENT_SCHEMA = schema_name
        | ISOLATION_LEVEL = { READ COMMITTED | SERIALIZABLE }
        | variable_name = variable_value[,variable_name = variable_value...]
    }
    | { ENABLE | DISABLE } PARALLEL { DML | QUERY | DDL }
    | FORCE PARALLEL { DML | QUERY | DDL } integer
}
```

## 参数解释

|  参数       |    描述    |
|-----------|-------------|
| SET 子句    | 用于设置会话级别的参数。     |
| CURRENT_SCHEMA = schema_name    | 设置当前会话的默认 schema 为 schema_name。后续查询如果没有指定 schema，则默认使用该 schema。      |
| ISOLATION_LEVEL     | 设置当前会话的事务隔离级别  |
| variable_name = variable_value\[,variable_name = variable_value...\];                          | 指定要设置的 Session 变量名称和取值。设置多个变量时，变量之间没有逗号分隔。  |
| * { ENABLE \| DISABLE \| FORCE } PARALLEL    | 设置 `QUERY` 或 `DML` 的并行执行能力： * `ENABLE`：默认情况下 Session 上并行度的值根据 表的 DOP 值进行决定   <ul><li> `DISABLE`：默认情况下 Session 上的并行度的值为 1。    </li><li> `FORCE`：指定 `QUERY` 或 `DML` 的并行度的值，此时参数 `PARALLEL integer` 必须指定。</li></ul>    **注意**  当指定并行度时，优先级关系为： 通过 Hint 指定的并行度 \> 通过 `ALTER SESSION` 指定的并行度 \> 表级别的并行度。 |

## 示例

* 将用户切换至 `user1` 模式。

  ```sql
  -- 创建用户
  obclient> CREATE USER user1 IDENTIFIED BY yourpassword;
  obclient> ALTER SESSION SET CURRENT_SCHEMA = user1;
  ```

* 修改 Session 的变量值 `recyclebin`、`sql_warnings` 和 `tx_isolation`。

  ```sql
  obclient> ALTER SESSION SET recyclebin = 'on'
                             sql_warnings = 'on'
                             tx_isolation = 'read-committed';
  ```

* 设置 Session 上 `QUERY` 和 `DML` 的并行执行。

  ```sql
  /*以并发度为 3 并行执行*/
  obclient> ALTER SESSION FORCE PARALLEL QUERY PARALLEL 3;

  /*串行执行*/
  obclient> ALTER SESSION FORCE PARALLEL QUERY PARALLEL 1;

  /*开启 PDML 路径，以并发度为 3 并行执行*/
  obclient> ALTER SESSION FORCE PARALLEL DML PARALLEL 3;

  /*串行执行*/
  obclient> ALTER SESSION FORCE PARALLEL DML PARALLEL 1;
  ```