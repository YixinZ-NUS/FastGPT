| Description   |                 |
|---------------|-----------------|
| keywords      |                 |
| dir-name      | Transform Hint 下的其他 Hint        |
| dir-name-en   |                 |
| tenant-type   | Oracle Mode     |
|machine-translation||

# Transform Hint 类型下的其他 Hint

| Hint 类型      | 描述                                          |
|----------------|----------------------------------------------|
| `DECORRELATE`  | 启用对 lateral 表的去关联查询改写。它的反向操作为 `NO_DECORRELATE`。               |
| `NO_DECORRELATE` | 禁用对 lateral 表的去关联查询改写。它的反向操作为 `DECORRELATE`。           |

## `DECORRELATE` Hint

`DECORRELATE` Hint 用于启用对查询中的 lateral 表进行去关联的查询改写，去关联就是将依赖于外部查询的相关子查询（correlated subquery）转换成独立的查询或者非相关的子查询。

`DECORRELATE` Hint 的反向操作是 `NO_DECORRELATE` Hint，用于禁用对 lateral 表进行去关联查询改写。

### 语法

```sql
/*+ DECORRELATE [ ( [ @ qb_name ] ) ] */
```

#### 参数解释

- `@qb_name`：可选，指定应用去关联改写的查询块名称。

### 示例

下方的查询示例中，使用 `DECORRELATE` Hint 来启用对 lateral 表在查询中的去关联查询改写。

```sql
-- `NO_MERGE` Hint 结合 `DECORRELATE` 被用来确保子查询不会与外层查询合并，并明确请求优化器去关联子查询
SELECT *
FROM t1, LATERAL (SELECT /*+ NO_MERGE DECORRELATE */ *
                  FROM t2
                  WHERE t2.c2 = t1.c1) v
WHERE v.c1 = 1;
```

## `NO_DECORRELATE` Hint

是 `DECORRELATE` Hint 反向操作，`NO_DECORRELATE` Hint 用于禁用对 lateral 表进行去关联查询改写。

### 语法

```sql
/*+ NO_DECORRELATE [ ( [ @ qb_name ] ) ] */
```

#### 参数解释

- `@qb_name`：可选，指定禁止去关联查询改写的查询块名称。

### 示例

下方的查询示例中，使用 `NO_DECORRELATE` Hint 来禁用对 lateral 表的去关联查询改写。

```sql
-- `NO_MERGE` Hint 与 `NO_DECORRELATE ` 一起使用，确保优化器不将子查询合并到外层查询中，同时也不进行去关联查询改写。
SELECT *
FROM t1, LATERAL (SELECT /*+ NO_MERGE NO_DECORRELATE */ *
                  FROM t2
                  WHERE t2.c2 = t1.c1) v
WHERE v.c1 = 1;
```