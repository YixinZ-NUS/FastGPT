| Description   |                 |
|---------------|-----------------|
| keywords      |                 |
| dir-name      |                 |
| dir-name-en   |                 |
| tenant-type   | MySQL Mode      |
|machine-translation||

# ENHANCED_AES_DECRYPT

## 声明

```sql
ENHANCED_AES_DECRYPT(cipher_text[, iv])
```

## 说明

* 该函数主要用于对数据进行 AES 解密，该功能的开启通过 `tde_method` 参数进行控制，详情参见 [tde_method](../../../../../800.configuration-items-and-system-variables/100.system-configuration-items/400.tenant-level-configuration-items/7800.tde_method.md)。

* 该函数需要的权限为 `DECRYPT`。

* `cipher_text` 为要进行 AES 解密的密文。

* `[, iv]` 为可选参数，表示初始化向量。

* 解密函数 `ENHANCED_AES_DECRYPT` 的入参 `cipher_text` 必须是由 `ENHANCED_AES_DECRYPT` 函数生成的结果，否则会引发 4334 `OB_ERR_AES_DECRYPT` 错误。

## 示例

`SELECT` 语句使用解密函数返回明文。

```sql
-- 返回明文
SELECT ENHANCED_AES_DECRYPT(cipher_col) FROM tbl;
```

不支持密文与其对应的明文直接做比较计算。需要对密文进行解密，或对明文进行加密，再进行比较。

```sql
-- 对 cipher_col 解密后，预期可以匹配到对应的明文数据 '12345'. 但无法利用索引
SELECT ... FROM tbl WHERE ENHANCED_AES_DECRYPT(cipher_col) = '12345';
```

## 相关文档

* [ENHANCED_AES_ENCRYPT](820.enhanced-aes-encrypt-of-mysql-mode.md)

* [MySQL 模式下的权限分类](../../../../../../600.manage/500.security-and-permissions/300.access-control/200.user-and-permission/200.permission-of-mysql-mode/100.permission-classification-of-mysql.md)