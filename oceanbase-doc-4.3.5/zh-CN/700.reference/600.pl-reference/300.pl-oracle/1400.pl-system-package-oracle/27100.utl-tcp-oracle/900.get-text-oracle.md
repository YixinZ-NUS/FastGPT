| Description   |                 |
|---------------|-----------------|
| keywords      |                 |
| dir-name      |                 |
| dir-name-en   |                 |
| tenant-type   | Oracle Mode     |
|machine-translation||

# GET_TEXT

`GET_TEXT` 用于返回读取的文本数据。

<main id="notice" >
    <h4>功能适用性</h4>
    <p>该内容仅适用于 OceanBase 数据库 Oracle 模式。</p>
  </main>

## 语法

```sql
UTL_TCP.GET_TEXT (
   c    IN OUT NOCOPY connection,
   len  IN            PLS_INTEGER DEFAULT 1,
   peek IN            BOOLEAN     DEFAULT FALSE)
 RETURN VARCHAR2;
```

## 参数解释

| **参数** |         **解释**         |
|--------|------------------------|
|c| TCP/IP 连接。|
|len|要接收的字符数。默认值为1。|
|peek|为 `true` 时，查看数据，但不会从输入队列中删除（需要存在输入缓冲区）。|

## 返回值

返回读取的文本行内容。

## 使用说明

* 必须是已经通过 `open_connection` 打开过的连接。
* 除非显示重写，否则缓冲区大小是字节数。而参数 `len` 时指定要读取的最大字符数。应当确保缓冲区大小至少可以容纳一个字符。通常缓冲区大小应当设置为需要读取的字符数 * 单字符最大字节数。
* 消息文本从打开连接时的在线字符集转换为数据库字符集再返回。
* 如果在打开连接时设置了传输超时，则此函数会持续等待读取数据包，直到发生超时，停止读取，返回成功读取的所有数据。如果未成功读取到任何数据，则会引发 `transfer_timeout` 异常。
