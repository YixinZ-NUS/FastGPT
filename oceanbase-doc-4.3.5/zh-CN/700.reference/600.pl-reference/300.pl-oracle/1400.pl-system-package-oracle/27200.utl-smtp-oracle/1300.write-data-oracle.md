| Description   |                 |
|---------------|-----------------|
| keywords      |                 |
| dir-name      |                 |
| dir-name-en   |                 |
| tenant-type   | Oracle Mode     |
|machine-translation||

# WRITE_DATA

`WRITE_DATA` 用于发送文本邮件内容，可以多次调用将数据追加到电子邮件中。

<main id="notice" >
    <h4>功能适用性</h4>
    <p>该内容仅适用于 OceanBase 数据库 Oracle 模式。</p>
  </main>

## 语法

```sql
UTL_SMTP.WRITE_DATA (
   c     IN OUT NOCOPY connection,
   data  IN VARCHAR2 CHARACTER SET ANY_CS);
```

## 参数解释

| **参数** |         **解释**         |
|--------|------------------------|
|c|SMTP 连接。|
|data|要发送的消息文本的一部分。包含 `headers`，采用 [RFC822] 格式。|

## 使用说明

* `OPEN_DATA`,`WRITE_DATA`, `WRITE_RAW_DATA` 和 `CLOSE_DATA` 需要严格按照顺序调用。`open_data` 发送 `data` 命令声明开始发送邮件内容，之后可以多个调用 `write_data` 和 `write_raw_data` 发送邮件正文，最后通过 `close_data` 发送终止符结束发送。
* 应用程序必须确保文本内容符合 `MIME（RFC822）`规范。使用 `<CR><LF>.<CR><LF>` 作为终止消息，文本内容中的`<CR><LF>.<CR><LF>` 将会被转译为 `<CR><LF>..<CR><LF>`。
* 文本（varchar2）数据在发送前将会被转化为 `US7ASCII` 字符集。如果文本中包含多字节字符，则文本中无法 `US7ASCII` 的每个多字节字符会被转换为 `?` 字符。
* 如果 `ehlo` 与 `smtp` 服务器协商了 `8BITMIME` 扩展，可以通过 `utl_raw` 高级包将文本转换为 `raw` 数据，再通过`write_raw_data` 发送。
