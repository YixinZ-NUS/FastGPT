|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|Oracle Mode|
|machine-translation||

# GV$SESSION_WAIT_HISTORY

<main id="notice" type='explain'>
  <h4>说明</h4>
  <p>该视图从 V1.4 版本开始引入。</p>
</main>

## 功能描述

视图 `GV$SESSION_WAIT_HISTORY` 用于展示所有节点上所有 Session 的最近 10 次等待事件的信息。

## 字段说明

| **字段名称** | **类型** | **是否可以为 NULL** | **描述** |
| ---- | ---- | ---- | ---- |
| SID | NUMBER | NO | 对于 V4.3.x 版本：<ul><li> V4.3.5 BP2 之前版本：<br>在所有连接方式（直连模式/ODP 模式）下，该字段均表示 Server Session ID。</li><li> V4.3.5 BP2 及之后版本：<ul><li>在直连模式下：<br>该字段表示 Server Session ID。</li> <li>在 ODP 模式下：</li><ul><li>当 ODP 中的配置项 <code>client_session_id_version = 2</code> 时，该字段表示 Client Session ID。 </li> <li>当 <code>client_session_id_version = 1</code> 时，该字段表示 Server Session ID。</li></ul></ul></li></ul>  |
| CON_ID | NUMBER | NO | 租户 ID |
| SVR_IP | VARCHAR2(46) | NO | 服务器的 IP 地址 |
| SVR_PORT | NUMBER(38) | NO | 服务器端口 |
| SEQ# | NUMBER | NO | 等待事件序列号 |
| EVENT# | NUMBER | NO | 等待事件编号 |
| EVENT | VARCHAR2(64) | NO | 等待事件名称 |
| P1TEXT | VARCHAR2(64) | NO | 等待事件的第 1 个参数的描述 |
| P1 | NUMBER | NO | 等待事件的第 1 个参数的值 |
| P2TEXT | VARCHAR2(64) | NO | 等待事件的第 2 个参数的描述 |
| P2 | NUMBER | NO | 等待事件的第 2 个参数的值 |
| P3TEXT | VARCHAR2(64) | NO | 等待事件的第 3 个参数的描述 |
| P3 | NUMBER | NO | 等待事件的第 3 个参数的值 |
| WAIT_TIME_MICRO | NUMBER | NO | 等待事件的等待时间，单位为微秒 |
| TIME_SINCE_LAST_WAIT_MICRO | NUMBER | NO | 自上一次等待结束到当前等待的时间，单位为微秒 |
| WAIT_TIME | NUMBER | NO | 等待事件的等待时间，单位为百分之一秒 |

## 查询示例

查询所有节点上所有 Session 的最近 10 次等待事件的信息。

```shell
obclient [SYS]> SELECT * FROM SYS.GV$SESSION_WAIT_HISTORY WHERE ROWNUM =1\G
```

查询结果如下：

```shell
*************************** 1. row ***************************
                       SID: 1152921504606867748
                    CON_ID: 1004
                    SVR_IP: xx.xx.xx.xx
                  SVR_PORT: 2882
                      SEQ#: 1
                    EVENT#: 0
                     EVENT: NULL
                    P1TEXT: NULL
                        P1: 0
                    P2TEXT: NULL
                        P2: 0
                    P3TEXT: NULL
                        P3: 0
                 WAIT_TIME: 174572416323.10251
           WAIT_TIME_MICRO: 1745724163231025
TIME_SINCE_LAST_WAIT_MICRO: 0
```