|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|Oracle Mode|
|machine-translation||

# GV$OB_PLAN_CACHE_STAT

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.0.0 版本开始引入。</p>
</main>

## 功能描述

展示当前租户在所有 OBServer 节点上的每个计划缓存整体的状态。

## 字段说明

|   **字段名称**   |    **类型**    | **是否可以为 NULL** |              **描述**               |
|--------------|--------------|----------------|-----------------------------------|
| SVR_IP       | VARCHAR2(32) | NO             | 服务器的 IP 地址                        |
| SVR_PORT     | NUMBER(38)   | NO             | 端口号                               |
| SQL_NUM      | NUMBER(38)   | NO             | plan_cache 涉及 SQL 条数              |
| MEM_USED     | NUMBER(38)   | NO             | plan_cache 已经使用的内存                |
| MEM_HOLD     | NUMBER(38)   | NO             | plan_cache 持有的内存                  |
| ACCESS_COUNT | NUMBER(38)   | NO             | 查询访问 plan_cache 的次数                 |
| HIT_COUNT    | NUMBER(38)   | NO             | 命中 plan_cache 的次数                 |
| HIT_RATE     | NUMBER(38)   | NO             | plan_cache 的命中率                   |
| PLAN_NUM     | NUMBER(38)   | NO             | plan 的个数                          |
| MEM_LIMIT    | NUMBER(38)   | NO             | plan_cache 的内存上限，单位为字节                  |
| HASH_BUCKET  | NUMBER(38)   | NO             | plan_cache hash map 中的 Bucket 的个数 |
| STMTKEY_NUM  | NUMBER(38)   | NO             | plan_cache 中 stmt_key 的个数         |

## 查询示例

用户租户下，查看本租户在所有节点上的计划缓存的整体状态。

```shell
obclient [SYS]> SELECT * FROM SYS.GV$OB_PLAN_CACHE_STAT;
```

查询结果如下：

```shell
+----------------+----------+---------+----------+----------+--------------+-----------+----------+----------+-----------+-------------+-------------+
| SVR_IP         | SVR_PORT | SQL_NUM | MEM_USED | MEM_HOLD | ACCESS_COUNT | HIT_COUNT | HIT_RATE | PLAN_NUM | MEM_LIMIT | HASH_BUCKET | STMTKEY_NUM |
+----------------+----------+---------+----------+----------+--------------+-----------+----------+----------+-----------+-------------+-------------+
| 11.xxx.xxx.xxx |    28825 |     477 | 12644786 | 88080384 |      5381284 |   5377454 |       99 |      477 | 214748360 |       49157 |           0 |
+----------------+----------+---------+----------+----------+--------------+-----------+----------+----------+-----------+-------------+-------------+
1 row in set
```