|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|Oracle Mode|
|machine-translation||

# GV$OPEN_CURSOR

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V3.1.2 版本开始引入。</p>
</main>

## 功能描述

展示所有节点上处于 Open 状态的 Session Cursor 的相关信息。

  <main id="notice" >
    <h4>功能适用性</h4>
    <p>该视图仅适用于 OceanBase 数据库 Oracle 模式。</p>
  </main>

## 字段说明

| 字段名称                 | 类型           |  是否可以为 NULL |   描述                             |
|-------------------------|----------------|-----------------|------------------------------------|
| SVR_IP               | VARCHAR2(46) | NO   | 服务器 IP 地址  |
| SVR_PORT             | NUMBER(38)   | NO   | 服务器端口号 |
| SADDR                | VARCHAR2(8)  | NO   | Session 内存地址 |
| SID                  | NUMBER       | NO   | Session ID |
| USER_NAME            | VARCHAR2(30) | NO   | 用户名 |
| ADDRESS              | VARCHAR2(8)  | NO   | SQL 地址，与 SQL Hash 一起唯一定位一个 SQL，目前该字段为 NULL |
| HASH_VALUE           | NUMBER       | NO   | SQL Hash，目前该字段为 NULL |
| SQL_ID               | VARCHAR2(32) | NO   | SQL ID |
| SQL_TEXT             | VARCHAR2(60) | NO   | SQL 文本的前 60 个字串符 |
| LAST_SQL_ACTIVE_TIME | DATE         | NO   | 最后一次执行的时间 |
| SQL_EXEC_ID          | NUMBER       | NO   | 目前该字段为 Null |
| CURSOR_TYPE          | VARCHAR2(30) | NO   | Cursor 类型，目前包含两种状态：<ul><li>OPEN：表示当前所有 Session Open 的 SQL 语句 </li><li>SESSION CURSOR：表示当前所有 Session Open 的 Session Cursor</li></ul>|
| CHILD_ADDRESS        | VARCHAR2(30) | NO   | 目前暂不支持该字段 |
| CON_ID               | NUMBER       | NO   | 数据所属容器的 ID，当前值为 `1` |

## 查询示例

查看所有节点上处于 Open 状态的 Session Cursor 的相关信息。

```shell
obclient[SYS]> SELECT * FROM SYS.GV$OPEN_CURSOR;
```

查询结果如下：

```shell
+----------------+----------+----------+------------+-----------+---------+------------+----------------------------------+--------------------------------------------+----------------------+-------------+-------------+---------------+--------+
| SVR_IP         | SVR_PORT | SADDR    | SID        | USER_NAME | ADDRESS | HASH_VALUE | SQL_ID                           | SQL_TEXT                                   | LAST_SQL_ACTIVE_TIME | SQL_EXEC_ID | CURSOR_TYPE | CHILD_ADDRESS | CON_ID |
+----------------+----------+----------+------------+-----------+---------+------------+----------------------------------+--------------------------------------------+----------------------+-------------+-------------+---------------+--------+
| 172.xx.xxx.xxx |     2882 | dab241f0 | 3221681162 | SYS       | NULL    |       NULL | 1253DFE0FC404832728BD3791DD83943 | select * from GV$OPEN_CURSOR               | 07-MAY-25            |        NULL | OPEN        | NULL          |      1 |
| 172.xx.xxx.xxx |     2882 | dab40b70 | 3221724339 | SYS       | NULL    |       NULL | NULL                             | ALTER SYSTEM SET arbitration_timeout='30s' | 07-MAY-25            |        NULL | OPEN        | NULL          |      1 |
| 172.xx.xxx.xxx |     2882 | 2a852b70 | 3221557889 | SYS       | NULL    |       NULL | NULL                             | select * from GV$OB_GLOBAL_TRANSACTION     | 07-MAY-25            |        NULL | OPEN        | NULL          |      1 |
+----------------+----------+----------+------------+-----------+---------+------------+----------------------------------+--------------------------------------------+----------------------+-------------+-------------+---------------+--------+
3 rows in set
```