|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|Oracle Mode|
|machine-translation||

# DBA_OB_OUTLINE_CONCURRENT_HISTORY

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.0.0 版本开始引入。</p>
</main>

## 功能描述

展示当前租户的执行计划和限流规则 Outline 历史信息。

## 字段说明

| 字段名称 | 类型 | 是否可以为 NULL | 描述 |
| --- | --- | --- | --- |
| CREATE_TIME | TIMESTAMP(6) | NO | 创建时间戳 |
| MODIFY_TIME | TIMESTAMP(6) | NO | 修改时间戳 |
| TENANT_ID | NUMBER(38) | NO | 租户 ID |
| DATABASE_ID | NUMBER(38) | YES | 数据库 ID |
| OUTLINE_ID | NUMBER(38) | NO | Outline ID |
| OUTLINE_NAME | VARCHAR2(128) | YES | Outline 名称 |
| SQL_TEXT | CLOB | YES | 创建 Outline 时，在 on clause 中指定的 SQL |
| OUTLINE_PARAMS | VARBINARY(65536) | YES | 创建 Outline 时，相关的限流规则参数 |
| OUTLINE_TARGET | CLOB | YES | 创建 Outline 时，在 to clause 中指定的 SQL |
| SQL_ID | VARCHAR2(32) | YES | SQL 标识符 |
| OUTLINE_CONTENT | CLOB | YES | 完整的 Outline 信息 |
| IS_DELETED | VARCHAR2(3) | NO | 是否删除 |
| ENABLED | VARCHAR2(3) | NO | 是否有效 |

## 查询示例

查看本租户的执行计划和限流规则 Outline 历史信息。

```shell
obclient [SYS]> SELECT * FROM SYS.DBA_OB_OUTLINE_CONCURRENT_HISTORY\G
```

查询结果如下：

```shell
*************************** 1. row ***************************
    CREATE_TIME: 14-MAR-25 01.44.10.871760 PM
    MODIFY_TIME: 14-MAR-25 01.44.10.871760 PM
      TENANT_ID: 1004
    DATABASE_ID: 201006
     OUTLINE_ID: 500053
   OUTLINE_NAME: IDX2
       SQL_TEXT: SELECT/*+ INDEX(t1 idx2)*/ * FROM t1 WHERE c2 = 1
 OUTLINE_PARAMS: xx
 OUTLINE_TARGET: NULL
         SQL_ID: NULL
OUTLINE_CONTENT: /*+BEGIN_OUTLINE_DATA INDEX(@"SEL$1" "SYS"."T1"@"SEL$1" "IDX2") OPTIMIZER_FEATURES_ENABLE('4.2.5.1') END_OUTLINE_DATA*/
     IS_DELETED: NO
        ENABLED: YES
*************************** 2. row ***************************
    CREATE_TIME: 14-MAR-25 01.58.10.524252 PM
    MODIFY_TIME: 14-MAR-25 01.58.10.524252 PM
      TENANT_ID: 1004
    DATABASE_ID: 201006
     OUTLINE_ID: 500054
   OUTLINE_NAME: OUTLINE1
       SQL_TEXT: SELECT /*+NO_REWRITE*/ * FROM T1 WHERE c1 = 1 AND c2 = 3 ORDER BY 2
 OUTLINE_PARAMS: xx
 OUTLINE_TARGET: SELECT  * FROM T1 WHERE c1 = 1 AND c2 = 3 ORDER BY 2
         SQL_ID: NULL
OUTLINE_CONTENT: /*+BEGIN_OUTLINE_DATA INDEX(@"SEL$1" "SYS"."T1"@"SEL$1" "IDX2") OPTIMIZER_FEATURES_ENABLE('4.2.5.1') END_OUTLINE_DATA*/
     IS_DELETED: NO
        ENABLED: YES
2 rows in set
```