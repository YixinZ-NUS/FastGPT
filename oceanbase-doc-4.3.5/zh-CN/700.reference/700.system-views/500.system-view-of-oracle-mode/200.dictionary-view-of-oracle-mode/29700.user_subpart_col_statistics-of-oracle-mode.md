|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|Oracle Mode|
|machine-translation||

# USER_SUBPART_COL_STATISTICS

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V3.2.1 版本开始引入。</p>
</main>

## 功能描述

展示属于当前用户的分区表中二级分区的列统计信息和直方图信息。

  <main id="notice" >
    <h4>功能适用性</h4>
    <p>该视图仅适用于 OceanBase 数据库 Oracle 模式。</p>
  </main>

## 字段说明

|       字段名称        |    **类型**     | **是否可以为 NULL** |                                                           **描述**                                                           |
|-------------------|---------------|----------------|----------------------------------------------------------------------------------------------------------------------------|
| TABLE_NAME        | VARCHAR2(128) | NO             | 表名                                      |
| SUBPARTITION_NAME | VARCHAR2(128) | NO             | 二级分区名                                   |
| COLUMN_NAME       | VARCHAR2(128) | NO             | 列名                                      |
| NUM_DISTINCT      | NUMBER        | YES            | 列中不同值的数量                                |
| LOW_VALUE         | VARCHAR2(128) | YES            | 列的最小值                                   |
| HIGH_VALUE        | VARCHAR2(128) | YES            | 列的最大值                                   |
| DENSITY           | NUMBER        | YES            | 列的密度                                    |
| NUM_NULLS         | NUMBER        | YES            | 列中 `NULL` 值的数量                          |
| NUM_BUCKETS       | NUMBER        | YES            | 列直方图中桶的个数                               |
| SAMPLE_SIZE       | NUMBER        | YES            | 分析时的采样大小                                |
| LAST_ANALYZED     | DATE          | YES            | 上次分析的时间                                 |
| GLOBAL_STATS      | VARCHAR2(3)   | YES            | <li> `YES`：表示统计信息已收集   <li> `NO`：表示统计信息未收集    |
| USER_STATS        | VARCHAR2(3)   | YES            | 表示分区统计信息是否是用户设置的                        |
| NOTES             | VARCHAR2(80)  | YES            | 记录一些额外的属性                               |
| AVG_COL_LEN       | NUMBER        | YES            | 列的平均长度                                  |
| HISTOGRAM         | VARCHAR2(15)  | YES            | 直方图类型                                   |

## 查询示例

查看当前用户拥有的分区表中，表 `T_SUBPART` 的二级分区的列统计信息。

```shell
obclient [SYS]> SELECT * FROM SYS.USER_SUBPART_COL_STATISTICS WHERE TABLE_NAME='T_SUBPART';
```

查询结果如下：

```shell
+------------+-------------------+-------------+--------------+-----------+------------+-----------------------+-----------+-------------+-------------+---------------+--------------+------------+-------+-------------+-----------+
| TABLE_NAME | SUBPARTITION_NAME | COLUMN_NAME | NUM_DISTINCT | LOW_VALUE | HIGH_VALUE | DENSITY               | NUM_NULLS | NUM_BUCKETS | SAMPLE_SIZE | LAST_ANALYZED | GLOBAL_STATS | USER_STATS | NOTES | AVG_COL_LEN | HISTOGRAM |
+------------+-------------------+-------------+--------------+-----------+------------+-----------------------+-----------+-------------+-------------+---------------+--------------+------------+-------+-------------+-----------+
| T_SUBPART  | P0SSP0            | C3          |          434 | 2         | 1999       |   .002304147465437788 |         0 |           5 |         829 | 17-MAR-25     | NO           | NO         | NULL  |          20 | HYBRID    |
| T_SUBPART  | P0SSP0            | C2          |          248 | 2         | 999        |  .0040322580645161289 |         0 |           5 |         829 | 17-MAR-25     | NO           | NO         | NULL  |          20 | HYBRID    |
| T_SUBPART  | P0SSP0            | C1          |          844 | 2         | 9990       |  .0011848341232227489 |         0 |           5 |         829 | 17-MAR-25     | NO           | NO         | NULL  |          20 | HYBRID    |
| T_SUBPART  | P0SSP1            | C3          |          723 | 0         | 1998       |  .0013831258644536654 |         0 |           5 |        1141 | 17-MAR-25     | NO           | NO         | NULL  |          20 | HYBRID    |
| T_SUBPART  | P0SSP1            | C2          |          482 | 0         | 998        |  .0020746887966804979 |         0 |           5 |        1141 | 17-MAR-25     | NO           | NO         | NULL  |          20 | HYBRID    |
| T_SUBPART  | P0SSP1            | C1          |         1144 | 1000      | 9998       | .00087412587412587413 |         0 |           5 |        1141 | 17-MAR-25     | NO           | NO         | NULL  |          20 | HYBRID    |
| T_SUBPART  | P0SSP2            | C3          |          372 | 3         | 1991       |  .0026881720430107529 |         0 |           5 |         560 | 17-MAR-25     | NO           | NO         | NULL  |          20 | HYBRID    |
| T_SUBPART  | P0SSP2            | C2          |          235 | 3         | 992        |  .0042553191489361703 |         0 |           5 |         560 | 17-MAR-25     | NO           | NO         | NULL  |          20 | HYBRID    |
| T_SUBPART  | P0SSP2            | C1          |          575 | 1014      | 9986       |  .0017391304347826088 |         0 |           5 |         560 | 17-MAR-25     | NO           | NO         | NULL  |          20 | HYBRID    |
| T_SUBPART  | P1SSP0            | C3          |          465 | 2         | 1999       |  .0021505376344086021 |         0 |           5 |        1122 | 17-MAR-25     | NO           | NO         | NULL  |          20 | HYBRID    |
| T_SUBPART  | P1SSP0            | C2          |          248 | 2         | 999        |  .0040322580645161289 |         0 |           5 |        1122 | 17-MAR-25     | NO           | NO         | NULL  |          20 | HYBRID    |
| T_SUBPART  | P1SSP0            | C1          |         1119 | 1002      | 9999       | .00089365504915102768 |         0 |           5 |        1122 | 17-MAR-25     | NO           | NO         | NULL  |          20 | HYBRID    |
| T_SUBPART  | P1SSP1            | C3          |          980 | 0         | 1998       |  .0010204081632653062 |         0 |           5 |        2714 | 17-MAR-25     | NO           | NO         | NULL  |          20 | HYBRID    |
| T_SUBPART  | P1SSP1            | C2          |          517 | 0         | 998        |  .0019342359767891683 |         0 |           5 |        2714 | 17-MAR-25     | NO           | NO         | NULL  |          20 | HYBRID    |
| T_SUBPART  | P1SSP1            | C1          |         2804 | 0         | 9997       |  .0003566333808844508 |         0 |           5 |        2714 | 17-MAR-25     | NO           | NO         | NULL  |          20 | HYBRID    |
| T_SUBPART  | P1SSP2            | C3          |          479 | 3         | 1992       |  .0020876826722338203 |         0 |           5 |        1130 | 17-MAR-25     | NO           | NO         | NULL  |          20 | HYBRID    |
| T_SUBPART  | P1SSP2            | C2          |          251 | 3         | 992        |  .0039840637450199202 |         0 |           5 |        1130 | 17-MAR-25     | NO           | NO         | NULL  |          20 | HYBRID    |
| T_SUBPART  | P1SSP2            | C1          |         1168 | 1005      | 9992       | .00085616438356164379 |         0 |           5 |        1130 | 17-MAR-25     | NO           | NO         | NULL  |          20 | HYBRID    |
| T_SUBPART  | P2SSP0            | C3          |          339 | 2         | 1999       |  .0029498525073746312 |         0 |           5 |         549 | 17-MAR-25     | NO           | NO         | NULL  |          20 | HYBRID    |
| T_SUBPART  | P2SSP0            | C2          |          228 | 2         | 999        |  .0043859649122807015 |         0 |           5 |         549 | 17-MAR-25     | NO           | NO         | NULL  |          20 | HYBRID    |
| T_SUBPART  | P2SSP0            | C1          |          527 | 1042      | 9963       |  .0018975332068311196 |         0 |           5 |         549 | 17-MAR-25     | NO           | NO         | NULL  |          20 | HYBRID    |
| T_SUBPART  | P2SSP1            | C3          |          725 | 1         | 1998       |  .0013793103448275861 |         0 |           5 |        1125 | 17-MAR-25     | NO           | NO         | NULL  |          20 | HYBRID    |
| T_SUBPART  | P2SSP1            | C2          |          473 | 1         | 998        |  .0021141649048625794 |         0 |           5 |        1125 | 17-MAR-25     | NO           | NO         | NULL  |          20 | HYBRID    |
| T_SUBPART  | P2SSP1            | C1          |         1125 | 1004      | 9995       | .00088888888888888893 |         0 |           5 |        1125 | 17-MAR-25     | NO           | NO         | NULL  |          20 | HYBRID    |
| T_SUBPART  | P2SSP2            | C3          |          445 | 3         | 1987       |  .0022471910112359553 |         0 |           5 |         830 | 17-MAR-25     | NO           | NO         | NULL  |          20 | HYBRID    |
| T_SUBPART  | P2SSP2            | C2          |          251 | 3         | 992        |  .0039840637450199202 |         0 |           5 |         830 | 17-MAR-25     | NO           | NO         | NULL  |          20 | HYBRID    |
| T_SUBPART  | P2SSP2            | C1          |          795 | 3         | 9972       |  .0012578616352201257 |         0 |           5 |         830 | 17-MAR-25     | NO           | NO         | NULL  |          20 | HYBRID    |
+------------+-------------------+-------------+--------------+-----------+------------+-----------------------+-----------+-------------+-------------+---------------+--------------+------------+-------+-------------+-----------+
27 rows in set
```

## 相关视图或文档

* 查看当前用户可访问的分区表的二级分区的列统计信息：[ALL_SUBPART_COL_STATISTICS](4100.all_subpart_col_statistics-of-oracle-mode.md)

* 查看本租户下所有分区表的二级分区的列统计信息：[DBA_SUBPART_COL_STATISTICS](20100.dba_subpart_col_statistics-of-oracle-mode.md)

* 表级的列统计信息，查询以下视图：

  * [ALL_TAB_STATISTICS](5400.all_tab_statistics-of-oracle-mode.md)
  * [DBA_TAB_STATISTICS](21500.dba_tab_statistics-of-oracle-mode.md)
  * [USER_TAB_STATISTICS](31100.user_tab_statistics-of-oracle-mode.md)

* Global 级的列统计信息，查询以下视图：

  * [ALL_TAB_COL_STATISTICS](4600.all_tab_col_statistics-of-oracle-mode.md)
  * [DBA_TAB_COL_STATISTICS](20700.dba_tab_col_statistics-of-oracle-mode.md)
  * [USER_TAB_COL_STATISTICS](30300.user_tab_col_statistics-of-oracle-mode.md)

* Partition 级的列统计信息，查询以下视图：

  * [ALL_PART_COL_STATISTICS](2500.all_part_col_statistics-of-oracle-mode.md)
  * [DBA_PART_COL_STATISTICS](17100.dba_part_col_statistics-of-oracle-mode.md)
  * [USER_PART_COL_STATISTICS](27900.user_part_col_statistics-of-oracle-mode.md)

* 表级的直方图统计信息，查询以下视图：

  * [ALL_TAB_HISTOGRAMS](5000.all_tab_histograms-of-oracle-mode.md)
  * [DBA_TAB_HISTOGRAMS](21100.dba_tab_histograms-of-oracle-mode.md)
  * [USER_TAB_HISTOGRAMS](30700.user_tab_histograms-of-oracle-mode.md)

* Partition 级的直方图统计信息，查询以下视图：

  * [ALL_PART_HISTOGRAMS](2600.all_part_histograms-of-oracle-mode.md)
  * [DBA_PART_HISTOGRAMS](17200.dba_part_histograms-of-oracle-mode.md)
  * [USER_PART_HISTOGRAMS](28000.user_part_histograms-of-oracle-mode.md)

* Subpartiton 级的直方图统计信息，查询以下视图：

  * [ALL_SUBPART_HISTOGRAMS](4200.all_subpart_histograms-of-oracle-mode.md)
  * [DBA_SUBPART_HISTOGRAMS](20200.dba_subpart_histograms-of-oracle-mode.md)
  * [USER_SUBPART_HISTOGRAMS](29800.user_subpart_histograms-of-oracle-mode.md)

* 索引统计信息，查询以下视图：

  * [ALL_IND_STATISTICS](1700.all_ind_statistics-of-oracle-mode.md)
  * [DBA_IND_STATISTICS](8600.dba_ind_statistics-of-oracle-mode.md)
  * [USER_IND_STATISTICS](26600.user_ind_statistics-of-oracle-mode.md)

* 有关如何收集统计信息，参见以下文档：

  * [手动收集统计信息](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/200.statistics-collection-methods/300.collect-statistics-manually.md)

  * [自动收集统计信息](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/200.statistics-collection-methods/400.collect-statistics-automatically.md)