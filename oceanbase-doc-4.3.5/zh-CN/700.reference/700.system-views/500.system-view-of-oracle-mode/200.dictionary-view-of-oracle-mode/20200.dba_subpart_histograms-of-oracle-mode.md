|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|Oracle Mode|
|machine-translation||

# DBA_SUBPART_HISTOGRAMS

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V3.2.1 版本开始引入。</p>
</main>

## 功能描述

展示当前租户中所有分区表的二级分区的直方图相关信息。

## 字段说明

|           字段名称            |       类型       | 是否可以为 NULL |      描述       |
|---------------------------|----------------|------------|---------------|
| OWNER                     | VARCHAR2(128)  | NO         | 直方图所属的用户      |
| TABLE_NAME                | VARCHAR2(128)  | NO         | 直方图所属表名       |
| SUBPARTITION_NAME         | VARCHAR2(128)  | NO         | 直方图所属二级分区名    |
| COLUMN_NAME               | VARCHAR2(128)  | NO         | 直方图所属列名       |
| ENDPOINT_NUMBER           | NUMBER         | NO         | Bucket 累积的频次  |
| ENDPOINT_VALUE            | NUMBER         | NO         | Bucket 端点归一化值 |
| ENDPOINT_ACTUAL_VALUE     | VARCHAR2(4000) | NO         | Bucket 端点值    |
| ENDPOINT_ACTUAL_VALUE_RAW | VARCHAR2(4000) | NO         | Bucket 端点二进制值 |
| ENDPOINT_REPEAT_COUNT     | NUMBER         | NO         | Bucket 端点值的频次 |

## 查询示例

查看本租户的分区表 `T_SUBPART` 的二级分区的直方图信息。

```shell
obclient [SYS]> SELECT * FROM SYS.DBA_SUBPART_HISTOGRAMS WHERE TABLE_NAME ='T_SUBPART';
```

查询结果如下：

```shell
+-------+------------+-------------------+-------------+-----------------+----------------+-----------------------+---------------------------+-----------------------+
| OWNER | TABLE_NAME | SUBPARTITION_NAME | COLUMN_NAME | ENDPOINT_NUMBER | ENDPOINT_VALUE | ENDPOINT_ACTUAL_VALUE | ENDPOINT_ACTUAL_VALUE_RAW | ENDPOINT_REPEAT_COUNT |
+-------+------------+-------------------+-------------+-----------------+----------------+-----------------------+---------------------------+-----------------------+
| SYS   | T_SUBPART  | P3SP3             | QUANTITY    |              40 |           NULL | 1                     | 1                         |                    40 |
| SYS   | T_SUBPART  | P3SP3             | ID          |              40 |           NULL | 9                     | 9                         |                    20 |
| SYS   | T_SUBPART  | P3SP3             | ID          |              20 |           NULL | 6                     | 6                         |                    20 |
| SYS   | T_SUBPART  | P3SP2             | QUANTITY    |              40 |           NULL | 1                     | 1                         |                    40 |
| SYS   | T_SUBPART  | P3SP2             | ID          |              40 |           NULL | 5                     | 5                         |                    20 |
| SYS   | T_SUBPART  | P3SP2             | ID          |              20 |           NULL | 3                     | 3                         |                    20 |
| SYS   | T_SUBPART  | P3SP1             | QUANTITY    |              60 |           NULL | 1                     | 1                         |                    60 |
| SYS   | T_SUBPART  | P3SP1             | ID          |              60 |           NULL | 8                     | 8                         |                    20 |
| SYS   | T_SUBPART  | P3SP1             | ID          |              40 |           NULL | 4                     | 4                         |                    20 |
| SYS   | T_SUBPART  | P3SP1             | ID          |              20 |           NULL | 1                     | 1                         |                    20 |
| SYS   | T_SUBPART  | P3SP0             | QUANTITY    |              60 |           NULL | 1000                  | 1000                      |                     2 |
| SYS   | T_SUBPART  | P3SP0             | QUANTITY    |              58 |           NULL | 1                     | 1                         |                    58 |
| SYS   | T_SUBPART  | P3SP0             | ID          |              60 |           NULL | 999                   | 999                       |                    20 |
| SYS   | T_SUBPART  | P3SP0             | ID          |              40 |           NULL | 7                     | 7                         |                    20 |
| SYS   | T_SUBPART  | P3SP0             | ID          |              20 |           NULL | 2                     | 2                         |                    20 |
| SYS   | T_SUBPART  | P2SP3             | QUANTITY    |              60 |           NULL | 1                     | 1                         |                    60 |
| SYS   | T_SUBPART  | P2SP3             | ID          |              60 |           NULL | 9                     | 9                         |                    30 |
| SYS   | T_SUBPART  | P2SP3             | ID          |              30 |           NULL | 6                     | 6                         |                    30 |
| SYS   | T_SUBPART  | P2SP2             | QUANTITY    |              60 |           NULL | 1                     | 1                         |                    60 |
| SYS   | T_SUBPART  | P2SP2             | ID          |              60 |           NULL | 5                     | 5                         |                    30 |
| SYS   | T_SUBPART  | P2SP2             | ID          |              30 |           NULL | 3                     | 3                         |                    30 |
| SYS   | T_SUBPART  | P2SP1             | QUANTITY    |              90 |           NULL | 1                     | 1                         |                    90 |
| SYS   | T_SUBPART  | P2SP1             | ID          |              90 |           NULL | 8                     | 8                         |                    30 |
| SYS   | T_SUBPART  | P2SP1             | ID          |              60 |           NULL | 4                     | 4                         |                    30 |
| SYS   | T_SUBPART  | P2SP1             | ID          |              30 |           NULL | 1                     | 1                         |                    30 |
| SYS   | T_SUBPART  | P2SP0             | QUANTITY    |              90 |           NULL | 1000                  | 1000                      |                     3 |
| SYS   | T_SUBPART  | P2SP0             | QUANTITY    |              87 |           NULL | 1                     | 1                         |                    87 |
| SYS   | T_SUBPART  | P2SP0             | ID          |              90 |           NULL | 999                   | 999                       |                    30 |
| SYS   | T_SUBPART  | P2SP0             | ID          |              60 |           NULL | 7                     | 7                         |                    30 |
| SYS   | T_SUBPART  | P2SP0             | ID          |              30 |           NULL | 2                     | 2                         |                    30 |
| SYS   | T_SUBPART  | P1SP3             | QUANTITY    |             100 |           NULL | 1                     | 1                         |                   100 |
| SYS   | T_SUBPART  | P1SP3             | ID          |             100 |           NULL | 9                     | 9                         |                    50 |
| SYS   | T_SUBPART  | P1SP3             | ID          |              50 |           NULL | 6                     | 6                         |                    50 |
| SYS   | T_SUBPART  | P1SP2             | QUANTITY    |             100 |           NULL | 1                     | 1                         |                   100 |
| SYS   | T_SUBPART  | P1SP2             | ID          |             100 |           NULL | 5                     | 5                         |                    50 |
| SYS   | T_SUBPART  | P1SP2             | ID          |              50 |           NULL | 3                     | 3                         |                    50 |
| SYS   | T_SUBPART  | P1SP1             | QUANTITY    |             150 |           NULL | 1                     | 1                         |                   150 |
| SYS   | T_SUBPART  | P1SP1             | ID          |             150 |           NULL | 8                     | 8                         |                    50 |
| SYS   | T_SUBPART  | P1SP1             | ID          |             100 |           NULL | 4                     | 4                         |                    50 |
| SYS   | T_SUBPART  | P1SP1             | ID          |              50 |           NULL | 1                     | 1                         |                    50 |
| SYS   | T_SUBPART  | P1SP0             | QUANTITY    |             150 |           NULL | 1000                  | 1000                      |                     5 |
| SYS   | T_SUBPART  | P1SP0             | QUANTITY    |             145 |           NULL | 1                     | 1                         |                   145 |
| SYS   | T_SUBPART  | P1SP0             | ID          |             150 |           NULL | 999                   | 999                       |                    50 |
| SYS   | T_SUBPART  | P1SP0             | ID          |             100 |           NULL | 7                     | 7                         |                    50 |
| SYS   | T_SUBPART  | P1SP0             | ID          |              50 |           NULL | 2                     | 2                         |                    50 |
+-------+------------+-------------------+-------------+-----------------+----------------+-----------------------+---------------------------+-----------------------+
45 rows in set
```

## 相关视图或文档

* 查看当前用户可访问的分区表的二级分区的直方图信息：[ALL_SUBPART_HISTOGRAMS](4200.all_subpart_histograms-of-oracle-mode.md)

* 查看当前用户拥有的分区表的二级分区的直方图信息：[USER_SUBPART_HISTOGRAMS](29800.user_subpart_histograms-of-oracle-mode.md)

* 表级的直方图统计信息，查询以下视图：

  * [ALL_TAB_HISTOGRAMS](5000.all_tab_histograms-of-oracle-mode.md)
  * [DBA_TAB_HISTOGRAMS](21100.dba_tab_histograms-of-oracle-mode.md)
  * [USER_TAB_HISTOGRAMS](30700.user_tab_histograms-of-oracle-mode.md)

* Partition 级的直方图统计信息，查询以下视图：

  * [ALL_PART_HISTOGRAMS](2600.all_part_histograms-of-oracle-mode.md)
  * [DBA_PART_HISTOGRAMS](17200.dba_part_histograms-of-oracle-mode.md)
  * [USER_PART_HISTOGRAMS](28000.user_part_histograms-of-oracle-mode.md)

* 表级的列统计信息，查询以下视图：

  * [ALL_TAB_STATISTICS](5400.all_tab_statistics-of-oracle-mode.md)
  * [DBA_TAB_STATISTICS](21500.dba_tab_statistics-of-oracle-mode.md)
  * [USER_TAB_STATISTICS](31100.user_tab_statistics-of-oracle-mode.md)

* Global 级的列统计信息，查询以下视图：

  * [ALL_TAB_COL_STATISTICS](4600.all_tab_col_statistics-of-oracle-mode.md)
  * [DBA_TAB_COL_STATISTICS](20700.dba_tab_col_statistics-of-oracle-mode.md)
  * [USER_TAB_COL_STATISTICS](30300.user_tab_col_statistics-of-oracle-mode.md)

* Partition 级的列统计信息，查询以下视图：

  * [ALL_PART_COL_STATISTICS](2500.all_part_col_statistics-of-oracle-mode.md)
  * [DBA_PART_COL_STATISTICS](17100.dba_part_col_statistics-of-oracle-mode.md)
  * [USER_PART_COL_STATISTICS](27900.user_part_col_statistics-of-oracle-mode.md)

* Subpartiton 级的列统计信息，查询以下视图：

  * [ALL_SUBPART_COL_STATISTICS](4100.all_subpart_col_statistics-of-oracle-mode.md)
  * [DBA_SUBPART_COL_STATISTICS](20100.dba_subpart_col_statistics-of-oracle-mode.md)
  * [USER_SUBPART_COL_STATISTICS](29700.user_subpart_col_statistics-of-oracle-mode.md)

* 索引统计信息，查询以下视图：

  * [ALL_IND_STATISTICS](1700.all_ind_statistics-of-oracle-mode.md)
  * [DBA_IND_STATISTICS](8600.dba_ind_statistics-of-oracle-mode.md)
  * [USER_IND_STATISTICS](26600.user_ind_statistics-of-oracle-mode.md)

* 有关如何收集统计信息，参见以下文档：

  * [手动收集统计信息](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/200.statistics-collection-methods/300.collect-statistics-manually.md)

  * [自动收集统计信息](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/200.statistics-collection-methods/400.collect-statistics-automatically.md)