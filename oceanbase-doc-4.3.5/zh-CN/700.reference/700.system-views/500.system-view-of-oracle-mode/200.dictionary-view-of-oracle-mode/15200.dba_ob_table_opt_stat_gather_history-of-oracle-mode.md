|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|Oracle Mode|
|machine-translation||

# DBA_OB_TABLE_OPT_STAT_GATHER_HISTORY

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.2.0 版本开始引入。</p>
</main>

## 功能描述

展示当前租户中表的历史统计信息收集的执行情况。

## 字段说明

| **字段** | **类型** | **是否为 NULL** | **描述** |
| --- | --- | --- | --- |
| OWNER | VARCHAR2(128) | YES | 表用户名 |
| TABLE_NAME | VARCHAR2(256) | NO | 表名 |
| TASK_ID | VARCHAR2(36) | NO | 表收集所属的任务 ID |
| STATUS | VARCHAR2(8) | NO | 收集任务状态<ul><li>SUCCESS   </li><li>FAILED  </li></ul>|
| START_TIME | TIMESTAMP(6) | YES | 表收集开始的时间 |
| END_TIME | TIMESTAMP(6) | YES | 表收集的时间 |
| MEMORY_USED | NUMBER | YES | 表收集使用的内存 |
| STAT_REFRESH_FAILED_LIST | VARCHAR2(4096) | YES | 表收集刷新统计信息缓存失败的列表 |
| PROPERTIES | VARCHAR2(4096) | YES | 表收集属性设置 |

## 查询示例

查看本租户中表 `T2_M_LR` 的历史统计信息收集的执行情况。

```shell
obclient [SYS]> SELECT * FROM SYS.DBA_OB_TABLE_OPT_STAT_GATHER_HISTORY WHERE TABLE_NAME='T2_M_LR'\G
```

查询结果如下：

```shell
*************************** 1. row ***************************
                   OWNER: SYS
              TABLE_NAME: T2_M_LR
                 TASK_ID: 1c354c5c-0080-11f0-8530-4e5e0075b0a3
                  STATUS: SUCCESS
              START_TIME: 14-MAR-25 10.58.03.617310 AM
                END_TIME: 14-MAR-25 10.58.03.659506 AM
             MEMORY_USED: 30752
STAT_REFRESH_FAILED_LIST: NULL
              PROPERTIES: GRANULARITY:AUTO;METHOD_OPT:FOR ALL COLUMNS SIZE AUTO;DEGREE:1;ESTIMATE_PERCENT:100.000000;BLOCK_SAMPLE:0;STALE_PERCENT:-1.000000;HIST_EST_PERCENT:100.000000
*************************** 2. row ***************************
                   OWNER: SYS
              TABLE_NAME: T2_M_LR
                 TASK_ID: 2ba66299-ff1d-11ef-8530-4e5e0075b0a3
                  STATUS: SUCCESS
              START_TIME: 12-MAR-25 04.37.02.321848 PM
                END_TIME: 12-MAR-25 04.37.02.413349 PM
             MEMORY_USED: 8778
STAT_REFRESH_FAILED_LIST: NULL
              PROPERTIES: GRANULARITY:GLOBAL;METHOD_OPT:FOR ALL COLUMNS SIZE AUTO;DEGREE:1;ESTIMATE_PERCENT:100.000000;BLOCK_SAMPLE:0;STALE_PERCENT:-1.000000;HIST_EST_PERCENT:100.000000
*************************** 3. row ***************************
                   OWNER: SYS
              TABLE_NAME: T2_M_LR
                 TASK_ID: 72cc0cb6-ff1d-11ef-8530-4e5e0075b0a3
                  STATUS: SUCCESS
              START_TIME: 12-MAR-25 04.39.01.686689 PM
                END_TIME: 12-MAR-25 04.39.01.781900 PM
             MEMORY_USED: 3162
STAT_REFRESH_FAILED_LIST: NULL
              PROPERTIES: GRANULARITY:PARTITION;METHOD_OPT:FOR ALL COLUMNS SIZE SKEWONLY;DEGREE:64;ESTIMATE_PERCENT:100.000000;BLOCK_SAMPLE:0;STALE_PERCENT:-1.000000;HIST_EST_PERCENT:100.000000
3 rows in set
```

## 相关视图或文档

* 查看租户级历史统计信息的收集状态：[DBA_OB_TASK_OPT_STAT_GATHER_HISTORY](../200.dictionary-view-of-oracle-mode/16000.dba_ob_task_opt_stat_gather_history-of-oracle-mode.md)

* 有关如何收集统计信息，参见以下文档：

  * [手动收集统计信息](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/200.statistics-collection-methods/300.collect-statistics-manually.md)

  * [自动收集统计信息](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/200.statistics-collection-methods/400.collect-statistics-automatically.md)

* 有关统计信息收集监控诊断的详细介绍，参见 [统计信息收集监控诊断](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/400.statistics-monitoring-diagnosis.md)。