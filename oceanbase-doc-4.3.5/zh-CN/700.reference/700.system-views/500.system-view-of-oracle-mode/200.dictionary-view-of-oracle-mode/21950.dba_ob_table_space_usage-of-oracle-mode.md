|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# DBA_OB_TABLE_SPACE_USAGE

<main id="notice" type='explain'>
 <h4>说明</h4>
 <p>该视图从 V4.3.5 版本开始引入。</p>
</main>

## 功能描述

用于展示当前租户下所有用户表（多副本环境下以 Leader 副本为准）的大小。

## 字段说明

| **字段名称** | **类型**  | **是否可以为 NULL** | **描述**                               |
|------------|-------------|---------------------|----------------------------------------|
| TABLE_ID      | bigint(20)    | NO   | 表 ID     |
| DATABASE_NAME | varchar(128)  | NO   | 数据库名     |
| TABLE_NAME    | varchar(256)  | NO   | 表名     |
| OCCUPY_SIZE   | decimal(42,0) | NO   | 表压缩后落盘的数据量，单位为字节     |
| REQUIRED_SIZE | decimal(42,0) | NO   | 表压缩后落盘的数据量实际占用了多少磁盘空间，单位为字节     |

## 查询示例

SN 模式下，用户租户查看本租户下所有用户表的大小。

```shell
obclient [test]> SELECT * FROM SYS.DBA_OB_TABLE_SPACE_USAGE WHERE ROWNUM <= 3;
```

查询结果如下：

```shell
+----------+---------------+--------------------------------+-------------+---------------+
| TABLE_ID | DATABASE_NAME | TABLE_NAME                     | OCCUPY_SIZE | REQUIRED_SIZE |
+----------+---------------+--------------------------------+-------------+---------------+
|   500011 | test          | wide_table_row_storage2        |  4495925120 |    4613763072 |
|   500012 | test          | wide_table_column_storage2     |  3915023145 |    4195397632 |
|   500014 | test          | wide_table_row_column_storage2 |  8410964107 |    9805275136 |
+----------+---------------+--------------------------------+-------------+---------------+
3 rows in set
```

## 相关文档

* [oceanbase.CDB_OB_TABLE_SPACE_USAGE](../../300.system-view-of-sys-tenant/200.dictionary-view-of-sys-tenant/11330.o-cdb_ob_table_space_usage-of-sys-tenant.md)
* [oceanbase.CDB_OB_SPACE_USAGE](../../300.system-view-of-sys-tenant/200.dictionary-view-of-sys-tenant/10470.o-cdb_ob_space_usage-of-sys-tenant.md)
* [oceanbase.CDB_OB_SERVER_SPACE_USAGE](../../300.system-view-of-sys-tenant/200.dictionary-view-of-sys-tenant/10450.o-cdb_ob_server_space_usage-of-sys-tenant.md)