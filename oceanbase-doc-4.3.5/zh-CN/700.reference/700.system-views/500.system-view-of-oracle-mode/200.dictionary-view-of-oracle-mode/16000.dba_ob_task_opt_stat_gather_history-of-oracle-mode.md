|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|Oracle Mode|
|machine-translation||

# DBA_OB_TASK_OPT_STAT_GATHER_HISTORY

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.2.0 版本开始引入。</p>
</main>

## 功能描述

展示当前租户历史收集任务的执行情况。

## 字段说明

| **字段** | **类型** | **是否为 NULL** | **描述** |
| --- | --- | --- | --- |
| TENANT_ID | NUMBER | NO | 收集任务所在租户 ID |
| TASK_ID | VARCHAR2(36) | NO | 收集任务 ID（UUID生成，全局唯一） |
| TYPE | VARCHAR2(16) | NO | 收集任务类型 |
| STATUS | VARCHAR2(8) | NO | 收集任务状态<ul><li>SUCCESS   </li><li>FAILED  </li></ul>|
| TASK_TABLE_COUNT | NUMBER | YES | 收集任务需要收集的表个数 |
| FAILED_COUNT | NUMBER | YES | 收集任务收集失败的表个数 |
| TASK_START_TIME | TIMESTAMP(6) | NO | 收集任务开始的时间 |
| TASK_END_TIME | TIMESTAMP(6) | NO | 收集任务结束的时间 |

## 查询示例

用户租户下，查询本租户历史收集任务的执行情况。

```shell
obclient> SELECT * FROM SYS.DBA_OB_TASK_OPT_STAT_GATHER_HISTORY;
```

查询结果如下：

```shell
+-----------+--------------------------------------+---------------+---------+-------------+--------------+----------------------------+----------------------------+
| TENANT_ID | TASK_ID                              | TYPE          | STATUS  | TABLE_COUNT | FAILED_COUNT | START_TIME                 | END_TIME                   |
+-----------+--------------------------------------+---------------+---------+-------------+--------------+----------------------------+----------------------------+
|      1006 | 12551575-1a73-11ee-97fa-0eac862eb0b0 | AUTO GATHER   | SUCCESS |          28 |            0 | 2023-07-04 22:00:00.669344 | 2023-07-04 22:00:06.636230 |
|      1006 | 32163b43-1bc9-11ee-a7ea-52583362494c | MANUAL GATHER | SUCCESS |           1 |            0 | 2023-07-06 14:49:03.775825 | 2023-07-06 14:49:05.729871 |
|      1006 | 44783d8c-1b3c-11ee-8ac6-d28f59026246 | AUTO GATHER   | SUCCESS |          19 |            0 | 2023-07-05 22:00:00.767591 | 2023-07-05 22:00:22.035235 |
|      1006 | a1487d0e-185a-11ee-8ac6-d28f59026246 | AUTO GATHER   | SUCCESS |         304 |            0 | 2023-07-02 06:00:00.673996 | 2023-07-02 06:00:29.273704 |
|      1006 | c921f339-1bc8-11ee-a7ea-52583362494c | MANUAL GATHER | SUCCESS |           1 |            0 | 2023-07-06 14:46:07.691856 | 2023-07-06 14:46:09.712585 |
|      1006 | db64f8b8-1bc5-11ee-a7ea-52583362494c | MANUAL GATHER | SUCCESS |           1 |            0 | 2023-07-06 14:25:09.839887 | 2023-07-06 14:25:12.686117 |
|      1006 | e7dc9678-19a9-11ee-95a7-2646ab385e11 | AUTO GATHER   | SUCCESS |          23 |            0 | 2023-07-03 22:00:00.596163 | 2023-07-03 22:00:05.079117 |
+-----------+--------------------------------------+---------------+---------+-------------+--------------+----------------------------+----------------------------+
7 rows in set
```

## 相关视图或文档

* 查看表级历史统计信息的收集状态：[DBA_OB_TABLE_OPT_STAT_GATHER_HISTORY](../200.dictionary-view-of-oracle-mode/15200.dba_ob_table_opt_stat_gather_history-of-oracle-mode.md)

* 有关统计信息收集监控诊断的详细介绍，参见 [统计信息收集监控诊断](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/400.statistics-monitoring-diagnosis.md)。