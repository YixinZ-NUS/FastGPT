|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|Oracle Mode|
|machine-translation||

# DBA_SQL_PLAN_BASELINES

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.0.0 版本开始引入。</p>
</main>

## 功能描述

展示当前租户的 SPM 中 SQL 的计划基线。

## 字段说明

| 字段名称 | 类型 | 是否可以为 NULL | 描述 |
| --- | --- | --- | --- |
| SIGNATURE | NUMBER | NO | 由归一化的 SQL 产生的 SQL 唯一标识符 |
| SQL_HANDLE | VARCHAR2(32) | NO | 唯一的 SQL 文本 |
| SQL_TEXT | CLOB | NO | 未归一化的 SQL 文本 |
| PLAN_NAME | VARCHAR2(128) | NO | 唯一的文本形式的计划标识符 |
| CREATOR | VARCHAR2(128) | NO | 创建这条计划基线的用户 |
| ORIGIN | VARCHAR2(29) | NO | 计划基线的创建方式：<li>MANUAL-LOAD<li>AUTO-CAPTURE<li>MANUAL-SQLTUNE<li>AUTO-SQLTUNE |
| PARSING_SCHEMA_NAME | VARCHAR2(128) | NO | 目前暂不支持该字段，且当前该字段默认为 NULL |
| DESCRIPTION | VARCHAR2(500) | YES | 计划基线的说明 |
| VERSION | VARCHAR2(256) | NO | 计划基线创建时的数据库版本 |
| CREATED | TIMESTAMP(6) | NO | 计划基线的创建时间 |
| LAST_MODIFIED | TIMESTAMP(6) | NO | 计划基线上次的修改时间 |
| LAST_EXECUTED | NUMBER | NO | 计划基线上次的执行时间 |
| LAST_VERIFIED | NUMBER | NO | 计划基线上次的验证时间 |
| ENABLED | VARCHAR2(3) | NO | 指示计划基线是否启用：<li>YES<li>NO |
| ACCEPTED | VARCHAR2(3) | NO | 指示计划基线是否被采纳：<li>YES<li>NO |
| FIXED | VARCHAR2(3) | NO | 指示计划基线是否固定：<li>YES<li>NO |
| REPRODUCED | VARCHAR2(3) | NO | 指示计划基线是否可复现：<li>YES<li>NO |
| AUTOPURGE | VARCHAR2(3) | NO | 指示计划基线是否自动清理：<li>YES<li>NO |
| ADAPTIVE | VARCHAR2(3) | NO | 指示由 SPM 自动捕获的计划基线是否已适应：<li>YES<li>NO |
| OPTIMIZER_COST | NUMBER | NO | 计划基线创建时优化器估计的计划代价 |
| MODULE | VARCHAR2(64) | NO | 目前暂不支持该字段，且当前该字段默认为 NULL |
| ACTION | VARCHAR2(64) | NO | 目前暂不支持该字段，且当前该字段默认为 NULL |
| EXECUTIONS | NUMBER | NO | 计划基线创建时计划的执行次数 |
| ELAPSED_TIME | NUMBER | NO | 计划基线创建时计划的总耗时 |
| CPU_TIME | NUMBER | NO | 计划基线创建时计划的总 CPU 时间 |
| BUFFER_GETS | NUMBER | NO | 目前暂不支持该字段，且当前该字段默认为 NULL |
| DISK_READS | NUMBER | NO | 目前暂不支持该字段，且当前该字段默认为 NULL |
| DIRECT_WRITES | NUMBER | NO | 目前暂不支持该字段，且当前该字段默认为 NULL |
| ROWS_PROCESSED | NUMBER | NO | 目前暂不支持该字段，且当前该字段默认为 NULL |
| FETCHES | NUMBER | NO | 目前暂不支持该字段，且当前该字段默认为 NULL |
| END_OF_FETCH_COUNT | NUMBER | NO | 目前暂不支持该字段，且当前该字段默认为 NULL |

## 查询示例

查看当前租户的 SPM 中 SQL 的计划基线。

```shell
obclient[SYS]> SELECT * FROM SYS.DBA_SQL_PLAN_BASELINES\G
```

查询结果如下：

```shell
*************************** 1. row ***************************
          SIGNATURE: 6055243608786114737
         SQL_HANDLE: 11864626B019515747DD829035EF8426
           SQL_TEXT: SELECT * FROM SYS.DBA_OB_SPM_EVO_RESULT
          PLAN_NAME: 6055243608786114737
            CREATOR: SYS
             ORIGIN: AUTO-CAPTURE
PARSING_SCHEMA_NAME: NULL
        DESCRIPTION: NULL
            VERSION: 4.3.5.3
            CREATED: 28-APR-25 11.10.19.053809 AM
      LAST_MODIFIED: 28-APR-25 11.10.19.053809 AM
      LAST_EXECUTED: 1745809819052935
      LAST_VERIFIED: 1745809819052935
            ENABLED: YES
           ACCEPTED: YES
              FIXED: NO
         REPRODUCED: YES
          AUTOPURGE: YES
           ADAPTIVE: NO
     OPTIMIZER_COST: -1
             MODULE: NULL
             ACTION: NULL
         EXECUTIONS: 1
       ELAPSED_TIME: 9261
           CPU_TIME: 2264
        BUFFER_GETS: NULL
         DISK_READS: NULL
      DIRECT_WRITES: NULL
     ROWS_PROCESSED: NULL
            FETCHES: NULL
 END_OF_FETCH_COUNT: NULL
*************************** 2. row ***************************
          SIGNATURE: 17474685351365979263
         SQL_HANDLE: 2943FEB983545F127755C2B040B7CB84
           SQL_TEXT: SELECT * FROM spm_demo
WHERE create_date > SYSDATE - 1
          PLAN_NAME: 17474685351365979263
            CREATOR: SYS
             ORIGIN: AUTO-CAPTURE
PARSING_SCHEMA_NAME: NULL
        DESCRIPTION: NULL
            VERSION: 4.3.5.3
            CREATED: 28-APR-25 11.09.39.167801 AM
      LAST_MODIFIED: 28-APR-25 11.09.39.167801 AM
      LAST_EXECUTED: 1745809779166588
      LAST_VERIFIED: 1745809779166588
            ENABLED: YES
           ACCEPTED: YES
              FIXED: NO
         REPRODUCED: YES
          AUTOPURGE: YES
           ADAPTIVE: NO
     OPTIMIZER_COST: -1
             MODULE: NULL
             ACTION: NULL
         EXECUTIONS: 1
       ELAPSED_TIME: 349357
           CPU_TIME: 341264
        BUFFER_GETS: NULL
         DISK_READS: NULL
      DIRECT_WRITES: NULL
     ROWS_PROCESSED: NULL
            FETCHES: NULL
 END_OF_FETCH_COUNT: NULL
*************************** 3. row ***************************
          SIGNATURE: 8949968430243350035
         SQL_HANDLE: 8C941B5BD7CCC34C7863313721B1D9C3
           SQL_TEXT: SELECT * FROM SYS.DBA_SQL_MANAGEMENT_CONFIG
          PLAN_NAME: 8949968430243350035
            CREATOR: SYS
             ORIGIN: AUTO-CAPTURE
PARSING_SCHEMA_NAME: NULL
        DESCRIPTION: NULL
            VERSION: 4.3.5.3
            CREATED: 28-APR-25 11.13.20.900605 AM
      LAST_MODIFIED: 28-APR-25 11.13.20.900605 AM
      LAST_EXECUTED: 1745810000900179
      LAST_VERIFIED: 1745810000900179
            ENABLED: YES
           ACCEPTED: YES
              FIXED: NO
         REPRODUCED: YES
          AUTOPURGE: YES
           ADAPTIVE: NO
     OPTIMIZER_COST: -1
             MODULE: NULL
             ACTION: NULL
         EXECUTIONS: 1
       ELAPSED_TIME: 16355
           CPU_TIME: 575
        BUFFER_GETS: NULL
         DISK_READS: NULL
      DIRECT_WRITES: NULL
     ROWS_PROCESSED: NULL
            FETCHES: NULL
 END_OF_FETCH_COUNT: NULL
*************************** 4. row ***************************
          SIGNATURE: 8445910474067761495
         SQL_HANDLE: 9400CF67EC02C0E2CA1D5A86C46D3D2B
           SQL_TEXT: INSERT INTO spm_demo
SELECT 100002+LEVEL, 'item_'||(100002+LEVEL), SYSDATE
FROM DUAL CONNECT BY LEVEL <= 100000
          PLAN_NAME: 8445910474067761495
            CREATOR: SYS
             ORIGIN: AUTO-CAPTURE
PARSING_SCHEMA_NAME: NULL
        DESCRIPTION: NULL
            VERSION: 4.3.5.3
            CREATED: 28-APR-25 11.09.22.289008 AM
      LAST_MODIFIED: 28-APR-25 11.09.22.289008 AM
      LAST_EXECUTED: 1745809762288159
      LAST_VERIFIED: 1745809762288159
            ENABLED: YES
           ACCEPTED: YES
              FIXED: NO
         REPRODUCED: YES
          AUTOPURGE: YES
           ADAPTIVE: NO
     OPTIMIZER_COST: -1
             MODULE: NULL
             ACTION: NULL
         EXECUTIONS: 1
       ELAPSED_TIME: 1151213
           CPU_TIME: 1146061
        BUFFER_GETS: NULL
         DISK_READS: NULL
      DIRECT_WRITES: NULL
     ROWS_PROCESSED: NULL
            FETCHES: NULL
 END_OF_FETCH_COUNT: NULL
*************************** 5. row ***************************
          SIGNATURE: 13594561463287439666
         SQL_HANDLE: EC1A0D99610183DBBD97846555275708
           SQL_TEXT: select sql_id query_sql from gv$ob_sql_audit where query_sql like 'SELECT /*+ INDEX(spm_demo idx_spm_demo_date) */ *  FROM spm_demo WHERE create_date > SYSDATE - 1'
          PLAN_NAME: 13594561463287439666
            CREATOR: SYS
             ORIGIN: MANUAL-LOAD
PARSING_SCHEMA_NAME: NULL
        DESCRIPTION: NULL
            VERSION: 4.3.5.3
            CREATED: 28-APR-25 11.06.23.369212 AM
      LAST_MODIFIED: 28-APR-25 11.09.05.791173 AM
      LAST_EXECUTED: 1745809597722925
      LAST_VERIFIED: 1745809597722925
            ENABLED: YES
           ACCEPTED: YES
              FIXED: YES
         REPRODUCED: YES
          AUTOPURGE: YES
           ADAPTIVE: NO
     OPTIMIZER_COST: -1
             MODULE: NULL
             ACTION: NULL
         EXECUTIONS: 3
       ELAPSED_TIME: 161018
           CPU_TIME: 149982
        BUFFER_GETS: NULL
         DISK_READS: NULL
      DIRECT_WRITES: NULL
     ROWS_PROCESSED: NULL
            FETCHES: NULL
 END_OF_FETCH_COUNT: NULL
5 rows in set
```

## 相关视图或文档

* 查看当前租户的 SPM 中的配置参数：[DBA_SQL_MANAGEMENT_CONFIG](19800.dba_sql_management_config-of-oracle-mode.md)

* 有关 SPM 演进机制的详细介绍及说明，参见 [执行计划管理](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/700.manage-execution-plans/300.sql-execution-plan-management-spm.md)。