|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|Oracle Mode|
|machine-translation||

# DBA_OB_IMPORT_TABLE_TASK_HISTORY

<main id="notice" type='explain'>
  <h4>说明</h4>
  <p>该视图从 V4.2.1 版本开始引入。</p>
</main>

## 功能描述

展示当前租户下表级别跨租户导入任务历史记录。

## 字段说明

| **字段** | **类型** | **是否为 NULL** | **描述** |
| --- | --- | --- | --- |
| TASK_ID | VARCHAR2(4096) | NO | 负载均衡任务 ID |
| JOB_ID | NUMBER(38) | NO | 任务 ID |
| SRC_TENANT_ID | NUMBER(38) | NO | 源租户 ID |
| SRC_TABLESPACE | VARCHAR2(128) | YES | 源表的 TABLESPACE |
| SRC_TABLEGROUP | VARCHAR2(128) | YES | 源表的 TABLEGROUP |
| SRC_DATABASE | VARCHAR2(128) | YES | 源表的 DATABASE |
| SRC_TABLE | VARCHAR2(128) | YES | 源表名 |
| SRC_PARTITION | VARCHAR2(64) | YES | 源表的 PARTITION 名 |
| TARGET_TABLESPACE | VARCHAR2(128) | YES | 重映射表空间名称，如果未重映射，则显示为空 |
| TARGET_TABLEGROUP | VARCHAR2(128) | YES | 重新映射表组名称，如果未重映射，则显示为空 |
| TARGET_DATABASE | VARCHAR2(128) | YES | 重新映射数据库名称，如果未重映射，则显示为空 |
| TARGET_TABLE | VARCHAR2(128) | YES | 重命名后的表名，如果未重命名，则显示为空  |
| TABLE_COLUMN | NUMBER(38) | NO | 表列的数量 |
| STATUS | VARCHAR2(64) | NO | 任务状态：<ul><li>`INIT`：表级导入任务初识化</li> <li>`DOING`：表级导入执行中</li> <li>`FINISH`：导入结束</li></ul>  |
| START_TIMESTAMP | VARCHAR2(256) | NO | 任务开始时租户当前时间 |
| COMPLETION_TIMESTAMP | VARCHAR2(256) | NO | 任务完成时租户当前时间 |
| CUMULATIVE_TS | NUMBER(38) | NO | 累计时间 |
| TOTAL_INDEX_COUNT | NUMBER(38) | NO | 总索引数 |
| IMPORTED_INDEX_COUNT | NUMBER(38) | NO | 已导入的索引数 |
| FAILED_INDEX_COUNT | NUMBER(38) | NO | 导入失败的索引数 |
| TOTAL_CONSTRAINT_COUNT | NUMBER(38) | NO | 总约束数 |
| IMPORTED_CONSTRAINT_COUNT | NUMBER(38) | NO | 已导入的约束数 |
| FAILED_CONSTRAINT_COUNT | NUMBER(38) | NO | 导入失败的约束数 |
| TOTAL_REF_CONSTRAINT_COUNT | NUMBER(38) | NO | 总引用约束数 |
| IMPORTED_REF_CONSTRAINT_COUNT | NUMBER(38) | NO | 已导入的引用约束数 |
| FAILED_REF_CONSTRAINT_COUNT | NUMBER(38) | NO | 导入失败的引用约束数 |
| RESULT | VARCHAR2(64) | YES | 任务完成的结果：<ul><li>`SUCCESS`：导入任务执行成功</li><li>`FAIL`：导入任务执行失败</li></ul> |
| COMMENT | CLOB | YES | 备注信息 |

## 查询示例

用户租户查询本租户表级跨租户导入任务的历史记录。

```shell
obclient [SYS]> SELECT * FROM SYS.DBA_OB_IMPORT_TABLE_TASK_HISTORY\G
```

查询结果如下所示：

```shell
*************************** 1. row ***************************
                      TASK_ID: 247439
                       JOB_ID: 6
                SRC_TENANT_ID: 1010
               SRC_TABLESPACE: NULL
               SRC_TABLEGROUP: NULL
                 SRC_DATABASE: ORACLE001
                    SRC_TABLE: t2
                SRC_PARTITION: NULL
            TARGET_TABLESPACE: NULL
            TARGET_TABLEGROUP: NULL
              TARGET_DATABASE: ORACLE001
                 TARGET_TABLE: NEWTB2
                 TABLE_COLUMN: 3
                       STATUS: FINISH
              START_TIMESTAMP: 2025-01-07 16:11:33.111473
         COMPLETION_TIMESTAMP: 2025-01-07 16:12:33.297206
                CUMULATIVE_TS: -1
            TOTAL_INDEX_COUNT: 0
         IMPORTED_INDEX_COUNT: 0
           FAILED_INDEX_COUNT: 0
       TOTAL_CONSTRAINT_COUNT: 0
    IMPORTED_CONSTRAINT_COUNT: 0
      FAILED_CONSTRAINT_COUNT: 0
   TOTAL_REF_CONSTRAINT_COUNT: 0
IMPORTED_REF_CONSTRAINT_COUNT: 0
  FAILED_REF_CONSTRAINT_COUNT: 0
                       RESULT: SUCCESS
                      COMMENT:
1 row in set
```

## 相关视图或文档

有关表级恢复的详细说明及操作，参见 [表级恢复](../../../../600.manage/600.backup-and-recovery/700.recover-table/50.table-recovery-overview.md)。