|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|MySQL Mode|
|machine-translation||

# V$OB_SSTABLES

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.0.0 版本开始引入。</p>
</main>

## 功能描述

展示当前租户在当前 OBServer 节点上的各分区下的 MemTable 和 SSTable 信息。

## 字段说明

|          字段名称           |         类型          | 是否可以为 NULL |                                                                                  描述|
|-------------------------|---------------------|------------|---------------------------------|
| SVR_IP                  | varchar(46)         | NO         | 服务器 IP 地址                                                                          |
| SVR_PORT                | bigint(20)          | NO         | 服务器端口号                                                                             |
| TABLE_TYPE              | varchar(20)         | NO         | 表类型                                                                                |
| TENANT_ID               | bigint(20)          | NO         | 租户 ID                                                                              |
| LS_ID                   | bigint(20)          | NO         | 日志流 ID                                                                             |
| TABLET_ID               | bigint(20)          | NO         | 数据分片 ID                                                                            |
| START_LOG_SCN            | bigint(20) unsigned | NO         | 该表中数据的日志时间戳范围的左边界   |
| END_LOG_SCN              | bigint(20) unsigned | NO         | 该表中数据的日志时间戳范围的右边界     |
| SIZE                    | bigint(20)          | NO         | 磁盘占用空间，单位为字节   |
| REF                     | bigint(20)          | NO         | 该表引用的计数，单位为个数     |
| UPPER_TRANS_VERSION     | bigint(20) unsigned         | NO         | 已提交事务的最大事务版本号                                                       |
| IS_ACTIVE               | varchar(3)          | NO         | 是否为活跃的 MemTable   |
| CONTAIN_UNCOMMITTED_ROW | varchar(3)          | NO         | 该表中是否包含未提交的事务行：<li>`NO`：表示该表中不包含未提交的事务行<li>`YES`：表示该表中包含未提交的事务行    |

## 查询示例

用户租户下，查看本租户的 1001 号日志流在当前 OBServer 节点上各分区的 MemTable 和 SSTable 信息。

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.V$OB_SSTABLES WHERE LS_ID=1001;
```

查询结果如下：

```shell
+----------------+----------+------------------+-----------+-------+-----------+---------------------+---------------------+---------+------+---------------------+-----------+-------------------------+
| SVR_IP         | SVR_PORT | TABLE_TYPE       | TENANT_ID | LS_ID | TABLET_ID | START_LOG_SCN       | END_LOG_SCN         | SIZE    | REF  | UPPER_TRANS_VERSION | IS_ACTIVE | CONTAIN_UNCOMMITTED_ROW |
+----------------+----------+------------------+-----------+-------+-----------+---------------------+---------------------+---------+------+---------------------+-----------+-------------------------+
| 11.xxx.xxx.xxx |    28825 | MAJOR            |      1002 |  1001 |    200032 |                   0 | 1743357601718033000 |     380 |    0 | 1743155516647021000 | NO        | NO                      |
| 11.xxx.xxx.xxx |    28825 | MINOR            |      1002 |  1001 |     49402 |                   1 | 1743155746972459000 |    3244 |    0 |                4096 | NO        | NO                      |
| 11.xxx.xxx.xxx |    28825 | TX_DATA_MEMTABLE |      1002 |  1001 |     49402 | 1743155746972459000 | 4611686018427387903 | 1048576 |    3 |                   0 | YES       | YES                     |
| 11.xxx.xxx.xxx |    28825 | MAJOR            |      1002 |  1001 |    200037 |                   0 | 1743357601718033000 |       0 |    0 | 1743357601718033000 | NO        | NO                      |
| 11.xxx.xxx.xxx |    28825 | MAJOR            |      1002 |  1001 |    200015 |                   0 | 1743357601718033000 |     411 |    0 | 1742957323483246000 | NO        | NO                      |
| 11.xxx.xxx.xxx |    28825 | MAJOR            |      1002 |  1001 |    200031 |                   0 | 1743357601718033000 |     380 |    0 | 1743155516647021000 | NO        | NO                      |
| 11.xxx.xxx.xxx |    28825 | MAJOR            |      1002 |  1001 |    200007 |                   0 | 1743357601718033000 |     643 |    0 | 1742541257735502000 | NO        | NO                      |
| 11.xxx.xxx.xxx |    28825 | MAJOR            |      1002 |  1001 |    200014 |                   0 | 1743357601718033000 |     411 |    0 | 1742957323483246000 | NO        | NO                      |
| 11.xxx.xxx.xxx |    28825 | MAJOR            |      1002 |  1001 |    200030 |                   0 | 1743357601718033000 |     380 |    0 | 1743155516647021000 | NO        | NO                      |
| 11.xxx.xxx.xxx |    28825 | MAJOR            |      1002 |  1001 |    200021 |                   0 | 1743357601718033000 |     389 |    0 | 1743155475021424000 | NO        | NO                      |
| 11.xxx.xxx.xxx |    28825 | MAJOR            |      1002 |  1001 |    200016 |                   0 | 1743357601718033000 |     411 |    0 | 1742957323483246000 | NO        | NO                      |
| 11.xxx.xxx.xxx |    28825 | MAJOR            |      1002 |  1001 |    200020 |                   0 | 1743357601718033000 |     380 |    0 | 1743155475021424000 | NO        | NO                      |
| 11.xxx.xxx.xxx |    28825 | MAJOR            |      1002 |  1001 |    200038 |                   0 | 1743357601718033000 |       0 |    0 | 1743357601718033000 | NO        | NO                      |
| 11.xxx.xxx.xxx |    28825 | MAJOR            |      1002 |  1001 |    200005 |                   0 | 1743357601718033000 |     643 |    0 | 1742541257735502000 | NO        | NO                      |
| 11.xxx.xxx.xxx |    28825 | MAJOR            |      1002 |  1001 |    200036 |                   0 | 1743357601718033000 |       0 |    0 | 1743357601718033000 | NO        | NO                      |
| 11.xxx.xxx.xxx |    28825 | MAJOR            |      1002 |  1001 |    200012 |                   0 | 1743357601718033000 |       0 |    0 | 1743357601718033000 | NO        | NO                      |
| 11.xxx.xxx.xxx |    28825 | MAJOR            |      1002 |  1001 |    200018 |                   0 | 1743357601718033000 |     384 |    0 | 1743152704981127000 | NO        | NO                      |
| 11.xxx.xxx.xxx |    28825 | MAJOR            |      1002 |  1001 |    200013 |                   0 | 1743357601718033000 |     406 |    0 | 1742957323483246000 | NO        | NO                      |
| 11.xxx.xxx.xxx |    28825 | MAJOR            |      1002 |  1001 |     49401 |                   0 |                   1 |       0 |    0 |                   1 | NO        | NO                      |
| 11.xxx.xxx.xxx |    28825 | TX_CTX_MEMTABLE  |      1002 |  1001 |     49401 |                   1 |                   2 |       0 |    2 |                   0 | YES       | YES                     |
| 11.xxx.xxx.xxx |    28825 | MAJOR            |      1002 |  1001 |    200004 |                   0 | 1743357601718033000 |     961 |    0 | 1742541257735502000 | NO        | NO                      |
| 11.xxx.xxx.xxx |    28825 | MAJOR            |      1002 |  1001 |    200033 |                   0 | 1743357601718033000 |       0 |    0 | 1743357601718033000 | NO        | NO                      |
| 11.xxx.xxx.xxx |    28825 | MAJOR            |      1002 |  1001 |     49403 |                   0 |                   1 |       0 |    0 |                   1 | NO        | NO                      |
| 11.xxx.xxx.xxx |    28825 | LOCK_MEMTABLE    |      1002 |  1001 |     49403 |                   1 |                   2 |       0 |    3 |                   0 | YES       | YES                     |
| 11.xxx.xxx.xxx |    28825 | MAJOR            |      1002 |  1001 |    200002 |                   0 | 1743357601718033000 |     933 |    0 | 1742541257735502000 | NO        | NO                      |
| 11.xxx.xxx.xxx |    28825 | MAJOR            |      1002 |  1001 |    200019 |                   0 | 1743357601718033000 |       0 |    0 | 1743357601718033000 | NO        | NO                      |
| 11.xxx.xxx.xxx |    28825 | MAJOR            |      1002 |  1001 |    200003 |                   0 | 1743357601718033000 |     774 |    0 | 1742541257735502000 | NO        | NO                      |
+----------------+----------+------------------+-----------+-------+-----------+---------------------+---------------------+---------+------+---------------------+-----------+-------------------------+
27 rows in set
```