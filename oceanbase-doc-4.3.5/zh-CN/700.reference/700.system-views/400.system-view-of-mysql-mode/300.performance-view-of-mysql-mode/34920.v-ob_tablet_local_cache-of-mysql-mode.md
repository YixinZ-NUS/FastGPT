|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|MySQL Mode|
|machine-translation||

# V$OB_TABLET_LOCAL_CACHE

<main id="notice" type='explain'>
<h4>说明</h4>
<p>对于 V4.3.5 版本，该视图从 V4.3.5 BP2 版本开始引入。</p>
</main>

## 功能描述

展示当前租户在当前 OBServer 节点上的整体缓存情况。

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图仅适用于共享存储（Shared-Storage，SS）模式。无共享（Shared-Nothing，SN）模式下，该视图的查询结果为空。</p>
</main>

## 字段说明

|      字段名称         |         类型  | 是否可以为 NULL |                       描述      |
|----------------------|---------------|----------------|---------------------------------|
| SVR_IP               | varchar(46)   | NO   |  OBServer 节点的 IP 地址    |
| SVR_PORT             | bigint(20)    | NO   |  OBServer 节点的端口号      |
| TENANT_ID            | bigint(20)    | NO   |  租户 ID    |
| TABLET_ID            | bigint(20)    | NO   |  Tablet ID    |
| STORAGE_CACHE_POLICY | varchar(64)   | NO   |  该 Tablet 当前所处的缓存状态：<ul><li>`AUTO`：自动冷热数据识别</li> <li>`HOT`：热数据</li></ul>   |
| CACHED_DATA_SIZE     | bigint(20)    | NO   |  该 Tablet 已缓存到本地的数据量，单位为字节  |
| CACHE_HIT_COUNT      | bigint(20)    | NO   |  该 Tablet 缓存命中的次数。当前该字段暂未启用，值为 `-1`    |
| CACHE_MISS_COUNT     | bigint(20)    | NO   |  该 Tablet 缓存 Miss 的次数。当前该字段暂未启用，值为 `-1`    |
| CACHE_HIT_SIZE       | bigint(20)    | NO   |  该 Tablet 缓存命中的数据量，单位为字节。当前该字段暂未启用，值为 `-1`   |
| CACHE_MISS_SIZE      | bigint(20)    | NO   |  该 Tablet 缓存 Miss 的数据量，单位为字节。当前该字段暂未启用，值为 `-1`   |
| INFO                 | varchar(4096) | NO   |  其他信息    |

## 查询示例

SS 模式下，用户租户查看本租户在当前 OBServer 节点上的整体缓存情况。

```shell
obclient> SELECT SVR_IP, SVR_PORT, TENANT_ID, TABLET_ID, STORAGE_CACHE_POLICY, INFO FROM oceanbase.V$OB_TABLET_LOCAL_CACHE;
```

查询结果如下：

```shell
+---------------+----------+-----------+-----------+----------------------+------+
| SVR_IP        | SVR_PORT | TENANT_ID | TABLET_ID | STORAGE_CACHE_POLICY | INFO |
+---------------+----------+-----------+-----------+----------------------+------+
| 11.xx.xxx.xxx |    16702 |      1002 |    200001 | AUTO                 |      |
| 11.xx.xxx.xxx |    16702 |      1002 |    200002 | AUTO                 |      |
| 11.xx.xxx.xxx |    16702 |      1002 |    200003 | AUTO                 |      |
| 11.xx.xxx.xxx |    16702 |      1002 |    200004 | AUTO                 |      |
| 11.xx.xxx.xxx |    16702 |      1002 |    200005 | AUTO                 |      |
| 11.xx.xxx.xxx |    16702 |      1002 |    200006 | AUTO                 |      |
| 11.xx.xxx.xxx |    16702 |      1002 |    200007 | AUTO                 |      |
| 11.xx.xxx.xxx |    16702 |      1002 |    200008 | AUTO                 |      |
| 11.xx.xxx.xxx |    16702 |      1002 |    200009 | AUTO                 |      |
| 11.xx.xxx.xxx |    16702 |      1002 |    200010 | AUTO                 |      |
| 11.xx.xxx.xxx |    16702 |      1002 |    200011 | AUTO                 |      |
| 11.xx.xxx.xxx |    16702 |      1002 |    200012 | AUTO                 |      |
| 11.xx.xxx.xxx |    16702 |      1002 |    200013 | AUTO                 |      |
| 11.xx.xxx.xxx |    16702 |      1002 |    200014 | AUTO                 |      |
| 11.xx.xxx.xxx |    16702 |      1002 |    200015 | AUTO                 |      |
| 11.xx.xxx.xxx |    16702 |      1002 |    200016 | AUTO                 |      |
| 11.xx.xxx.xxx |    16702 |      1002 |    200017 | AUTO                 |      |
| 11.xx.xxx.xxx |    16702 |      1002 |    200018 | AUTO                 |      |
| 11.xx.xxx.xxx |    16702 |      1002 |    200019 | AUTO                 |      |
| 11.xx.xxx.xxx |    16702 |      1002 |    200020 | AUTO                 |      |
+---------------+----------+-----------+-----------+----------------------+------+
20 rows in set
```