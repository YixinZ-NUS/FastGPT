|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|MySQL Mode|
|machine-translation||

# GV$OB_RPC_INCOMING

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.0.0 版本开始引入。</p>
</main>

## 功能描述

展示本租户在所有 OBServer 节点收到的 RPC 请求的统计信息。

## 字段说明

|    **字段名称**    |    **类型**    | **是否可以为 NULL** |        **描述**         |
|----------------|--------------|----------------|-----------------------|
| TENANT_ID      | bigint(20)   | NO             | 租户 ID                 |
| SVR_IP         | varchar(46)  | NO             | IP 地址                 |
| SVR_PORT       | bigint(20)   | NO             | 端口号                   |
| PCODE          | bigint(20)   | NO             | RPC Packet Code       |
| PCODE_NAME     | varchar(256) | NO             | RPC Packet Code 对应的名称 |
| COUNT          | bigint(20)   | NO             | 已接收到的该类型的 RPC 请求的个数   |
| TOTAL_SIZE     | bigint(20)   | NO             | 总共接收数据量               |
| NET_TIME       | bigint(20)   | NO             | 网络时间                  |
| WAIT_TIME      | bigint(20)   | NO             | 接收时间到请求被放入队列的时间       |
| QUEUE_TIME     | bigint(20)   | NO             | 在队列中等待的时间             |
| PROCESS_TIME   | bigint(20)   | NO             | 实际处理消耗的时间             |
| LAST_TIMESTAMP | timestamp(6) | NO             | 上次更新的时间               |
| DCOUNT         | bigint(20)   | NO             | 每种 Pcode RPC 的请求计数，30 s 为一个统计周期                     |

## 查询示例

用户租户下，查看本租户在所有节点收到的 RPC 请求中，有哪些请求在队列中的等待时间大于 1s。

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.GV$OB_RPC_INCOMING WHERE QUEUE_TIME > 1000000;
```

查询结果如下：

```shell
+-----------+----------------+----------+-------+---------------------------------+---------+------------+-----------+-----------+------------+--------------+----------------------------+--------+
| TENANT_ID | SVR_IP         | SVR_PORT | PCODE | PCODE_NAME                      | COUNT   | TOTAL_SIZE | NET_TIME  | WAIT_TIME | QUEUE_TIME | PROCESS_TIME | LAST_TIMESTAMP             | DCOUNT |
+-----------+----------------+----------+-------+---------------------------------+---------+------------+-----------+-----------+------------+--------------+----------------------------+--------+
|      1002 | 11.xxx.xxx.xxx |    28825 |  1859 | OB_GET_LS_REPLAYED_SCN          | 1218124 |   29234976 |  72168837 |  15295506 |   34873846 |     84946408 | 2025-03-26 16:14:53.230033 |      8 |
|      1002 | 11.xxx.xxx.xxx |    28825 |  1861 | OB_UPDATE_TENANT_INFO_CACHE     |  609064 |   59688272 |  43197630 |   7939656 |   16198986 |     14011182 | 2025-03-26 16:14:52.895647 |      4 |
|      1002 | 11.xxx.xxx.xxx |    28825 |  5386 | OB_LOG_ELECTION_ACCEPT_REQUEST  | 2453199 |  361846970 | 186079294 |  39135968 |   70128226 |    229255420 | 2025-03-26 16:14:53.309030 |     16 |
|      1002 | 11.xxx.xxx.xxx |    28825 |  5387 | OB_LOG_ELECTION_ACCEPT_RESPONSE | 2453199 |  732279871 | 159336976 |  31360384 |   54295803 |     60733221 | 2025-03-26 16:14:53.309092 |     16 |
+-----------+----------------+----------+-------+---------------------------------+---------+------------+-----------+-----------+------------+--------------+----------------------------+--------+
4 rows in set
```

## 相关视图或文档

* 查看当前租户在当前节点收到的 RPC 的统计信息：[V$OB_RPC_INCOMING](32300.v-ob_obrpc_incoming-of-mysql-mode.md)

* 查看当前租户在所有节点发送的 PRC 统计信息：[GV$OB_RPC_OUTGOING](2000.gv-ob_obrpc_outgoing-of-mysql-mode.md)