|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|MySQL Mode|
|machine-translation||

# GV$SYSTEM_EVENT

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V1.4 版本开始引入。</p>
</main>

## 功能描述

展示当前租户在所有 OBServer 节点上的等待事件，统计每一类等待事件的发生次数、等待时间、超时次数等。

## 字段说明

| **字段名称** | **类型** | **是否可以为 NULL** | **描述** |
| --- | --- | --- | --- |
| CON_ID | bigint(20) | NO | 租户 ID |
| SVR_IP | varchar(46) | NO | 信息所在 Server 的 IP |
| SVR_PORT | bigint(20) | NO | 信息所在 Server 的端口号 |
| EVENT_ID | bigint(20) | NO | 等待事件的 ID |
| EVENT | varchar(64) | NO | 等待事件的描述 |
| WAIT_CLASS_ID | bigint(20) | NO | 等待事件的所属 Class ID |
| WAIT_CLASS# | bigint(20) | NO | 等待事件的所属的 Class下标 |
| WAIT_CLASS | varchar(64) | NO | 等待事件所属的 Class |
| TOTAL_WAITS | bigint(20) | NO | 该等待事件的总等待次数 |
| TOTAL_TIMEOUTS | bigint(20) | NO | 该等待事件的总超时次数 |
| TIME_WAITED | double | NO | 该等待事件的总等待时间，单位为 10 ms |
| AVERAGE_WAIT | double | NO | 该等待事件的平均等待时间，单位为 10 ms |
| TIME_WAITED_MICRO | bigint(20) | NO | 该等待事件的总等待时间，单位为微秒 |

## 查询示例

用户租户下，查看本租户在所有节点的所有等待事件，展示前 10 条记录。

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.GV$SYSTEM_EVENT LIMIT 10;
```

查询结果如下：

```shell
+--------+----------------+----------+----------+----------------------------+---------------+-------------+---------------+-------------+----------------+-------------+----------------------+-------------------+
| CON_ID | SVR_IP         | SVR_PORT | EVENT_ID | EVENT                      | WAIT_CLASS_ID | WAIT_CLASS# | WAIT_CLASS    | TOTAL_WAITS | TOTAL_TIMEOUTS | TIME_WAITED | AVERAGE_WAIT         | TIME_WAITED_MICRO |
+--------+----------------+----------+----------+----------------------------+---------------+-------------+---------------+-------------+----------------+-------------+----------------------+-------------------+
|   1002 | 11.xxx.xxx.xxx |    28825 |    10001 | db file data read          |           108 |           8 | USER_IO       |        6466 |              0 |    248.8259 | 0.038482199195793376 |           2488259 |
|   1002 | 11.xxx.xxx.xxx |    28825 |    11001 | db file compact read       |           109 |           9 | SYSTEM_IO     |      480081 |              0 |  30589.1178 |  0.06371657657770252 |         305891178 |
|   1002 | 11.xxx.xxx.xxx |    28825 |    11002 | db file compact write      |           109 |           9 | SYSTEM_IO     |     2426062 |              0 |  63913.4377 | 0.026344519513516143 |         639134377 |
|   1002 | 11.xxx.xxx.xxx |    28825 |    11016 | palf read                  |           109 |           9 | SYSTEM_IO     |      541222 |              0 |   8143.9096 | 0.015047262675944438 |          81439096 |
|   1002 | 11.xxx.xxx.xxx |    28825 |    11017 | palf write                 |           109 |           9 | SYSTEM_IO     |    19637686 |              0 | 483846.5034 | 0.024638671959618868 |        4838465034 |
|   1002 | 11.xxx.xxx.xxx |    28825 |    13000 | sync rpc                   |           107 |           7 | NETWORK       |        1533 |              0 |   1351.2232 |     0.88142413568167 |          13512232 |
|   1002 | 11.xxx.xxx.xxx |    28825 |    13001 | mysql response wait client |           106 |           6 | IDLE          |          20 |              0 |       0.037 |              0.00185 |               370 |
|   1002 | 11.xxx.xxx.xxx |    28825 |    13004 | wait in request queue      |           102 |           2 | CONFIGURATION |    11518452 |              0 |    26999.07 | 0.002343984243716083 |         269990700 |
|   1002 | 11.xxx.xxx.xxx |    28825 |    15101 | default condition wait     |           104 |           4 | CONCURRENCY   |     5465549 |              0 | 206549.5945 |  0.03779118886318648 |        2065495945 |
|   1002 | 11.xxx.xxx.xxx |    28825 |    15102 | sleep wait                 |           106 |           6 | IDLE          |         103 |              0 |   1023.8728 |    9.940512621359224 |          10238728 |
+--------+----------------+----------+----------+----------------------------+---------------+-------------+---------------+-------------+----------------+-------------+----------------------+-------------------+
10 rows in set
```

## 相关视图或文档

* 查看所有 Session 的当前或上一次等待事件：

  * [GV$SESSION_WAIT](4900.gv-session_wait-of-mysql-mode.md)
  * [V$SESSION_WAIT](35500.v-session_wait-of-mysql-mode.md)

* 查看 Session 级别的所有等待事件：

  * [GV$SESSION_EVENT](4700.gv-session_event-of-mysql-mode.md)
  * [V$SESSION_EVENT](34000.v-ob_session_event-of-mysql-mode.md)

* 查看租户所有等待事件的定义：[V$EVENT_NAME](30200.v-event_name-of-mysql-mode.md)

* 有关等待事件的详细说明，参见 [常见等待事件说明](../../520.wait-event-description.md)。