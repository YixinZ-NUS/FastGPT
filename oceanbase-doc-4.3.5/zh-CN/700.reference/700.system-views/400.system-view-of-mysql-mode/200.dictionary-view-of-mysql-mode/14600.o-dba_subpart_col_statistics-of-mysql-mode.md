|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|MySQL Mode|
|machine-translation||

# oceanbase.DBA_SUBPART_COL_STATISTICS

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.0.0 版本开始引入。</p>
</main>

## 功能描述

展示本租户所有子分区表的列统计信息和直方图信息。

## 字段说明

| 字段名称 | 类型 | 是否可以为 NULL | 描述 |
| --- | --- | --- | --- |
| OWNER | varchar(128) | NO | 分区表的所有者 |
| TABLE_NAME | varchar(128) | NO | 表名 |
| SUBPARTITION_NAME | varchar(128) | NO | 子分区表名称 |
| COLUMN_NAME | varchar(128) | NO | 列名 |
| NUM_DISTINCT | decimal(10,0) | NO | 列中不同值的数量 |
| LOW_VALUE | varchar(128) | NO | 列的最小值 |
| HIGH_VALUE | varchar(128) | NO | 列的最大值 |
| DENSITY | decimal(10,0) | NO | 列的密度。如果直方图在 COLUMN_NAME 上可用，则此列显示跨越直方图中少于 2 个端点的值的选择性。它不代表跨越 2 个或更多端点的值的选择性。如果直方图在 COLUMN_NAME 上不可用，则此列的值为 1/ NUM_DISTINCT |
| NUM_NULLS | decimal(10,0) | NO | 列中的 NULL 数 |
| NUM_BUCKETS | decimal(10,0) | NO | 列的直方图中的桶数 |
| LAST_ANALYZED | datetime(6) | NO | 最近分析色谱柱的日期 |
| SAMPLE_SIZE | decimal(10,0) | NO | 用于分析色谱柱的样本量 |
| GLOBAL_STATS | varchar(3) | NO | 指示统计信息是否已收集：<li>YES<li>NO |
| USER_STATS | varchar(3) | NO | 指示统计信息是否由用户直接输入：<li>YES<li>NO |
| NOTES | varchar(80) | NO | 描述统计信息的一些附加属性。例如：如果值为 INCREMENTAL，则全局统计信息来自概要，即：全局统计信息是增量维护的 |
| AVG_COL_LEN | decimal(10,0) | NO | 列的平均长度（以字节为单位） |
| HISTOGRAM | varchar(15) | NO | 指示直方图的类型：<li>NONE<li>FREQUENCY<li>HEIGHT BALANCED<li>HYBRID<li>TOP-FREQUENCY |

## 查询示例

查看本租户的分区表 `t_subpart` 的二级分区的列统计信息。

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.DBA_SUBPART_COL_STATISTICS WHERE TABLE_NAME='t_subpart';
```

查询结果如下：

```shell
+-------+------------+-------------------+-------------+--------------+-----------+------------+--------------+-----------+-------------+----------------------------+-------------+--------------+------------+-------+-------------+-----------+
| OWNER | TABLE_NAME | SUBPARTITION_NAME | COLUMN_NAME | NUM_DISTINCT | LOW_VALUE | HIGH_VALUE | DENSITY      | NUM_NULLS | NUM_BUCKETS | LAST_ANALYZED              | SAMPLE_SIZE | GLOBAL_STATS | USER_STATS | NOTES | AVG_COL_LEN | HISTOGRAM |
+-------+------------+-------------------+-------------+--------------+-----------+------------+--------------+-----------+-------------+----------------------------+-------------+--------------+------------+-------+-------------+-----------+
| test  | t_subpart  | p0ssp0            | c1          |         1313 | 0         | 9999       | 0.0007616146 |         0 |           5 | 2025-03-17 15:30:30.152256 |        1336 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p0ssp0            | c2          |          332 | 0         | 999        | 0.0030120482 |         0 |           5 | 2025-03-17 15:30:30.152256 |        1336 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p0ssp0            | c3          |          630 | 0         | 1999       | 0.0015873016 |         0 |           5 | 2025-03-17 15:30:30.152256 |        1336 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p0ssp1            | c1          |         1001 | 2001      | 8997       | 0.0009990010 |         0 |           5 | 2025-03-17 15:30:30.152256 |         999 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p0ssp1            | c2          |          349 | 1         | 997        | 0.0028653295 |         0 |           5 | 2025-03-17 15:30:30.152256 |         999 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p0ssp1            | c3          |          691 | 1         | 1997       | 0.0014471780 |         0 |           5 | 2025-03-17 15:30:30.152256 |         999 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p0ssp2            | c1          |          996 | 1002      | 7998       | 0.0010040161 |         0 |           5 | 2025-03-17 15:30:30.152256 |         999 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p0ssp2            | c2          |          338 | 2         | 998        | 0.0029585799 |         0 |           5 | 2025-03-17 15:30:30.152256 |         999 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p0ssp2            | c3          |          678 | 2         | 1998       | 0.0014749263 |         0 |           5 | 2025-03-17 15:30:30.152256 |         999 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p1ssp0            | c1          |         1025 | 1000      | 7999       | 0.0009756098 |         0 |           5 | 2025-03-17 15:30:30.152256 |        1002 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p1ssp0            | c2          |          332 | 0         | 999        | 0.0030120482 |         0 |           5 | 2025-03-17 15:30:30.152256 |        1002 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p1ssp0            | c3          |          630 | 0         | 1999       | 0.0015873016 |         0 |           5 | 2025-03-17 15:30:30.152256 |        1002 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p1ssp1            | c1          |         1357 | 1         | 9997       | 0.0007369197 |         0 |           5 | 2025-03-17 15:30:30.152256 |        1332 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p1ssp1            | c2          |          349 | 1         | 997        | 0.0028653295 |         0 |           5 | 2025-03-17 15:30:30.152256 |        1332 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p1ssp1            | c3          |          691 | 1         | 1997       | 0.0014471780 |         0 |           5 | 2025-03-17 15:30:30.152256 |        1332 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p1ssp2            | c1          |          965 | 2002      | 8998       | 0.0010362694 |         0 |           5 | 2025-03-17 15:30:30.152256 |         999 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p1ssp2            | c2          |          338 | 2         | 998        | 0.0029585799 |         0 |           5 | 2025-03-17 15:30:30.152256 |         999 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p1ssp2            | c3          |          678 | 2         | 1998       | 0.0014749263 |         0 |           5 | 2025-03-17 15:30:30.152256 |         999 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p2ssp0            | c1          |         1007 | 2000      | 8999       | 0.0009930487 |         0 |           5 | 2025-03-17 15:30:30.152256 |        1002 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p2ssp0            | c2          |          332 | 0         | 999        | 0.0030120482 |         0 |           5 | 2025-03-17 15:30:30.152256 |        1002 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p2ssp0            | c3          |          630 | 0         | 1999       | 0.0015873016 |         0 |           5 | 2025-03-17 15:30:30.152256 |        1002 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p2ssp1            | c1          |         1047 | 1001      | 7997       | 0.0009551098 |         0 |           5 | 2025-03-17 15:30:30.152256 |         999 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p2ssp1            | c2          |          349 | 1         | 997        | 0.0028653295 |         0 |           5 | 2025-03-17 15:30:30.152256 |         999 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p2ssp1            | c3          |          691 | 1         | 1997       | 0.0014471780 |         0 |           5 | 2025-03-17 15:30:30.152256 |         999 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p2ssp2            | c1          |         1298 | 2         | 9998       | 0.0007704160 |         0 |           5 | 2025-03-17 15:30:30.152256 |        1332 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p2ssp2            | c2          |          338 | 2         | 998        | 0.0029585799 |         0 |           5 | 2025-03-17 15:30:30.152256 |        1332 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p2ssp2            | c3          |          678 | 2         | 1998       | 0.0014749263 |         0 |           5 | 2025-03-17 15:30:30.152256 |        1332 | NO           | NO         | NULL  |          20 | HYBRID    |
+-------+------------+-------------------+-------------+--------------+-----------+------------+--------------+-----------+-------------+----------------------------+-------------+--------------+------------+-------+-------------+-----------+
27 rows in set
```

## 相关视图或文档

* 查看表级的列统计信息：[DBA_TAB_STATISTICS](15400.o-dba_tab_statistics-of-mysql-mode.md)

* 查看 Global 级的列统计信息：[DBA_TAB_COL_STATISTICS](15000.o-dba_tab_col_statistics-of-mysql-mode.md)

* 查看 Partition 级的列统计信息：[DBA_PART_COL_STATISTICS](13200.o-dba_part_col_statistics-of-mysql-mode.md)

* 查看表级的直方图统计信息：[DBA_TAB_HISTOGRAMS](15100.o-dba_tab_histograms-of-mysql-mode.md)

* 查看 Partition 级的直方图统计信息：[DBA_PART_HISTOGRAMS](13300.o-dba_part_histograms-of-mysql-mode.md)

* 查看 Subpartiton 级的直方图统计信息：[DBA_SUBPART_HISTOGRAMS](14700.o-dba_subpart_histograms-of-mysql-mode.md)

* 查看索引统计信息：[DBA_IND_STATISTICS](4600.o-dba_ind_statistics-of-mysql-mode.md)

* 有关如何收集统计信息，参见以下文档：

  * [手动收集统计信息](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/200.statistics-collection-methods/300.collect-statistics-manually.md)

  * [自动收集统计信息](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/200.statistics-collection-methods/400.collect-statistics-automatically.md)