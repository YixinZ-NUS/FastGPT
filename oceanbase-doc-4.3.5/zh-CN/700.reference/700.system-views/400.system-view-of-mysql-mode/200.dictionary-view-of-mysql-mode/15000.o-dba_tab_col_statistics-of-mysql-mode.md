|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|MySQL Mode|
|machine-translation||

# oceanbase.DBA_TAB_COL_STATISTICS

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.0.0 版本开始引入。</p>
</main>

## 功能描述

展示本租户所有表的列统计信息和直方图信息。

## 字段说明

| 字段名称 | 类型 | 是否可以为 NULL | 描述 |
| --- | --- | --- | --- |
| OWNER | varchar(128) | NO | 列所属的用户 |
| TABLE_NAME | varchar(128) | NO | 列所属的表名 |
| COLUMN_NAME | varchar(128) | NO | 列名 |
| NUM_DISTINCT | decimal(10,0) | NO | 列中不同值的数量 |
| LOW_VALUE | varchar(128) | NO | 列的最小值 |
| HIGH_VALUE | varchar(128) | NO | 列的最大值 |
| DENSITY | decimal(10,0) | NO | 列的密度 |
| NUM_NULLS | decimal(10,0) | NO | 列中 `NULL` 值的数量 |
| NUM_BUCKETS | decimal(10,0) | NO | 列直方图中桶的个数 |
| LAST_ANALYZED | datetime(6) | NO | 上次分析的时间 |
| SAMPLE_SIZE | decimal(10,0) | NO | 分析时的采样大小 |
| GLOBAL_STATS | varchar(3) | NO | <li> `YES`：表示统计信息是直接收集的或增量维护的   <li> `NO`：其它情况 |
| USER_STATS | varchar(3) | NO | 分区统计信息是否是用户设置的 |
| NOTES | varchar(80) | NO | 记录一些额外的属性 |
| AVG_COL_LEN | decimal(10,0) | NO | 列的平均长度 |
| HISTOGRAM | varchar(15) | NO | 直方图类型 |
| SCOPE | varchar(7) | NO | 统计信息的有效范围 |

## 查询示例

用户租户查询本租户的表 `t_subpart` 的列统计信息和直方图信息。

```shell
obclient [oceanbase]> SELECT OWNER, TABLE_NAME, COLUMN_NAME, NUM_DISTINCT, LOW_VALUE, HIGH_VALUE, DENSITY, NUM_NULLS, NUM_BUCKETS, SAMPLE_SIZE, AVG_COL_LEN, HISTOGRAM FROM oceanbase.DBA_TAB_COL_STATISTICS WHERE TABLE_NAME ='t_subpart' ORDER BY 1, 2, 3;
```

查询结果如下：

```shell
+-------+------------+-------------+--------------+-----------+------------+--------------+-----------+-------------+-------------+-------------+-----------+
| OWNER | TABLE_NAME | COLUMN_NAME | NUM_DISTINCT | LOW_VALUE | HIGH_VALUE | DENSITY      | NUM_NULLS | NUM_BUCKETS | SAMPLE_SIZE | AVG_COL_LEN | HISTOGRAM |
+-------+------------+-------------+--------------+-----------+------------+--------------+-----------+-------------+-------------+-------------+-----------+
| test  | t_subpart  | c1          |         9800 | 0         | 9999       | 0.0001020408 |         0 |           5 |       10000 |          20 | HYBRID    |
| test  | t_subpart  | c2          |         1012 | 0         | 999        | 0.0009881423 |         0 |           5 |       10000 |          20 | HYBRID    |
| test  | t_subpart  | c3          |         2030 | 0         | 1999       | 0.0004926108 |         0 |           5 |       10000 |          20 | HYBRID    |
+-------+------------+-------------+--------------+-----------+------------+--------------+-----------+-------------+-------------+-------------+-----------+
3 rows in set
```

## 相关视图或文档

* 查看所有租户的统计信息：[CDB_TAB_COL_STATISTICS](../../300.system-view-of-sys-tenant/200.dictionary-view-of-sys-tenant/12700.o-cdb_tab_col_statistics-of-sys-tenant.md)

* 查看表级的列统计信息：[DBA_TAB_STATISTICS](15400.o-dba_tab_statistics-of-mysql-mode.md)

* 查看 Partition 级的列统计信息：[DBA_PART_COL_STATISTICS](13200.o-dba_part_col_statistics-of-mysql-mode.md)

* 查看 Subpartiton 级的列统计信息：[DBA_SUBPART_COL_STATISTICS](14600.o-dba_subpart_col_statistics-of-mysql-mode.md)

* 查看表级的直方图统计信息：[DBA_TAB_HISTOGRAMS](15100.o-dba_tab_histograms-of-mysql-mode.md)

* 查看 Partition 级的直方图统计信息：[DBA_PART_HISTOGRAMS](13300.o-dba_part_histograms-of-mysql-mode.md)

* 查看 Subpartiton 级的直方图统计信息：[DBA_SUBPART_HISTOGRAMS](14700.o-dba_subpart_histograms-of-mysql-mode.md)

* 查看索引统计信息：[DBA_IND_STATISTICS](4600.o-dba_ind_statistics-of-mysql-mode.md)

* 有关如何收集统计信息，参见以下文档：

  * [手动收集统计信息](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/200.statistics-collection-methods/300.collect-statistics-manually.md)

  * [自动收集统计信息](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/200.statistics-collection-methods/400.collect-statistics-automatically.md)