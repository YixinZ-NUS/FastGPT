|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|MySQL Mode|
|machine-translation||

# oceanbase.DBA_TAB_STATISTICS

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.0.0 版本开始引入。</p>
</main>

## 功能描述

展示本租户所有表的优化器统计信息。

## 字段说明

| 字段名称 | 类型 | 是否可以为 NULL | 描述 |
| --- | --- | --- | --- |
| OWNER                     | varchar(128) | NO             | 实体所属的用户                                     |
| TABLE_NAME                | varchar(128) | NO             | 表名                                          |
| PARTITION_NAME            | varchar(128) | NO             | 分区名                                         |
| PARTITION_POSITION        | decimal(10,0)| NO             | 分区在表中的位置                                    |
| SUBPARTITION_NAME         | varchar(128) | NO             | 二级分区名                                       |
| SUBPARTITION_POSITION     | decimal(10,0)| NO             | 二级分区在分区中的位置                                 |
| OBJECT_TYPE               | varchar(12)  | NO             | 实体类型                                        |
| NUM_ROWS                  | decimal(10,0)        | NO            | 实体中的行数                                      |
| BLOCKS                    | decimal(10,0)        | NO            | 暂不支持该字段，当前该字段默认为 NULL                                  |
| EMPTY_BLOCKS              | decimal(10,0)        | NO            | 暂不支持该字段，当前该字段默认为 NULL                                  |
| AVG_SPACE                 | decimal(10,0)        | NO            | 暂不支持该字段，当前该字段默认为 NULL                                  |
| CHAIN_CNT                 | decimal(10,0)        | NO            | 暂不支持该字段，当前该字段默认为 NULL                                  |
| AVG_ROW_LEN               | decimal(10,0)        | NO            | 实体的平均行长                                     |
| AVG_SPACE_FREELIST_BLOCKS | decimal(10,0)        | NO            | 暂不支持该字段，当前该字段默认为 NULL                                  |
| NUM_FREELIST_BLOCKS       | decimal(10,0)        | NO            | 暂不支持该字段，当前该字段默认为 NULL                                  |
| AVG_CACHED_BLOCKS         | decimal(10,0)        | NO            | 暂不支持该字段，当前该字段默认为 NULL                                  |
| AVG_CACHE_HIT_RATIO       | decimal(10,0)        | NO            | 暂不支持该字段，当前该字段默认为 NULL                                  |
| IM_IMCU_COUNT             | decimal(10,0)        | NO            | 暂不支持该字段，当前该字段默认为 NULL                                  |
| IM_BLOCK_COUNT            | decimal(10,0)        | NO            | 暂不支持该字段，当前该字段默认为 NULL                                  |
| IM_STAT_UPDATE_TIME       | datetime             | NO            | 暂不支持该字段，当前该字段默认为 NULL                                  |
| SCAN_RATE                 | decimal(10,0)        | NO            | 暂不支持该字段，当前该字段默认为 NULL                                  |
| SAMPLE_SIZE               | decimal(10,0)        | YES            | 收集统计信息时的采样大小                                |
| LAST_ANALYZED             | datetime(6)          | NO            | 上次分析的时间                                     |
| GLOBAL_STATS              | varchar(3)   | NO            | <li> `YES`：表示统计信息是直接收集的或增量维护的   <li> `NO`：其它情况    |
| USER_STATS                | varchar(3)   | NO            | 分区统计信息是否是用户设置的                              |
| STATTYPE_LOCKED           | varchar(5)   | NO            | 统计信息锁定类型                                    |
| STALE_STATS               | varchar(3)   | NO            | 统计信息是否过时                                    |
| SCOPE                     | varchar(7)   | NO            | 统计信息的有效范围                                   |

## 查询示例

查看本租户中表 `t_subpart` 的优化器统计信息。

```shell
obclient [oceanbase]> SELECT OWNER, TABLE_NAME, OBJECT_TYPE, NUM_ROWS, AVG_ROW_LEN FROM oceanbase.DBA_TAB_STATISTICS WHERE TABLE_NAME='t_subpart';
```

查询结果如下：

```shell
+-------+------------+--------------+----------+-------------+
| OWNER | TABLE_NAME | OBJECT_TYPE  | NUM_ROWS | AVG_ROW_LEN |
+-------+------------+--------------+----------+-------------+
| test  | t_subpart  | TABLE        |    10000 |          60 |
| test  | t_subpart  | PARTITION    |     3334 |          60 |
| test  | t_subpart  | PARTITION    |     3333 |          60 |
| test  | t_subpart  | PARTITION    |     3333 |          60 |
| test  | t_subpart  | SUBPARTITION |     1336 |          60 |
| test  | t_subpart  | SUBPARTITION |      999 |          60 |
| test  | t_subpart  | SUBPARTITION |      999 |          60 |
| test  | t_subpart  | SUBPARTITION |     1002 |          60 |
| test  | t_subpart  | SUBPARTITION |     1332 |          60 |
| test  | t_subpart  | SUBPARTITION |      999 |          60 |
| test  | t_subpart  | SUBPARTITION |     1002 |          60 |
| test  | t_subpart  | SUBPARTITION |      999 |          60 |
| test  | t_subpart  | SUBPARTITION |     1332 |          60 |
+-------+------------+--------------+----------+-------------+
13 rows in set
```

## 相关视图或文档

* 查看 Global 级的列统计信息：[DBA_TAB_COL_STATISTICS](15000.o-dba_tab_col_statistics-of-mysql-mode.md)

* 查看 Partition 级的列统计信息：[DBA_PART_COL_STATISTICS](13200.o-dba_part_col_statistics-of-mysql-mode.md)

* 查看 Subpartiton 级的列统计信息：[DBA_SUBPART_COL_STATISTICS](14600.o-dba_subpart_col_statistics-of-mysql-mode.md)

* 查看表级的直方图统计信息：[DBA_TAB_HISTOGRAMS](15100.o-dba_tab_histograms-of-mysql-mode.md)

* 查看 Partition 级的直方图统计信息：[DBA_PART_HISTOGRAMS](13300.o-dba_part_histograms-of-mysql-mode.md)

* 查看 Subpartiton 级的直方图统计信息：[DBA_SUBPART_HISTOGRAMS](14700.o-dba_subpart_histograms-of-mysql-mode.md)

* 查看索引统计信息：[DBA_IND_STATISTICS](4600.o-dba_ind_statistics-of-mysql-mode.md)

* 有关如何收集统计信息，参见以下文档：

  * [手动收集统计信息](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/200.statistics-collection-methods/300.collect-statistics-manually.md)

  * [自动收集统计信息](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/200.statistics-collection-methods/400.collect-statistics-automatically.md)