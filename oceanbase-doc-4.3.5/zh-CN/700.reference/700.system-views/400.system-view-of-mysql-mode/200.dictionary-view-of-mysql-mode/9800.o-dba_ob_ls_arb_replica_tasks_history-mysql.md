|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|MySQL Mode|
|machine-translation||

# oceanbase.DBA_OB_LS_ARB_REPLICA_TASK_HISTORY

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.1.0 版本开始引入。</p>
</main>

## 功能描述

展示当前租户执行过的仲裁服务任务历史。

## 字段说明

| 字段 | 类型 | 是否可以为 NULL | 描述 |
| --- | --- | --- | --- |
| TENANT_ID | bigint(20) | NO | 租户 ID  |
| LS_ID | bigint(20) | NO | 日志流 ID |
| TASK_ID | bigint(20) | NO | 任务 ID |
| EXECUTE_RESULT | varchar(2048) | NO | 任务执行结果及耗时，形如 “[ret:0; elapsed:72160;]” |
| CREATE_TIME | datetime | NO | 任务生成时间 |
| FINISH_TIME | datetime | NO | 任务完成时间 |
| TRACE_ID | varchar(200) | NO | 日志中该任务执行的 trace_id |
| TASK_TYPE | varchar(32) | NO |  任务类型：<ul><li> `ADD REPLICA` 指添加副本任务  </li><li> `REMOVE REPLICA` 指删除副本任务</li></ul>|
| ARBITRATION_SERVICE | varchar(512) | NO | 仲裁服务地址 |
| ARBITRATION_SERVICE_TYPE | varchar(64) | NO | 仲裁服务类型，当前仅支持 `ADDR` |
| COMMENT | varchar(2048) | YES | 任务描述 |

## 查询示例

查看当前租户执行过的仲裁服务历史。

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.DBA_OB_LS_ARB_REPLICA_TASK_HISTORY;
```

查询结果如下：

```shell
+-----------+-------+------------------+-------------------------+---------------------+---------------------+-----------------------------------+----------------+---------------------+--------------------------+--------------------------------------------+
| TENANT_ID | LS_ID | TASK_ID          | EXECUTE_RESULT          | CREATE_TIME         | FINISH_TIME         | TRACE_ID                          | TASK_TYPE      | ARBITRATION_SERVICE | ARBITRATION_SERVICE_TYPE | COMMENT                                    |
+-----------+-------+------------------+-------------------------+---------------------+---------------------+-----------------------------------+----------------+---------------------+--------------------------+--------------------------------------------+
|      1002 |     1 | 1747029840161991 | [ret:0; elapsed:63458;] | 2025-05-12 14:04:00 | 2025-05-12 14:04:00 | YB4**************************-0-0 | REMOVE REPLICA | 172.xx.xxx.xxx:2882 | ADDR                     | remove arbitration replica service replica |
|      1002 |  1001 | 1747029840233786 | [ret:0; elapsed:66408;] | 2025-05-12 14:04:00 | 2025-05-12 14:04:00 | YB4**************************-0-0 | REMOVE REPLICA | 172.xx.xxx.xxx:2882 | ADDR                     | remove arbitration replica service replica |
|      1002 |  1004 | 1747029840308182 | [ret:0; elapsed:63357;] | 2025-05-12 14:04:00 | 2025-05-12 14:04:00 | YB4**************************-0-0 | REMOVE REPLICA | 172.xx.xxx.xxx:2882 | ADDR                     | remove arbitration replica service replica |
+-----------+-------+------------------+-------------------------+---------------------+---------------------+-----------------------------------+----------------+---------------------+--------------------------+--------------------------------------------+
3 rows in set
```