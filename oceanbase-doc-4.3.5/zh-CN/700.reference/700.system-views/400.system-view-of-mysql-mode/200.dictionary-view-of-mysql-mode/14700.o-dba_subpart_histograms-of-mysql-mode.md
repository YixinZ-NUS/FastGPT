|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|MySQL Mode|
|machine-translation||

# oceanbase.DBA_SUBPART_HISTOGRAMS

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.0.0 版本开始引入。</p>
</main>

## 功能描述

展示本租户所有分区表的二级分区的直方图数据（每个直方图的端点）。

## 字段说明

| 字段名称 | 类型 | 是否可以为 NULL | 描述 |
| --- | --- | --- | --- |
| OWNER                     | varchar(128)  | NO   | 表的所有者     |
| TABLE_NAME                | varchar(128)  | NO   | 直方图所属表名     |
| SUBPARTITION_NAME         | varchar(128)  | NO   | 直方图所属二级分区名     |
| COLUMN_NAME               | varchar(128)  | NO   | 直方图所属列名     |
| ENDPOINT_NUMBER           | decimal(10,0) | NO   | Bucket 累积的频次     |
| ENDPOINT_VALUE            | decimal(10,0) | NO   | Bucket 端点归一化值     |
| ENDPOINT_ACTUAL_VALUE     | text          | NO   | Bucket 端点值     |
| ENDPOINT_ACTUAL_VALUE_RAW | text          | NO   | Bucket 端点二进制值     |
| ENDPOINT_REPEAT_COUNT     | decimal(10,0) | NO   | Bucket 端点值的频次     |

## 查询示例

查看本租户的分区表 `sales_subpart` 的二级分区的直方图信息。

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.DBA_SUBPART_HISTOGRAMS WHERE TABLE_NAME ='sales_subpart';
```

查询结果如下：

```shell
+----------+---------------+-------------------+-------------+-----------------+----------------+-----------------------+---------------------------+-----------------------+
| OWNER    | TABLE_NAME    | SUBPARTITION_NAME | COLUMN_NAME | ENDPOINT_NUMBER | ENDPOINT_VALUE | ENDPOINT_ACTUAL_VALUE | ENDPOINT_ACTUAL_VALUE_RAW | ENDPOINT_REPEAT_COUNT |
+----------+---------------+-------------------+-------------+-----------------+----------------+-----------------------+---------------------------+-----------------------+
| infotest | sales_subpart | p2023sp0          | quantity    |             127 |           NULL | 1                     | 04053F0001                |                   127 |
| infotest | sales_subpart | p2023sp0          | product_id  |             127 |           NULL | 8                     | 04053F0008                |                    63 |
| infotest | sales_subpart | p2023sp0          | product_id  |              64 |           NULL | 4                     | 04053F0004                |                    64 |
| infotest | sales_subpart | p2023sp1          | quantity    |             190 |           NULL | 1                     | 04053F0001                |                   190 |
| infotest | sales_subpart | p2023sp1          | product_id  |             190 |           NULL | 9                     | 04053F0009                |                    63 |
| infotest | sales_subpart | p2023sp1          | product_id  |             127 |           NULL | 5                     | 04053F0005                |                    63 |
| infotest | sales_subpart | p2023sp1          | product_id  |              64 |           NULL | 1                     | 04053F0001                |                    64 |
| infotest | sales_subpart | p2023sp2          | quantity    |             127 |           NULL | 1                     | 04053F0001                |                   127 |
| infotest | sales_subpart | p2023sp2          | product_id  |             127 |           NULL | 6                     | 04053F0006                |                    63 |
| infotest | sales_subpart | p2023sp2          | product_id  |              64 |           NULL | 2                     | 04053F0002                |                    64 |
| infotest | sales_subpart | p2023sp3          | quantity    |             191 |           NULL | 1000                  | 04053F00E807              |                     6 |
| infotest | sales_subpart | p2023sp3          | quantity    |             185 |           NULL | 1                     | 04053F0001                |                   185 |
| infotest | sales_subpart | p2023sp3          | product_id  |             191 |           NULL | 999                   | 04053F00E707              |                    64 |
| infotest | sales_subpart | p2023sp3          | product_id  |             127 |           NULL | 7                     | 04053F0007                |                    63 |
| infotest | sales_subpart | p2023sp3          | product_id  |              64 |           NULL | 3                     | 04053F0003                |                    64 |
| infotest | sales_subpart | p2024sp0          | quantity    |              73 |           NULL | 1                     | 04053F0001                |                    73 |
| infotest | sales_subpart | p2024sp0          | product_id  |              73 |           NULL | 8                     | 04053F0008                |                    37 |
| infotest | sales_subpart | p2024sp0          | product_id  |              36 |           NULL | 4                     | 04053F0004                |                    36 |
| infotest | sales_subpart | p2024sp1          | quantity    |             110 |           NULL | 1                     | 04053F0001                |                   110 |
| infotest | sales_subpart | p2024sp1          | product_id  |             110 |           NULL | 9                     | 04053F0009                |                    37 |
| infotest | sales_subpart | p2024sp1          | product_id  |              73 |           NULL | 5                     | 04053F0005                |                    37 |
| infotest | sales_subpart | p2024sp1          | product_id  |              36 |           NULL | 1                     | 04053F0001                |                    36 |
| infotest | sales_subpart | p2024sp2          | quantity    |              73 |           NULL | 1                     | 04053F0001                |                    73 |
| infotest | sales_subpart | p2024sp2          | product_id  |              73 |           NULL | 6                     | 04053F0006                |                    37 |
| infotest | sales_subpart | p2024sp2          | product_id  |              36 |           NULL | 2                     | 04053F0002                |                    36 |
| infotest | sales_subpart | p2024sp3          | quantity    |             109 |           NULL | 1000                  | 04053F00E807              |                     4 |
| infotest | sales_subpart | p2024sp3          | quantity    |             105 |           NULL | 1                     | 04053F0001                |                   105 |
| infotest | sales_subpart | p2024sp3          | product_id  |             109 |           NULL | 999                   | 04053F00E707              |                    36 |
| infotest | sales_subpart | p2024sp3          | product_id  |              73 |           NULL | 7                     | 04053F0007                |                    37 |
| infotest | sales_subpart | p2024sp3          | product_id  |              36 |           NULL | 3                     | 04053F0003                |                    36 |
+----------+---------------+-------------------+-------------+-----------------+----------------+-----------------------+---------------------------+-----------------------+
30 rows in set
```

## 相关视图或文档

* 查看表级的直方图统计信息：[DBA_TAB_HISTOGRAMS](15100.o-dba_tab_histograms-of-mysql-mode.md)

* 查看 Partition 级的直方图统计信息：[DBA_PART_HISTOGRAMS](13300.o-dba_part_histograms-of-mysql-mode.md)

* 查看表级的列统计信息：[DBA_TAB_STATISTICS](15400.o-dba_tab_statistics-of-mysql-mode.md)

* 查看 Global 级的列统计信息：[DBA_TAB_COL_STATISTICS](15000.o-dba_tab_col_statistics-of-mysql-mode.md)

* 查看 Partition 级的列统计信息：[DBA_PART_COL_STATISTICS](13200.o-dba_part_col_statistics-of-mysql-mode.md)

* 查看 Subpartiton 级的列统计信息：[DBA_SUBPART_COL_STATISTICS](14600.o-dba_subpart_col_statistics-of-mysql-mode.md)

* 查看索引统计信息：[DBA_IND_STATISTICS](4600.o-dba_ind_statistics-of-mysql-mode.md)

* 有关如何收集统计信息，参见以下文档：

  * [手动收集统计信息](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/200.statistics-collection-methods/300.collect-statistics-manually.md)

  * [自动收集统计信息](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/200.statistics-collection-methods/400.collect-statistics-automatically.md)