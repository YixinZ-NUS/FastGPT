|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|MySQL Mode|
|machine-translation||

# oceanbase.DBA_OB_TASK_OPT_STAT_GATHER_HISTORY

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.2.0 版本开始引入。</p>
</main>

## 功能描述

展示当前租户历史收集任务的执行情况。

## 字段说明

| **字段** | **类型** | **是否为 NULL** | **描述** |
| --- | --- | --- | --- |
| TENANT_ID | bigint(20) | NO | 收集任务所在租户 ID |
| TASK_ID | varchar(36) | NO | 收集任务 ID（UUID生成，全局唯一） |
| TYPE | varchar(16) | NO | 收集任务类型 |
| STATUS | varchar(8) | NO | 收集任务状态<ul><li>SUCCESS   </li><li>FAILED  </li></ul>|
| TABLE_COUNT | bigint(20) | YES | 收集任务需要收集的表个数 |
| FAILED_COUNT | bigint(20) | YES | 收集任务收集失败的表个数 |
| START_TIME | datetime(6) | NO | 收集任务开始的时间 |
| END_TIME | datetime(6) | NO | 收集任务结束的时间 |

## 查询示例

查看本租户的手动收集任务的历史执行情况。

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.DBA_OB_TASK_OPT_STAT_GATHER_HISTORY WHERE TYPE='MANUAL GATHER';
```

查询结果如下：

```shell
+-----------+--------------------------------------+---------------+---------+-------------+--------------+----------------------------+----------------------------+
| TENANT_ID | TASK_ID                              | TYPE          | STATUS  | TABLE_COUNT | FAILED_COUNT | START_TIME                 | END_TIME                   |
+-----------+--------------------------------------+---------------+---------+-------------+--------------+----------------------------+----------------------------+
|      1002 | 5b965b29-062d-11f0-9059-00163e0d8e01 | MANUAL GATHER | FAILED  |           1 |            1 | 2025-03-21 16:20:32.834753 | 2025-03-21 16:20:32.836438 |
|      1002 | 719de009-062d-11f0-9059-00163e0d8e01 | MANUAL GATHER | SUCCESS |           1 |            0 | 2025-03-21 16:21:09.793531 | 2025-03-21 16:21:09.891911 |
+-----------+--------------------------------------+---------------+---------+-------------+--------------+----------------------------+----------------------------+
2 rows in set
```

## 相关视图或文档

* 查看表级历史统计信息的收集状态：[DBA_OB_TABLE_OPT_STAT_GATHER_HISTORY](../200.dictionary-view-of-mysql-mode/11300.o-dba_ob_table_opt_stat_gather_history-of-mysql-mode.md)

* 有关统计信息收集监控诊断的详细介绍，参见 [统计信息收集监控诊断](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/400.statistics-monitoring-diagnosis.md)。