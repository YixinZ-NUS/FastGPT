|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# GV$OB_SERVERS

<main id="notice" type='explain'>
  <h4>说明</h4>
  <p>该视图从 V4.0.0 版本开始引入。</p>
</main>

## 功能描述

展示所有 OBServer 节点的信息。

## 字段说明

|          字段名称           |      类型      | 是否可以为 NULL |              描述              |
|-------------------------|--------------|------------|-------|
| SVR_IP                  | varchar(46)  | NO         | 服务器 IP 地址                    |
| SVR_PORT                | bigint(20)   | NO         | 服务器端口号                       |
| ZONE                    | varchar(128) | NO         | Zone 名称                      |
| SQL_PORT                | bigint(20)   | NO         | SQL 端口                       |
| CPU_CAPACITY            | bigint(20)   | NO         | 节点 CPU 总容量        |
| CPU_CAPACITY_MAX        | double       | NO         | 节点 CPU 总容量的超卖值。它由 `resource_hard_limit` 配置项控制： `CPU_CAPACITY_MAX =  CPU_CAPACITY * resource_hard_limit`                                                                   |
| CPU_ASSIGNED            | double       | NO         | OBServer 节点已经分配的 CPU 数量，它是 OBServer 节点上所有 Unit 的 `MIN_CPU` 规格总和。有如下约束：`CPU_ASSIGNED <= CPU_CAPACITY`                |
| CPU_ASSIGNED_MAX        | double       | NO         | OBServer 节点已经分配的 CPU 上界值，它是 OBServer 节点上所有 Unit 的 `MAX_CPU` 规格总和。有如下约束：`CPU_ASSIGNED_MAX <= CPU_CAPACITY_MAX`       |
| MEM_CAPACITY            | bigint(20)   | NO         | OBServer 节点可用于分配给租户的总内存大小，值为 `memory_limit - system_memory`，单位为字节    |
| MEM_ASSIGNED            | bigint(20)   | NO         | OBServer 节点已分配的内存大小，它是 OBServer 节点上所有 Unit 的 `MEMORY_SIZE` 规格总和，单位为字节。有如下约束：`MEM_ASSIGNED <= MEM_CAPACITY`     |
| LOG_DISK_CAPACITY       | bigint(20)   | NO         | 日志盘空间总大小，单位为字节     |
| LOG_DISK_ASSIGNED       | bigint(20)   | NO         | 日志盘已分配大小，它是 OBServer 节点上所有 Unit 的 `LOG_DISK_SIZE` 总和，单位为字节         |
| LOG_DISK_IN_USE         | bigint(20)   | NO         | 日志盘已使用大小，单位为字节               |
| DATA_DISK_CAPACITY      | bigint(20)   | NO         | <ul><li>共享存储（Shared-Storage，SS）模式下，表示 OBServer 节点上本地缓存空间的总大小，它是 OBServer 节点上所有 Unit 的 `DATA_DISK_SIZE` 规格之和的上限，单位为字节。</li> <li>无共享（Shared-Nothing，SN） 模式下，表示 OBServer 节点上数据盘空间总大小，单位为字节。 </li></ul>      |
| DATA_DISK_ASSIGNED      | bigint(20)   | YES        | <ul><li>表示 OBServer 节点已分配给 Unit 的本地缓存大小，它是 OBServer 节点上所有 Unit 的 `DATA_DISK_SIZE` 规格的总和，单位为字节，仅适用于 SS 模式。</li> <li>SN 模式下，该字段值为 `NULL` ，表示未定义，允许竞争使用其他租户的磁盘空间。</li></ul><main id="notice" type='explain'><h4>说明</h4><p>该字段从 V4.3.3 版本开始引入。</p></main>    |
| DATA_DISK_IN_USE        | bigint(20)   | NO         | <ul><li>SS 模式下，表示 OBServer 节点已使用的本地缓存大小，它是 OBServer 节点上所有 Unit 的 `DATA_DISK_IN_USE` 之和，单位为字节。</li> <li>SN 模式下，表示 OBServer 节点已使用的数据盘大小，单位为字节。 </li></ul>    |
| DATA_DISK_HEALTH_STATUS | varchar(20)  | NO         | 数据盘健康状态 <li> `NORMAL`：正常状态   <li> `WARNING`：存在异常   <li> `ERROR`：存在错误    |
| MEMORY_LIMIT            | bigint(20)   | NO         | OBServer 节点可用的总内存大小，单位为字节   |
| DATA_DISK_ALLOCATED     | bigint(20)   | NO         | OBServer 已分配的数据盘大小，单位为字节<main id="notice" type='explain'><h4>说明</h4><p>该字段从 V4.2.0 版本开始引入。</p></main>    |
| DATA_DISK_ABNORMAL_TIME | timestamp(6) | NO         | 数据盘上次异常（ `WARNING` 和 `ERROR` 状态）时间  |
| SSL_CERT_EXPIRED_TIME    | timestamp(6) | NO         | 记录当前 OBServer 节点开启 SSL 时，当前 OBServer 节点使用的 SSL 证书过期时间以及 utc 时间，单位为微秒 |
| SS_DATA_DISK_OPERATION_SUGGESTED | varchar(32)| YES  | <ul><li>SS 模式下，共享存储对本地缓存盘扩缩容操作的建议：<ul><li>`NONE`：无操作</li> <li>`EXPAND`：扩容</li> <li>`SHRINK`：缩容</li> </ul></li> <li>SN 模式下，该字段值为 `NULL`。 </li></ul>   <main id="notice" type='explain'><h4>说明</h4><p>对于 V4.3.5 版本，该字段从 V4.3.5 BP2 版本开始引入。</p></main>     |
| SS_DATA_DISK_SIZE_SUGGESTED      | bigint(20) | YES  | <ul><li>SS 模式下，表示本地盘容量的建议值，单位为字节。如果值为 `0`，由用户自行决定机器每次扩容的大小；如果值为非 `0`，需要尽量保证扩容后本地盘的容量大于等于当前建议值。</li> <li>SN 模式下，该字段值为 `NULL`。 </li></ul>   <main id="notice" type='explain'><h4>说明</h4><p>对于 V4.3.5 版本，该字段从 V4.3.5 BP2 版本开始引入。</p></main>     |

## 查询示例

* SN 模式下，查看所有 OBServer 节点的信息。

  ```shell
  obclient> SELECT * FROM oceanbase.GV$OB_SERVERS\G
  ```

  查询结果如下：

  ```shell
  *************************** 1. row ***************************
                            SVR_IP: 172.xx.xxx.xxx
                          SVR_PORT: 2882
                              ZONE: zone1
                          SQL_PORT: 2881
                      CPU_CAPACITY: 64
                  CPU_CAPACITY_MAX: 64
                      CPU_ASSIGNED: 8
                  CPU_ASSIGNED_MAX: 8
                      MEM_CAPACITY: 75161927680
                      MEM_ASSIGNED: 18253611008
                 LOG_DISK_CAPACITY: 179583320064
                 LOG_DISK_ASSIGNED: 56103010304
                   LOG_DISK_IN_USE: 1140850688
                DATA_DISK_CAPACITY: 179593805824
                DATA_DISK_ASSIGNED: NULL
                  DATA_DISK_IN_USE: 174063616
           DATA_DISK_HEALTH_STATUS: NORMAL
                      MEMORY_LIMIT: 107374182400
               DATA_DISK_ALLOCATED: 179593805824
           DATA_DISK_ABNORMAL_TIME: NULL
             SSL_CERT_EXPIRED_TIME: NULL
  SS_DATA_DISK_OPERATION_SUGGESTED: NULL
       SS_DATA_DISK_SIZE_SUGGESTED: NULL
  *************************** 2. row ***************************
                            SVR_IP: 172.xx.xxx.xxx
                          SVR_PORT: 2882
                              ZONE: zone2
                          SQL_PORT: 2881
                      CPU_CAPACITY: 64
                  CPU_CAPACITY_MAX: 64
                      CPU_ASSIGNED: 8
                  CPU_ASSIGNED_MAX: 8
                      MEM_CAPACITY: 75161927680
                      MEM_ASSIGNED: 18253611008
                 LOG_DISK_CAPACITY: 179583320064
                 LOG_DISK_ASSIGNED: 56103010304
                   LOG_DISK_IN_USE: 1140850688
                DATA_DISK_CAPACITY: 179593805824
                DATA_DISK_ASSIGNED: NULL
                  DATA_DISK_IN_USE: 174063616
           DATA_DISK_HEALTH_STATUS: NORMAL
                      MEMORY_LIMIT: 107374182400
               DATA_DISK_ALLOCATED: 179593805824
           DATA_DISK_ABNORMAL_TIME: NULL
             SSL_CERT_EXPIRED_TIME: NULL
  SS_DATA_DISK_OPERATION_SUGGESTED: NULL
       SS_DATA_DISK_SIZE_SUGGESTED: NULL
  *************************** 3. row ***************************
                            SVR_IP: 172.xx.xxx.xxx
                          SVR_PORT: 2882
                              ZONE: zone3
                          SQL_PORT: 2881
                      CPU_CAPACITY: 64
                  CPU_CAPACITY_MAX: 64
                      CPU_ASSIGNED: 8
                  CPU_ASSIGNED_MAX: 8
                      MEM_CAPACITY: 75161927680
                      MEM_ASSIGNED: 18253611008
                 LOG_DISK_CAPACITY: 179583320064
                 LOG_DISK_ASSIGNED: 56103010304
                   LOG_DISK_IN_USE: 1140850688
                DATA_DISK_CAPACITY: 179593805824
                DATA_DISK_ASSIGNED: NULL
                  DATA_DISK_IN_USE: 174063616
           DATA_DISK_HEALTH_STATUS: NORMAL
                      MEMORY_LIMIT: 107374182400
               DATA_DISK_ALLOCATED: 179593805824
           DATA_DISK_ABNORMAL_TIME: NULL
             SSL_CERT_EXPIRED_TIME: NULL
  SS_DATA_DISK_OPERATION_SUGGESTED: NULL
       SS_DATA_DISK_SIZE_SUGGESTED: NULL
  3 rows in set
  ```

* SS 模式下，查看所有 OBServer 节点的信息。

  ```shell
  obclient> SELECT * FROM oceanbase.GV$OB_SERVERS\G
  ```

  查询结果如下：

  ```shell
  *************************** 1. row ***************************
                            SVR_IP: 11.xxx.xx.xx
                          SVR_PORT: 41705
                              ZONE: zone1
                          SQL_PORT: 41704
                      CPU_CAPACITY: 8
                  CPU_CAPACITY_MAX: 8
                      CPU_ASSIGNED: 6
                  CPU_ASSIGNED_MAX: 6
                      MEM_CAPACITY: 7516192768
                      MEM_ASSIGNED: 5368709120
                 LOG_DISK_CAPACITY: 22548578304
                 LOG_DISK_ASSIGNED: 9663676416
                   LOG_DISK_IN_USE: 939524096
                DATA_DISK_CAPACITY: 105226698752
                DATA_DISK_ASSIGNED: 10737418240
                  DATA_DISK_IN_USE: 5401236272
           DATA_DISK_HEALTH_STATUS: NORMAL
                      MEMORY_LIMIT: 8589934592
               DATA_DISK_ALLOCATED: 107374182400
           DATA_DISK_ABNORMAL_TIME: NULL
             SSL_CERT_EXPIRED_TIME: NULL
  SS_DATA_DISK_OPERATION_SUGGESTED: NONE
       SS_DATA_DISK_SIZE_SUGGESTED: 0
  *************************** 2. row ***************************
                            SVR_IP: 11.xxx.xx.xx
                          SVR_PORT: 41707
                              ZONE: zone2
                          SQL_PORT: 41706
                      CPU_CAPACITY: 8
                  CPU_CAPACITY_MAX: 8
                      CPU_ASSIGNED: 6
                  CPU_ASSIGNED_MAX: 6
                      MEM_CAPACITY: 7516192768
                      MEM_ASSIGNED: 5368709120
                 LOG_DISK_CAPACITY: 22548578304
                 LOG_DISK_ASSIGNED: 9663676416
                   LOG_DISK_IN_USE: 939524096
                DATA_DISK_CAPACITY: 105226698752
                DATA_DISK_ASSIGNED: 10737418240
                  DATA_DISK_IN_USE: 5388079920
           DATA_DISK_HEALTH_STATUS: NORMAL
                      MEMORY_LIMIT: 8589934592
               DATA_DISK_ALLOCATED: 107374182400
           DATA_DISK_ABNORMAL_TIME: NULL
             SSL_CERT_EXPIRED_TIME: NULL
  SS_DATA_DISK_OPERATION_SUGGESTED: NONE
       SS_DATA_DISK_SIZE_SUGGESTED: 0
  *************************** 3. row ***************************
                            SVR_IP: 11.xxx.xx.xx
                          SVR_PORT: 41709
                              ZONE: zone3
                          SQL_PORT: 41708
                      CPU_CAPACITY: 8
                  CPU_CAPACITY_MAX: 8
                      CPU_ASSIGNED: 6
                  CPU_ASSIGNED_MAX: 6
                      MEM_CAPACITY: 7516192768
                      MEM_ASSIGNED: 5368709120
                 LOG_DISK_CAPACITY: 22548578304
                 LOG_DISK_ASSIGNED: 9663676416
                   LOG_DISK_IN_USE: 939524096
                DATA_DISK_CAPACITY: 105226698752
                DATA_DISK_ASSIGNED: 10737418240
                  DATA_DISK_IN_USE: 5389022000
           DATA_DISK_HEALTH_STATUS: NORMAL
                      MEMORY_LIMIT: 8589934592
               DATA_DISK_ALLOCATED: 107374182400
           DATA_DISK_ABNORMAL_TIME: NULL
             SSL_CERT_EXPIRED_TIME: NULL
  SS_DATA_DISK_OPERATION_SUGGESTED: NONE
       SS_DATA_DISK_SIZE_SUGGESTED: 0
  3 rows in set
  ```

## 相关视图或文档

* 查看当前 OBServer 节点的信息：[V$OB_SERVERS](33600.v-ob_servers-of-sys-tenant.md)

* 查看节点的详细操作及说明，参见 [查看节点](../../../../600.manage/100.cluster-management/300.common-cluster-operations/200.view-an-observer.md)。