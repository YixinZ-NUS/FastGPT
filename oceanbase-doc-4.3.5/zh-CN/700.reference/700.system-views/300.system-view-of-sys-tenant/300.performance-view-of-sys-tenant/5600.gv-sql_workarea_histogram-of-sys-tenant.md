|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# GV$SQL_WORKAREA_HISTOGRAM

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V2.2.77 版本开始引入。</p>
</main>

## 功能描述

展示之前所有 workarea 执行的统计信息，如在区间 1 M～2 M 之间全 in-memory 处理的次数、one-pass 次数等。

## 字段说明

|        **字段名称**        |   **类型**   | **是否可以为 NULL** |                  **描述**                  |
|------------------------|------------|----------------|------------------------------------------|
| LOW_OPTIMAL_SIZE       | bigint(20) | NO             | workarea 在 optimal 模式下的最低内存量             |
| HIGH_OPTIMAL_SIZE      | bigint(20) | NO             | workarea 在 optimal 模式下的最高内存量             |
| OPTIMAL_EXECUTIONS     | bigint(20) | NO             | workarea 在最低和最高区间的最优模式下执行的次数             |
| ONEPASS_EXECUTIONS     | bigint(20) | NO             | workarea 在最低和最高区间的 one pass 模式下执行的次数     |
| MULTIPASSES_EXECUTIONS | bigint(20) | NO             | workarea 在最低和最高区间的 multi passes 模式下执行的次数 |
| TOTAL_EXECUTIONS       | bigint(20) | NO             | workarea 总共执行的次数                         |
| CON_ID                 | bigint(20) | NO             | 租户 ID                                    |
| SVR_IP                 | varchar(46)   | NO             | 服务器 IP 地址                   |
| SVR_PORT                 | bigint(20)   | NO             | 服务器端口号                   |

## 查询示例

系统租户查看租户 ID 为 `1002` 的租户在所有节点上之前所有 Workarea 执行的统计信息，展示前 10 条记录。

```shell
obclient[oceanbase]> SELECT * FROM oceanbase.GV$SQL_WORKAREA_HISTOGRAM WHERE CON_ID=1002 LIMIT 10;
```

查询结果如下：

```shell
+------------------+-------------------+--------------------+--------------------+------------------------+------------------+--------+----------------+----------+
| LOW_OPTIMAL_SIZE | HIGH_OPTIMAL_SIZE | OPTIMAL_EXECUTIONS | ONEPASS_EXECUTIONS | MULTIPASSES_EXECUTIONS | TOTAL_EXECUTIONS | CON_ID | SVR_IP         | SVR_PORT |
+------------------+-------------------+--------------------+--------------------+------------------------+------------------+--------+----------------+----------+
|                0 |           1048576 |              11993 |                  0 |                      0 |            11993 |   1002 | 172.xx.xxx.xxx |     2882 |
|          1048576 |           2097152 |                  0 |                  0 |                      0 |                0 |   1002 | 172.xx.xxx.xxx |     2882 |
|          2097152 |           3145728 |                 11 |                  0 |                      0 |               11 |   1002 | 172.xx.xxx.xxx |     2882 |
|          3145728 |           4194304 |                  0 |                  0 |                      0 |                0 |   1002 | 172.xx.xxx.xxx |     2882 |
|          4194304 |           5242880 |                  0 |                  0 |                      0 |                0 |   1002 | 172.xx.xxx.xxx |     2882 |
|          5242880 |           6291456 |                  0 |                  0 |                      0 |                0 |   1002 | 172.xx.xxx.xxx |     2882 |
|          6291456 |           7340032 |                  0 |                  0 |                      0 |                0 |   1002 | 172.xx.xxx.xxx |     2882 |
|          7340032 |           8388608 |                  0 |                  0 |                      0 |                0 |   1002 | 172.xx.xxx.xxx |     2882 |
|          8388608 |           9437184 |                 11 |                  0 |                      0 |               11 |   1002 | 172.xx.xxx.xxx |     2882 |
|          9437184 |          10485760 |                  0 |                  0 |                      0 |                0 |   1002 | 172.xx.xxx.xxx |     2882 |
+------------------+-------------------+--------------------+--------------------+------------------------+------------------+--------+----------------+----------+
10 rows in set
```