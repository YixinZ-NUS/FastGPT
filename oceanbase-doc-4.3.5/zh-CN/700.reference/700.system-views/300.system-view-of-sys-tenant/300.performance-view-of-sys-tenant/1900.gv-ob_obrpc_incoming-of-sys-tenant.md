|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# GV$OB_RPC_INCOMING

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.0.0 版本开始引入。</p>
</main>

## 功能描述

展示所有租户在所有 OBServer 节点收到的 RPC 请求的统计信息。

## 字段说明

|    **字段名称**    |    **类型**    | **是否可以为 NULL** |        **描述**         |
|----------------|--------------|----------------|-----------------------|
| TENANT_ID      | bigint(20)   | NO             | 租户 ID                 |
| SVR_IP         | varchar(46)  | NO             | IP 地址                 |
| SVR_PORT       | bigint(20)   | NO             | 端口号                   |
| PCODE          | bigint(20)   | NO             | RPC Packet Code       |
| PCODE_NAME     | varchar(256) | NO             | RPC Packet Code 对应的名称 |
| COUNT          | bigint(20)   | NO             | 已接收到的该类型的 RPC 请求的个数   |
| TOTAL_SIZE     | bigint(20)   | NO             | 总共接收数据量               |
| NET_TIME       | bigint(20)   | NO             | 网络时间                  |
| WAIT_TIME      | bigint(20)   | NO             | 接收时间到请求被放入队列的时间       |
| QUEUE_TIME     | bigint(20)   | NO             | 在队列中等待的时间             |
| PROCESS_TIME   | bigint(20)   | NO             | 实际处理消耗的时间             |
| LAST_TIMESTAMP | timestamp(6) | NO             | 上次更新的时间               |
| DCOUNT         | bigint(20)   | NO             | 每种 Pcode RPC 的请求计数，30 s 为一个统计周期                     |

## 查询示例

系统租户下，查看在所有节点收到的所有 RPC 请求中，有哪些请求在队列中的等待时间大于 1s。

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.GV$OB_RPC_INCOMING WHERE QUEUE_TIME > 1000000;
```

查询结果如下：

```shell
+-----------+----------------+----------+-------+---------------------------------+---------+------------+-----------+-----------+------------+--------------+----------------------------+--------+
| TENANT_ID | SVR_IP         | SVR_PORT | PCODE | PCODE_NAME                      | COUNT   | TOTAL_SIZE | NET_TIME  | WAIT_TIME | QUEUE_TIME | PROCESS_TIME | LAST_TIMESTAMP             | DCOUNT |
+-----------+----------------+----------+-------+---------------------------------+---------+------------+-----------+-----------+------------+--------------+----------------------------+--------+
|         1 | 11.xxx.xxx.xxx |    28825 |   258 | OB_RENEW_LEASE                  |  306874 |   76314597 |  20163204 |    696730 |    9425447 |     33434476 | 2025-03-26 16:22:43.917489 |      0 |
|         1 | 11.xxx.xxx.xxx |    28825 |   338 | OB_SEND_HEARTBEAT               |  306860 |   15343000 |  21254930 |   4276271 |    8569451 |     24276019 | 2025-03-26 16:22:44.236982 |      3 |
|         1 | 11.xxx.xxx.xxx |    28825 |  1038 | OB_FETCH_LOCATION               |  224001 |    4713338 |  15095409 |   2397956 |    5837069 |     11811210 | 2025-03-26 16:22:44.397261 |      2 |
|         1 | 11.xxx.xxx.xxx |    28825 |  1193 | OB_GET_LEADER_LOCATIONS         |  613630 |   18408900 |  42295996 |   8598746 |   16620823 |     64095872 | 2025-03-26 16:22:43.742037 |      5 |
|         1 | 11.xxx.xxx.xxx |    28825 |  5386 | OB_LOG_ELECTION_ACCEPT_REQUEST  | 1227758 |  180480492 |  99522490 |  18787956 |   34740755 |    120760631 | 2025-03-26 16:22:43.975146 |      9 |
|         1 | 11.xxx.xxx.xxx |    28825 |  5387 | OB_LOG_ELECTION_ACCEPT_RESPONSE | 1227758 |  365874240 |  82747408 |  14994296 |   27144128 |     31334235 | 2025-03-26 16:22:43.975250 |      9 |
|      1001 | 11.xxx.xxx.xxx |    28825 |  4614 | OB_RUN_DBMS_SCHED_JOB           |     702 |      55986 |     49278 |      9038 |    1172440 |     94751962 | 2025-03-26 16:08:04.686070 |      0 |
|      1001 | 11.xxx.xxx.xxx |    28825 |  5386 | OB_LOG_ELECTION_ACCEPT_REQUEST  | 1227572 |  180453150 |  87781527 |  20049535 |   34159154 |    117470948 | 2025-03-26 16:22:44.237022 |     10 |
|      1001 | 11.xxx.xxx.xxx |    28825 |  5387 | OB_LOG_ELECTION_ACCEPT_RESPONSE | 1227572 |  365816440 |  76664574 |  16094835 |   26853621 |     30914552 | 2025-03-26 16:22:44.237088 |     10 |
|      1002 | 11.xxx.xxx.xxx |    28825 |  1859 | OB_GET_LS_REPLAYED_SCN          | 1219060 |   29257440 |  72219918 |  15306464 |   34899882 |     85006603 | 2025-03-26 16:22:44.349079 |     10 |
|      1002 | 11.xxx.xxx.xxx |    28825 |  1861 | OB_UPDATE_TENANT_INFO_CACHE     |  609532 |   59734136 |  43227543 |   7945354 |   16210685 |     14021513 | 2025-03-26 16:22:43.928497 |      5 |
|      1002 | 11.xxx.xxx.xxx |    28825 |  5386 | OB_LOG_ELECTION_ACCEPT_REQUEST  | 2455084 |  362125008 | 186218848 |  39163620 |   70178218 |    229418999 | 2025-03-26 16:22:44.377677 |     20 |
|      1002 | 11.xxx.xxx.xxx |    28825 |  5387 | OB_LOG_ELECTION_ACCEPT_RESPONSE | 2455084 |  732842544 | 159451811 |  31382775 |   54337777 |     60775158 | 2025-03-26 16:22:44.377791 |     20 |
|      1003 | 11.xxx.xxx.xxx |    28825 |  4614 | OB_RUN_DBMS_SCHED_JOB           |     702 |      55986 |     60024 |      9886 |    1240180 |     99072125 | 2025-03-26 16:08:34.652085 |      0 |
|      1003 | 11.xxx.xxx.xxx |    28825 |  5386 | OB_LOG_ELECTION_ACCEPT_REQUEST  | 1227512 |  180444330 | 100050078 |  20398761 |   34558877 |    121607852 | 2025-03-26 16:22:44.146332 |     10 |
|      1003 | 11.xxx.xxx.xxx |    28825 |  5387 | OB_LOG_ELECTION_ACCEPT_RESPONSE | 1227512 |  365798560 |  82928897 |  16499629 |   27029811 |     31407496 | 2025-03-26 16:22:44.146418 |     10 |
|      1004 | 11.xxx.xxx.xxx |    28825 |  1859 | OB_GET_LS_REPLAYED_SCN          | 1219009 |   29256216 |  72046522 |  15661554 |   34813448 |     84732101 | 2025-03-26 16:22:44.349082 |     10 |
|      1004 | 11.xxx.xxx.xxx |    28825 |  1861 | OB_UPDATE_TENANT_INFO_CACHE     |  609507 |   59731686 |  43685934 |   8149581 |   16198383 |     14009600 | 2025-03-26 16:22:43.726243 |      5 |
|      1004 | 11.xxx.xxx.xxx |    28825 |  4614 | OB_RUN_DBMS_SCHED_JOB           |   54972 |    4452851 |   3664697 |    743254 |    3563926 |    619374152 | 2025-03-26 16:22:37.014636 |      0 |
|      1004 | 11.xxx.xxx.xxx |    28825 |  5386 | OB_LOG_ELECTION_ACCEPT_REQUEST  | 2454964 |  362107308 | 171766749 |  37379363 |   70939173 |    217164128 | 2025-03-26 16:22:44.277055 |     20 |
|      1004 | 11.xxx.xxx.xxx |    28825 |  5387 | OB_LOG_ELECTION_ACCEPT_RESPONSE | 2454964 |  732806724 | 147824530 |  30756912 |   54575710 |     58949224 | 2025-03-26 16:22:44.277169 |     20 |
|      1005 | 11.xxx.xxx.xxx |    28825 |  4614 | OB_RUN_DBMS_SCHED_JOB           |     673 |      53668 |     44489 |      8723 |    1081054 |     88757221 | 2025-03-26 16:10:03.362899 |      0 |
|      1005 | 11.xxx.xxx.xxx |    28825 |  5386 | OB_LOG_ELECTION_ACCEPT_REQUEST  | 1176936 |  173009658 |  90567797 |  19884419 |   33818637 |    114121129 | 2025-03-26 16:22:44.200226 |     10 |
|      1005 | 11.xxx.xxx.xxx |    28825 |  5387 | OB_LOG_ELECTION_ACCEPT_RESPONSE | 1176936 |  350726912 |  76542916 |  15993416 |   26316239 |     29833048 | 2025-03-26 16:22:44.200300 |     10 |
|      1006 | 11.xxx.xxx.xxx |    28825 |  1859 | OB_GET_LS_REPLAYED_SCN          | 1168802 |   28051248 |  68706422 |  15235736 |   33723751 |     81220904 | 2025-03-26 16:22:44.349658 |     10 |
|      1006 | 11.xxx.xxx.xxx |    28825 |  1861 | OB_UPDATE_TENANT_INFO_CACHE     |  584404 |   57271592 |  41848250 |   7927764 |   15726673 |     13654634 | 2025-03-26 16:22:44.210422 |      5 |
|      1006 | 11.xxx.xxx.xxx |    28825 |  5386 | OB_LOG_ELECTION_ACCEPT_REQUEST  | 2353810 |  347187094 | 159581563 |  37762616 |   68218945 |    217075164 | 2025-03-26 16:22:44.388062 |     19 |
|      1006 | 11.xxx.xxx.xxx |    28825 |  5387 | OB_LOG_ELECTION_ACCEPT_RESPONSE | 2353810 |  702612256 | 139530713 |  30824765 |   52433403 |     57517393 | 2025-03-26 16:22:44.388127 |     19 |
+-----------+----------------+----------+-------+---------------------------------+---------+------------+-----------+-----------+------------+--------------+----------------------------+--------+
28 rows in set
```

## 相关视图或文档

* 查看所有租户在当前节点收到的 RPC 统计信息：[V$OB_RPC_INCOMING](32300.v-ob_obrpc_incoming-of-sys-tenant.md)

* 查看所有租户在所有节点发送的 PRC 统计信息：[GV$OB_RPC_OUTGOING](2000.gv-ob_obrpc_outgoing-of-sys-tenant.md)