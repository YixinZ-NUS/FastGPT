|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# GV$OB_UNITS

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.0.0 版本开始引入。</p>
</main>

## 功能描述

展示租户所在的 OBServer 节点的 Unit 信息，系统租户看到本集群所有 OBServer 节点的 Unit 信息。

## 字段说明

|       字段名称       |      类型      | 是否可以为 NULL |                                                                            描述                                                                             |
|------------------|--------------|------------|-------------------------------------------------------------------------|
| SVR_IP           | varchar(46)  | NO         | 服务器 IP 地址                                                              |
| SVR_PORT         | bigint(20)   | NO         | 服务器端口号                                                                 |
| UNIT_ID          | bigint(20)   | NO         | Unit ID                                                                |
| TENANT_ID        | bigint(20)   | NO         | Unit 所属的租户 ID                                                          |
| ZONE             | varchar(128) | NO         | Zone 名称                                                                |
| ZONE_TYPE | varchar(128) | NO | Unit 所在 Zone 的 Zone 类型，取值如下：<ul><li>`NULL`：表示该列值无效，OBServer 节点重启的场景下会短暂出现一段时间的无效值。</li> <li>`ReadWrite`：读写 Zone</li> <li>`Encryption`：加密 Zone</li></ul> <main id="notice" type='explain'><h4>说明</h4><p>该字段从 V4.2.0 版本开始引入。</p></main> |
| REGION | varchar(128) | NO | Unit 所在 Zone 所属的 Region 名。未设置时，默认为 `default_region`。取值为 `NULL` 时，表示该列值无效，OBServer 节点重启的场景下会短暂出现一段时间的无效值。<main id="notice" type='explain'><h4>说明</h4><p>该字段从 V4.2.0 版本开始引入。</p></main> |
| MAX_CPU          | double       | NO         | CPU 规格上限                                                               |
| MIN_CPU          | double       | NO         | CPU 规格下限                                                               |
| MEMORY_SIZE      | bigint(20)   | NO         | 内存大小，单位为字节                                                           |
| MAX_IOPS         | bigint(20)   | NO         | 磁盘 IOPS 规格上限                                                           |
| MIN_IOPS         | bigint(20)   | NO         | 磁盘 IOPS 规格下限                                                           |
| IOPS_WEIGHT      | bigint(20)   | NO         | IOPS 权重 |
| MAX_NET_BANDWIDTH| bigint(20)   | YES        | Unit 的最大网络带宽，单位为字节  <main id="notice" type='explain'><h4>说明</h4><p>该字段从 V4.3.4 版本开始引入。</p></main> |
| NET_BANDWIDTH_WEIGHT |bigint(20)| YES        | Unit 的网络带宽的权重值 <main id="notice" type='explain'><h4>说明</h4><p>该字段从 V4.3.4 版本开始引入。</p></main>  |
| LOG_DISK_SIZE    | bigint(20)   | NO         | 日志盘大小，单位为字节   |
| LOG_DISK_IN_USE  | bigint(20)   | NO         | 日志盘已使用大小，单位为字节                                                                |
| DATA_DISK_SIZE   | bigint(20)   | YES        | <ul><li>表示 Unit 能够使用的本地缓存大小，单位为字节，仅适用于共享存储（Shared-Storage，SS）模式。</li> <li>无共享（Shared-Nothing，SN） 模式下，该字段值为 `NULL`，表示未定义，允许竞争使用其他租户的磁盘空间。</li></ul> <main id="notice" type='explain'><h4>说明</h4><p>该字段从 V4.3.4 版本开始引入。</p></main>     |
| DATA_DISK_IN_USE | bigint(20)   | NO         | <ul><li>SS 模式下，表示 Unit 已使用的本地缓存大小，单位为字节。</li> <li>SN 模式下，表示 Unit 已使用的数据盘大小，单位为字节。  </li></ul>                    |
| STATUS           | varchar(64)  | NO         | Unit 的状态 <li> `NORMAL`：正常状态   <li> `MIGRATING IN`：正在迁入   <li> `MIGRATING OUT`：正在迁出   <li> `MARK DELETING`：标记删除<li>`WAIT GC`：等待 GC 数据 <li>`DELETING`：GC 完成，正在删除中 <li> `ERROR`：错误状态  |
| CREATE_TIME      | timestamp(6) | NO         | Unit 在 OBServer 节点上的创建时间                                                 |

## 查询示例

SN 模式下，系统租户查看所有用户租户所在的所有 OBServer 节点的 Unit 信息。

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.GV$OB_UNITS\G
```

查询结果如下：

```shell
*************************** 1. row ***************************
              SVR_IP: 172.xx.xxx.xxx
            SVR_PORT: 2882
             UNIT_ID: 1
           TENANT_ID: 1
                ZONE: zone1
           ZONE_TYPE: ReadWrite
              REGION: default_region
             MAX_CPU: 4
             MIN_CPU: 4
         MEMORY_SIZE: 5368709120
            MAX_IOPS: 9223372036854775807
            MIN_IOPS: 9223372036854775807
         IOPS_WEIGHT: 4
   MAX_NET_BANDWIDTH: 9223372036854775807
NET_BANDWIDTH_WEIGHT: 4
       LOG_DISK_SIZE: 9663676416
     LOG_DISK_IN_USE: 2964278798
      DATA_DISK_SIZE: NULL
    DATA_DISK_IN_USE: 97017856
              STATUS: NORMAL
         CREATE_TIME: 2024-10-30 10:57:36.445269
*************************** 2. row ***************************
              SVR_IP: 172.xx.xxx.xxx
            SVR_PORT: 2882
             UNIT_ID: 1001
           TENANT_ID: 1001
                ZONE: zone1
           ZONE_TYPE: ReadWrite
              REGION: default_region
             MAX_CPU: NULL
             MIN_CPU: NULL
         MEMORY_SIZE: 1073741824
            MAX_IOPS: NULL
            MIN_IOPS: NULL
         IOPS_WEIGHT: NULL
   MAX_NET_BANDWIDTH: NULL
NET_BANDWIDTH_WEIGHT: NULL
       LOG_DISK_SIZE: 1932735283
     LOG_DISK_IN_USE: 1480671367
      DATA_DISK_SIZE: NULL
    DATA_DISK_IN_USE: 72187904
              STATUS: NORMAL
         CREATE_TIME: 2024-10-30 10:59:25.305248
*************************** 3. row ***************************
              SVR_IP: 172.xx.xxx.xxx
            SVR_PORT: 2882
             UNIT_ID: 1001
           TENANT_ID: 1002
                ZONE: zone1
           ZONE_TYPE: ReadWrite
              REGION: default_region
             MAX_CPU: 2
             MIN_CPU: 2
         MEMORY_SIZE: 5368709120
            MAX_IOPS: 9223372036854775807
            MIN_IOPS: 9223372036854775807
         IOPS_WEIGHT: 2
   MAX_NET_BANDWIDTH: 9223372036854775807
NET_BANDWIDTH_WEIGHT: 2
       LOG_DISK_SIZE: 17394617549
     LOG_DISK_IN_USE: 1731127928
      DATA_DISK_SIZE: NULL
    DATA_DISK_IN_USE: 26578944
              STATUS: NORMAL
         CREATE_TIME: 2024-10-30 10:59:25.305248
*************************** 4. row ***************************
              SVR_IP: 172.xx.xxx.xxx
            SVR_PORT: 2882
             UNIT_ID: 1002
           TENANT_ID: 1003
                ZONE: zone1
           ZONE_TYPE: ReadWrite
              REGION: default_region
             MAX_CPU: NULL
             MIN_CPU: NULL
         MEMORY_SIZE: 1073741824
            MAX_IOPS: NULL
            MIN_IOPS: NULL
         IOPS_WEIGHT: NULL
   MAX_NET_BANDWIDTH: NULL
NET_BANDWIDTH_WEIGHT: NULL
       LOG_DISK_SIZE: 1932735283
     LOG_DISK_IN_USE: 1482198905
      DATA_DISK_SIZE: NULL
    DATA_DISK_IN_USE: 70107136
              STATUS: NORMAL
         CREATE_TIME: 2024-10-30 11:00:07.614632
*************************** 5. row ***************************
              SVR_IP: 172.xx.xxx.xxx
            SVR_PORT: 2882
             UNIT_ID: 1002
           TENANT_ID: 1004
                ZONE: zone1
           ZONE_TYPE: ReadWrite
              REGION: default_region
             MAX_CPU: 2
             MIN_CPU: 2
         MEMORY_SIZE: 5368709120
            MAX_IOPS: 9223372036854775807
            MIN_IOPS: 9223372036854775807
         IOPS_WEIGHT: 2
   MAX_NET_BANDWIDTH: 9223372036854775807
NET_BANDWIDTH_WEIGHT: 2
       LOG_DISK_SIZE: 17394617549
     LOG_DISK_IN_USE: 1749092883
      DATA_DISK_SIZE: NULL
    DATA_DISK_IN_USE: 29081600
              STATUS: NORMAL
         CREATE_TIME: 2024-10-30 11:00:07.614632
5 rows in set
```

## 相关视图或文档

* [V$OB_UNITS](35300.v-ob_units-of-sys-tenant.md)

* [查看租户和资源信息](../../../../600.manage/200.tenant-management/600.common-tenant-operations/400.view-tenant-information.md)