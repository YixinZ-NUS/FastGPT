|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# V$OB_PS_STAT

<main id="notice" type='explain'>
  <h4>说明</h4>
  <p>该视图从 V4.0.0 版本开始引入。</p>
</main>

## 功能描述

监控所有租户在当前 OBServer 节点上的 PS Cache 的整体状态，包括命中率、内存占用、缓存的 item 数目。

## 字段说明

|     字段名称     |     类型      | 是否可以为 NULL |         描述          |
|--------------|-------------|------------|---------------------|
| TENANT_ID    | bigint(20)  | NO         | 租户 ID               |
| SVR_IP       | varchar(46) | NO         | 服务器 IP 地址           |
| SVR_PORT     | bigint(20)  | NO         | 服务器端口号              |
| STMT_COUNT   | bigint(20)  | NO         | PS Cache 中目前缓存了多少语句 |
| HIT_COUNT    | bigint(20)  | NO         | PS Cache 总的命中次数     |
| ACCESS_COUNT | bigint(20)  | NO         | 访问 PS Cache 的总次数    |
| MEM_HOLD     | bigint(20)  | NO         | PS Cache 占用了多少内存    |

## 查询示例

系统租户下，查看所有租户在当前节点上的 PS Cache 的整体状态。

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.GV$OB_PS_STAT;
```

查询结果如下：

```shell
+-----------+----------------+----------+------------+-----------+--------------+----------+
| TENANT_ID | SVR_IP         | SVR_PORT | STMT_COUNT | HIT_COUNT | ACCESS_COUNT | MEM_HOLD |
+-----------+----------------+----------+------------+-----------+--------------+----------+
|         1 | 11.xxx.xxx.xxx |    28825 |          1 |         0 |            1 |    16384 |
|         1 | 11.xxx.xxx.xxx |    28825 |          1 |         0 |            1 |    16384 |
|      1002 | 11.xxx.xxx.xxx |    28825 |          1 |         0 |            1 |    16384 |
|      1002 | 11.xxx.xxx.xxx |    28825 |          1 |         0 |            1 |    16384 |
|      1002 | 11.xxx.xxx.xxx |    28825 |          1 |         0 |            1 |    16384 |
|      1002 | 11.xxx.xxx.xxx |    28825 |          1 |         0 |            1 |    16384 |
|      1002 | 11.xxx.xxx.xxx |    28825 |          1 |         0 |            1 |    16384 |
+-----------+----------------+----------+------------+-----------+--------------+----------+
7 rows in set
```