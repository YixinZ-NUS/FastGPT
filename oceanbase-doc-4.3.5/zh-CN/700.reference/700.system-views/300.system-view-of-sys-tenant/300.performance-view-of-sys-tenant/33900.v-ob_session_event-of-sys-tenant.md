|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# V$SESSION_EVENT

<main id="notice" type='explain'>
  <h4>说明</h4>
  <p>该视图从 V1.4 版本开始引入。</p>
</main>

## 功能描述

视图 `V$SESSION_EVENT` 用于展示每一个 Session 发生的等待事件。

## 字段说明

| **字段名称** | **类型** | **是否可以为 NULL** | **描述** |
| ----- | ----- | ----- | ----- |
| CON_ID | bigint(20) | NO | 租户 ID |
| SVR_IP | varchar(46) | NO | 服务器 IP 地址 |
| SVR_PORT | bigint(20) | NO | 服务器端口号 |
| SID | bigint(20) | NO | 对于 V4.3.x 版本：<ul><li> V4.3.5 BP2 之前版本：<br>在所有连接方式（直连模式/ODP 模式）下，该字段均表示 Server Session ID。</li><li> V4.3.5 BP2 及之后版本：<ul><li>在直连模式下：<br>该字段表示 Server Session ID。</li> <li>在 ODP 模式下：</li><ul><li>当 ODP 中的配置项 <code>client_session_id_version = 2</code> 时，该字段表示 Client Session ID。 </li> <li>当 <code>client_session_id_version = 1</code> 时，该字段表示 Server Session ID。</li></ul></ul></li></ul>  |
| EVENT | varchar(64) | NO | 等待事件的描述 |
| TOTAL_WAITS | bigint(20) | NO | 等待事件的总等待次数 |
| TOTAL_TIMEOUTS | bigint(20) | NO | 等待事件的总等待超时次数 |
| TIME_WAITED | double | NO | 等待事件的总等待时间，单位为百分之一秒 |
| AVERAGE_WAIT | double | NO | 等待事件的平均等待时间，单位为百分之一秒 |
| MAX_WAIT | double | NO | 等待事件的最长等待时间，单位为百分之一秒 |
| TIME_WAITED_MICRO | bigint(20) | NO | 等待事件的总等待时间（微秒）  |
| CPU | null | NO | 无效列 |
| EVENT_ID | bigint(20) | NO | 等待事件 ID |
| WAIT_CLASS_ID | bigint(20) | NO | 等待事件所属类型的 ID |
| WAIT_CLASS# | bigint(20) | NO | 等待事件所属类型的下标 |
| WAIT_CLASS | varchar(64) | NO | 等待事件所属类型的名称 |

## 查询示例

查询每一个 Session 发生的等待事件。

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.V$SESSION_EVENT LIMIT 1\G
```

查询结果如下：

```shell
*************************** 1. row ***************************
           CON_ID: 1
           SVR_IP: xx.xx.xx.xx
         SVR_PORT: 2882
              SID: 3221608040
            EVENT: wait in request queue
      TOTAL_WAITS: 3
   TOTAL_TIMEOUTS: 0
      TIME_WAITED: 0.0045
     AVERAGE_WAIT: 0.0015
         MAX_WAIT: 0.0017
TIME_WAITED_MICRO: 45
              CPU: NULL
         EVENT_ID: 13004
    WAIT_CLASS_ID: 102
      WAIT_CLASS#: 2
       WAIT_CLASS: CONFIGURATION
```