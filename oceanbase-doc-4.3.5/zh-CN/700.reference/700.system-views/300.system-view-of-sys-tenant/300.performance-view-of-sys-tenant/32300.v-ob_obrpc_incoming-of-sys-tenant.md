|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# V$OB_RPC_INCOMING

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.0.0 版本开始引入。</p>
</main>

## 功能描述

展示所有租户在当前 OBServer 节点收到的 RPC 请求的统计信息。

## 字段说明

|    **字段名称**    |    **类型**    | **是否可以为 NULL** |        **描述**         |
|----------------|--------------|----------------|-----------------------|
| TENANT_ID      | bigint(20)   | NO             | 租户 ID                 |
| SVR_IP         | varchar(46)  | NO             | IP 地址                 |
| SVR_PORT       | bigint(20)   | NO             | 端口号                   |
| PCODE          | bigint(20)   | NO             | RPC Packet Code       |
| PCODE_NAME     | varchar(256) | NO             | RPC Packet Code 对应的名称 |
| COUNT          | bigint(20)   | NO             | 已接收到的该类型的 RPC 请求的个数   |
| TOTAL_SIZE     | bigint(20)   | NO             | 总共接收数据量               |
| NET_TIME       | bigint(20)   | NO             | 网络时间                  |
| WAIT_TIME      | bigint(20)   | NO             | 接收时间到请求被放入队列的时间       |
| QUEUE_TIME     | bigint(20)   | NO             | 在队列中等待的时间             |
| PROCESS_TIME   | bigint(20)   | NO             | 实际处理消耗的时间             |
| LAST_TIMESTAMP | timestamp(6) | NO             | 上次更新的时间               |
| DCOUNT         | bigint(20)   | NO             | 每种 Pcode RPC 的请求计数，30 s 为一个统计周期  |

## 查询示例

系统租户下，查看在当前节点收到的所有 RPC 请求中，有哪些请求在队列中的等待时间大于 1s。

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.V$OB_RPC_INCOMING WHERE QUEUE_TIME > 1000000;
```

查询结果如下：

```shell
+-----------+----------------+----------+-------+---------------------------------+---------+------------+-----------+-----------+------------+--------------+----------------------------+--------+
| TENANT_ID | SVR_IP         | SVR_PORT | PCODE | PCODE_NAME                      | COUNT   | TOTAL_SIZE | NET_TIME  | WAIT_TIME | QUEUE_TIME | PROCESS_TIME | LAST_TIMESTAMP             | DCOUNT |
+-----------+----------------+----------+-------+---------------------------------+---------+------------+-----------+-----------+------------+--------------+----------------------------+--------+
|         1 | 11.xxx.xxx.xxx |    28825 |   258 | OB_RENEW_LEASE                  |  306831 |   76303890 |  20160603 |    696627 |    9424143 |     33429715 | 2025-03-26 16:21:17.894867 |      0 |
|         1 | 11.xxx.xxx.xxx |    28825 |   338 | OB_SEND_HEARTBEAT               |  306816 |   15340800 |  21252279 |   4275695 |    8568262 |     24272822 | 2025-03-26 16:21:16.220454 |      4 |
|         1 | 11.xxx.xxx.xxx |    28825 |  1038 | OB_FETCH_LOCATION               |  223970 |    4712687 |  15093533 |   2397657 |    5836348 |     11809672 | 2025-03-26 16:21:18.107840 |      4 |
|         1 | 11.xxx.xxx.xxx |    28825 |  1193 | OB_GET_LEADER_LOCATIONS         |  613544 |   18406320 |  42290747 |   8597728 |   16618690 |     64087539 | 2025-03-26 16:21:17.710244 |      9 |
|         1 | 11.xxx.xxx.xxx |    28825 |  5386 | OB_LOG_ELECTION_ACCEPT_REQUEST  | 1227586 |  180455208 |  99509139 |  18785392 |   34736168 |    120744241 | 2025-03-26 16:21:17.972146 |     17 |
|         1 | 11.xxx.xxx.xxx |    28825 |  5387 | OB_LOG_ELECTION_ACCEPT_RESPONSE | 1227586 |  365822984 |  82736204 |  14992347 |   27140601 |     31330249 | 2025-03-26 16:21:17.972176 |     17 |
|      1001 | 11.xxx.xxx.xxx |    28825 |  4614 | OB_RUN_DBMS_SCHED_JOB           |     702 |      55986 |     49278 |      9038 |    1172440 |     94751962 | 2025-03-26 16:08:04.686070 |      0 |
|      1001 | 11.xxx.xxx.xxx |    28825 |  5386 | OB_LOG_ELECTION_ACCEPT_REQUEST  | 1227399 |  180427719 |  87770500 |  20047105 |   34154755 |    117456112 | 2025-03-26 16:21:17.730479 |     17 |
|      1001 | 11.xxx.xxx.xxx |    28825 |  5387 | OB_LOG_ELECTION_ACCEPT_RESPONSE | 1227399 |  365764886 |  76654732 |  16092839 |   26850173 |     30910620 | 2025-03-26 16:21:17.730561 |     17 |
|      1002 | 11.xxx.xxx.xxx |    28825 |  1859 | OB_GET_LS_REPLAYED_SCN          | 1218888 |   29253312 |  72210515 |  15304479 |   34895276 |     84995561 | 2025-03-26 16:21:17.775105 |     18 |
|      1002 | 11.xxx.xxx.xxx |    28825 |  1861 | OB_UPDATE_TENANT_INFO_CACHE     |  609447 |   59725806 |  43222072 |   7944355 |   16208574 |     14019678 | 2025-03-26 16:21:17.920584 |      9 |
|      1002 | 11.xxx.xxx.xxx |    28825 |  5386 | OB_LOG_ELECTION_ACCEPT_REQUEST  | 2454738 |  362073973 | 186193785 |  39158461 |   70169008 |    229388560 | 2025-03-26 16:21:17.871049 |     34 |
|      1002 | 11.xxx.xxx.xxx |    28825 |  5387 | OB_LOG_ELECTION_ACCEPT_RESPONSE | 2454738 |  732739263 | 159430349 |  31378602 |   54330759 |     60767457 | 2025-03-26 16:21:17.871186 |     34 |
|      1003 | 11.xxx.xxx.xxx |    28825 |  4614 | OB_RUN_DBMS_SCHED_JOB           |     702 |      55986 |     60024 |      9886 |    1240180 |     99072125 | 2025-03-26 16:08:34.652085 |      0 |
|      1003 | 11.xxx.xxx.xxx |    28825 |  5386 | OB_LOG_ELECTION_ACCEPT_REQUEST  | 1227339 |  180418899 | 100036211 |  20396107 |   34554399 |    121591464 | 2025-03-26 16:21:17.650090 |     17 |
|      1003 | 11.xxx.xxx.xxx |    28825 |  5387 | OB_LOG_ELECTION_ACCEPT_RESPONSE | 1227339 |  365747006 |  82917476 |  16497429 |   27026369 |     31403647 | 2025-03-26 16:21:17.650172 |     17 |
|      1004 | 11.xxx.xxx.xxx |    28825 |  1859 | OB_GET_LS_REPLAYED_SCN          | 1218837 |   29252088 |  72037220 |  15659446 |   34808882 |     84720882 | 2025-03-26 16:21:17.775195 |     18 |
|      1004 | 11.xxx.xxx.xxx |    28825 |  1861 | OB_UPDATE_TENANT_INFO_CACHE     |  609421 |   59723258 |  43680094 |   8148469 |   16196226 |     14007657 | 2025-03-26 16:21:17.720856 |      8 |
|      1004 | 11.xxx.xxx.xxx |    28825 |  4614 | OB_RUN_DBMS_SCHED_JOB           |   54962 |    4452041 |   3663992 |    743115 |    3563193 |    619271964 | 2025-03-26 16:21:17.013583 |      1 |
|      1004 | 11.xxx.xxx.xxx |    28825 |  5386 | OB_LOG_ELECTION_ACCEPT_REQUEST  | 2454618 |  362056273 | 171744365 |  37374627 |   70929909 |    217136098 | 2025-03-26 16:21:17.774323 |     34 |
|      1004 | 11.xxx.xxx.xxx |    28825 |  5387 | OB_LOG_ELECTION_ACCEPT_RESPONSE | 2454618 |  732703443 | 147804811 |  30752819 |   54568431 |     58941676 | 2025-03-26 16:21:17.774387 |     34 |
|      1005 | 11.xxx.xxx.xxx |    28825 |  4614 | OB_RUN_DBMS_SCHED_JOB           |     673 |      53668 |     44489 |      8723 |    1081054 |     88757221 | 2025-03-26 16:10:03.362899 |      0 |
|      1005 | 11.xxx.xxx.xxx |    28825 |  5386 | OB_LOG_ELECTION_ACCEPT_REQUEST  | 1176763 |  172984227 |  90555235 |  19881684 |   33814027 |    114105222 | 2025-03-26 16:21:17.693068 |     17 |
|      1005 | 11.xxx.xxx.xxx |    28825 |  5387 | OB_LOG_ELECTION_ACCEPT_RESPONSE | 1176763 |  350675358 |  76532346 |  15991260 |   26312719 |     29829027 | 2025-03-26 16:21:17.693162 |     17 |
|      1006 | 11.xxx.xxx.xxx |    28825 |  1859 | OB_GET_LS_REPLAYED_SCN          | 1168630 |   28047120 |  68697482 |  15233621 |   33719065 |     81209831 | 2025-03-26 16:21:17.775109 |     18 |
|      1006 | 11.xxx.xxx.xxx |    28825 |  1861 | OB_UPDATE_TENANT_INFO_CACHE     |  584318 |   57263164 |  41842668 |   7926729 |   15724543 |     13652752 | 2025-03-26 16:21:17.205143 |      8 |
|      1006 | 11.xxx.xxx.xxx |    28825 |  5386 | OB_LOG_ELECTION_ACCEPT_REQUEST  | 2353465 |  347136206 | 159558942 |  37757337 |   68209576 |    217045220 | 2025-03-26 16:21:18.027842 |     34 |
|      1006 | 11.xxx.xxx.xxx |    28825 |  5387 | OB_LOG_ELECTION_ACCEPT_RESPONSE | 2353465 |  702509273 | 139511423 |  30820503 |   52426228 |     57509615 | 2025-03-26 16:21:18.027935 |     34 |
+-----------+----------------+----------+-------+---------------------------------+---------+------------+-----------+-----------+------------+--------------+----------------------------+--------+
28 rows in set
```

## 相关视图或文档

* 查看所有租户在所有节点收到的 RPC 的统计信息：[GV$OB_RPC_INCOMING](1900.gv-ob_obrpc_incoming-of-sys-tenant.md)

* 查看所有租户在当前节点发送的 PRC 统计信息：[V$OB_RPC_OUTGOING](32400.v-ob_obrpc_outgoing-of-sys-tenant.md)