|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# V$OB_PX_TARGET_MONITOR

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.0.0 版本开始引入。</p>
</main>

## 功能描述

展示各租户在当前 OBServer 节点上的 PX 线程使用情况。

## 字段说明

|             字段名称             |         类型          | 是否可以为 NULL |    描述     |
|------------------------------|---------------------|------------|-----------|
| SVR_IP                       | varchar(46)         | NO         | 本端服务器 IP 地址 |
| SVR_PORT                     | bigint(20)          | NO         | 本端服务器端口号    |
| TENANT_ID                    | bigint(20)          | NO         | 租户 ID     |
| IS_LEADER                    | varchar(1)          | NO         | 是否是 Dummy 表的 Leader          |
| VERSION                      | bigint(20) unsigned | NO         | 统计信息重新发起搜集的次数          |
| PEER_IP                      | varchar(46)         | NO         | 对端服务器 IP 地址          |
| PEER_PORT                    | bigint(20)          | NO         | 对端服务器端口号          |
| PEER_TARGET                  | bigint(20)          | NO         | 对端服务器 PX 线程总数          |
| PEER_TARGET_USED             | bigint(20)          | NO         | 对端服务器 PX 线程被使用数          |
| LOCAL_TARGET_USED            | bigint(20)          | NO         | 本端服务器使用的对端 PX 线程数          |
| LOCAL_PARALLEL_SESSION_COUNT | bigint(20)          | NO         | 本端服务器上正在并行执行的 SESSION 数          |

## 查询示例

系统租户下，查询所有租户当前 OBServer 节点上的 PX 线程使用情况。

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.V$OB_PX_TARGET_MONITOR;
```

查询结果如下：

```shell
+----------------+----------+-----------+-----------+-----------------+----------------+-----------+-------------+------------------+-------------------+------------------------------+
| SVR_IP         | SVR_PORT | TENANT_ID | IS_LEADER | VERSION         | PEER_IP        | PEER_PORT | PEER_TARGET | PEER_TARGET_USED | LOCAL_TARGET_USED | LOCAL_PARALLEL_SESSION_COUNT |
+----------------+----------+-----------+-----------+-----------------+----------------+-----------+-------------+------------------+-------------------+------------------------------+
| 11.xxx.xxx.xxx |    28825 |         1 | Y         |  53513628009693 | 11.xxx.xxx.xxx |     28825 |          10 |                0 |                 0 |                            0 |
| 11.xxx.xxx.xxx |    28825 |      1001 | Y         | 334988696285371 | 11.xxx.xxx.xxx |     28825 |          10 |                0 |                 0 |                            0 |
| 11.xxx.xxx.xxx |    28825 |      1002 | Y         | 334988704308877 | 11.xxx.xxx.xxx |     28825 |          10 |                0 |                 0 |                            0 |
| 11.xxx.xxx.xxx |    28825 |      1003 | Y         | 334988725829150 | 11.xxx.xxx.xxx |     28825 |          10 |                0 |                 0 |                            0 |
| 11.xxx.xxx.xxx |    28825 |      1004 | Y         | 334988734352026 | 11.xxx.xxx.xxx |     28825 |          10 |                0 |                 0 |                            0 |
| 11.xxx.xxx.xxx |    28825 |      1005 | Y         | 335014014259655 | 11.xxx.xxx.xxx |     28825 |          10 |                0 |                 0 |                            0 |
| 11.xxx.xxx.xxx |    28825 |      1006 | Y         | 335014022834572 | 11.xxx.xxx.xxx |     28825 |          10 |                0 |                 0 |                            0 |
+----------------+----------+-----------+-----------+-----------------+----------------+-----------+-------------+------------------+-------------------+------------------------------+
7 rows in set
```