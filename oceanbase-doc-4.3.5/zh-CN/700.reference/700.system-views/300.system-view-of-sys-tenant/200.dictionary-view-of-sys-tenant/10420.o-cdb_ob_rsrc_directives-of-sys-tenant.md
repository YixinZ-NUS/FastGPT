|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# oceanbase.CDB_OB_RSRC_DIRECTIVES

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.3.4 版本开始引入。</p>
</main>

## 功能描述

展示所有租户在 Resource Manager 中的各类资源配置参数信息。

## 字段说明

|           字段名称            |      类型       | 是否可以为 NULL |         描述         |
|------------------------------|-----------------|----------------|-----------------------|
| TENANT_ID                    | bigint(20)      | NO             | 资源计划所属的租户 ID     |
| PLAN                         | varchar(128)    | NO             | 资源计划内容所属的资源计划名    |
| GROUP_OR_SUBPLAN             | varchar(128)    | NO             | 资源计划内容所控制的资源组名     |
| COMMENTS                     | varchar(2000)   | YES            | 资源计划内容对应的注释    |
| MGMT_P1                      | bigint(20)      | NO             | 系统满负载情况下，相对可用的最大 CPU 占比，默认值为 `100`     |
| UTILIZATION_LIMIT            | bigint(20)      | NO             | 资源组所使用的 CPU 资源占租户 CPU 总资源的百分比上限，默认值为 `100`，表示最大可使用租户全部 CPU 资源   |
| MIN_IOPS                     | bigint(20)      | NO             | 出现 IO 争用时，资源组预留的 IOPS 资源，所有资源组指定的 `MIN_IOPS` 的总和不超过 100，默认值为 `0`     |
| MAX_IOPS                     | bigint(20)      | NO             | 资源组最大可使用的 IOPS 资源，所有资源组指定的 `MAX_IOPS` 的总和可以超过 100，默认值为 `100`     |
| WEIGHT_IOPS                  | bigint(20)      | NO             | 在发生 IO 资源争用的情况下 IOPS 的权重值，所有资源组指定的 `WEIGHT_IOPS` 的总和可以超过 100，在满足 `MIN_IOPS`、`MAX_IOPS` 设置的前提下，IO 资源会按照权重归一化值去分配，默认值为 `0`     |
| MAX_NET_BANDWIDTH            | bigint(20)      | NO             | 资源组使用的网络带宽的上限，所有资源组指定的 `MAX_NET_BANDWIDTH` 的总和可以超过 100，默认值为 `100`     |
| NET_BANDWIDTH_WEIGHT         | bigint(20)      | NO             | 在发生网络资源争用的情况下带宽的权重，所有资源组指定的 `NET_BANDWIDTH_WEIGHT` 的总和可以超过 100，在满足 `MAX_NET_BANDWIDTH` 设置的前提下，网络带宽资源会按照权重归一化值去分配，默认值为 `0`      |

## 查询示例

SN（Shared-Nothing） 模式下，sys 租户查看所有租户在 Resource Manager 中各类资源配置参数的信息。

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.CDB_OB_RSRC_DIRECTIVES;
```

查询结果如下：

```shell
+-----------+---------+-------------------+-----------+---------+-------------------+----------+----------+-------------+-------------------+----------------------+
| TENANT_ID | PLAN    | GROUP_OR_SUBPLAN  | COMMENTS  | MGMT_P1 | UTILIZATION_LIMIT | MIN_IOPS | MAX_IOPS | WEIGHT_IOPS | MAX_NET_BANDWIDTH | NET_BANDWIDTH_WEIGHT |
+-----------+---------+-------------------+-----------+---------+-------------------+----------+----------+-------------+-------------------+----------------------+
|      1002 | daytime | batch_group       |           |     100 |                40 |       40 |       80 |          70 |               100 |                    0 |
|      1002 | daytime | interactive_group | new       |      40 |                60 |       40 |       80 |          70 |                30 |                   30 |
|      1004 | PLAN_A  | BIG_GROUP         | new       |      40 |                60 |       20 |      100 |          10 |                60 |                   60 |
|      1004 | PLAN_A  | SMALL_GROUP       | AP 优先   |     100 |               100 |       10 |       90 |          30 |               100 |                    0 |
+-----------+---------+-------------------+-----------+---------+-------------------+----------+----------+-------------+-------------------+----------------------+
4 rows in set
```

## 相关视图或文档

[DBA_OB_RSRC_DIRECTIVES](../../400.system-view-of-mysql-mode/200.dictionary-view-of-mysql-mode/11020.o-dba_ob_rsrc_directives-of-mysql-mode.md)