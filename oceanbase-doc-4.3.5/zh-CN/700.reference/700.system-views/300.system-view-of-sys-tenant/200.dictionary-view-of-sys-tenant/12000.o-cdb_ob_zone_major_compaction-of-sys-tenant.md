|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# oceanbase.CDB_OB_ZONE_MAJOR_COMPACTION

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.0.0 版本开始引入。</p>
</main>

## 功能描述

系统租户下展示所有租户各个 Zone 的合并信息。

## 字段说明

|       字段名称        |      类型      | 是否可以为 NULL |         描述         |
|-------------------|--------------|------------|----------------------------------------------|
| TENANT_ID              | bigint(20) | NO         | 租户 ID            |
| ZONE              | varchar(128) | NO         | Zone 名称            |
| BROADCAST_SCN | bigint(20) unsigned   | NO         | 广播的合并版本号           |
| LAST_SCN      | bigint(20) unsigned   | NO         | 上一次合并的版本号          |
| LAST_FINISH_TIME  | timestamp(6)   | NO         | 上一次合并结束时间          |
| START_TIME        | timestamp(6)   | NO         | 合并开始时间             |
| STATUS            | varchar(10)  | NO         | <ul><li> `IDLE`：没有在合并中  </li><li>`COMPACTING`：正在合并中 </li></ul>    |

## 查询示例

系统租户查看所有租户各个 Zone 的合并信息。

```shell
obclient> SELECT * FROM oceanbase.CDB_OB_ZONE_MAJOR_COMPACTION;
```

查询结果如下：

```shell
+-----------+-------+---------------------+---------------------+----------------------------+----------------------------+--------+
| TENANT_ID | ZONE  | BROADCAST_SCN       | LAST_SCN            | LAST_FINISH_TIME           | START_TIME                 | STATUS |
+-----------+-------+---------------------+---------------------+----------------------------+----------------------------+--------+
|         1 | zone1 | 1748368801021617000 | 1748368801021617000 | 2025-05-28 02:04:15.351286 | 2025-05-28 02:00:01.051592 | IDLE   |
|      1001 | zone1 | 1748368802924607000 | 1748368802924607000 | 2025-05-28 02:02:16.412661 | 2025-05-28 02:00:02.965810 | IDLE   |
|      1002 | zone1 | 1748368802035321000 | 1748368802035321000 | 2025-05-28 02:03:25.019173 | 2025-05-28 02:00:02.090687 | IDLE   |
|      1003 | zone1 | 1748368802977311000 | 1748368802977311000 | 2025-05-28 02:02:46.565036 | 2025-05-28 02:00:03.009192 | IDLE   |
|      1004 | zone1 | 1748368801786323000 | 1748368801786323000 | 2025-05-28 02:03:54.629630 | 2025-05-28 02:00:01.820863 | IDLE   |
+-----------+-------+---------------------+---------------------+----------------------------+----------------------------+--------+
5 rows in set
```

## 相关视图或文档

* 查看所有租户的合并全局信息：[CDB_OB_MAJOR_COMPACTION](10000.o-cdb_ob_major_compaction-of-sys-tenant.md)

* 查看 Tablet 级的合并基础统计信息：

  * [GV$OB_MERGE_INFO](../300.performance-view-of-sys-tenant/1800.gv-ob_merge_info-of-sys-tenant.md)

  * [V$OB_MERGE_INFO](../300.performance-view-of-sys-tenant/32200.v-ob_merge_info-of-sys-tenant.md)

* 查看 Tablet 级的合并的详细历史信息：

  * [GV$OB_TABLET_COMPACTION_HISTORY](../300.performance-view-of-sys-tenant/4300.gv-ob_tablet_compaction_history-of-sys-tenant.md)

  * [V$OB_TABLET_COMPACTION_HISTORY](../300.performance-view-of-sys-tenant/34700.v-ob_tablet_compaction_history-of-sys-tenant.md)

* 合并相关的操作，参见以下文档：

  * [自动触发合并](../../../200.system-management/500.manage-data-storage/200.merge-management/200.automatic-merge-triggering.md)

  * [定时触发合并](../../../200.system-management/500.manage-data-storage/200.merge-management/300.scheduled-trigger-merge.md)

  * [自适应合并](../../../200.system-management/500.manage-data-storage/200.merge-management/320.adaptive-compaction.md)

  * [手动触发合并](../../../200.system-management/500.manage-data-storage/200.merge-management/400.manually-trigger-a-merge.md)

  * [手动控制合并](../../../200.system-management/500.manage-data-storage/200.merge-management/500.manually-control-a-merge.md)

  * [查看合并信息](../../../200.system-management/500.manage-data-storage/200.merge-management/500.view-merge-process.md)