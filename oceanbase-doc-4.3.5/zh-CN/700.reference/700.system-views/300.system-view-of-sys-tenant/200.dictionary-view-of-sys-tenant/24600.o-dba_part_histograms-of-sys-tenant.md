|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# oceanbase.DBA_PART_HISTOGRAMS

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.0.0 版本开始引入。</p>
</main>

## 功能描述

展示当前租户下所有分区表的一级分区的直方图数据（每个直方图的端点）。

## 字段说明

| 字段名称 | 类型 | 是否可以为 NULL | 描述 |
| --- | --- | --- | --- |
| OWNER | varchar(128) | NO | 表的所有者 |
| TABLE_NAME | varchar(128) | NO | 表名 |
| PARTITION_NAME | varchar(128) | NO |分区表名称 |
| COLUMN_NAME | varchar(128) | NO | 列名 |
| ENDPOINT_NUMBER | decimal(10,0) | NO | 直方图的桶号 |
| ENDPOINT_VALUE | decimal(10,0) | NO | 存储桶的标准化端点值 |
| ENDPOINT_ACTUAL_VALUE | text | NO | 存储桶端点的实际字符串值（非标准化） |
| ENDPOINT_ACTUAL_VALUE_RAW | text | NO | 原始格式的端点实际值 |
| ENDPOINT_REPEAT_COUNT | decimal(10,0) | NO | 端点频率（只针对混合直方图，其他直方图类型设置为 0） |

## 查询示例

系统租户查看本租户的分区表 `test_part_hist` 的一级分区的直方图信息。

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.DBA_PART_HISTOGRAMS WHERE TABLE_NAME ='test_part_hist';
```

查询结果如下：

```shell
+----------+----------------+----------------+-------------+-----------------+----------------+-----------------------+---------------------------+-----------------------+
| OWNER    | TABLE_NAME     | PARTITION_NAME | COLUMN_NAME | ENDPOINT_NUMBER | ENDPOINT_VALUE | ENDPOINT_ACTUAL_VALUE | ENDPOINT_ACTUAL_VALUE_RAW | ENDPOINT_REPEAT_COUNT |
+----------+----------------+----------------+-------------+-----------------+----------------+-----------------------+---------------------------+-----------------------+
| test     | test_part_hist | p0             | value       |             250 |           NULL | 100                   | 04053F0064                |                    50 |
| test     | test_part_hist | p0             | value       |             200 |           NULL | 8                     | 04053F0008                |                    50 |
| test     | test_part_hist | p0             | value       |             150 |           NULL | 6                     | 04053F0006                |                    50 |
| test     | test_part_hist | p0             | value       |             100 |           NULL | 4                     | 04053F0004                |                    50 |
| test     | test_part_hist | p0             | value       |              50 |           NULL | 2                     | 04053F0002                |                    50 |
| test     | test_part_hist | p0             | category    |             250 |           NULL | 'B'                   | 16022DFF014200            |                   200 |
| test     | test_part_hist | p0             | category    |              50 |           NULL | 'A'                   | 16022DFF014100            |                    50 |
| test     | test_part_hist | p1             | value       |             250 |           NULL | 9                     | 04053F0009                |                    50 |
| test     | test_part_hist | p1             | value       |             200 |           NULL | 7                     | 04053F0007                |                    50 |
| test     | test_part_hist | p1             | value       |             150 |           NULL | 5                     | 04053F0005                |                    50 |
| test     | test_part_hist | p1             | value       |             100 |           NULL | 3                     | 04053F0003                |                    50 |
| test     | test_part_hist | p1             | value       |              50 |           NULL | 1                     | 04053F0001                |                    50 |
| test     | test_part_hist | p1             | category    |             250 |           NULL | 'B'                   | 16022DFF014200            |                   250 |
| test     | test_part_hist | p2             | value       |             250 |           NULL | 100                   | 04053F0064                |                    50 |
| test     | test_part_hist | p2             | value       |             200 |           NULL | 8                     | 04053F0008                |                    50 |
| test     | test_part_hist | p2             | value       |             150 |           NULL | 6                     | 04053F0006                |                    50 |
| test     | test_part_hist | p2             | value       |             100 |           NULL | 4                     | 04053F0004                |                    50 |
| test     | test_part_hist | p2             | value       |              50 |           NULL | 2                     | 04053F0002                |                    50 |
| test     | test_part_hist | p2             | category    |             250 |           NULL | 'B'                   | 16022DFF014200            |                   200 |
| test     | test_part_hist | p2             | category    |              50 |           NULL | 'A'                   | 16022DFF014100            |                    50 |
| test     | test_part_hist | p3             | value       |             250 |           NULL | 9                     | 04053F0009                |                    50 |
| test     | test_part_hist | p3             | value       |             200 |           NULL | 7                     | 04053F0007                |                    50 |
| test     | test_part_hist | p3             | value       |             150 |           NULL | 5                     | 04053F0005                |                    50 |
| test     | test_part_hist | p3             | value       |             100 |           NULL | 3                     | 04053F0003                |                    50 |
| test     | test_part_hist | p3             | value       |              50 |           NULL | 1                     | 04053F0001                |                    50 |
| test     | test_part_hist | p3             | category    |             250 |           NULL | 'B'                   | 16022DFF014200            |                   250 |
+----------+----------------+----------------+-------------+-----------------+----------------+-----------------------+---------------------------+-----------------------+
26 rows in set
```

## 相关视图或文档

* 查看表级的直方图统计信息：[DBA_TAB_HISTOGRAMS](26400.o-dba_tab_histograms-of-sys-tenant.md)

* 查看 Subpartiton 级的直方图统计信息：[DBA_SUBPART_HISTOGRAMS](26000.o-dba_subpart_histograms-of-sys-tenant.md)

* 查看表级的列统计信息：[DBA_TAB_STATISTICS](26700.o-dba_tab_statistics-of-sys-tenant.md)

* 查看 Global 级的列统计信息：[DBA_TAB_COL_STATISTICS](26300.o-dba_tab_col_statistics-of-sys-tenant.md)

* 查看 Partition 级的列统计信息：[DBA_PART_COL_STATISTICS](24500.o-dba_part_col_statistics-of-sys-tenant.md)

* 查看 Subpartiton 级的列统计信息：[DBA_SUBPART_HISTOGRAMS](26000.o-dba_subpart_histograms-of-sys-tenant.md)

* 查看索引统计信息：[DBA_IND_STATISTICS](14500.o-dba_ind_statistics-of-sys-tenant.md)

* 有关如何收集统计信息，参见以下文档：

  * [手动收集统计信息](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/200.statistics-collection-methods/300.collect-statistics-manually.md)

  * [自动收集统计信息](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/200.statistics-collection-methods/400.collect-statistics-automatically.md)