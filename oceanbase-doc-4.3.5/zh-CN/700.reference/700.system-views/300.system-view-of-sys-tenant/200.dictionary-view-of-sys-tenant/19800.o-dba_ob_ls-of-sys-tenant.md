|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# oceanbase.DBA_OB_LS

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.0.0 版本开始引入。</p>
</main>

## 功能描述

展示当前租户下日志流的状态和恢复进度。

## 字段说明

| 字段名称       | 类型                | 是否可以为 NULL        | 描述               |
|---------------|---------------------|-----------------------|--------------------|
| LS_ID         | bigint(20)          | NO | 日志流 ID |
| STATUS        | varchar(100)        | NO | 日志流的状态，包括：<li>`CREATING`：日志流创建中<li>`CREATED`：日志流创建完成<li>`NORMAL`：日志流可以提供服务<li>`DROPPING`：日志流即将删除，需要将日志流上的 Tablet 迁移走<li>`TENANT DROPPING`：日志流所在的租户正在删除，需要删除日志流<li>`WAIT OFFLINE`：日志流数据已经删除完成，等待 GC<li>`CREATE ABORT`：日志流创建失败或者不需要创建，即将删除 |
| PRIMARY_ZONE  | longtext            | YES| 日志流的选举优先级 |
| UNIT_GROUP_ID | bigint(20)          | NO | Unit 组 ID，对于系统日志流（1 号日志流）和广播日志流，该字段显示为 0，表示该日志流不绑定在某个 Unit 组  |
| LS_GROUP_ID   | bigint(20)          | NO | 日志流组 ID，对于系统日志流（1 号日志流）和广播日志流，该字段显示为 0，表示该日志流不属于某个日志流组  |
| CREATE_SCN    | bigint(20) unsigned | NO | 日志流开始写日志的位点 |
| DROP_SCN      | bigint(20) unsigned | NO | 日志流删除的位点，所有用户数据结束的位点。如果日志流被删除，则该字段记录删除时的 SCN，如果未被删除，则该字段为空。 |
| SYNC_SCN      | bigint(20) unsigned | NO | 日志流的同步位点，表示日志流最后一次同步成功的事务的 SCN |
| READABLE_SCN  | bigint(20) unsigned | NO | 日志流的可读点，表示日志流可以被读取的最小 SCN |
| FLAG          | varchar(2048)       | NO | 日志流标记：<ul><li>空：正常日志流</li><li> DUPLICATE：用户租户的广播日志流，复制表创建在该日志流上 </li> <li>BLOCK_TABLET_IN：表示不可以在该日志流上创建 Tablet</li> <li>DUPLICATE\|BLOCK_TABLET_IN：广播日志流当前不允许创建 Tablet</li></ul>  <main id="notice" type='explain'><h4>说明</h4><p>该字段从 V4.2.0 版本开始引入。</p></main>  |

## 查询示例

系统租户查看本租户的日志流状态和恢复进度。

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.DBA_OB_LS;
```

查询结果如下：

```shell
+-------+--------+--------------+---------------+-------------+------------+----------+----------+--------------+------+
| LS_ID | STATUS | PRIMARY_ZONE | UNIT_GROUP_ID | LS_GROUP_ID | CREATE_SCN | DROP_SCN | SYNC_SCN | READABLE_SCN | FLAG |
+-------+--------+--------------+---------------+-------------+------------+----------+----------+--------------+------+
|     1 | NORMAL | zone1        |             0 |           0 |       NULL |     NULL |     NULL |         NULL |      |
+-------+--------+--------------+---------------+-------------+------------+----------+----------+--------------+------+
1 row in set
```

## 相关视图或文档

* [CDB_OB_LS](9400.o-cdb_ob_ls-of-sys-tenant.md)

* [副本介绍](../../../../600.manage/300.replica-management/100.replica-introduction.md)