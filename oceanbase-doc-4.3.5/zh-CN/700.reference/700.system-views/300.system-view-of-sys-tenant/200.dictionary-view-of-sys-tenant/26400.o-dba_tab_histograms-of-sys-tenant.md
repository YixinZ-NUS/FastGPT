|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# oceanbase.DBA_TAB_HISTOGRAMS

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.0.0 版本开始引入。</p>
</main>

## 功能描述

展示当前租户下所有表的列的直方图。

## 字段说明

| 字段名称 | 类型 | 是否可以为 NULL | 描述 |
| --- | --- | --- | --- |
| OWNER                     | varchar(128)  | NO   | 直方图所属的用户     |
| TABLE_NAME                | varchar(128)  | NO   | 直方图所属表名     |
| COLUMN_NAME               | varchar(128)  | NO   | 直方图所属列名     |
| ENDPOINT_NUMBER           | decimal(10,0) | NO   | Bucket 累积的频次     |
| ENDPOINT_VALUE            | decimal(10,0) | NO   | Bucket 端点归一化值     |
| ENDPOINT_ACTUAL_VALUE     | text          | NO   | Bucket 端点值     |
| ENDPOINT_ACTUAL_VALUE_RAW | text          | NO   | Bucket 端点二进制值     |
| ENDPOINT_REPEAT_COUNT     | decimal(10,0) | NO   | Bucket 端点值的频次     |
| SCOPE                     | varchar(7)    | NO   | 直方图所属范围     |

## 查询示例

系统租户下，查看本租户的表 `t_subpart` 的表级直方图相关信息。

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.DBA_TAB_HISTOGRAMS WHERE TABLE_NAME='t_subpart';
```

查询结果如下：

```shell
+-------+------------+-------------+-----------------+----------------+-----------------------+---------------------------+-----------------------+-------+
| OWNER | TABLE_NAME | COLUMN_NAME | ENDPOINT_NUMBER | ENDPOINT_VALUE | ENDPOINT_ACTUAL_VALUE | ENDPOINT_ACTUAL_VALUE_RAW | ENDPOINT_REPEAT_COUNT | SCOPE |
+-------+------------+-------------+-----------------+----------------+-----------------------+---------------------------+-----------------------+-------+
| test  | t_subpart  | c1          |               1 |           NULL | 0                     | 04053F0000                |                     1 | NULL  |
| test  | t_subpart  | c1          |            2501 |           NULL | 2500                  | 04053F00C413              |                     1 | NULL  |
| test  | t_subpart  | c1          |            5001 |           NULL | 5000                  | 04053F008827              |                     1 | NULL  |
| test  | t_subpart  | c1          |            7501 |           NULL | 7500                  | 04053F00CC3A              |                     1 | NULL  |
| test  | t_subpart  | c1          |           10000 |           NULL | 9999                  | 04053F008F4E              |                     1 | NULL  |
| test  | t_subpart  | c2          |              10 |           NULL | 0                     | 04053F0000                |                    10 | NULL  |
| test  | t_subpart  | c2          |            2510 |           NULL | 250                   | 04053F00FA01              |                    10 | NULL  |
| test  | t_subpart  | c2          |            5010 |           NULL | 500                   | 04053F00F403              |                    10 | NULL  |
| test  | t_subpart  | c2          |            7510 |           NULL | 750                   | 04053F00EE05              |                    10 | NULL  |
| test  | t_subpart  | c2          |           10000 |           NULL | 999                   | 04053F00E707              |                    10 | NULL  |
| test  | t_subpart  | c3          |               5 |           NULL | 0                     | 04053F0000                |                     5 | NULL  |
| test  | t_subpart  | c3          |            2505 |           NULL | 500                   | 04053F00F403              |                     5 | NULL  |
| test  | t_subpart  | c3          |            5005 |           NULL | 1000                  | 04053F00E807              |                     5 | NULL  |
| test  | t_subpart  | c3          |            7505 |           NULL | 1500                  | 04053F00DC0B              |                     5 | NULL  |
| test  | t_subpart  | c3          |           10000 |           NULL | 1999                  | 04053F00CF0F              |                     5 | NULL  |
+-------+------------+-------------+-----------------+----------------+-----------------------+---------------------------+-----------------------+-------+
15 rows in set
```

## 相关视图或文档

* 查看 Partition 级的直方图统计信息：[DBA_PART_HISTOGRAMS](24600.o-dba_part_histograms-of-sys-tenant.md)

* 查看 Subpartiton 级的直方图统计信息：[DBA_SUBPART_HISTOGRAMS](26000.o-dba_subpart_histograms-of-sys-tenant.md)

* 查看表级的列统计信息：[DBA_TAB_STATISTICS](26700.o-dba_tab_statistics-of-sys-tenant.md)

* 查看 Global 级的列统计信息：[DBA_TAB_COL_STATISTICS](26300.o-dba_tab_col_statistics-of-sys-tenant.md)

* 查看 Partition 级的列统计信息：[DBA_PART_COL_STATISTICS](24500.o-dba_part_col_statistics-of-sys-tenant.md)

* 查看 Subpartiton 级的列统计信息：[DBA_SUBPART_COL_STATISTICS](25900.o-dba_subpart_col_statistics-of-sys-tenant.md)

* 查看索引统计信息：[DBA_IND_STATISTICS](14500.o-dba_ind_statistics-of-sys-tenant.md)

* 有关如何收集统计信息，参见以下文档：

  * [手动收集统计信息](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/200.statistics-collection-methods/300.collect-statistics-manually.md)

  * [自动收集统计信息](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/200.statistics-collection-methods/400.collect-statistics-automatically.md)