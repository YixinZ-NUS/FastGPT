|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# oceanbase.CDB_TAB_COLS

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.0.0 版本开始引入。</p>
</main>

## 功能描述

展示所有租户的表、视图对象的列信息。该视图与 `CDB_TAB_COLS_V$` 一致，但没有 `NOTES` 列，`NOTES` 列当前未使用。

## 字段说明

|         字段名称         |       类型        | 是否可以为 NULL |                                                               描述                                                                |
|----------------------|-----------------|------------|---------------|
| CON_ID               | bigint(20)      | NO         | 租户 ID                                        |
| OWNER                | varchar(128)    | NO         | 表、视图或集群的所有者                                  |
| TABLE_NAME           | varchar(128)    | NO         | 表、视图或集群的名称                                   |
| COLUMN_NAME          | varchar(128)    | NO         | 列名                                           |
| DATA_TYPE            | varchar(128)    | NO         | 列的数据类型                                       |
| DATA_TYPE_MOD        | varchar(3)      | NO         | 默认值为 `NULL`                                    |
| DATA_TYPE_OWNER      | varchar(128)    | NO         | 默认值为 `NULL`                                    |
| DATA_LENGTH          | bigint(21)      | NO         | 列的长度（以字节为单位）                                 |
| DATA_PRECISION       | bigint(20)      | NO         | `NUMBER` 数据类型的小数精度；`FLOAT` 数据类型的二进制精度；所有其他数据类型为 NULL                                                                            |
| DATA_SCALE           | bigint(20)      | NO         | 数字中小数点右边的数字                                  |
| NULLABLE             | varchar(1)      | NO         | 指示列是否允许 NULL。该值是列 `N` 是否存在 `NOT NULL` 约束或列是否属于 `PRIMARY KEY`                                                                    |
| COLUMN_ID            | bigint(20)      | NO         | 创建的列的序列号                                     |
| DEFAULT_LENGTH       | bigint(20)      | NO         | 列的默认值的长度                                     |
| DATA_DEFAULT         | mediumtext | NO         | 列的默认值                                        |
| NUM_DISTINCT         | bigint(20)      | NO         | 列中不同值的数量                                     |
| LOW_VALUE            | varchar(128)    | NO         | 列的最小值                                        |
| HIGH_VALUE           | varchar(128)    | NO         | 列的最大值                                       |
| DENSITY              | bigint(21)      | NO         | 列的密度   |
| NUM_NULLS            | bigint(20)      | NO         | 列中的 NULL 数                                   |
| NUM_BUCKETS          | bigint(20)      | NO         | 列的直方图中的桶数                                    |
| LAST_ANALYZED        | date            | NO         | 最近分析此列的日期                                    |
| SAMPLE_SIZE          | bigint(20)      | NO         | 用于分析此列的样本量                                   |
| CHARACTER_SET_NAME   | varchar(44)     | NO         | 字符集名称： <li> `CHAR_CS`   <li> `NCHAR_CS`                                                                               |
| CHAR_COL_DECL_LENGTH | bigint(0)       | NO         | 默认值为 `NULL`                                   |
| GLOBAL_STATS         | varchar(3)      | NO         | `GLOBAL_STATS`如果统计信息被收集或增量维护，将`YES`是，否则它将是`NO`                                                                                  |
| USER_STATS           | varchar(3)      | NO         | 指示统计信息是否由用户直接输入 ( `YES`) 或不是 ( `NO`)         |
| AVG_COL_LEN          | bigint(21)      | NO         | 列的平均长度（以字节为单位）                               |
| CHAR_LENGTH          | bigint(20)      | NO         | 以字符显示列的长度。此值仅适用于以下数据类型： <li> `CHAR`   <li> `VARCHAR2`   <li> `NCHAR`   <li> `NVARCHAR2`                                                      |
| CHAR_USED            | varchar(1)      | NO         | 表示该列使用 `BYTE` 长度语义（`B`）或 `CHAR` 长度语义（`C`），或者数据类型是否不是以下任何一种（NULL）： <li> `CHAR`   <li> `VARCHAR2`   <li> `NCHAR`   <li> `NVARCHAR2`                |
| V80_FMT_IMAGE        | varchar(3)      | NO         | 默认值为 `NULL`   |
| DATA_UPGRADED        | varchar(3)      | NO         | 默认值为 `NULL`         |
| HIDDEN_COLUMN        | varchar(3)      | NO         | 指示该列是否为隐藏列 ( `YES`) 或不是 ( `NO`)              |
| VIRTUAL_COLUMN       | varchar(3)      | NO         | 指示列是否为虚拟列 ( `YES`) 或不是 ( `NO`)               |
| SEGMENT_COLUMN_ID    | bigint(0)       | NO         | 默认值为 `NULL`                                       |
| INTERNAL_COLUMN_ID   | bigint(0)       | NO         | 默认值为 `NULL`                                      |
| HISTOGRAM            | varchar(15)     | NO         | 指示直方图的存在/类型： <li> `NONE`   <li> `FREQUENCY`   <li> `TOP-FREQUENCY`   <li> `HEIGHT BALANCED`   <li> `HYBRID`    |
| QUALIFIED_COL_NAME   | text            | NO         | 限定列名                                         |
| USER_GENERATED       | varchar(3)      | NO         | 表示列的生成属性，取值如下：<ul><li>`YES`：表示该列是用户生成的列。</li><li>`NO`：表示该列系统生成的列，即逻辑删除的列（存储层未删除）。<main id="notice" type='explain'><h4>说明</h4><p>对于 OceanBase 数据库 V4.3.5 版本，该字段从 V4.3.5 BP1 版本开始生效。</p></main>|
| DEFAULT_ON_NULL      | varchar(3)      | NO         | 默认值为 `NULL`                                          |
| IDENTITY_COLUMN      | varchar(3)      | NO         | 默认值为 `NULL`              |
| EVALUATION_EDITION   | varchar(128)    | NO         | 默认值为 `NULL`                        |
| UNUSABLE_BEFORE      | varchar(128)    | NO         | 默认值为 `NULL`                       |
| UNUSABLE_BEGINNING   | varchar(128)    | NO         | 默认值为 `NULL`             |
| COLLATION            | varchar(100)    | NO         | 默认值为 `NULL`                       |
| COLLATED_COLUMN_ID   | bigint(0)       | NO         | 默认值为 `NULL`                |

## 查询示例

系统租户查询租户 ID 为 1002 的租户下的表 `t1` 的列信息。

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.CDB_TAB_COLS WHERE CON_ID=1002 AND TABLE_NAME='t1'\G
```

查询结果如下：

```shell
*************************** 1. row ***************************
              CON_ID: 1002
               OWNER: infotest
          TABLE_NAME: t1
         COLUMN_NAME: c1
           DATA_TYPE: NUMBER
       DATA_TYPE_MOD: NULL
     DATA_TYPE_OWNER: NULL
         DATA_LENGTH: 0
      DATA_PRECISION: 11
          DATA_SCALE: 0
            NULLABLE: Y
           COLUMN_ID: 16
      DEFAULT_LENGTH: NULL
        DATA_DEFAULT: NULL
        NUM_DISTINCT: NULL
           LOW_VALUE: NULL
          HIGH_VALUE: NULL
             DENSITY: NULL
           NUM_NULLS: NULL
         NUM_BUCKETS: NULL
       LAST_ANALYZED: NULL
         SAMPLE_SIZE: NULL
  CHARACTER_SET_NAME:
CHAR_COL_DECL_LENGTH: NULL
        GLOBAL_STATS: NULL
          USER_STATS: NULL
         AVG_COL_LEN: NULL
         CHAR_LENGTH: 0
           CHAR_USED: NULL
       V80_FMT_IMAGE: NULL
       DATA_UPGRADED: NULL
       HIDDEN_COLUMN: NO
      VIRTUAL_COLUMN: NO
   SEGMENT_COLUMN_ID: NULL
  INTERNAL_COLUMN_ID: NULL
           HISTOGRAM: NULL
  QUALIFIED_COL_NAME: c1
      USER_GENERATED: YES
     DEFAULT_ON_NULL: NULL
     IDENTITY_COLUMN: NULL
  EVALUATION_EDITION: NULL
     UNUSABLE_BEFORE: NULL
  UNUSABLE_BEGINNING: NULL
           COLLATION: NULL
  COLLATED_COLUMN_ID: NULL
*************************** 2. row ***************************
              CON_ID: 1002
               OWNER: infotest
          TABLE_NAME: t1
         COLUMN_NAME: c2
           DATA_TYPE: NUMBER
       DATA_TYPE_MOD: NULL
     DATA_TYPE_OWNER: NULL
         DATA_LENGTH: 0
      DATA_PRECISION: 11
          DATA_SCALE: 0
            NULLABLE: Y
           COLUMN_ID: 17
      DEFAULT_LENGTH: NULL
        DATA_DEFAULT: NULL
        NUM_DISTINCT: NULL
           LOW_VALUE: NULL
          HIGH_VALUE: NULL
             DENSITY: NULL
           NUM_NULLS: NULL
         NUM_BUCKETS: NULL
       LAST_ANALYZED: NULL
         SAMPLE_SIZE: NULL
  CHARACTER_SET_NAME:
CHAR_COL_DECL_LENGTH: NULL
        GLOBAL_STATS: NULL
          USER_STATS: NULL
         AVG_COL_LEN: NULL
         CHAR_LENGTH: 0
           CHAR_USED: NULL
       V80_FMT_IMAGE: NULL
       DATA_UPGRADED: NULL
       HIDDEN_COLUMN: NO
      VIRTUAL_COLUMN: NO
   SEGMENT_COLUMN_ID: NULL
  INTERNAL_COLUMN_ID: NULL
           HISTOGRAM: NULL
  QUALIFIED_COL_NAME: c2
      USER_GENERATED: YES
     DEFAULT_ON_NULL: NULL
     IDENTITY_COLUMN: NULL
  EVALUATION_EDITION: NULL
     UNUSABLE_BEFORE: NULL
  UNUSABLE_BEGINNING: NULL
           COLLATION: NULL
  COLLATED_COLUMN_ID: NULL
2 rows in set
```