|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# oceanbase.CDB_OB_LS_LOG_ARCHIVE_PROGRESS

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.1.0 版本开始引入。</p>
</main>

## 功能描述

展示所有租户的日志流归档进度。

## 字段说明

| **字段** | **类型** | **是否可以为 NULL** | **描述** |
| --- | --- | --- | --- |
| TENANT_ID | bigint(20)   | NO | 租户 ID |
| DEST_ID | bigint(20)   | NO | 归档目的端 ID |
| LS_ID | bigint(20)   | NO | 日志流 ID |
| ROUND_ID | bigint(20)   | NO | 日志流轮次 ID |
| PIECE_ID | bigint(20)  | NO | 最新 Piece ID |
| INCARNATION | bigint(20) | NO | 分身 ID |
| START_SCN | bigint(20) unsigned | NO | 归档起始 SCN |
| MIN_LSN | bigint(20) unsigned | NO | 当前 Piece 日志流最小 LSN |
| MAX_LSN | bigint(20) unsigned | NO | 当前 Piece 日志流最大 LSN |
| CHECKPOINT_SCN | bigint(20) unsigned | NO | 当前 Piece 日志流最大归档进度 |
| STATUS | varchar(64)  | NO | 租户归档状态：<ul><li> PREPARE：开启归档初始状态 </li><li>BEGINNING：执行完开启归档基本检查，进入该状态 </li><li> DOING：正常归档状态 </li><li> INTERRUPTED：归档断流，无法再继续进行</li><li> STOPPING：发起关闭归档进入该状态</li><li>STOP：归档关闭状态 </li><li> SUSPENDING：归档进入暂停状态</li><li> SUSPEND：归档暂停状态 </li></ul>|
| FILE_ID  | bigint(20)  | NO | 当前 Piece 最大归档文件 ID |
| FILE_OFFSET  | bigint(20)  | NO | 当前 Piece 最大归档文件 OFFSET |
| INPUT_BYTES  | bigint(20)  | NO | 读取日志数据量 |
| OUTPUT_BYTES   | bigint(20)  | NO | 归档的日志数据量 |

## 查询示例

系统租户查看租户 ID 为 1002 的租户的日志流归档进度。

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.CDB_OB_LS_LOG_ARCHIVE_PROGRESS WHERE TENANT_ID = 1002\G
```

查询结果如下：

```shell
*************************** 1. row ***************************
     TENANT_ID: 1002
       DEST_ID: 1001
         LS_ID: 1
      ROUND_ID: 1
      PIECE_ID: 1
   INCARNATION: 1
     START_SCN: 1736228322307513000
       MIN_LSN: 67104768
       MAX_LSN: 130710857
CHECKPOINT_SCN: 1736234926476865000
        STATUS: DOING
       FILE_ID: 2
   FILE_OFFSET: 63606089
   INPUT_BYTES: 63606089
  OUTPUT_BYTES: 63606089
*************************** 2. row ***************************
     TENANT_ID: 1002
       DEST_ID: 1001
         LS_ID: 1001
      ROUND_ID: 1
      PIECE_ID: 1
   INCARNATION: 1
     START_SCN: 1736228322307513000
       MIN_LSN: 67104768
       MAX_LSN: 92201946
CHECKPOINT_SCN: 1736234926274668000
        STATUS: DOING
       FILE_ID: 2
   FILE_OFFSET: 25097178
   INPUT_BYTES: 25097178
  OUTPUT_BYTES: 25097178
2 rows in set
```