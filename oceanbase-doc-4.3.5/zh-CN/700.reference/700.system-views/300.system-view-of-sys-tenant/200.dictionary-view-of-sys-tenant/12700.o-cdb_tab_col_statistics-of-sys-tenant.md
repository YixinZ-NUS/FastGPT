|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# oceanbase.CDB_TAB_COL_STATISTICS

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.0.0 版本开始引入。</p>
</main>

## 功能描述

系统租户下展示所有租户的列统计信息和直方图信息。

## 字段说明

|     字段名称      |      类型      | **是否可以为 NULL** |                                                               描述                                                               |
|---------------|--------------|----------------|--------------------------------------------------------------------------------------------------------------------------------|
| CON_ID        | bigint(20)   | NO             | 租户 ID                                       |
| OWNER         | varchar(128) | NO             | 列所属的用户                                      |
| TABLE_NAME    | varchar(128) | NO             | 列所属的表名                                      |
| COLUMN_NAME   | varchar(128) | NO             | 列名                                          |
| NUM_DISTINCT  | bigint(20)   | NO             | 列中不同值的数量                                    |
| LOW_VALUE     | varchar(128) | NO             | 列的最小值                                       |
| HIGH_VALUE    | varchar(128) | NO             | 列的最大值                                       |
| DENSITY       | bigint(21)   | NO             | 列的密度                                        |
| NUM_NULLS     | bigint(20)   | NO             | 列中 `NULL` 值的数量                              |
| NUM_BUCKETS   | bigint(20)   | NO             | 列直方图中桶的个数                                   |
| LAST_ANALYZED | date         | NO             | 上次分析的时间                                     |
| SAMPLE_SIZE   | bigint(20)   | NO             | 分析时的采样大小                                    |
| GLOBAL_STATS  | varchar(3)   | NO             | <li> `YES`：表示统计信息是直接收集的或增量维护的   <li> `NO`：其它情况    |
| USER_STATS    | varchar(3)   | NO             | 分区统计信息是否是用户设置的                              |
| NOTES         | varchar(80)  | NO             | 记录一些额外的属性                                   |
| AVG_COL_LEN   | bigint(21)   | NO             | 列的平均长度                                      |
| HISTOGRAM     | varchar(15)  | NO             | 直方图类型                                       |
| SCOPE         | varchar(7)   | NO             | 统计信息的有效范围                                   |

## 查询示例

系统租户下，查询租户 ID 为 1004 的租户的表 `T2_M_LR` 的列统计信息和直方图信息。

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.CDB_TAB_COL_STATISTICS WHERE CON_ID=1004 AND TABLE_NAME='T2_M_LR'\G
```

查询结果如下：

```shell
*************************** 1. row ***************************
       CON_ID: 1004
        OWNER: SYS
   TABLE_NAME: T2_M_LR
  COLUMN_NAME: COL1
 NUM_DISTINCT: 0
    LOW_VALUE: NULL
   HIGH_VALUE: NULL
      DENSITY: 0
    NUM_NULLS: 0
  NUM_BUCKETS: 0
LAST_ANALYZED: 2025-03-12
  SAMPLE_SIZE: 0
 GLOBAL_STATS: NO
   USER_STATS: NO
        NOTES: NULL
  AVG_COL_LEN: 0
    HISTOGRAM: NULL
        SCOPE: NULL
*************************** 2. row ***************************
       CON_ID: 1004
        OWNER: SYS
   TABLE_NAME: T2_M_LR
  COLUMN_NAME: COL2
 NUM_DISTINCT: 0
    LOW_VALUE: NULL
   HIGH_VALUE: NULL
      DENSITY: 0
    NUM_NULLS: 0
  NUM_BUCKETS: 0
LAST_ANALYZED: 2025-03-12
  SAMPLE_SIZE: 0
 GLOBAL_STATS: NO
   USER_STATS: NO
        NOTES: NULL
  AVG_COL_LEN: 0
    HISTOGRAM: NULL
        SCOPE: NULL
2 rows in set
```

## 相关视图或文档

* 查看本租户的统计信息：[DBA_TAB_COL_STATISTICS](26300.o-dba_tab_col_statistics-of-sys-tenant.md)

* 有关如何收集统计信息，参见以下文档：

  * [手动收集统计信息](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/200.statistics-collection-methods/300.collect-statistics-manually.md)

  * [自动收集统计信息](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/200.statistics-collection-methods/400.collect-statistics-automatically.md)