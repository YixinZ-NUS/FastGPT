|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# CDB_MVIEW_LOGS

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.3.0 版本开始引入。</p>
</main>

## 功能描述

视图 `CDB_MVIEW_LOGS` 用于展示所有物化视图日志信息。

## 字段说明

| **字段名称** | **类型** | **是否可以为 NULL** | **描述** |
| --- | --- | --- | --- |
| TENANT_ID | bigint(20) | NO | 租户 ID |
| LOG_OWNER | varchar(128) | NO | 表示物化视图日志所有者名称 |
| MASTER | varchar(128) | NO | 表示物化视图日志所属的主表名称 |
| LOG_TABLE | varchar(128) | NO | 表示物化视图日志表名称 |
| LOG_TRIGGER | varchar(128) | YES | 表示主表上的行后触发器，用于将行插入到物化视图日志中<main id="notice" type='explain'> <h4>说明</h4><p>该字段仅兼容，且值默认为 NULL。</p></main> |
| ROWIDS | varchar(3) | NO | 表示是否记录 Rowid 信息<ul><li> YES </li><li>NO </li></ul>|
| PRIMARY_KEY | varchar(3) | NO | 表示是否记录主键信息<ul><li> YES </li><li>NO </li></ul>|
| OBJECT_ID | varchar(3) | NO | 表示对象表中是否记录了对象标识信息<ul><li> YES </li><li>NO </li></ul><main id="notice" type='explain'> <h4>说明</h4><p>该字段仅兼容，且值默认为 NO。</p></main> |
| FILTER_COLUMNS | varchar(3) | NO | 表示是否记录过滤列信息<ul><li> YES </li><li>NO </li></ul>|
| SEQUENCE | varchar(3) | NO | 表示是否记录提供附加排序信息的序列值<ul><li> YES </li><li>NO </li></ul><main id="notice" type='explain'> <h4>说明</h4><p>目前该字段值恒为 YES。</p></main> |
| INCLUDE_NEW_VALUES | varchar(3) | NO | 表示是否同时记录旧值和新值<ul><li>YES：同时记录旧值和新值  </li><li>NO：记录旧值但不记录新值 </li></ul><main id="notice" type='explain'> <h4>说明</h4><p>目前该字段值恒为 YES。</p></main> |
| PURGE_ASYNCHRONOUS | varchar(3) | NO | 表示物化视图日志是否被异步清除<ul><li> YES </li><li>NO </li></ul>|
| PURGE_DEFERRED | varchar(3) | NO | 表示是否以延迟方式清除物化视图日志<ul><li> YES </li><li>NO </li></ul>|
| PURGE_START | datetime | YES | 表示延迟清除的清除开始日期 |
| PURGE_INTERVAL | varchar(200) | YES | 表示延迟清除的清除时间间隔 |
| LAST_PURGE_DATE | datetime | YES | 表示上次清除物化视图日志的日期 |
| LAST_PURGE_STATUS | bigint(1) | NO | 表示上次清除物化视图日志的状态<ul><li>错误代码  </li><li>0 ：表示成功 </li></ul><main id="notice" type='explain'> <h4>说明</h4><p>目前该字段值恒为 0。</p></main> |
| NUM_ROWS_PURGED | bigint(20) | YES | 表示上次清除物化视图日志清除的行数 |
| COMMIT_SCN_BASED | varchar(3) | NO | 表示物化视图日志是否基于提交 SCN<ul><li> YES </li><li>NO </li></ul><main id="notice" type='explain'> <h4>说明</h4><p>目前该字段值恒为 YES。</p></main> |
| STAGING_LOG | varchar(3) | NO | 表示物化视图日志是否是同步刷新的暂存日志<ul><li> YES </li><li>NO </li></ul><main id="notice" type='explain'> <h4>说明</h4><p>该字段仅兼容，且值默认为 NO。</p></main> |
| PURGE_DOP          | bigint(20)   | NO   | 清理物化视图日志的并行度。<main id="notice" type='explain'><h4>说明</h4><p>对于 OceanBase 数据库 V4.3.5 版本，该字段从 V4.3.5 BP2 版本开始引入。</p></main>|
| LAST_PURGE_TIME    | bigint(20)   | YES  | 上一次清理物化视图日志任务的耗时，单位秒。<main id="notice" type='explain'><h4>说明</h4><p>对于 OceanBase 数据库 V4.3.5 版本，该字段从 V4.3.5 BP2 版本开始引入。</p></main>|

## 查询示例

查询所有物化视图日志信息，展示第 1 条记录。

```shell
obclient [(none)]> SELECT * FROM oceanbase.CDB_MVIEW_LOGS LIMIT 1\G
```

查询结果如下：

```shell
*************************** 1. row ***************************
         TENANT_ID: 1
         LOG_OWNER: db_test
            MASTER: tbl1
         LOG_TABLE: mlog$_tbl1
       LOG_TRIGGER: NULL
            ROWIDS: NO
       PRIMARY_KEY: YES
         OBJECT_ID: NO
    FILTER_COLUMNS: YES
          SEQUENCE: YES
INCLUDE_NEW_VALUES: YES
PURGE_ASYNCHRONOUS: NO
    PURGE_DEFERRED: YES
       PURGE_START: 2025-04-23 15:01:35
    PURGE_INTERVAL: sysdate() + interval 1 day
   LAST_PURGE_DATE: 2025-04-23 15:01:39
 LAST_PURGE_STATUS: 0
   NUM_ROWS_PURGED: 0
  COMMIT_SCN_BASED: YES
       STAGING_LOG: NO
         PURGE_DOP: 5
   LAST_PURGE_TIME: 0
1 row in set
```