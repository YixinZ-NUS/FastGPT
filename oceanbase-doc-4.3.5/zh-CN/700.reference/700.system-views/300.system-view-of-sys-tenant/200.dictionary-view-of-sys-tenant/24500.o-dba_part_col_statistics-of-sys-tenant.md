|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# oceanbase.DBA_PART_COL_STATISTICS

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.0.0 版本开始引入。</p>
</main>

## 功能描述

展示本租户中所有分区表的列统计信息和直方图信息。

## 字段说明

| 字段名称 | 类型 | 是否可以为 NULL | 描述 |
| --- | --- | --- | --- |
| OWNER | varchar(128) | NO | 分区表的所有者 |
| TABLE_NAME | varchar(128) | NO | 表名 |
| PARTITION_NAME | varchar(128) | NO | 表分区名称 |
| COLUMN_NAME | varchar(128) | NO | 列名 |
| NUM_DISTINCT | decimal(10,0) | NO | 列中不同值的数量 |
| LOW_VALUE | varchar(128) | NO | 列的最小值 |
| HIGH_VALUE | varchar(128) | NO | 列的最大值 |
| DENSITY | decimal(10,0) | NO | 列的密度。如果直方图在 COLUMN_NAME 上可用，则此列显示跨越直方图中少于 2 个端点的值的选择性。它不代表跨越 2 个或更多端点的值的选择性。如果直方图在 COLUMN_NAME 上不可用，则此列的值为 1/ NUM_DISTINCT |
| NUM_NULLS | decimal(10,0) | NO | 列中的 NULL 数 |
| NUM_BUCKETS | decimal(10,0) | NO | 列的直方图中的桶数 |
| LAST_ANALYZED | datetime(6) | NO | 最近分析色谱柱的日期 |
| SAMPLE_SIZE | decimal(10,0) | NO | 用于分析色谱柱的样本量 |
| GLOBAL_STATS | varchar(3) | NO | 指示统计信息是否已收集：<li>YES：已收集<li>NO：已从子分区汇总或者未收集|
| NOTES | varchar(80) | NO | 描述统计信息的一些附加属性：<li>INCREMENTAL：表示该列有概要<li>INCREMENTAL(HLL)：表示该列具有概要，并且概要采用 hyperloglog 格式<li>INCREMENTAL(SAMPLING)：表示该列具有概要，并且概要采用自适应采样格式<br>此列可用于确定自适应采样格式的概要是否已完全淘汰并正确清除 |
| AVG_COL_LEN | decimal(10,0) | NO | 列的平均长度（以字节为单位） |
| HISTOGRAM | varchar(15) | NO | 指示直方图的类型：<li>NONE<li>FREQUENCY<li>HEIGHT BALANCED<li>HYBRID<li>TOP-FREQUENCY |

## 查询示例

查看本租户中分区表 `t_subpart` 的一级分区的列统计信息和直方图信息。

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.DBA_PART_COL_STATISTICS WHERE TABLE_NAME='t_subpart';
```

查询结果如下：

```shell
+-------+------------+----------------+-------------+--------------+-----------+------------+--------------+-----------+-------------+----------------------------+-------------+--------------+------------+-------+-------------+-----------+
| OWNER | TABLE_NAME | PARTITION_NAME | COLUMN_NAME | NUM_DISTINCT | LOW_VALUE | HIGH_VALUE | DENSITY      | NUM_NULLS | NUM_BUCKETS | LAST_ANALYZED              | SAMPLE_SIZE | GLOBAL_STATS | USER_STATS | NOTES | AVG_COL_LEN | HISTOGRAM |
+-------+------------+----------------+-------------+--------------+-----------+------------+--------------+-----------+-------------+----------------------------+-------------+--------------+------------+-------+-------------+-----------+
| test  | t_subpart  | p0             | c1          |         3540 | 0         | 9999       | 0.0002824859 |         0 |           5 | 2025-03-17 15:30:30.152256 |        3334 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p0             | c2          |         1012 | 0         | 999        | 0.0009881423 |         0 |           5 | 2025-03-17 15:30:30.152256 |        3334 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p0             | c3          |         2030 | 0         | 1999       | 0.0004926108 |         0 |           5 | 2025-03-17 15:30:30.152256 |        3334 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p1             | c1          |         3308 | 1         | 9997       | 0.0003022975 |         0 |           5 | 2025-03-17 15:30:30.152256 |        3333 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p1             | c2          |         1012 | 0         | 999        | 0.0009881423 |         0 |           5 | 2025-03-17 15:30:30.152256 |        3333 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p1             | c3          |         2030 | 0         | 1999       | 0.0004926108 |         0 |           5 | 2025-03-17 15:30:30.152256 |        3333 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p2             | c1          |         3230 | 2         | 9998       | 0.0003095975 |         0 |           5 | 2025-03-17 15:30:30.152256 |        3333 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p2             | c2          |         1012 | 0         | 999        | 0.0009881423 |         0 |           5 | 2025-03-17 15:30:30.152256 |        3333 | NO           | NO         | NULL  |          20 | HYBRID    |
| test  | t_subpart  | p2             | c3          |         2030 | 0         | 1999       | 0.0004926108 |         0 |           5 | 2025-03-17 15:30:30.152256 |        3333 | NO           | NO         | NULL  |          20 | HYBRID    |
+-------+------------+----------------+-------------+--------------+-----------+------------+--------------+-----------+-------------+----------------------------+-------------+--------------+------------+-------+-------------+-----------+
9 rows in set
```

## 相关视图或文档

* 查看表级的列统计信息：[DBA_TAB_STATISTICS](26700.o-dba_tab_statistics-of-sys-tenant.md)

* 查看 Global 级的列统计信息：[DBA_TAB_COL_STATISTICS](26300.o-dba_tab_col_statistics-of-sys-tenant.md)

* 查看 Subpartiton 级的列统计信息：[DBA_SUBPART_COL_STATISTICS](25900.o-dba_subpart_col_statistics-of-sys-tenant.md)

* 查看表级的直方图统计信息：[DBA_TAB_HISTOGRAMS](26400.o-dba_tab_histograms-of-sys-tenant.md)

* 查看 Partition 级的直方图统计信息：[DBA_PART_HISTOGRAMS](24600.o-dba_part_histograms-of-sys-tenant.md)

* 查看 Subpartiton 级的直方图统计信息：[DBA_SUBPART_HISTOGRAMS](26000.o-dba_subpart_histograms-of-sys-tenant.md)

* 查看索引统计信息：[DBA_IND_STATISTICS](14500.o-dba_ind_statistics-of-sys-tenant.md)

* 有关如何收集统计信息，参见以下文档：

  * [手动收集统计信息](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/200.statistics-collection-methods/300.collect-statistics-manually.md)

  * [自动收集统计信息](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/200.statistics-collection-methods/400.collect-statistics-automatically.md)