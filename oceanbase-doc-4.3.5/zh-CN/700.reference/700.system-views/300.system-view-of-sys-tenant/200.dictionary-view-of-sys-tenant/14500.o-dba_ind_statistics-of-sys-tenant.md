|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||
|machine-translation||

# oceanbase.DBA_IND_STATISTICS

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.0.0 版本开始引入。</p>
</main>

## 功能描述

展示当前租户下所有索引的优化器统计信息。

## 字段说明

| 字段名称 | 类型 | 是否可以为 NULL | 描述 |
| --- | --- | --- | --- |
| OWNER | varchar(128) | NO | 索引所有者 |
| INDEX_NAME | varchar(128) | NO | 索引名称 |
| TABLE_OWNER | varchar(128) | NO | 索引对象的所有者 |
| TABLE_NAME | varchar(128) | NO | 索引对象的名称 |
| PARTITION_NAME | varchar(128) | NO | 分区名称 |
| PARTITION_POSITION | decimal(10,0) | NO | 分区在索引中的位置 |
| SUBPARTITION_NAME | varchar(128) | NO | 子分区的名称 |
| SUBPARTITION_POSITION | decimal(10,0) | NO | 子分区在分区内的位置 |
| OBJECT_TYPE           | varchar(12) | NO | 对象类型：<li>INDEX<li>PARTITION<li>SUBPARTITION |
| BLEVEL                 | decimal(10,0) | NO | 默认值为 NULL |
| LEAF_BLOCKS            | decimal(10,0) | NO | 默认值为 NULL |
| DISTINCT_KEYS          | decimal(10,0) | NO | 默认值为 NULL |
| AVG_LEAF_BLOCKS_PER_KEY | decimal(10,0) | NO | 默认值为 NULL |
| AVG_DATA_BLOCKS_PER_KEY | decimal(10,0) | NO | 默认值为 NULL |
| CLUSTERING_FACTOR       | decimal(10,0) | NO | 默认值为 NULL |
| NUM_ROWS                | decimal(10,0) | NO | 索引中的行数 |
| AVG_CACHED_BLOCKS       | decimal(10,0) | NO | 默认值为 NULL |
| AVG_CACHE_HIT_RATIO     | decimal(10,0) | NO | 默认值为 NULL |
| SAMPLE_SIZE             | decimal(10,0) | NO | 默认值为 NULL |
| LAST_ANALYZED           | datetime(6) | NO | 最近一次分析指数的日期 |
| GLOBAL_STATS            | varchar(3) | NO | 指示统计信息是否被收集或增量维护：<li>YES<li>NO |
| USER_STATS              | varchar(3) | NO | 指示统计信息是否由用户直接输入：<li>YES<li>NO |
| STATTYPE_LOCKED         | varchar(5) | NO | 统计锁类型 |
| STALE_STATS             | varchar(3) | NO | 对象的统计信息是否过时 |
| SCOPE                   | varchar(7) | NO | 默认值为 NULL |

## 查询示例

系统租户查询本租户的索引 `tbl2_f_rl_idx1` 的优化器统计信息。

```shell
obclient [oceanbase]> SELECT * FROM oceanbase.DBA_IND_STATISTICS WHERE INDEX_NAME='tbl2_f_rl_idx1'\G
```

查询结果如下：

```shell
*************************** 1. row ***************************
                  OWNER: test
             INDEX_NAME: tbl2_f_rl_idx1
            TABLE_OWNER: test
             TABLE_NAME: tbl2_f_rl
         PARTITION_NAME: p1
     PARTITION_POSITION: 2
      SUBPARTITION_NAME: sp5
  SUBPARTITION_POSITION: 3
            OBJECT_TYPE: SUBPARTITION
                 BLEVEL: NULL
            LEAF_BLOCKS: NULL
          DISTINCT_KEYS: NULL
AVG_LEAF_BLOCKS_PER_KEY: NULL
AVG_DATA_BLOCKS_PER_KEY: NULL
      CLUSTERING_FACTOR: NULL
               NUM_ROWS: NULL
      AVG_CACHED_BLOCKS: NULL
    AVG_CACHE_HIT_RATIO: NULL
            SAMPLE_SIZE: NULL
          LAST_ANALYZED: NULL
           GLOBAL_STATS: NULL
             USER_STATS: NULL
        STATTYPE_LOCKED: NULL
            STALE_STATS: NULL
                  SCOPE: NULL
*************************** 2. row ***************************
                  OWNER: test
             INDEX_NAME: tbl2_f_rl_idx1
            TABLE_OWNER: test
             TABLE_NAME: tbl2_f_rl
         PARTITION_NAME: p1
     PARTITION_POSITION: 2
      SUBPARTITION_NAME: sp4
  SUBPARTITION_POSITION: 2
            OBJECT_TYPE: SUBPARTITION
                 BLEVEL: NULL
            LEAF_BLOCKS: NULL
          DISTINCT_KEYS: NULL
AVG_LEAF_BLOCKS_PER_KEY: NULL
AVG_DATA_BLOCKS_PER_KEY: NULL
      CLUSTERING_FACTOR: NULL
               NUM_ROWS: NULL
      AVG_CACHED_BLOCKS: NULL
    AVG_CACHE_HIT_RATIO: NULL
            SAMPLE_SIZE: NULL
          LAST_ANALYZED: NULL
           GLOBAL_STATS: NULL
             USER_STATS: NULL
        STATTYPE_LOCKED: NULL
            STALE_STATS: NULL
                  SCOPE: NULL
*************************** 3. row ***************************
                  OWNER: test
             INDEX_NAME: tbl2_f_rl_idx1
            TABLE_OWNER: test
             TABLE_NAME: tbl2_f_rl
         PARTITION_NAME: p1
     PARTITION_POSITION: 2
      SUBPARTITION_NAME: sp3
  SUBPARTITION_POSITION: 1
            OBJECT_TYPE: SUBPARTITION
                 BLEVEL: NULL
            LEAF_BLOCKS: NULL
          DISTINCT_KEYS: NULL
AVG_LEAF_BLOCKS_PER_KEY: NULL
AVG_DATA_BLOCKS_PER_KEY: NULL
      CLUSTERING_FACTOR: NULL
               NUM_ROWS: NULL
      AVG_CACHED_BLOCKS: NULL
    AVG_CACHE_HIT_RATIO: NULL
            SAMPLE_SIZE: NULL
          LAST_ANALYZED: NULL
           GLOBAL_STATS: NULL
             USER_STATS: NULL
        STATTYPE_LOCKED: NULL
            STALE_STATS: NULL
                  SCOPE: NULL
*************************** 4. row ***************************
                  OWNER: test
             INDEX_NAME: tbl2_f_rl_idx1
            TABLE_OWNER: test
             TABLE_NAME: tbl2_f_rl
         PARTITION_NAME: p0
     PARTITION_POSITION: 1
      SUBPARTITION_NAME: sp2
  SUBPARTITION_POSITION: 3
            OBJECT_TYPE: SUBPARTITION
                 BLEVEL: NULL
            LEAF_BLOCKS: NULL
          DISTINCT_KEYS: NULL
AVG_LEAF_BLOCKS_PER_KEY: NULL
AVG_DATA_BLOCKS_PER_KEY: NULL
      CLUSTERING_FACTOR: NULL
               NUM_ROWS: NULL
      AVG_CACHED_BLOCKS: NULL
    AVG_CACHE_HIT_RATIO: NULL
            SAMPLE_SIZE: NULL
          LAST_ANALYZED: NULL
           GLOBAL_STATS: NULL
             USER_STATS: NULL
        STATTYPE_LOCKED: NULL
            STALE_STATS: NULL
                  SCOPE: NULL
*************************** 5. row ***************************
                  OWNER: test
             INDEX_NAME: tbl2_f_rl_idx1
            TABLE_OWNER: test
             TABLE_NAME: tbl2_f_rl
         PARTITION_NAME: p0
     PARTITION_POSITION: 1
      SUBPARTITION_NAME: sp1
  SUBPARTITION_POSITION: 2
            OBJECT_TYPE: SUBPARTITION
                 BLEVEL: NULL
            LEAF_BLOCKS: NULL
          DISTINCT_KEYS: NULL
AVG_LEAF_BLOCKS_PER_KEY: NULL
AVG_DATA_BLOCKS_PER_KEY: NULL
      CLUSTERING_FACTOR: NULL
               NUM_ROWS: NULL
      AVG_CACHED_BLOCKS: NULL
    AVG_CACHE_HIT_RATIO: NULL
            SAMPLE_SIZE: NULL
          LAST_ANALYZED: NULL
           GLOBAL_STATS: NULL
             USER_STATS: NULL
        STATTYPE_LOCKED: NULL
            STALE_STATS: NULL
                  SCOPE: NULL
*************************** 6. row ***************************
                  OWNER: test
             INDEX_NAME: tbl2_f_rl_idx1
            TABLE_OWNER: test
             TABLE_NAME: tbl2_f_rl
         PARTITION_NAME: p0
     PARTITION_POSITION: 1
      SUBPARTITION_NAME: sp0
  SUBPARTITION_POSITION: 1
            OBJECT_TYPE: SUBPARTITION
                 BLEVEL: NULL
            LEAF_BLOCKS: NULL
          DISTINCT_KEYS: NULL
AVG_LEAF_BLOCKS_PER_KEY: NULL
AVG_DATA_BLOCKS_PER_KEY: NULL
      CLUSTERING_FACTOR: NULL
               NUM_ROWS: NULL
      AVG_CACHED_BLOCKS: NULL
    AVG_CACHE_HIT_RATIO: NULL
            SAMPLE_SIZE: NULL
          LAST_ANALYZED: NULL
           GLOBAL_STATS: NULL
             USER_STATS: NULL
        STATTYPE_LOCKED: NULL
            STALE_STATS: NULL
                  SCOPE: NULL
*************************** 7. row ***************************
                  OWNER: test
             INDEX_NAME: tbl2_f_rl_idx1
            TABLE_OWNER: test
             TABLE_NAME: tbl2_f_rl
         PARTITION_NAME: p1
     PARTITION_POSITION: 2
      SUBPARTITION_NAME: NULL
  SUBPARTITION_POSITION: NULL
            OBJECT_TYPE: PARTITION
                 BLEVEL: NULL
            LEAF_BLOCKS: NULL
          DISTINCT_KEYS: NULL
AVG_LEAF_BLOCKS_PER_KEY: NULL
AVG_DATA_BLOCKS_PER_KEY: NULL
      CLUSTERING_FACTOR: NULL
               NUM_ROWS: 0
      AVG_CACHED_BLOCKS: NULL
    AVG_CACHE_HIT_RATIO: NULL
            SAMPLE_SIZE: NULL
          LAST_ANALYZED: 2025-03-14 10:48:23.542494
           GLOBAL_STATS: NO
             USER_STATS: NO
        STATTYPE_LOCKED: NULL
            STALE_STATS: NO
                  SCOPE: NULL
*************************** 8. row ***************************
                  OWNER: test
             INDEX_NAME: tbl2_f_rl_idx1
            TABLE_OWNER: test
             TABLE_NAME: tbl2_f_rl
         PARTITION_NAME: p0
     PARTITION_POSITION: 1
      SUBPARTITION_NAME: NULL
  SUBPARTITION_POSITION: NULL
            OBJECT_TYPE: PARTITION
                 BLEVEL: NULL
            LEAF_BLOCKS: NULL
          DISTINCT_KEYS: NULL
AVG_LEAF_BLOCKS_PER_KEY: NULL
AVG_DATA_BLOCKS_PER_KEY: NULL
      CLUSTERING_FACTOR: NULL
               NUM_ROWS: 0
      AVG_CACHED_BLOCKS: NULL
    AVG_CACHE_HIT_RATIO: NULL
            SAMPLE_SIZE: NULL
          LAST_ANALYZED: 2025-03-14 10:48:23.542494
           GLOBAL_STATS: NO
             USER_STATS: NO
        STATTYPE_LOCKED: NULL
            STALE_STATS: NO
                  SCOPE: NULL
*************************** 9. row ***************************
                  OWNER: test
             INDEX_NAME: tbl2_f_rl_idx1
            TABLE_OWNER: test
             TABLE_NAME: tbl2_f_rl
         PARTITION_NAME: NULL
     PARTITION_POSITION: NULL
      SUBPARTITION_NAME: NULL
  SUBPARTITION_POSITION: NULL
            OBJECT_TYPE: INDEX
                 BLEVEL: NULL
            LEAF_BLOCKS: NULL
          DISTINCT_KEYS: NULL
AVG_LEAF_BLOCKS_PER_KEY: NULL
AVG_DATA_BLOCKS_PER_KEY: NULL
      CLUSTERING_FACTOR: NULL
               NUM_ROWS: 0
      AVG_CACHED_BLOCKS: NULL
    AVG_CACHE_HIT_RATIO: NULL
            SAMPLE_SIZE: NULL
          LAST_ANALYZED: 2025-03-14 10:48:23.542494
           GLOBAL_STATS: NO
             USER_STATS: NO
        STATTYPE_LOCKED: NULL
            STALE_STATS: NO
                  SCOPE: NULL
9 rows in set
```

## 相关视图或文档

* 查看表级的列统计信息：[DBA_TAB_STATISTICS](26700.o-dba_tab_statistics-of-sys-tenant.md)

* 查看 Global 级的列统计信息：[DBA_TAB_COL_STATISTICS](26300.o-dba_tab_col_statistics-of-sys-tenant.md)

* 查看 Partition 级的列统计信息：[DBA_PART_COL_STATISTICS](24500.o-dba_part_col_statistics-of-sys-tenant.md)

* 查看 Subpartiton 级的列统计信息：[DBA_SUBPART_COL_STATISTICS](25900.o-dba_subpart_col_statistics-of-sys-tenant.md)

* 查看表级的直方图统计信息：[DBA_TAB_HISTOGRAMS](26400.o-dba_tab_histograms-of-sys-tenant.md)

* 查看 Partition 级的直方图统计信息：[DBA_PART_HISTOGRAMS](24600.o-dba_part_histograms-of-sys-tenant.md)

* 查看 Subpartiton 级的直方图统计信息：[DBA_SUBPART_HISTOGRAMS](26000.o-dba_subpart_histograms-of-sys-tenant.md)

* 有关如何收集统计信息，参见以下文档：

  * [手动收集统计信息](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/200.statistics-collection-methods/300.collect-statistics-manually.md)

  * [自动收集统计信息](../../../1000.performance-tuning-guide/500.sql-optimization/400.sql-optimization/400.optimizer-statistics/200.statistics-collection-methods/400.collect-statistics-automatically.md)