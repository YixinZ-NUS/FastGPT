# 通过 obd 图形化界面部署 OceanBase 集群

本文以 x86 架构的 CentOS Linux 7.9 镜像作为环境介绍如何使用 obd 图形化界面部署 OceanBase 数据库。

## 名词介绍

* OceanBase 数据库

  一款完全自研的企业级原生分布式数据库，详细信息请参见 [OceanBase 数据库文档](https://www.oceanbase.com/docs/oceanbase-database-cn)。

* obd

  OceanBase Deployer，OceanBase 安装部署工具，简称为 obd。详细信息请参考 [OceanBase 安装部署工具文档](https://www.oceanbase.com/docs/obd-cn)。

* ODP

  OceanBase Database Proxy，OceanBase 数据库代理，是 OceanBase 数据库专用的代理服务器，简称为 ODP（又称为 OBProxy）。详细信息请参见 [OceanBase 数据库代理文档](https://www.oceanbase.com/docs/odp-doc-cn)。

* OBAgent

  OBAgent 是 OceanBase 数据库监控采集框架，支持推、拉两种数据采集模式，可以满足不同的应用场景。

* obconfigserver

  OceanBase Configserver，obconfigserver 可提供 OceanBase 的元数据注册，存储和查询服务。详细信息请参见 [ob-configserver](https://github.com/oceanbase/ob-configserver/tree/main)。

* Grafana

  Grafana 是一款开源的数据可视化工具，它可以将数据源中的各种指标数据进行可视化展示，以便更直观地了解系统运行状态和性能指标。详细信息可参见 [Grafana 官网](https://grafana.com/)。

* Prometheus

  Prometheus 是一个开源的服务监控系统和时序数据库，其提供了通用的数据模型以及快捷数据采集、存储和查询接口。详细信息可参见 [Prometheus 官网](https://prometheus.io/)。

* Alertmanager

  Alertmanager 是一个开源的告警管理器，用于处理来自 Prometheus 等监控系统的告警，并提供告警的去重、分组、路由和静默等功能。详细信息可参见 [Prometheus 官网](https://prometheus.io/)。

## 前提条件

在开始之前，请确保您已满足以下条件：

* 您的机器满足软硬件要求。详细信息，参考 [软硬件要求](../../200.local-deployment/100.requirements-for-software-and-hardware.md)。

* 生产环境下，您需要进行环境和配置检查，具体操作请参考 [部署前配置](../200.environment-and-configuration-checks/150.create-user-optional.md) 章节。

* 仅部署 OceanBase 数据库，至少需要 2vCPU、6 GB 内存、20 GB 磁盘的可用资源。需要注意，要求中的内存限制是指执行 `free -g` 命令后，输出中的 `available` 列对应的值。

* 部署 OceanBase 数据库及全部组件，至少需要 4vCPU、10 GB 内存、25 GB 磁盘的可用资源，推荐内存在 16 GB 以上。需要注意，要求中的内存限制是指执行 `free -g` 命令后，输出中的 `available` 列对应的值。

<main id="notice" type='explain'>
  <h4>说明</h4>
  <p>在 CPU 核心数较少的环境中，obd 默认设置的最低 CPU_Count 为 8。CPU 核心数配置过低会对 OceanBase 数据库的性能产生负面影响。</p>
</main>

## 准备软件

使用 obd 图形化部署 OceanBase 数据库时，可以选择在线部署或离线部署两种部署方式。

* 在线部署：obd 所在机器需保证能访问外部网络，无需提前配置部署所需安装包，部署过程中 obd 会从远程镜像仓库获取部署所需安装包。

* 离线部署：部署过程中无需访问外部网络，您需提前将部署所需安装包上传至 obd 本地镜像库。选择离线部署时推荐直接下载所需版本的 OceanBase All in One 安装包。

根据不同的部署方式有不同的准备软件方法，您可根据实际情况选择合适的方法准备软件。

### 在线部署

当您选择在线部署时，可以参考本节命令在中控机上安装 obd。

```shell
[admin@test001 ~]$ sudo yum install -y yum-utils
[admin@test001 ~]$ sudo yum-config-manager --add-repo https://mirrors.aliyun.com/oceanbase/OceanBase.repo
[admin@test001 ~]$ sudo yum install -y ob-deploy
[admin@test001 ~]$ source /etc/profile.d/obd.sh
```

### 离线部署

当您选择离线部署时，可参考本节命令下载并安装 OceanBase All in One。

您可从 [OceanBase 软件下载中心](https://www.oceanbase.com/softwarecenter) 下载最新的 OceanBase All in One，并将其复制到中控机中。执行如下命令解压并安装：

```shell
[admin@test001 ~]$ tar -xzf oceanbase-all-in-one-*.tar.gz
[admin@test001 ~]$ cd oceanbase-all-in-one/bin/
[admin@test001 bin]$ ./install.sh
[admin@test001 bin]$ source ~/.oceanbase-all-in-one/bin/env.sh
```

## 操作步骤

<main id="notice" type='explain'>
  <h4>说明</h4>
  <p>本文以 obd V3.6.0 为例提供操作指导。不同 obd 版本的操作界面可能不同，请以实际界面为准。更多 obd 相关内容请参见 <a href="https://www.oceanbase.com/docs/obd-cn">OceanBase 安装部署工具文档</a>。</p>
</main>

### 步骤一：启动图形化界面

1. 启动图形化界面

   命令行执行 `obd web` 命令启动图形化界面，单击输出的地址访问图形化界面。

   ```shell
   [admin@test001 ~]$ obd web
   start OBD WEB in 0.0.0.0:8680
   please open http://10.10.10.1:8680
   ```

   <main id="notice" type='explain'>
     <h4>说明</h4>
     <ul>
     <li>
     <p>图形化界面默认使用 8680 端口，您可使用 <code>obd web -p &lt;PORT&gt;</code> 命令指定端口。</p>
     </li>
     <li>
     <p>在阿里云或其他云环境下，可能出现程序无法获取公网 IP，从而输出内网地址的情况，此 IP 非公网地址，您需要使用正确的地址访问图形化界面。</p>
     </li>
     <li>
     <p><code>obd web</code> 命令绑定在 <code>0.0.0.0</code> 上，在多网卡部署的情况下，您可通过任意一个可访问的 IP 访问图形化界面。</p>
     </li>
     <li>
     <p>可使用 nohup 或 screen 命令设置在后台执行 <code>obd web</code> 命令。</p>
     </li>
     </ul>
   </main>

2. （可选）鼠标放置到图形化操作界面右上角的 **中文** 字符处可根据显示的语种单击切换中英文界面。

   <img width="677" height="419.5" src="https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/obd/V2.4.0/zh-CN/200.quick-start/300.deploy-ocp-by-ui-12.png" alt="语种切换">

3. 在图形化界面中单击 **开启体验之旅**，在显示的 **欢迎使用 OceanBase 部署向导** 界面选择 **OceanBase 及配套工具** 模块，单击 **安装** 后进入 OceanBase 数据库部署界面。

### 步骤二：部署配置

您可在 **部署配置** 界面配置集群名称，负载类型和部署组件，**部署配置** 界面内容如下。

1. 集群配置

   ![集群配置](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/obd/V3.6.0/deploy-by-gui/200.use-ui-deploy-oceanbase-01.png)

   |  模块   |  说明   |
   |---------|--------|
   | 部署配置  | 集群名称为 obd 专用部署产品的唯一名称，默认为 `myoceanbase`，可自定义，但不可和已有部署名重复。集群名需以英文字母开头、英文或数字结尾，可包含英文、数字和下划线，且长度在 2 ~ 32 个字符之间。您可通过 `obd cluster list` 命令查看 obd 中管理的集群。 |
   | 部署数据库 | 单击 **版本** 下的下拉框可自行选择 OceanBase 数据库的版本，单击对应组件后的 **了解更多** 可跳转查看对应组件的文档介绍。 |
   | 负载类型 | 单击 **类型** 下的下拉框可自行选择 OceanBase 集群的负载类型，不同类型负载均衡下有对应描述，方便了解各类型的适用场景。<main id="notice" type='explain'><h4>说明</h4><p>该模块仅在待部署的 OceanBase 数据库版本号不小于 V4.2.5 时展示。</p></main> |

2. 组件选择

   ![组件选择](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/obd/V3.6.0/deploy-by-gui/200.use-ui-deploy-oceanbase-02.png)

   默认仅勾选 OBProxy 组件，您可通过单击 **可选组件** 下对应组件前的勾选框设置是否部署对应组件。组件版本固定为最新版本，单击对应组件后的 **了解更多** 可跳转查看对应组件的文档介绍。

   <main id="notice" type='explain'>
     <h4>说明</h4>
     <p>Grafana 和 AlertManager 组件的部署依赖 OBAgent 和 Prometheus 组件，Prometheus 组件的部署依赖 OBAgent 组件。具体体现如，勾选 Grafana 或 AlertManager 组件时会自动勾选 OBAgent 和 Prometheus 组件，取消勾选 OBAgent 组件时会自动取消勾选 Grafana、AlertManager 和 Prometheus 组件。</p>
   </main>

配置完成之后单击 **下一步** 可进入到 **节点配置** 页面。

### 步骤三：节点配置

您可在 **节点配置** 界面配置数据库和组件节点，部署用户以及软件安装路径，**节点配置** 界面内容如下。

![节点配置](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/obd/V3.6.0/deploy-by-gui/200.use-ui-deploy-oceanbase-03.png)

<table>
  <thead>
    <tr>
      <th>模块</th>
      <th>参数</th>
      <th>说明</th>
    </tr>
  </thead>
  <tr>
    <td rowspan="3">数据库节点配置</td>
    <td>Zone 名称</td>
    <td>配置 OceanBase 数据库中的 Zone 名称，可自定义。Zone 名称需以英文字母开头，英文或数字结尾，可包含英文、数字和下划线，且长度在 2~32 个字符之间。部署多 Zone 的 OceanBase 集群必须有一个 Zone 与主 Zone 的 Region 相同。可单击 <b>+ 新增 Zone</b> 或对应 Zone 后的删除图标新增或删除 Zone。</td>
  </tr>
  <tr>
    <td>OBServer 节点</td>
    <td>配置 OceanBase 集群中的 OBServer 节点 IP，输入 IP 后单击键盘 Enter 可配置多个节点 IP。<main id="notice" type='notice'><h4>注意</h4><ul><li>禁止为不同的 Zone 输入相同的节点。</li><li><p>当 OBServer 节点配置为 <code>127.0.0.1</code> 时，此 OceanBase 集群不支持扩展为分布式集群和配置主备租户。</p></li></ul></main></td>
  </tr>
  <tr>
    <td>RootServer 节点</td>
    <td>可通过下拉框在 <b>OBServer 节点</b> 配置的 IP 中选择一个 IP 作为 OceanBase 集群的 RootServer 节点。对于多副本的 OceanBase 集群，其每个 Zone 都需指定一个 RootServer。</td>
  </tr>
  <tr>
    <td rowspan="6">组件节点配置</td>
    <td>OBProxy 节点</td>
    <td>支持配置多个节点，既可通过下拉框选择 OBServer 节点 IP，也可输入新的节点 IP，建议使用非 <code>127.0.0.1</code> IP 地址。输入 IP 后单击键盘 Enter 即可配置多个节点 IP。</td>
  </tr>
  <tr>
    <td>负载均衡管理</td>
    <td>单击展开按钮可设置负载均衡，用于业务访问 OceanBase 集群，建议部署多节点 OBProxy 时提供 VIP/DNS 地址，避免后期更改 OBProxy 访问地址。若不配置，系统默认选择 <b>OBProxy 节点</b> 中配置的第一个 IP 地址设置连接串。您可通过 <b>访问方式</b> 下的下拉框选择使用 VIP 访问或使用 DNS（域名）访问：<ul><li>选择使用 VIP 访问时，您需配置 VIP 的 <b>IP 地址</b> 和 <b>访问端口</b>。</li><li>选择使用 DNS 访问时，您需配置对应 <b>域名</b>。</li></ul><main id="notice" type='notice'><h4>注意</h4><p>obd 不提供负载均衡的部署，如需设置负载均衡，请提前部署并配置好对应负载均衡。</p></main></td>
  </tr>
  <tr>
    <td>Prometheus 节点</td>
    <td>支持配置多个节点，既可通过下拉框选择 OBServer 节点 IP，也可输入新的节点 IP，建议使用非 <code>127.0.0.1</code> IP 地址。输入 IP 后单击键盘 Enter 即可配置多个节点 IP。</td>
  </tr>
  <tr>
    <td>Grafana 节点</td>
    <td>支持配置多个节点，既可通过下拉框选择 OBServer 节点 IP，也可输入新的节点 IP，建议使用非 <code>127.0.0.1</code> IP 地址。输入 IP 后单击键盘 Enter 即可配置多个节点 IP。</td>
  </tr>
  <tr>
    <td>AlertManager 节点</td>
    <td>仅支持配置单个节点，建议使用非 <code>127.0.0.1</code> IP 地址。</td>
  </tr>
  <tr>
    <td>obconfigserver 节点</td>
    <td>支持配置多个节点，既可通过下拉框选择 OBServer 节点 IP，也可输入新的节点 IP，建议使用非 <code>127.0.0.1</code> IP 地址。输入 IP 后单击键盘 Enter 即可配置多个节点 IP。<main id="notice" type='explain'><h4>说明</h4><p>为 obconfigserver 配置多个节点时，您需提前配置负载均衡，并在 <b>集群配置</b> 页面的 <b>组件配置</b> 模块打开 <b>更多配置</b> 按钮，配置 <code>vip_address</code> 和 <code>vip_port</code>。</p></main></td>
  </tr>
  <tr>
    <td rowspan="3">部署连接配置</td>
    <td>用户名</td>
    <td>配置部署 OceanBase 集群的用户名，默认为当前进程的启动用户。支持自定义选择用户名，用户名仅支持英文、数字和点且长度不超过 20 个字符，需确保选择的用户名在所有主机上均存在。</td>
  </tr>
  <tr>
    <td>密码</td>
    <td><b>用户名</b> 对应用户的登录密码，如各节点间已配置免密可免去输入密码。</td>
  </tr>
  <tr>
    <td>SSH 端口</td>
    <td>默认为 22 端口，支持自定义 SSH 端口。</td>
  </tr>
  <tr>
    <td>软件路径配置</td>
    <td>软件路径</td>
    <td>默认为部署用户的家目录，可自定义修改，需为以 <code>/</code> 开头的绝对路径，只能包含字母、数字和特殊字符（<code>-_:@/.</code>）。配置后会在对应目录下创建 <b>集群名称</b> 同名文件夹。</td>
  </tr>
</table>

配置完成之后单击 **下一步** 可进入到 **集群配置** 页面。

### 步骤四：集群配置

**集群配置** 界面可对集群进行配置，包括系统租户的管理员用户（root@sys）密码、数据和日志目录、数据库及各组件的端口和参数配置等，本节将分别进行介绍。

1. 集群配置

   ![集群配置](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/obd/V3.6.0/deploy-by-gui/200.use-ui-deploy-oceanbase-05.png)

   | 参数  | 说明 |
   |-------|-----|
   | 模式配置 | 可选择 **最大占用** 或 **最小可用**，**最大占用** 模式将最大化利用环境资源，保证集群的性能与稳定性，推荐使用；**最小可用** 模式配置满足集群正常运行的资源参数。两种模式的详细介绍可参考 [模式配置规则](https://www.oceanbase.com/docs/common-obd-cn-1000000003892315) 一文。 |
   | root@sys 密码  | 可单击 **随机生成**，由 obd 自动生成随机字符串，也可自定义设置。自定义设置时，密码复杂度需满足如下要求：<ul><li>长度为 8~32 位字符</li><li>包含以下四种类型字符中至少三种：数字（0\~9）、大写字母（A\~Z）、小写字母（a\~z）和特殊字符（<code>~!@#%^&*_-+=\|(){}[]:;,.?/</code>）</li></ul>配置后可单击 **复制密码**，复制后保存已配置的密码。 |
   | 数据目录 | 默认在 `/data/1` 下，支持自定义设置，需为以 <code>/</code> 开头的绝对路径，只能包含字母、数字和特殊字符（<code>-_:@/.</code>），且需确保设置的目录为空。  |
   | 日志目录 |  默认在 `/data/log1` 下，支持自定义设置，需为以 <code>/</code> 开头的绝对路径，只能包含字母、数字和特殊字符（<code>-_:@/.</code>），且需确保设置的目录为空。  |
   | SQL 端口 | SQL 服务协议端口号，默认为 `2881`，可自定义设置（仅支持 1025~65535 范围），需确保设置的端口未被占用。 |
   | RPC 端口 | 远程访问的协议端口号，默认为 `2882`，可自定义设置（仅支持 1025~65535 范围），需确保设置的端口未被占用。 |
   | OBShell 端口 | OceanBase 数据库运维端口，默认为 `2886`，可自定义设置（仅支持 1025~65535 范围），需确保设置的端口未被占用。  |
   | 更多配置 | 可单击 **更多配置** 前的展开按钮查看并配置对应的集群参数，可使用自动分配的值进行配置，也可自定义各个参数。<main id="notice" type='explain'><h4>说明</h4><p>可通过 <b>更多配置</b> 中的 <code>enable_auto_start</code> 参数控制是否开启 observer 进程开机自启动功能，启用该功能需确保部署用户拥有 sudo 权限，且部署环境非容器环境。</p></main> |

2. 组件配置

   ![组件配置](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/obd/V3.6.0/deploy-by-gui/200.use-ui-deploy-oceanbase-04.png)

   | 参数   | 说明   |
   |--------|--------|
   | Grafana 密码 | Grafana 管理员账号的登录密码，可单击 **随机生成**，由 obd 自动生成随机字符串，也可自定义设置。自定义设置时，密码复杂度需满足如下要求：<ul><li>长度为 8~32 个字符</li><li>至少包含以下四种类型字符各 2 个：数字（0\~9）、大写字母（A\~Z）、小写字母（a\~z）和特殊字符（<code>~!@#%^&*_-+=\|(){}[]:;,.?/`$"<>\\</code>）</li></ul>配置后可单击 **复制密码**，复制后保存已配置的密码。 |
   | Prometheus 密码 | Prometheus 服务的登录密码，可单击 **随机生成**，由 obd 自动生成随机字符串，也可自定义设置。自定义设置时，密码复杂度需满足如下要求：<ul><li>长度为 8~32 个字符</li><li>至少包含以下四种类型字符各 2 个：数字（0\~9）、大写字母（A\~Z）、小写字母（a\~z）和特殊字符（<code>~!@#%^&*_-+=\|(){}[]:;,.?/`$"<>\\</code>）</li></ul>配置后可单击 **复制密码**，复制后保存已配置的密码。 |
   | AlertManager 密码 | Alertmanager 服务的登录密码，可单击 **随机生成**，由 obd 自动生成随机字符串，也可自定义设置。自定义设置时，密码复杂度需满足如下要求：<ul><li>长度为 8~32 个字符</li><li>至少包含以下四种类型字符各 2 个：数字（0\~9）、大写字母（A\~Z）、小写字母（a\~z）和特殊字符（<code>~!@#%^&*_-+=\|(){}[]:;,.?/`$"<>\\</code>）</li></ul>配置后可单击 **复制密码**，复制后保存已配置的密码。 |
   | OBProxy SQL 端口 | ODP 监听端口，默认为 `2883`，可自定义设置（仅支持 1025~65535 范围），需确保设置的端口未被占用。 |
   | OBProxy Exporter 端口 | OBProxy 的 Exporter 端口，用于 Prometheus 拉取 OBProxy 监控数据。默认为 `2884`，可自定义设置（仅支持 1025~65535 范围），需确保设置的端口未被占用。 |
   | OBProxy RPC 端口  | 默认为 `2885`，可自定义设置（仅支持 1025~65535 范围），需确保设置的端口未被占用。 |
   | OBAgent 监控服务端口 | 默认为 `8088`，可自定义设置（仅支持 1025~65535 范围），需确保设置的端口未被占用。 |
   | OBAgent 管理服务端口 | 默认为 `8089`，可自定义设置（仅支持 1025~65535 范围），需确保设置的端口未被占用。 |
   | obconfigserver 服务端口 | obconfigserver 服务监听的端口，默认为 `8080`，可自定义设置（仅支持 1025~65535 范围），需确保设置的端口未被占用。 |
   | Prometheus 服务端口 | Prometheus 服务监听的端口，默认为 `9090`，可自定义设置（仅支持 1025~65535 范围），需确保设置的端口未被占用。 |
   | Grafana 服务端口 | 访问 Grafana 页面时使用的 HTTP 端口，默认为 `3000`，可自定义设置（仅支持 1025~65535 范围），需确保设置的端口未被占用。 |
   | AlertManager 服务端口 | 访问 Alertmanager 页面时使用的 HTTP 端口，默认为 `9093`，可自定义设置（仅支持 1025~65535 范围），需确保设置的端口未被占用。 |
   | 更多配置 | 可单击 **更多配置** 前的展开按钮查看并配置对应的组件参数，可使用自动分配的值进行配置，也可自定义各个参数。<main id="notice" type='explain'><h4>说明</h4><p>若在 <b>节点配置</b> 中的 <b>obconfigserver 节点</b> 处配置了多个节点，您需在 <b>更多配置</b> 中配置 <code>vip_address</code> 和 <code>vip_port</code>，否则预检查时会报错。</p></main> |

全部配置完成后，单击 **下一步** 即可进入到 **预检查** 页面。

### 步骤五：预检查

在 **预检查** 页面查看所有配置信息，若发现问题可单击 **上一步** 进行修改；确认无误后，单击 **预检查** 进行检查。

若预检查报错，您可根据页面建议选择 **自动修复**（针对可自动修复的检查项）或者单击 **了解更多方案** 跳转至错误码文档，参考文档自行修改。所有报错修改后，可单击 **重新检查** 再次进行预检查。

![预检查](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/obd/V3.3.0/zh-CN/200.ui-operations/200.use-ui-deploy-oceanbase-06.png)

预检查通过后，单击 **部署** 即可开始 OceanBase 数据库的部署。

### 步骤六：部署

![部署](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/obd/V3.6.0/deploy-by-gui/200.use-ui-deploy-oceanbase-06.png)

其中：

* 部署成功后可复制显示的连接串连接到对应组件。在黑屏界面执行 OceanBase 数据库组件后的连接串会以 root@sys 用户连接到 OceanBase 集群，执行 OBProxy 组件后的连接串会以 root@proxysys 用户连接到 ODP。

* 单击输出的 Prometheus、Grafana、AlertManager 和 OB-Dashboard 组件对应的连接串可对应跳转到 Prometheus、Grafana、Alertmanager 和 OB-Dashboard 的登录界面，通过部署界面展示的账号密码即可登录。

  <main id="notice" type='explain'>
    <h4>说明</h4>
    <p>在阿里云或其他云环境下，可能出现程序无法获取公网 IP，从而输出内网地址的情况，此 IP 非公网地址，您需要使用正确的地址访问图形化界面。</p>
  </main>

* 在 **部署报告** 里单击对应组件前的展开图标即可查看部署的日志信息。单击对应组件列表里的 **查看详情** 后，单击对应命令后的复制图标即可复制命令，复制后可在中控机中执行查看对应组件的日志位置。

* 单击 **复制信息**，在复制保存 OceanBase 集群的所有账密信息后，您可选择单击 **退出** 退出部署程序，也可选择单击 **创建业务租户**，通过图形化页面创建业务租户。

<main id="notice" type='explain'>
  <h4>说明</h4>
  <ul>
  <li><p> 如需部署多个集群，您需在图形化界面单击 <b>退出</b> 结束当前 obd 进程后才可再次执行 <code>obd web</code> 命令进行下一集群的部署。</p></li>
  <li><p>建议为 OceanBase 集群创建业务租户，sys 租户仅用于管理集群，如将其作为业务租户使用，可能会引起系统运行异常。</p></li>
  </ul>
</main>

### （可选）步骤七：创建业务租户

在 OceanBase 集群部署成功后，单击部署成功页面右下角的 **创建业务租户** 按钮，进入创建业务租户流程，您可参照下表介绍配置租户相关信息

| 参数  | 说明  |
|-------|------|
| 租户名称  | 设置待新建租户的租户名。租户名需满足如下要求：<ul><li>长度为 2 ~ 32 个字符。</li><li>可包含大小写英文字母、数字和下划线，但需以英文字母开头，并以英文或数字结尾。</li></ul>  |
| 租户模式 | 可通过下拉框选择 MySQL 模式或 Oracle 模式。<main id="notice"><h4>功能适用性</h4><p>OceanBase 数据库社区版不支持创建 Oracle 模式租户。</p></main>  |
| 租户 root 密码 | 可单击 **随机生成**，由 obd 自动生成随机字符串，也可自定义设置。自定义设置时，密码复杂度需满足如下要求：<ul><li>长度为 8~32 位字符。</li><li>包含以下四种类型字符中至少三种：数字（0\~9）、大写字母（A\~Z）、小写字母（a\~z）和特殊字符（<code>~!@#%^&*_-+=\|(){}[]:;,.?/</code>）。</li></ul>  |
| 模式配置 | 可选择 **最大占用**、**最小可用** 或 **自定义** 模式。<ul><li><b>最大占用</b>：默认占用集群全部剩余资源创建业务租户，且不可修改。</li><li><b>最小可用</b>：默认按照租户所需的最小资源创建业务租户，且不可修改。</li><li><b>自定义</b>：手动设置 CPU、内存、日志盘大小。</li></ul>  |
| 业务负载类型 | 可通过下拉框选择租户的业务负载类型，选择不同的负载类型时，下拉框下会展示不同负载类型的适用场景说明。<main id="notice" type='notice'><h4>注意</h4><p>该参数仅在部署的 OceanBase 数据库版本号不小于 V4.2.5 时展示。</p></main>  |
| 字符集 | 默认为 `utf8mb4`，可通过下拉框选择其他字符集。 |
| 字符序 | 默认为 `utf8mb4_general_ci`，可通过下拉框选择其他字符序。 |
| 表名大小写敏感 | 可通过下拉框进行设置，支持设置为 `0` `1` 或 `2`。<ul><li><code>0</code>：表名将按照指定的大小写形式进行存储，并以区分大小写形式进行比较。</li><li><code>1</code>：表名将按照小写形式进行存储，并以不区分大小写形式进行比较。</li><li><code>2</code>：表名将按照指定的大小写形式进行存储，并以不区分大小写形式进行比较。</li></ul>  |
| 时区  | 默认为 (GMT+08:00)中国标准时间，可通过下拉框选择其他时区。  |
| IP 地址白名单 | 可选择自定义设置可访问的 IP，或设置为所有 IP 都可访问。选择自定义设置时，可在 **自定义 IP** 下的输入框中指定允许登陆的客户端 IP，输入 IP 后单击键盘 Enter 键或输入英文逗号（`,`）可配置多个节点 IP。光标悬停在 **查看配置说明** 上可查看配置 IP 的说明。<main id="notice" type='explain'><h4>说明</h4><p>自定义时，设置为 <code>%</code> 表示所有客户端都可以连接，存在访问安全风险，请谨慎操作。</p></main>  |

![配置](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/obd/V3.6.0/deploy-by-gui/200.use-ui-deploy-oceanbase-07.png)

配置完成后单击 **下一步:创建业务租户**，系统将创建对应租户。创建完成后页面会展示业务租户信息，包含租户名、root 用户密码、连接字符串等信息。单击左下角 **退出** 按钮，即可退出创建租户流程。之后您可选择单击部署结果页面的 **退出** 按钮，退出部署程序；也可选择继续单击 **创建业务租户** 继续创建下一个业务租户。

![创建成功](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/obd/V3.6.0/deploy-by-gui/200.use-ui-deploy-oceanbase-10.png)

## 相关操作

### 管理部署后的集群

您可执行如下命令对 obd 部署的集群进行管理。更多操作详见 [集群命令组](https://www.oceanbase.com/docs/common-obd-cn-1000000003892230)。

```shell
# 查看集群列表
[admin@test001 ~]$ obd cluster list

# 查看集群状态，以部署名为 myoceanbase 为例
[admin@test001 ~]$ obd cluster display myoceanbase

# 停止运行中的集群，以部署名为 myoceanbase 为例
[admin@test001 ~]$ obd cluster stop myoceanbase

# 销毁已部署的集群，以部署名为 myoceanbase 为例
[admin@test001 ~]$ obd cluster destroy myoceanbase
```

### 部署特定版本组件

使用 OceanBase All in One 部署时，OceanBase All in One 的包是基于 OceanBase 数据库版本进行迭代，若包中有其他组件存在更新版本，您可从 [OceanBase 软件下载中心](https://www.oceanbase.com/softwarecenter) 下载最新版本的组件，参考如下步骤将其上传至本地镜像库，obd 部署时会自动获取本地镜像库中的最新版本。

1. 进到组件安装包所在目录下，将安装包添加至本地镜像库

   ```shell
   [admin@test001 rpm]$ obd mirror clone *.rpm
   ```

2. 查看本地镜像库中安装包列表

   ```shell
   [admin@test001 rpm]$ obd mirror list local
   ```
